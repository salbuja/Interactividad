var gfe=Object.defineProperty,eV=Object.getOwnPropertySymbols,yfe=Object.prototype.hasOwnProperty,_fe=Object.prototype.propertyIsEnumerable,tV=(lr,Fi,Yi)=>Fi in lr?gfe(lr,Fi,{enumerable:!0,configurable:!0,writable:!0,value:Yi}):lr[Fi]=Yi,nV=(lr,Fi)=>{for(var Yi in Fi||(Fi={}))yfe.call(Fi,Yi)&&tV(lr,Yi,Fi[Yi]);if(eV)for(var Yi of eV(Fi))_fe.call(Fi,Yi)&&tV(lr,Yi,Fi[Yi]);return lr};(self.webpackChunkDemoInteractividad=self.webpackChunkDemoInteractividad||[]).push([[179],{117:(lr,Fi,Yi)=>{"use strict";function Rt(n){return"function"==typeof n}function hi(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const pc=hi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function zd(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class bt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Rt(i))try{i()}catch(s){e=s instanceof pc?s.errors:[s]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const s of r)try{Mp(s)}catch(o){e=null!=e?e:[],o instanceof pc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new pc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Mp(e);else{if(e instanceof bt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(t=this._teardowns)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&zd(t,e)}remove(e){const{_teardowns:t}=this;t&&zd(t,e),e instanceof bt&&e._removeParent(this)}}bt.EMPTY=(()=>{const n=new bt;return n.closed=!0,n})();const Ud=bt.EMPTY;function wp(n){return n instanceof bt||n&&"closed"in n&&Rt(n.remove)&&Rt(n.add)&&Rt(n.unsubscribe)}function Mp(n){Rt(n)?n():n.unsubscribe()}const cr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Lr={setTimeout(...n){const{delegate:e}=Lr;return((null==e?void 0:e.setTimeout)||setTimeout)(...n)},clearTimeout(n){const{delegate:e}=Lr;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function mc(n){Lr.setTimeout(()=>{const{onUnhandledError:e}=cr;if(!e)throw n;e(n)})}function yo(){}const sa=ur("C",void 0,void 0);function ur(n,e,t){return{kind:n,value:e,error:t}}let Ns=null;function gc(n){if(cr.useDeprecatedSynchronousErrorHandling){const e=!Ns;if(e&&(Ns={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Ns;if(Ns=null,t)throw i}}else n()}class rl extends bt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wp(e)&&e.add(this)):this.destination=Sp}static create(e,t,i){return new oa(e,t,i)}next(e){this.isStopped?aa(function Cp(n){return ur("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?aa(function os(n){return ur("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?aa(sa,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class oa extends rl{constructor(e,t,i){let r;if(super(),Rt(e))r=e;else if(e){let s;({next:r,error:t,complete:i}=e),this&&cr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe()):s=e,r=null==r?void 0:r.bind(s),t=null==t?void 0:t.bind(s),i=null==i?void 0:i.bind(s)}this.destination={next:r?yc(r):yo,error:yc(null!=t?t:sl),complete:i?yc(i):yo}}}function yc(n,e){return(...t)=>{try{n(...t)}catch(i){cr.useDeprecatedSynchronousErrorHandling?function Xi(n){cr.useDeprecatedSynchronousErrorHandling&&Ns&&(Ns.errorThrown=!0,Ns.error=n)}(i):mc(i)}}}function sl(n){throw n}function aa(n,e){const{onStoppedNotification:t}=cr;t&&Lr.setTimeout(()=>t(n,e))}const Sp={closed:!0,next:yo,error:sl,complete:yo},as="function"==typeof Symbol&&Symbol.observable||"@@observable";function gr(n){return n}let zt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function _v(n){return n&&n instanceof rl||function yv(n){return n&&Rt(n.next)&&Rt(n.error)&&Rt(n.complete)}(n)&&wp(n)}(t)?t:new oa(t,i,r);return gc(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=ll(i))((r,s)=>{const o=new oa({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[as](){return this}pipe(...t){return function al(n){return 0===n.length?gr:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=ll(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function ll(n){var e;return null!==(e=null!=n?n:cr.Promise)&&void 0!==e?e:Promise}const Ep=hi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let it=(()=>{class n extends zt{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Gd(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Ep}next(t){gc(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const r of i)r.next(t)}})}error(t){gc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){gc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Ud:(s.push(t),new bt(()=>zd(s,t)))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new zt;return t.source=this,t}}return n.create=(e,t)=>new Gd(e,t),n})();class Gd extends it{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Ud}}function Dp(n){return Rt(null==n?void 0:n.lift)}function xn(n){return e=>{if(Dp(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}class rn extends rl{constructor(e,t,i,r,s){super(e),this.onFinalize=s,this._next=t?function(o){try{t(o)}catch(a){e.error(a)}}:super._next,this._error=r?function(o){try{r(o)}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(o){e.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}function st(n,e){return xn((t,i)=>{let r=0;t.subscribe(new rn(i,s=>{i.next(n.call(e,s,r++))}))})}function Br(n){return this instanceof Br?(this.v=n,this):new Br(n)}function dr(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof Br?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(i[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function bv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function ua(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const bc=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ul(n){return Rt(null==n?void 0:n.then)}function wc(n){return Rt(n[as])}function Tp(n){return Symbol.asyncIterator&&Rt(null==n?void 0:n[Symbol.asyncIterator])}function Ip(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Rp=function Ev(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Pp(n){return Rt(null==n?void 0:n[Rp])}function dl(n){return dr(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Br(t.read());if(r)return yield Br(void 0);yield yield Br(i)}}finally{t.releaseLock()}})}function Op(n){return Rt(null==n?void 0:n.getReader)}function Zi(n){if(n instanceof zt)return n;if(null!=n){if(wc(n))return function Fp(n){return new zt(e=>{const t=n[as]();if(Rt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(bc(n))return function kp(n){return new zt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ul(n))return function jd(n){return new zt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,mc)})}(n);if(Tp(n))return Lp(n);if(Pp(n))return function Dv(n){return new zt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Op(n))return function Av(n){return Lp(dl(n))}(n)}throw Ip(n)}function Lp(n){return new zt(e=>{(function Np(n,e){var t,i,r,s;return function _c(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=bv(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ls(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Ln(n,e,t=1/0){return Rt(e)?Ln((i,r)=>st((s,o)=>e(i,s,r,o))(Zi(n(i,r))),t):("number"==typeof e&&(t=e),xn((i,r)=>function Tv(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<i?p(g):l.push(g),p=g=>{s&&e.next(g),c++;let _=!1;Zi(t(g,u++)).subscribe(new rn(e,y=>{null==r||r(y),s?f(y):e.next(y)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<i;){const y=l.shift();o?ls(e,o,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return n.subscribe(new rn(e,f,()=>{d=!0,h()})),()=>{null==a||a()}}(i,r,n,t)))}function Bs(n=1/0){return Ln(gr,n)}const Vr=new zt(n=>n.complete());function Mc(n){return n&&Rt(n.schedule)}function Wd(n){return n[n.length-1]}function hl(n){return Mc(Wd(n))?n.pop():void 0}function qd(n,e=0){return xn((t,i)=>{t.subscribe(new rn(i,r=>ls(i,n,()=>i.next(r),e),()=>ls(i,n,()=>i.complete(),e),r=>ls(i,n,()=>i.error(r),e)))})}function Yd(n,e=0){return xn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function ha(n,e){if(!n)throw new Error("Iterable cannot be null");return new zt(t=>{ls(t,e,()=>{const i=n[Symbol.asyncIterator]();ls(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Nn(n,e){return e?function Qd(n,e){if(null!=n){if(wc(n))return function Hp(n,e){return Zi(n).pipe(Yd(e),qd(e))}(n,e);if(bc(n))return function _o(n,e){return new zt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(ul(n))return function Xd(n,e){return Zi(n).pipe(Yd(e),qd(e))}(n,e);if(Tp(n))return ha(n,e);if(Pp(n))return function fl(n,e){return new zt(t=>{let i;return ls(t,e,()=>{i=n[Rp](),ls(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Rt(null==i?void 0:i.return)&&i.return()})}(n,e);if(Op(n))return function Cc(n,e){return ha(dl(n),e)}(n,e)}throw Ip(n)}(n,e):Zi(n)}function yr(...n){const e=hl(n),t=function Vp(n,e){return"number"==typeof Wd(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Zi(i[0]):Bs(t)(Nn(i,e)):Vr}function Gn(n){return n<=0?()=>Vr:xn((e,t)=>{let i=0;e.subscribe(new rn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Vs(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(Gn(1)).subscribe(()=>n())}function Ut(n){for(let e in n)if(n[e]===Ut)return e;throw Error("Could not find renamed property on target object.")}function _r(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Wt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Wt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function hr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const cs=Ut({__forward_ref__:Ut});function Qt(n){return n.__forward_ref__=Qt,n.toString=function(){return Wt(this())},n}function at(n){return pl(n)?n():n}function pl(n){return"function"==typeof n&&n.hasOwnProperty(cs)&&n.__forward_ref__===Qt}class At extends Error{constructor(e,t){super(function ml(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function tt(n){return"string"==typeof n?n:null==n?"":String(n)}function ti(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():tt(n)}function Sc(n,e){const t=e?` in ${e}`:"";throw new At(-201,`No provider for ${ti(n)} found${t}`)}function Jt(n,e){null==n&&function wt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function he(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ye(n){return{providers:n.providers||[],imports:n.imports||[]}}function Iv(n){return YS(n,Gp)||YS(n,QS)}function YS(n,e){return n.hasOwnProperty(e)?n[e]:null}function XS(n){return n&&(n.hasOwnProperty(Rv)||n.hasOwnProperty(sV))?n[Rv]:null}const Gp=Ut({\u0275prov:Ut}),Rv=Ut({\u0275inj:Ut}),QS=Ut({ngInjectableDef:Ut}),sV=Ut({ngInjectorDef:Ut});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Pv;function pa(n){const e=Pv;return Pv=n,e}function ZS(n,e,t){const i=Iv(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ft.Optional?null:void 0!==e?e:void Sc(Wt(n),"Injector")}function ma(n){return{toString:n}.toString()}var hs=(()=>((hs=hs||{})[hs.OnPush=0]="OnPush",hs[hs.Default=1]="Default",hs))(),fs=(()=>{return(n=fs||(fs={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",fs;var n})();const aV="undefined"!=typeof globalThis&&globalThis,lV="undefined"!=typeof window&&window,cV="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,on=aV||"undefined"!=typeof global&&global||lV||cV,Ec={},un=[],jp=Ut({\u0275cmp:Ut}),Ov=Ut({\u0275dir:Ut}),Fv=Ut({\u0275pipe:Ut}),KS=Ut({\u0275mod:Ut}),vo=Ut({\u0275fac:Ut}),Jd=Ut({__NG_ELEMENT_ID__:Ut});let uV=0;function vt(n){return ma(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===hs.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||un,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||fs.Emulated,id:"c",styles:n.styles||un,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=uV++,i.inputs=nE(n.inputs,t),i.outputs=nE(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(JS):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(eE):null,i})}function JS(n){return Ni(n)||function ga(n){return n[Ov]||null}(n)}function eE(n){return function gl(n){return n[Fv]||null}(n)}const tE={};function Ze(n){return ma(()=>{const e={type:n.type,bootstrap:n.bootstrap||un,declarations:n.declarations||un,imports:n.imports||un,exports:n.exports||un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(tE[n.id]=n.type),e})}function nE(n,e){if(null==n)return Ec;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const W=vt;function Ji(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ni(n){return n[jp]||null}function zr(n,e){const t=n[KS]||null;if(!t&&!0===e)throw new Error(`Type ${Wt(n)} does not have '\u0275mod' property.`);return t}function Hs(n){return Array.isArray(n)&&"object"==typeof n[1]}function ms(n){return Array.isArray(n)&&!0===n[1]}function Nv(n){return 0!=(8&n.flags)}function Yp(n){return 2==(2&n.flags)}function Xp(n){return 1==(1&n.flags)}function gs(n){return null!==n.template}function gV(n){return 0!=(512&n[2])}function xl(n,e){return n.hasOwnProperty(vo)?n[vo]:null}class vV{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function wn(){return rE}function rE(n){return n.type.prototype.ngOnChanges&&(n.setInput=bV),xV}function xV(){const n=oE(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Ec)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function bV(n,e,t,i){const r=oE(n)||function wV(n,e){return n[sE]=e}(n,{previous:Ec,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new vV(l&&l.currentValue,e,o===Ec),n[i]=e}wn.ngInherit=!0;const sE="__ngSimpleChanges__";function oE(n){return n[sE]||null}let Hv;function An(n){return!!n.listen}const cE={createRenderer:(n,e)=>function zv(){return void 0!==Hv?Hv:"undefined"!=typeof document?document:void 0}()};function jn(n){for(;Array.isArray(n);)n=n[0];return n}function Qp(n,e){return jn(e[n])}function jr(n,e){return jn(e[n.index])}function Uv(n,e){return n.data[e]}function xr(n,e){const t=e[n];return Hs(t)?t:t[0]}function uE(n){return 4==(4&n[2])}function Gv(n){return 128==(128&n[2])}function ya(n,e){return null==e?null:n[e]}function dE(n){n[18]=0}function jv(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const rt={lFrame:vE(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function hE(){return rt.bindingsEnabled}function oe(){return rt.lFrame.lView}function qt(){return rt.lFrame.tView}function bi(n){return rt.lFrame.contextLView=n,n[8]}function ii(){let n=fE();for(;null!==n&&64===n.type;)n=n.parent;return n}function fE(){return rt.lFrame.currentTNode}function zs(n,e){const t=rt.lFrame;t.currentTNode=n,t.isParent=e}function Wv(){return rt.lFrame.isParent}function $v(){rt.lFrame.isParent=!1}function Zp(){return rt.isInCheckNoChangesMode}function Kp(n){rt.isInCheckNoChangesMode=n}function er(){const n=rt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Pc(){return rt.lFrame.bindingIndex++}function LV(n,e){const t=rt.lFrame;t.bindingIndex=t.bindingRootIndex=n,qv(e)}function qv(n){rt.lFrame.currentDirectiveIndex=n}function gE(){return rt.lFrame.currentQueryIndex}function Xv(n){rt.lFrame.currentQueryIndex=n}function BV(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function yE(n,e,t){if(t&ft.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&ft.Host||(r=BV(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=rt.lFrame=_E();return i.currentTNode=e,i.lView=n,!0}function Jp(n){const e=_E(),t=n[1];rt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function _E(){const n=rt.lFrame,e=null===n?null:n.child;return null===e?vE(n):e}function vE(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function xE(){const n=rt.lFrame;return rt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const bE=xE;function em(){const n=xE();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function tr(){return rt.lFrame.selectedIndex}function _a(n){rt.lFrame.selectedIndex=n}function Tn(){const n=rt.lFrame;return Uv(n.tView,n.selectedIndex)}function tm(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function nm(n,e,t){wE(n,e,3,t)}function im(n,e,t,i){(3&n[2])===t&&wE(n,e,t,i)}function Zv(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function wE(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(WV(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function WV(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class rh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function rm(n,e,t){const i=An(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];Jv(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function ME(n){return 3===n||4===n||6===n}function Jv(n){return 64===n.charCodeAt(0)}function sm(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||CE(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function CE(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function SE(n){return-1!==n}function Oc(n){return 32767&n}function Fc(n,e){let t=function QV(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let e0=!0;function om(n){const e=e0;return e0=n,e}let ZV=0;function oh(n,e){const t=n0(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,t0(i.data,n),t0(e,null),t0(i.blueprint,null));const r=am(n,e),s=n.injectorIndex;if(SE(r)){const o=Oc(r),a=Fc(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function t0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function n0(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function am(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function lm(n,e,t){!function KV(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Jd)&&(i=t[Jd]),null==i&&(i=t[Jd]=ZV++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function AE(n,e,t){if(t&ft.Optional)return n;Sc(e,"NodeInjector")}function TE(n,e,t,i){if(t&ft.Optional&&void 0===i&&(i=null),0==(t&(ft.Self|ft.Host))){const r=n[9],s=pa(void 0);try{return r?r.get(e,i,t&ft.Optional):ZS(e,i,t&ft.Optional)}finally{pa(s)}}return AE(i,e,t)}function IE(n,e,t,i=ft.Default,r){if(null!==n){const s=function nH(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Jd)?n[Jd]:void 0;return"number"==typeof e?e>=0?255&e:eH:e}(t);if("function"==typeof s){if(!yE(e,n,i))return i&ft.Host?AE(r,t,i):TE(e,t,i,r);try{const o=s(i);if(null!=o||i&ft.Optional)return o;Sc(t)}finally{bE()}}else if("number"==typeof s){let o=null,a=n0(n,e),l=-1,c=i&ft.Host?e[16][6]:null;for((-1===a||i&ft.SkipSelf)&&(l=-1===a?am(n,e):e[a+8],-1!==l&&OE(i,!1)?(o=e[1],a=Oc(l),e=Fc(l,e)):a=-1);-1!==a;){const u=e[1];if(PE(s,a,u.data)){const d=tH(a,e,t,o,i,c);if(d!==RE)return d}l=e[a+8],-1!==l&&OE(i,e[1].data[a+8]===c)&&PE(s,a,e)?(o=u,a=Oc(l),e=Fc(l,e)):a=-1}}}return TE(e,t,i,r)}const RE={};function eH(){return new kc(ii(),oe())}function tH(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=cm(a,o,t,null==i?Yp(a)&&e0:i!=o&&0!=(3&a.type),r&ft.Host&&s===a);return null!==u?ah(e,o,u,a):RE}function cm(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&gs(f)&&f.type===t)return l}return null}function ah(n,e,t,i){let r=n[t];const s=e.data;if(function $V(n){return n instanceof rh}(r)){const o=r;o.resolving&&function Zd(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new At(-200,`Circular dependency in DI detected for ${n}${t}`)}(ti(s[t]));const a=om(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?pa(o.injectImpl):null;yE(n,i,ft.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function jV(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=rE(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&pa(l),om(a),o.resolving=!1,bE()}}return r}function PE(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function OE(n,e){return!(n&ft.Self||n&ft.Host&&e)}class kc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return IE(this._tNode,this._lView,e,i,t)}}function De(n){return ma(()=>{const e=n.prototype.constructor,t=e[vo]||r0(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[vo]||r0(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function r0(n){return pl(n)?()=>{const e=r0(at(n));return e&&e()}:xl(n)}function ys(n){return function JV(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(ME(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(ii(),n)}const Nc="__parameters__";function Vc(n,e,t){return ma(()=>{const i=function s0(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Nc)?l[Nc]:Object.defineProperty(l,Nc,{value:[]})[Nc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class ye{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=he({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rH=new ye("AnalyzeForEntryComponents");function Wr(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),Wr(i,e)):e!==n&&e.push(i)}return e}function Us(n,e){n.forEach(t=>Array.isArray(t)?Us(t,e):e(t))}function kE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function um(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function uh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function br(n,e,t){let i=Hc(n,e);return i>=0?n[1|i]=t:(i=~i,function aH(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function a0(n,e){const t=Hc(n,e);if(t>=0)return n[1|t]}function Hc(n,e){return function BE(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const dh={},c0="__NG_DI_FLAG__",hm="ngTempTokenPath",pH=/\n/gm,HE="__source",gH=Ut({provide:String,useValue:Ut});let hh;function zE(n){const e=hh;return hh=n,e}function yH(n,e=ft.Default){if(void 0===hh)throw new At(203,"");return null===hh?ZS(n,void 0,e):hh.get(n,e&ft.Optional?null:void 0,e)}function $(n,e=ft.Default){return(function oV(){return Pv}()||yH)(at(n),e)}const fh=$;function u0(n){const e=[];for(let t=0;t<n.length;t++){const i=at(n[t]);if(Array.isArray(i)){if(0===i.length)throw new At(900,"");let r,s=ft.Default;for(let o=0;o<i.length;o++){const a=i[o],l=_H(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push($(r,s))}else e.push($(i))}return e}function ph(n,e){return n[c0]=e,n.prototype[c0]=e,n}function _H(n){return n[c0]}const mh=ph(Vc("Inject",n=>({token:n})),-1),pr=ph(Vc("Optional"),8),xa=ph(Vc("SkipSelf"),4);class bl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function wr(n){return n instanceof bl?n.changingThisBreaksApplicationSecurity:n}function Gs(n,e){const t=function QE(n){return n instanceof bl&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}const jH=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,WH=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Zt=(()=>((Zt=Zt||{})[Zt.NONE=0]="NONE",Zt[Zt.HTML=1]="HTML",Zt[Zt.STYLE=2]="STYLE",Zt[Zt.SCRIPT=3]="SCRIPT",Zt[Zt.URL=4]="URL",Zt[Zt.RESOURCE_URL=5]="RESOURCE_URL",Zt))();function pi(n){const e=function vh(){const n=oe();return n&&n[12]}();return e?e.sanitize(Zt.URL,n)||"":Gs(n,"URL")?wr(n):function yh(n){return(n=String(n)).match(jH)||n.match(WH)?n:"unsafe:"+n}(tt(n))}const l1="__ngContext__";function Vi(n,e){n[l1]=e}function v0(n){const e=function xh(n){return n[l1]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function b0(n){return n.ngOriginalError}function fz(n,...e){n.error(...e)}class wo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=function hz(n){return n&&n.ngErrorLogger||fz}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&b0(e);for(;t&&b0(t);)t=b0(t);return t||null}}const f1=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(on))();function Ws(n){return n instanceof Function?n():n}var Mr=(()=>((Mr=Mr||{})[Mr.Important=1]="Important",Mr[Mr.DashCase=2]="DashCase",Mr))();function M0(n,e){return undefined(n,e)}function bh(n){const e=n[3];return ms(e)?e[3]:e}function C0(n){return _1(n[13])}function S0(n){return _1(n[4])}function _1(n){for(;null!==n&&!ms(n);)n=n[4];return n}function jc(n,e,t,i,r){if(null!=i){let s,o=!1;ms(i)?s=i:Hs(i)&&(o=!0,i=i[0]);const a=jn(i);0===n&&null!==t?null==r?C1(e,t,a):wl(e,t,a,r||null,!0):1===n&&null!==t?wl(e,t,a,r||null,!0):2===n?function R1(n,e,t){const i=ym(n,e);i&&function Lz(n,e,t,i){An(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Vz(n,e,t,i,r){const s=t[7];s!==jn(t)&&jc(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];wh(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function D0(n,e,t){return An(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function x1(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,jv(r,-1)),t.splice(i,1)}function A0(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&x1(r,i),e>0&&(n[t-1][4]=i[4]);const s=um(n,10+e);!function Az(n,e){wh(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function b1(n,e){if(!(256&e[2])){const t=e[11];An(t)&&t.destroyNode&&wh(n,e,t,3,null,null),function Rz(n){let e=n[13];if(!e)return T0(n[1],n);for(;e;){let t=null;if(Hs(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Hs(e)&&T0(e[1],e),e=e[3];null===e&&(e=n),Hs(e)&&T0(e[1],e),t=e&&e[4]}e=t}}(e)}}function T0(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function kz(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof rh)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function Fz(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):jn(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&An(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&ms(e[3])){t!==e[3]&&x1(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function w1(n,e,t){return function M1(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===fs.None||r===fs.Emulated)return null}return jr(i,t)}(n,e.parent,t)}function wl(n,e,t,i,r){An(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function C1(n,e,t){An(n)?n.appendChild(e,t):e.appendChild(t)}function S1(n,e,t,i,r){null!==i?wl(n,e,t,i,r):C1(n,e,t)}function ym(n,e){return An(n)?n.parentNode(e):e.parentNode}function E1(n,e,t){return A1(n,e,t)}let A1=function D1(n,e,t){return 40&n.type?jr(n,t):null};function _m(n,e,t,i){const r=w1(n,i,e),s=e[11],a=E1(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)S1(s,r,t[l],a,!1);else S1(s,r,t,a,!1)}function vm(n,e){if(null!==e){const t=e.type;if(3&t)return jr(e,n);if(4&t)return R0(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return vm(n,i);{const r=n[e.index];return ms(r)?R0(-1,r):jn(r)}}if(32&t)return M0(e,n)()||jn(n[e.index]);{const i=I1(n,e);return null!==i?Array.isArray(i)?i[0]:vm(bh(n[16]),i):vm(n,e.next)}}return null}function I1(n,e){return null!==e?n[16][6].projection[e.projection]:null}function R0(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return vm(i,r)}return e[7]}function P0(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Vi(jn(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)P0(n,e,t.child,i,r,s,!1),jc(e,n,r,a,s);else if(32&l){const c=M0(t,i);let u;for(;u=c();)jc(e,n,r,u,s);jc(e,n,r,a,s)}else 16&l?P1(n,e,i,t,r,s):jc(e,n,r,a,s);t=o?t.projectionNext:t.next}}function wh(n,e,t,i,r,s){P0(t,i,n.firstChild,e,r,s,!1)}function P1(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)jc(e,n,r,l[c],s);else P0(n,e,l,o[3],r,s,!0)}function O1(n,e,t){An(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function O0(n,e,t){An(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function F1(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const k1="ng-template";function zz(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==F1(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function L1(n){return 4===n.type&&n.value!==k1}function Uz(n,e,t){return e===(4!==n.type||t?n.value:k1)}function Gz(n,e,t){let i=4;const r=n.attrs||[],s=function $z(n){for(let e=0;e<n.length;e++)if(ME(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!Uz(n,l,t)||""===l&&1===e.length){if(_s(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!zz(n.attrs,c,t)){if(_s(i))return!1;o=!0}continue}const d=jz(8&i?"class":l,r,L1(n),t);if(-1===d){if(_s(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==F1(f,c,0)||2&i&&c!==h){if(_s(i))return!1;o=!0}}}}else{if(!o&&!_s(i)&&!_s(l))return!1;if(o&&_s(l))continue;o=!1,i=l|1&i}}return _s(i)||o}function _s(n){return 0==(1&n)}function jz(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function qz(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function N1(n,e,t=!1){for(let i=0;i<e.length;i++)if(Gz(n,e[i],t))return!0;return!1}function Yz(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function B1(n,e){return n?":not("+e.trim()+")":e}function Xz(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!_s(o)&&(e+=B1(s,r),r=""),i=o,s=s||!_s(i);t++}return""!==r&&(e+=B1(s,r)),e}const lt={};function Z(n){V1(qt(),oe(),tr()+n,Zp())}function V1(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&nm(e,s,t)}else{const s=n.preOrderHooks;null!==s&&im(e,s,0,t)}_a(t)}function xm(n,e){return n<<17|e<<2}function vs(n){return n>>17&32767}function F0(n){return 2|n}function Mo(n){return(131068&n)>>2}function k0(n,e){return-131069&n|e<<2}function L0(n){return 1|n}function Q1(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];Xv(r),o.contentQueries(2,e[s],s)}}}function Mh(n,e,t,i,r,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,dE(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function Wc(n,e,t,i,r){let s=n.data[e];if(null===s)s=function W0(n,e,t,i,r){const s=fE(),o=Wv(),l=n.data[e]=function fU(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),function kV(){return rt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function ih(){const n=rt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return zs(s,!0),s}function $c(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Ch(n,e,t){Jp(e);try{const i=n.viewQuery;null!==i&&ex(1,i,t);const r=n.template;null!==r&&Z1(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Q1(n,e),n.staticViewQueries&&ex(2,n.viewQuery,t);const s=n.components;null!==s&&function uU(n,e){for(let t=0;t<e.length;t++)RU(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,em()}}function qc(n,e,t,i){const r=e[2];if(256==(256&r))return;Jp(e);const s=Zp();try{dE(e),function pE(n){return rt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Z1(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&nm(e,c,null)}else{const c=n.preOrderHooks;null!==c&&im(e,c,0,null),Zv(e,0)}if(function TU(n){for(let e=C0(n);null!==e;e=S0(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&jv(s,1),r[2]|=1024}}}(e),function AU(n){for(let e=C0(n);null!==e;e=S0(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Gv(i)&&qc(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&Q1(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&nm(e,c)}else{const c=n.contentHooks;null!==c&&im(e,c,1),Zv(e,1)}!function lU(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)_a(~r);else{const s=r,o=t[++i],a=t[++i];LV(o,s),a(2,e[s])}}}finally{_a(-1)}}(n,e);const a=n.components;null!==a&&function cU(n,e){for(let t=0;t<e.length;t++)IU(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&ex(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&nm(e,c)}else{const c=n.viewHooks;null!==c&&im(e,c,2),Zv(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,jv(e[3],-1))}finally{em()}}function dU(n,e,t,i){const r=e[10],s=!Zp(),o=uE(e);try{s&&!o&&r.begin&&r.begin(),o&&Ch(n,e,i),qc(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function Z1(n,e,t,i,r){const s=tr(),o=2&i;try{_a(-1),o&&e.length>20&&V1(n,e,20,Zp()),t(i,r)}finally{_a(s)}}function $0(n,e,t){!hE()||(function xU(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||oh(t,e),Vi(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=gs(l);c&&SU(e,t,l);const u=ah(e,n,a,t);Vi(u,e),null!==o&&EU(0,a-r,u,l,0,o),c&&(xr(t.index,e)[8]=u)}}(n,e,t,jr(t,e)),128==(128&t.flags)&&function bU(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=function NV(){return rt.lFrame.currentDirectiveIndex}();try{_a(o);for(let l=i;l<r;l++){const c=n.data[l],u=e[l];qv(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&oD(c,u)}}finally{_a(-1),qv(a)}}(n,e,t))}function q0(n,e,t=jr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function J1(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Mm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Mm(n,e,t,i,r,s,o,a,l,c){const u=20+i,d=u+r,h=function hU(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:lt);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function nD(n,e,t,i){const r=hD(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&fD(n).push(i,r.length-1))}function iD(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function Cr(n,e,t,i,r,s,o,a){const l=jr(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(gD(n,t,u,i,r),Yp(e)&&function gU(n,e){const t=xr(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function mU(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,An(s)?s.setProperty(l,i,r):Jv(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function Y0(n,e,t,i){let r=!1;if(hE()){const s=function wU(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];N1(t,o.selectors,!1)&&(r||(r=[]),lm(oh(t,e),n,o.type),gs(o)?(aD(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,lD(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=$c(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=sm(t.mergedAttrs,d.hostAttrs),cD(n,t,e,c,d),CU(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function pU(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===s||L1(e)?null:DU(d,s);o.push(h),a=iD(d,c,a),l=iD(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function MU(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new At(-301,`Export of name '${e[r+1]}' not found!`);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=sm(t.mergedAttrs,t.attrs),r}function sD(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function vU(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function oD(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function aD(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function CU(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;gs(e)&&(t[""]=n)}}function lD(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function cD(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=xl(r.type)),o=new rh(s,gs(r),null);n.blueprint[i]=o,t[i]=o,sD(n,e,0,i,$c(n,t,r.hostVars,lt),r)}function SU(n,e,t){const i=jr(e,n),r=J1(t),s=n[10],o=Cm(n,Mh(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function $s(n,e,t,i,r,s){const o=jr(n,e);!function X0(n,e,t,i,r,s,o){if(null==s)An(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?tt(s):o(s,i||"",r);An(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function EU(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function DU(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function uD(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function IU(n,e){const t=xr(e,n);if(Gv(t)){const i=t[1];80&t[2]?qc(i,t,i.template,t[8]):t[5]>0&&Q0(t)}}function Q0(n){for(let i=C0(n);null!==i;i=S0(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];qc(o,s,o.template,s[8])}else s[5]>0&&Q0(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=xr(t[i],n);Gv(r)&&r[5]>0&&Q0(r)}}function RU(n,e){const t=xr(e,n),i=t[1];(function PU(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),Ch(i,t,t[8])}function Cm(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Z0(n){for(;n;){n[2]|=64;const e=bh(n);if(gV(n)&&!e)return n;n=e}return null}function J0(n,e,t){const i=e[10];i.begin&&i.begin();try{qc(n,e,n.template,t)}catch(r){throw mD(e,r),r}finally{i.end&&i.end()}}function dD(n){!function K0(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=v0(t),r=i[1];dU(r,i,r.template,t)}}(n[8])}function ex(n,e,t){Xv(0),e(n,t)}const LU=(()=>Promise.resolve(null))();function hD(n){return n[7]||(n[7]=[])}function fD(n){return n.cleanup||(n.cleanup=[])}function mD(n,e){const t=n[9],i=t?t.get(wo,null):null;i&&i.handleError(e)}function gD(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Co(n,e,t){const i=Qp(e,n);!function v1(n,e,t){An(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function Sm(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=hr(r,a):2==s&&(i=hr(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const tx=new ye("INJECTOR",-1);class yD{get(e,t=dh){if(t===dh){const i=new Error(`NullInjectorError: No provider for ${Wt(e)}!`);throw i.name="NullInjectorError",i}return t}}const nx=new ye("Set Injector scope."),Sh={},VU={};let ix;function _D(){return void 0===ix&&(ix=new yD),ix}function vD(n,e=null,t=null,i){const r=xD(n,e,t,i);return r._resolveInjectorDefTypes(),r}function xD(n,e=null,t=null,i){return new HU(n,t,e||_D(),i)}class HU{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&Us(t,a=>this.processProvider(a,e,t)),Us([e],a=>this.processInjectorType(a,[],s)),this.records.set(tx,Yc(void 0,this));const o=this.records.get(nx);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:Wt(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=dh,i=ft.Default){this.assertNotDestroyed();const r=zE(this),s=pa(void 0);try{if(!(i&ft.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function YU(n){return"function"==typeof n||"object"==typeof n&&n instanceof ye}(e)&&Iv(e);a=l&&this.injectableDefInScope(l)?Yc(rx(e),Sh):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&ft.Self?_D():this.parent).get(e,t=i&ft.Optional&&t===dh?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[hm]=o[hm]||[]).unshift(Wt(e)),r)throw o;return function vH(n,e,t,i){const r=n[hm];throw e[HE]&&r.unshift(e[HE]),n.message=function xH(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=Wt(e);if(Array.isArray(e))r=e.map(Wt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Wt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(pH,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[hm]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{pa(s),zE(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(Wt(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new At(205,"")}processInjectorType(e,t,i){if(!(e=at(e)))return!1;let r=XS(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=XS(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{Us(r.imports,d=>{this.processInjectorType(d,t,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];Us(f,p=>this.processProvider(p,h,f||un))}}this.injectorDefTypes.add(o);const l=xl(o)||(()=>new o);this.records.set(o,Yc(l,Sh));const c=r.providers;if(null!=c&&!a){const u=e;Us(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=Xc(e=at(e))?e:at(e&&e.provide);const s=function UU(n,e,t){return wD(n)?Yc(void 0,n.useValue):Yc(bD(n),Sh)}(e);if(Xc(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=Yc(void 0,Sh,!0),o.factory=()=>u0(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===Sh&&(t.value=VU,t.value=t.factory()),"object"==typeof t.value&&t.value&&function qU(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=at(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function rx(n){const e=Iv(n),t=null!==e?e.factory:xl(n);if(null!==t)return t;if(n instanceof ye)throw new At(204,"");if(n instanceof Function)return function zU(n){const e=n.length;if(e>0)throw uh(e,"?"),new At(204,"");const t=function iV(n){const e=n&&(n[Gp]||n[QS]);if(e){const t=function rV(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new At(204,"")}function bD(n,e,t){let i;if(Xc(n)){const r=at(n);return xl(r)||rx(r)}if(wD(n))i=()=>at(n.useValue);else if(function jU(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...u0(n.deps||[]));else if(function GU(n){return!(!n||!n.useExisting)}(n))i=()=>$(at(n.useExisting));else{const r=at(n&&(n.useClass||n.provide));if(!function $U(n){return!!n.deps}(n))return xl(r)||rx(r);i=()=>new r(...u0(n.deps))}return i}function Yc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function wD(n){return null!==n&&"object"==typeof n&&gH in n}function Xc(n){return"function"==typeof n}let mi=(()=>{class n{static create(t,i){var r;if(Array.isArray(t))return vD({name:""},i,t,"");{const s=null!==(r=t.name)&&void 0!==r?r:"";return vD({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=dh,n.NULL=new yD,n.\u0275prov=he({token:n,providedIn:"any",factory:()=>$(tx)}),n.__NG_ELEMENT_ID__=-1,n})();function n4(n,e){tm(v0(n)[1],ii())}function ne(n){let e=function FD(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(gs(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new At(903,"");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=ax(n.inputs),o.declaredInputs=ax(n.declaredInputs),o.outputs=ax(n.outputs);const a=r.hostBindings;a&&o4(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&r4(n,l),c&&s4(n,c),_r(n.inputs,r.inputs),_r(n.declaredInputs,r.declaredInputs),_r(n.outputs,r.outputs),gs(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===ne&&(t=!1)}}e=Object.getPrototypeOf(e)}!function i4(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=sm(r.hostAttrs,t=sm(t,r.hostAttrs))}}(i)}function ax(n){return n===Ec?{}:n===un?[]:n}function r4(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function s4(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function o4(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let Em=null;function Qc(){if(!Em){const n=on.Symbol;if(n&&n.iterator)Em=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Em=i)}}}return Em}function Eh(n){return!!lx(n)&&(Array.isArray(n)||!(n instanceof Map)&&Qc()in n)}function lx(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Hi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function sn(n,e,t,i){const r=oe();return Hi(r,Pc(),e)&&(qt(),$s(Tn(),r,n,e,t,i)),sn}function Kc(n,e,t,i){return Hi(n,Pc(),t)?e+tt(t)+i:lt}function Re(n,e,t,i,r,s,o,a){const l=oe(),c=qt(),u=n+20,d=c.firstCreatePass?function f4(n,e,t,i,r,s,o,a,l){const c=e.consts,u=Wc(e,n,4,o||null,ya(c,a));Y0(e,t,u,ya(c,l)),tm(e,u);const d=u.tViews=Mm(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];zs(d,!1);const h=l[11].createComment("");_m(c,l,h,d),Vi(h,l),Cm(l,l[u]=uD(h,l,h,d)),Xp(d)&&$0(c,l,d),null!=o&&q0(l,d,a)}function b(n,e=ft.Default){const t=oe();return null===t?$(n,e):IE(ii(),t,at(n),e)}function au(){throw new Error("invalid")}function ie(n,e,t){const i=oe();return Hi(i,Pc(),e)&&Cr(qt(),Tn(),i,n,e,i[11],t,!1),ie}function fx(n,e,t,i,r){const o=r?"class":"style";gD(n,t,e.inputs[o],o,i)}function P(n,e,t,i){const r=oe(),s=qt(),o=20+n,a=r[11],l=r[o]=D0(a,e,function GV(){return rt.lFrame.currentNamespace}()),c=s.firstCreatePass?function F4(n,e,t,i,r,s,o){const a=e.consts,c=Wc(e,n,2,r,ya(a,s));return Y0(e,t,c,ya(a,o)),null!==c.attrs&&Sm(c,c.attrs,!1),null!==c.mergedAttrs&&Sm(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];zs(c,!0);const u=c.mergedAttrs;null!==u&&rm(a,l,u);const d=c.classes;null!==d&&O0(a,l,d);const h=c.styles;null!==h&&O1(a,l,h),64!=(64&c.flags)&&_m(s,r,l,c),0===function TV(){return rt.lFrame.elementDepthCount}()&&Vi(l,r),function IV(){rt.lFrame.elementDepthCount++}(),Xp(c)&&($0(s,r,c),function K1(n,e,t){if(Nv(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,r)),null!==i&&q0(r,c)}function O(){let n=ii();Wv()?$v():(n=n.parent,zs(n,!1));const e=n;!function RV(){rt.lFrame.elementDepthCount--}();const t=qt();t.firstCreatePass&&(tm(t,n),Nv(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function YV(n){return 0!=(16&n.flags)}(e)&&fx(t,e,oe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function XV(n){return 0!=(32&n.flags)}(e)&&fx(t,e,oe(),e.stylesWithoutHost,!1)}function ae(n,e,t,i){P(n,e,t,i),O()}function zi(){return oe()}function Ah(n){return!!n&&"function"==typeof n.then}const px=function tA(n){return!!n&&"function"==typeof n.subscribe};function ot(n,e,t,i){const r=oe(),s=qt(),o=ii();return function iA(n,e,t,i,r,s,o,a){const l=Xp(i),u=n.firstCreatePass&&fD(n),d=e[8],h=hD(e);let f=!0;if(3&i.type||a){const _=jr(i,e),y=a?a(_):_,m=h.length,x=a?v=>a(jn(v[i.index])):i.index;if(An(t)){let v=null;if(!a&&l&&(v=function L4(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,f=!1;else{s=mx(i,e,d,s,!1);const M=t.listen(y,r,s);h.push(s,M),u&&u.push(r,x,m,m+1)}}else s=mx(i,e,d,s,!0),y.addEventListener(r,s,o),h.push(s),u&&u.push(r,x,m,o)}else s=mx(i,e,d,s,!1);const p=i.outputs;let g;if(f&&null!==p&&(g=p[r])){const _=g.length;if(_)for(let y=0;y<_;y+=2){const D=e[g[y]][g[y+1]].subscribe(s),R=h.length;h.push(s,D),u&&u.push(r,i.index,R,-(R+1))}}}(s,r,r[11],o,n,e,!!t,i),ot}function rA(n,e,t,i){try{return!1!==t(i)}catch(r){return mD(n,r),!1}}function mx(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?xr(n.index,e):e;0==(32&e[2])&&Z0(a);let l=rA(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=rA(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Be(n=1){return function VV(n){return(rt.lFrame.contextLView=function HV(n,e){for(;n>0;)e=e[15],n--;return e}(n,rt.lFrame.contextLView))[8]}(n)}function N4(n,e){let t=null;const i=function Wz(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?N1(n,s,!0):Yz(i,s))return r}else t=r}return t}function Mi(n){const e=oe()[16][6];if(!e.projection){const i=e.projection=uh(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?N4(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function $t(n,e=0,t){const i=oe(),r=qt(),s=Wc(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),$v(),64!=(64&s.flags)&&function Bz(n,e,t){P1(e[11],0,e,t,w1(n,t,e),E1(t.parent||e[6],t,e))}(r,i,s)}function qr(n,e,t){return gx(n,"",e,"",t),qr}function gx(n,e,t,i,r){const s=oe(),o=Kc(s,e,t,i);return o!==lt&&Cr(qt(),Tn(),s,n,o,s[11],r,!1),gx}function fA(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?vs(s):Mo(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];H4(n[a],e)&&(l=!0,n[a+1]=i?L0(u):F0(u)),a=i?vs(u):Mo(u)}l&&(n[t+1]=i?F0(s):L0(s))}function H4(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Hc(n,e)>=0}function Sr(n,e,t){return bs(n,e,t,!1),Sr}function fn(n,e){return bs(n,e,null,!0),fn}function bs(n,e,t,i){const r=oe(),s=qt(),o=function bo(n){const e=rt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function bA(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[tr()],o=function xA(n,e){return e>=n.expandoStartIndex}(n,t);(function SA(n,e){return 0!=(n.flags&(e?16:32))})(s,i)&&null===e&&!o&&(e=!1),e=function X4(n,e,t,i){const r=function Yv(n){const e=rt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Th(t=yx(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=yx(r,n,e,t,i),null===s){let l=function Q4(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Mo(i))return n[vs(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=yx(null,n,e,l[1],i),l=Th(l,e.attrs,i),function Z4(n,e,t,i){n[vs(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function K4(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Th(i,n[s].hostAttrs,t);return Th(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function B4(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=vs(o),l=Mo(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Hc(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=vs(n[a+1]);n[i+1]=xm(h,a),0!==h&&(n[h+1]=k0(n[h+1],i)),n[a+1]=function Kz(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=xm(a,0),0!==a&&(n[a+1]=k0(n[a+1],i)),a=i;else n[i+1]=xm(l,0),0===a?a=i:n[l+1]=k0(n[l+1],i),l=i;c&&(n[i+1]=F0(n[i+1])),fA(n,u,i,!0),fA(n,u,i,!1),function V4(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Hc(s,e)>=0&&(t[i+1]=L0(t[i+1]))}(e,u,n,i,s),o=xm(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==lt&&Hi(r,o,e)&&function MA(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];Tm(function U1(n){return 1==(1&n)}(c)?CA(l,e,t,r,Mo(c),o):void 0)||(Tm(s)||function z1(n){return 2==(2&n)}(c)&&(s=CA(l,null,t,r,a,o)),function Hz(n,e,t,i,r){const s=An(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Mr.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=Mr.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,Qp(tr(),t),r,s))}(s,s.data[tr()],r,r[11],n,r[o+1]=function t5(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Wt(wr(n)))),n}(e,t),i,o)}function yx(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Th(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Th(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),br(n,o,!!t||e[++s]))}return void 0===n?null:n}function CA(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===lt&&(h=d?un:void 0);let f=d?a0(h,i):u===i?h:void 0;if(c&&!Tm(f)&&(f=a0(l,i)),Tm(f)&&(a=f,o))return a;const p=n[r+1];r=o?vs(p):Mo(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=a0(l,i))}return a}function Tm(n){return void 0!==n}function Le(n,e=""){const t=oe(),i=qt(),r=n+20,s=i.firstCreatePass?Wc(i,r,1,e,null):i.data[r],o=t[r]=function E0(n,e){return An(n)?n.createText(e):n.createTextNode(e)}(t[11],e);_m(i,t,o,s),zs(s,!1)}function In(n){return Ci("",n,""),In}function Ci(n,e,t){const i=oe(),r=Kc(i,n,e,t);return r!==lt&&Co(i,tr(),r),Ci}const Cl=void 0;var x5=["en",[["a","p"],["AM","PM"],Cl],[["AM","PM"],Cl,Cl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cl,"{1} 'at' {0}",Cl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function v5(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let cu={};function WA(n){return n in cu||(cu[n]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[n]),cu[n]}var Ae=(()=>((Ae=Ae||{})[Ae.LocaleId=0]="LocaleId",Ae[Ae.DayPeriodsFormat=1]="DayPeriodsFormat",Ae[Ae.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ae[Ae.DaysFormat=3]="DaysFormat",Ae[Ae.DaysStandalone=4]="DaysStandalone",Ae[Ae.MonthsFormat=5]="MonthsFormat",Ae[Ae.MonthsStandalone=6]="MonthsStandalone",Ae[Ae.Eras=7]="Eras",Ae[Ae.FirstDayOfWeek=8]="FirstDayOfWeek",Ae[Ae.WeekendRange=9]="WeekendRange",Ae[Ae.DateFormat=10]="DateFormat",Ae[Ae.TimeFormat=11]="TimeFormat",Ae[Ae.DateTimeFormat=12]="DateTimeFormat",Ae[Ae.NumberSymbols=13]="NumberSymbols",Ae[Ae.NumberFormats=14]="NumberFormats",Ae[Ae.CurrencyCode=15]="CurrencyCode",Ae[Ae.CurrencySymbol=16]="CurrencySymbol",Ae[Ae.CurrencyName=17]="CurrencyName",Ae[Ae.Currencies=18]="Currencies",Ae[Ae.Directionality=19]="Directionality",Ae[Ae.PluralCase=20]="PluralCase",Ae[Ae.ExtraData=21]="ExtraData",Ae))();const Pm="en-US";let $A=Pm;function xx(n,e,t,i,r){if(n=at(n),Array.isArray(n))for(let s=0;s<n.length;s++)xx(n[s],e,t,i,r);else{const s=qt(),o=oe();let a=Xc(n)?n:at(n.provide),l=bD(n);const c=ii(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Xc(n)||!n.multi){const f=new rh(l,r,b),p=wx(a,e,r?u:u+h,d);-1===p?(lm(oh(c,o),s,a),bx(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=wx(a,e,u+h,d),p=wx(a,e,u,u+h),g=f>=0&&t[f],_=p>=0&&t[p];if(r&&!_||!r&&!g){lm(oh(c,o),s,a);const y=function vG(n,e,t,i,r){const s=new rh(n,t,b);return s.multi=[],s.index=e,s.componentProviders=0,gT(s,r,i&&!t),s}(r?_G:yG,t.length,r,i,l);!r&&_&&(t[p].providerFactory=y),bx(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(y),o.push(y)}else bx(s,n,f>-1?f:p,gT(t[r?p:f],l,!r&&i));!r&&i&&_&&t[p].componentProviders++}}}function bx(n,e,t,i){const r=Xc(e),s=function WU(n){return!!n.useClass}(e);if(r||s){const l=(s?at(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function gT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function wx(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function yG(n,e,t,i){return Mx(this.multi,[])}function _G(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ah(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),Mx(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Mx(r,s);return s}function Mx(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Ke(n,e=[]){return t=>{t.providersResolver=(i,r)=>function gG(n,e,t){const i=qt();if(i.firstCreatePass){const r=gs(n);xx(t,i.data,i.blueprint,r,!0),xx(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class yT{}class wG{resolveComponentFactory(e){throw function bG(n){const e=Error(`No component factory found for ${Wt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ma=(()=>{class n{}return n.NULL=new wG,n})();function MG(){return du(ii(),oe())}function du(n,e){return new ke(jr(n,e))}let ke=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=MG,n})();function CG(n){return n instanceof ke?n.nativeElement:n}class Fh{}let Ms=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function EG(){const n=oe(),t=xr(ii().index,n);return function SG(n){return n[11]}(Hs(t)?t:n)}(),n})(),DG=(()=>{class n{}return n.\u0275prov=he({token:n,providedIn:"root",factory:()=>null}),n})();class Ca{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const AG=new Ca("13.1.3"),Cx={};function Nm(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(jn(s)),ms(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Nm(l[1],l,c,i)}const o=t.type;if(8&o)Nm(n,e,t.child,i);else if(32&o){const a=M0(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=I1(e,t);if(Array.isArray(a))i.push(...a);else{const l=bh(e[16]);Nm(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class kh{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Nm(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ms(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(A0(e,i),um(t,i))}this._attachedToViewContainer=!1}b1(this._lView[1],this._lView)}onDestroy(e){nD(this._lView[1],this._lView,null,e)}markForCheck(){Z0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){J0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function FU(n,e,t){Kp(!0);try{J0(n,e,t)}finally{Kp(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new At(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Iz(n,e){wh(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new At(902,"");this._appRef=e}}class TG extends kh{constructor(e){super(e),this._view=e}detectChanges(){dD(this._view)}checkNoChanges(){!function kU(n){Kp(!0);try{dD(n)}finally{Kp(!1)}}(this._view)}get context(){return null}}class vT extends Ma{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ni(e);return new Sx(t,this.ngModule)}}function xT(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const RG=new ye("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>f1});class Sx extends yT{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Qz(n){return n.map(Xz).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return xT(this.componentDef.inputs)}get outputs(){return xT(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function PG(n,e){return{get:(t,i,r)=>{const s=n.get(t,Cx,r);return s!==Cx||i===Cx?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(Fh,cE),a=s.get(DG,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function tD(n,e,t){if(An(n))return n.selectRootElement(e,t===fs.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):D0(o.createRenderer(null,this.componentDef),c,function IG(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),d=this.componentDef.onPush?576:528,h=function OD(n,e){return{components:[],scheduler:n||f1,clean:LU,playerHandler:e||null,flags:0}}(),f=Mm(0,null,null,1,0,null,null,null,null,null),p=Mh(null,f,h,d,null,null,o,l,a,s);let g,_;Jp(p);try{const y=function RD(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=Wc(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(Sm(l,c,!0),null!==n&&(rm(r,n,c),null!==l.classes&&O0(r,n,l.classes),null!==l.styles&&O1(r,n,l.styles)));const u=i.createRenderer(n,e),d=Mh(t,J1(e),null,e.onPush?64:16,t[20],l,i,u,s||null,null);return o.firstCreatePass&&(lm(oh(l,t),o,e.type),aD(o,l),lD(l,t.length,1)),Cm(t,d),t[20]=d}(u,this.componentDef,p,o,l);if(u)if(i)rm(l,u,["ng-version",AG.full]);else{const{attrs:m,classes:x}=function Zz(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!_s(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);m&&rm(l,u,m),x&&x.length>0&&O0(l,u,x.join(" "))}if(_=Uv(f,20),void 0!==t){const m=_.projection=[];for(let x=0;x<this.ngContentSelectors.length;x++){const v=t[x];m.push(null!=v?Array.from(v):null)}}g=function PD(n,e,t,i,r){const s=t[1],o=function _U(n,e,t){const i=ii();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),cD(n,i,e,$c(n,e,1,null),t));const r=ah(e,n,i.directiveStart,i);Vi(r,e);const s=jr(i,e);return s&&Vi(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=ii();e.contentQueries(1,o,l.directiveStart)}const a=ii();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(_a(a.index),sD(t[1],a,0,a.directiveStart,a.directiveEnd,e),oD(e,o)),o}(y,this.componentDef,p,h,[n4]),Ch(f,p,null)}finally{em()}return new FG(this.componentType,g,du(_,p),p,_)}}class FG extends class xG{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new TG(r),this.componentType=e}get injector(){return new kc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class So{}class bT{}const hu=new Map;class CT extends So{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vT(this);const i=zr(e);this._bootstrapComponents=Ws(i.bootstrap),this._r3Injector=xD(e,t,[{provide:So,useValue:this},{provide:Ma,useValue:this.componentFactoryResolver}],Wt(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=mi.THROW_IF_NOT_FOUND,i=ft.Default){return e===mi||e===So||e===tx?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ex extends bT{constructor(e){super(),this.moduleType=e,null!==zr(e)&&function LG(n){const e=new Set;!function t(i){const r=zr(i,!0),s=r.id;null!==s&&(function wT(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${Wt(e)} vs ${Wt(e.name)}`)}(s,hu.get(s),i),hu.set(s,i));const o=Ws(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new CT(this.moduleType,e)}}function Lh(n,e,t,i){return ST(oe(),er(),n,e,t,i)}function ST(n,e,t,i,r,s){const o=e+t;return Hi(n,o,r)?function qs(n,e,t){return n[e]=t}(n,o+1,s?i.call(s,r):i(r)):function Nh(n,e){const t=n[e];return t===lt?void 0:t}(n,o+1)}function Eo(n,e){const t=qt();let i;const r=n+20;t.firstCreatePass?(i=function $G(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=xl(i.type)),o=pa(b);try{const a=om(!1),l=s();return om(a),function p4(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,oe(),r,l),l}finally{pa(o)}}function Do(n,e,t){const i=n+20,r=oe(),s=function Rc(n,e){return n[e]}(r,i);return function Bh(n,e){return n[1].data[e].pure}(r,i)?ST(r,er(),e,s.transform,t,s):s.transform(t)}function Dx(n){return e=>{setTimeout(n,void 0,e)}}const nt=class ZG extends it{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const d=e;a=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=Dx(l),a&&(a=Dx(a)),c&&(c=Dx(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof bt&&e.add(u),u}};function KG(){return this._results[Qc()]()}class fu{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Qc(),i=fu.prototype;i[t]||(i[t]=KG)}get changes(){return this._changes||(this._changes=new nt)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=Wr(e);(this._changesDetected=!function sH(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let oi=(()=>{class n{}return n.__NG_ELEMENT_ID__=t6,n})();const JG=oi,e6=class extends JG{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=Mh(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),Ch(t,i,e),new kh(i)}};function t6(){return Bm(ii(),oe())}function Bm(n,e){return 4&n.type?new e6(e,n,du(n,e)):null}let Wn=(()=>{class n{}return n.__NG_ELEMENT_ID__=n6,n})();function n6(){return PT(ii(),oe())}const i6=Wn,IT=class extends i6{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return du(this._hostTNode,this._hostLView)}get injector(){return new kc(this._hostTNode,this._hostLView)}get parentInjector(){const e=am(this._hostTNode,this._hostLView);if(SE(e)){const t=Fc(e,this._hostLView),i=Oc(e);return new kc(t[1].data[i+8],t)}return new kc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=RT(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=e&&!function ch(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new Sx(Ni(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule&&c){const d=c.get(So,null);d&&(s=d)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function AV(n){return ms(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[3],h=new IT(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function Pz(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],kE(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function Oz(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=R0(s,o),l=i[11],c=ym(l,o[7]);return null!==c&&function Tz(n,e,t,i,r,s){i[0]=r,i[6]=e,wh(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),kE(Ax(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=RT(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=A0(this._lContainer,t);i&&(um(Ax(this._lContainer),t),b1(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=A0(this._lContainer,t);return i&&null!=um(Ax(this._lContainer),t)?new kh(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function RT(n){return n[8]}function Ax(n){return n[8]||(n[8]=[])}function PT(n,e){let t;const i=e[n.index];if(ms(i))t=i;else{let r;if(8&n.type)r=jn(i);else{const s=e[11];r=s.createComment("");const o=jr(n,e);wl(s,ym(s,o),r,function Nz(n,e){return An(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=uD(i,e,r,n),Cm(e,t)}return new IT(t,n,e)}class Tx{constructor(e){this.queryList=e,this.matches=null}clone(){return new Tx(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ix{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new Ix(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==NT(e,t).matches&&this.queries[t].setDirty()}}class OT{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class Rx{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new Rx(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Px{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Px(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,o6(t,s)),this.matchTNodeWithReadOption(e,t,cm(t,e,s,!1,!1))}else i===oi?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,cm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ke||r===Wn||r===oi&&4&t.type)this.addMatch(t.index,-2);else{const s=cm(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function o6(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function l6(n,e,t,i){return-1===t?function a6(n,e){return 11&n.type?du(n,e):4&n.type?Bm(n,e):null}(e,n):-2===t?function c6(n,e,t){return t===ke?du(e,n):t===oi?Bm(e,n):t===Wn?PT(e,n):void 0}(n,e,i):ah(n,n[1],t,e)}function FT(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:l6(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function Ox(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=FT(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&Ox(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];Ox(f[1],f,c,i)}}}}}return i}function Xe(n){const e=oe(),t=qt(),i=gE();Xv(i+1);const r=NT(t,i);if(n.dirty&&uE(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?Ox(t,e,i,[]):FT(t,e,r,i);n.reset(s,CG),n.notifyOnChanges()}return!0}return!1}function en(n,e,t,i){const r=qt();if(r.firstCreatePass){const s=ii();LT(r,new OT(e,t,i),s.index),function d6(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}kT(r,oe(),t)}function Qe(){return function u6(n,e){return n[19].queries[e].queryList}(oe(),gE())}function kT(n,e,t){const i=new fu(4==(4&t));nD(n,e,i,i.destroy),null===e[19]&&(e[19]=new Ix),e[19].queries.push(new Tx(i))}function LT(n,e,t){null===n.queries&&(n.queries=new Rx),n.queries.track(new Px(e,t))}function NT(n,e){return n.queries.getByIndex(e)}function zm(...n){}const Um=new ye("Application Initializer");let mu=(()=>{class n{constructor(t){this.appInits=t,this.resolve=zm,this.reject=zm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Ah(s))t.push(s);else if(px(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)($(Um,8))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();const Hh=new ye("AppId"),I6={provide:Hh,useFactory:function T6(){return`${Vx()}${Vx()}${Vx()}`},deps:[]};function Vx(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eI=new ye("Platform Initializer"),Yr=new ye("Platform ID"),Hx=new ye("appBootstrapListener");let tI=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();const Ao=new ye("LocaleId"),nI=new ye("DefaultCurrencyCode");class R6{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Gm=(()=>{class n{compileModuleSync(t){return new Ex(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Ws(zr(t).declarations).reduce((o,a)=>{const l=Ni(a);return l&&o.push(new Sx(l)),o},[]);return new R6(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();const O6=(()=>Promise.resolve(0))();function zx(n){"undefined"==typeof Zone?O6.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class xt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function F6(){let n=on.requestAnimationFrame,e=on.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function N6(n){const e=()=>{!function L6(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(on,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Gx(n),n.isCheckStableRunning=!0,Ux(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Gx(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return iI(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),rI(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return iI(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),rI(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Gx(n),Ux(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,k6,zm,zm);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const k6={};function Ux(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Gx(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function iI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function rI(n){n._nesting--,Ux(n)}class B6{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let jx=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xt.assertNotInAngularZone(),zx(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())zx(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)($(xt))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})(),sI=(()=>{class n{constructor(){this._applications=new Map,Wx.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Wx.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();class V6{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let Cs,Wx=new V6;const oI=new ye("AllowMultipleToken");class aI{constructor(e,t){this.name=e,this.token=t}}function lI(n,e,t=[]){const i=`Platform: ${e}`,r=new ye(i);return(s=[])=>{let o=cI();if(!o||o.injector.get(oI,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:nx,useValue:"platform"});!function G6(n){if(Cs&&!Cs.destroyed&&!Cs.injector.get(oI,!1))throw new At(400,"");Cs=n.get(uI);const e=n.get(eI,null);e&&e.forEach(t=>t())}(mi.create({providers:a,name:i}))}return function j6(n){const e=cI();if(!e)throw new At(401,"");return e}()}}function cI(){return Cs&&!Cs.destroyed?Cs:null}let uI=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function W6(n,e){let t;return t="noop"===n?new B6:("zone.js"===n?void 0:n)||new xt({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:xt,useValue:a}];return a.run(()=>{const c=mi.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(wo,null);if(!d)throw new At(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{$x(this._modules,u),h.unsubscribe()})}),function $6(n,e,t){try{const i=t();return Ah(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(d,a,()=>{const h=u.injector.get(mu);return h.runInitializers(),h.donePromise.then(()=>(function S5(n){Jt(n,"Expected localeId to be defined"),"string"==typeof n&&($A=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Ao,Pm)||Pm),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const r=dI({},i);return function z6(n,e,t){const i=new Ex(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(gu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new At(403,"");t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new At(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)($(mi))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();function dI(n,e){return Array.isArray(e)?e.reduce(dI,n):Object.assign(Object.assign({},n),e)}let gu=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new zt(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new zt(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{xt.assertNotInAngularZone(),zx(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{xt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=yr(a,l.pipe(function Ki(n={}){const{connector:e=(()=>new it),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o=null,a=null,l=null,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=null},f=()=>{h(),o=l=null,u=d=!1},p=()=>{const g=o;f(),null==g||g.unsubscribe()};return xn((g,_)=>{c++,!d&&!u&&h();const y=l=null!=l?l:e();_.add(()=>{c--,0===c&&!d&&!u&&(a=Vs(p,r))}),y.subscribe(_),o||(o=new oa({next:m=>y.next(m),error:m=>{d=!0,h(),a=Vs(f,t,m),y.error(m)},complete:()=>{u=!0,h(),a=Vs(f,i),y.complete()}}),Nn(g).subscribe(o))})(s)}}()))}bootstrap(t,i){if(!this._initStatus.done)throw new At(405,"");let r;r=t instanceof yT?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function U6(n){return n.isBoundToModule}(r)?void 0:this._injector.get(So),a=r.create(mi.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(jx,null),u=c&&a.injector.get(sI);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),$x(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new At(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;$x(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Hx,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)($(xt),$(mi),$(wo),$(Ma),$(mu))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();function $x(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let fI=!0,Ui=(()=>{class n{}return n.__NG_ELEMENT_ID__=X6,n})();function X6(n){return function Q6(n,e,t){if(Yp(n)&&!t){const i=xr(n.index,e);return new kh(i,i)}return 47&n.type?new kh(e[16],e):null}(ii(),oe(),16==(16&n))}class xI{constructor(){}supports(e){return Eh(e)}create(e){return new n8(e)}}const t8=(n,e)=>e;class n8{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||t8}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<wI(i,r,s)?t:i,a=wI(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Eh(e))throw new At(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function h4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Qc()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new i8(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new bI),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bI),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class i8{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class r8{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class bI{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new r8,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wI(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class MI{constructor(){}supports(e){return e instanceof Map||lx(e)}create(){return new s8}}class s8{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||lx(e)))throw new At(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new o8(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class o8{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function CI(){return new Ss([new xI])}let Ss=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||CI()),deps:[[n,new xa,new pr]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new At(901,"")}}return n.\u0275prov=he({token:n,providedIn:"root",factory:CI}),n})();function SI(){return new Sa([new MI])}let Sa=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||SI()),deps:[[n,new xa,new pr]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(i)return i;throw new At(901,"")}}return n.\u0275prov=he({token:n,providedIn:"root",factory:SI}),n})();const a8=[new MI],c8=new Ss([new xI]),u8=new Sa(a8),d8=lI(null,"core",[{provide:Yr,useValue:"unknown"},{provide:uI,deps:[mi]},{provide:sI,deps:[]},{provide:tI,deps:[]}]),g8=[{provide:gu,useClass:gu,deps:[xt,mi,wo,Ma,mu]},{provide:RG,deps:[xt],useFactory:function y8(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:mu,useClass:mu,deps:[[new pr,Um]]},{provide:Gm,useClass:Gm,deps:[]},I6,{provide:Ss,useFactory:function h8(){return c8},deps:[]},{provide:Sa,useFactory:function f8(){return u8},deps:[]},{provide:Ao,useFactory:function p8(n){return n||function m8(){return"undefined"!=typeof $localize&&$localize.locale||Pm}()},deps:[[new mh(Ao),new pr,new xa]]},{provide:nI,useValue:"USD"}];let _8=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)($(gu))},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({providers:g8}),n})(),Wm=null;function Ks(){return Wm}const ct=new ye("DocumentToken");let El=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:function(){return function w8(){return $(EI)}()},providedIn:"platform"}),n})();const M8=new ye("Location Initialized");let EI=(()=>{class n extends El{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ks().getBaseHref(this._doc)}onPopState(t){const i=Ks().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Ks().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){DI()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){DI()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)($(ct))},n.\u0275prov=he({token:n,factory:function(){return function C8(){return new EI($(ct))}()},providedIn:"platform"}),n})();function DI(){return!!window.history.pushState}function Zx(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function AI(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function To(n){return n&&"?"!==n[0]?"?"+n:n}let yu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:function(){return function S8(n){const e=$(ct).location;return new TI($(El),e&&e.origin||"")}()},providedIn:"root"}),n})();const Kx=new ye("appBaseHref");let TI=(()=>{class n extends yu{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Zx(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+To(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+To(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+To(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)($(El),$(Kx,8))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})(),E8=(()=>{class n extends yu{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Zx(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+To(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+To(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)($(El),$(Kx,8))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})(),_u=(()=>{class n{constructor(t,i){this._subject=new nt,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=AI(II(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+To(i))}normalize(t){return n.stripTrailingSlash(function A8(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,II(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+To(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+To(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=To,n.joinWithSlash=Zx,n.stripTrailingSlash=AI,n.\u0275fac=function(t){return new(t||n)($(yu),$(El))},n.\u0275prov=he({token:n,factory:function(){return function D8(){return new _u($(yu),$(El))}()},providedIn:"root"}),n})();function II(n){return n.replace(/\/index.html$/,"")}var qn=(()=>((qn=qn||{})[qn.Zero=0]="Zero",qn[qn.One=1]="One",qn[qn.Two=2]="Two",qn[qn.Few=3]="Few",qn[qn.Many=4]="Many",qn[qn.Other=5]="Other",qn))();const k8=function jA(n){return function rr(n){const e=function b5(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=WA(e);if(t)return t;const i=e.split("-")[0];if(t=WA(i),t)return t;if("en"===i)return x5;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[Ae.PluralCase]};class tg{}let uj=(()=>{class n extends tg{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(k8(i||this.locale)(t)){case qn.Zero:return"zero";case qn.One:return"one";case qn.Two:return"two";case qn.Few:return"few";case qn.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)($(Ao))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})(),Dl=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Eh(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Wt(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(b(Ss),b(Sa),b(ke),b(Ms))},n.\u0275dir=W({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class fj{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vu=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new fj(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),VI(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{VI(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(b(Wn),b(oi),b(Ss))},n.\u0275dir=W({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function VI(n,e){n.context.$implicit=e.item}let Ro=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new pj,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){HI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){HI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(b(Wn),b(oi))},n.\u0275dir=W({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class pj{constructor(){this.$implicit=null,this.ngIf=null}}function HI(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Wt(e)}'.`)}let jh=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw function Ds(n,e){return new At(2100,"")}();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=Ji({name:"uppercase",type:n,pure:!0}),n})(),Er=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({providers:[{provide:tg,useClass:uj}]}),n})();const WI="browser";function Al(n){return n===WI}function xu(n){return"server"===n}let Vj=(()=>{class n{}return n.\u0275prov=he({token:n,providedIn:"root",factory:()=>new Hj($(ct),window)}),n})();class Hj{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function zj(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=$I(this.window.history)||$I(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function $I(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class db extends class Gj extends class b8{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function x8(n){Wm||(Wm=n)}(new db)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function jj(){return Wh=Wh||document.querySelector("base"),Wh?Wh.getAttribute("href"):null}();return null==t?null:function Wj(n){ig=ig||document.createElement("a"),ig.setAttribute("href",n);const e=ig.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function dj(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ig,Wh=null;const qI=new ye("TRANSITION_ID"),qj=[{provide:Um,useFactory:function $j(n,e,t){return()=>{t.get(mu).donePromise.then(()=>{const i=Ks(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[qI,ct,mi],multi:!0}];class hb{static init(){!function H6(n){Wx=n}(new hb)}addToWindow(e){on.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},on.getAllAngularTestabilities=()=>e.getAllTestabilities(),on.getAllAngularRootElements=()=>e.getAllRootElements(),on.frameworkStabilizers||(on.frameworkStabilizers=[]),on.frameworkStabilizers.push(i=>{const r=on.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?Ks().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Yj=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();const rg=new ye("EventManagerPlugins");let sg=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)($(rg),$(xt))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();class YI{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Ks().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let XI=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})(),$h=(()=>{class n extends XI{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(QI),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(QI))}}return n.\u0275fac=function(t){return new(t||n)($(ct))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();function QI(n){Ks().remove(n)}const fb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},pb=/%COMP%/g;function og(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?og(n,r,t):(r=r.replace(pb,n),t.push(r))}return t}function JI(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ag=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new mb(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case fs.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new eW(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case fs.ShadowDom:return new tW(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=og(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)($(sg),$($h),$(Hh))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();class mb{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(fb[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=fb[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=fb[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Mr.DashCase|Mr.Important)?e.style.setProperty(t,i,r&Mr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Mr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,JI(i)):this.eventManager.addEventListener(e,t,JI(i))}}class eW extends mb{constructor(e,t,i,r){super(e),this.component=i;const s=og(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function Zj(n){return"_ngcontent-%COMP%".replace(pb,n)}(r+"-"+i.id),this.hostAttr=function Kj(n){return"_nghost-%COMP%".replace(pb,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class tW extends mb{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=og(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let nW=(()=>{class n extends YI{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)($(ct))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();const tR=["alt","control","meta","shift"],rW={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nR={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},sW={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let oW=(()=>{class n extends YI{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ks().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(tR.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function aW(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&nR.hasOwnProperty(e)&&(e=nR[e]))}return rW[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),tR.forEach(s=>{s!=r&&sW[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)($(ct))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();const dW=lI(d8,"browser",[{provide:Yr,useValue:WI},{provide:eI,useValue:function lW(){db.makeCurrent(),hb.init()},multi:!0},{provide:ct,useFactory:function uW(){return function CV(n){Hv=n}(document),document},deps:[]}]),hW=[{provide:nx,useValue:"root"},{provide:wo,useFactory:function cW(){return new wo},deps:[]},{provide:rg,useClass:nW,multi:!0,deps:[ct,xt,Yr]},{provide:rg,useClass:oW,multi:!0,deps:[ct]},{provide:ag,useClass:ag,deps:[sg,$h,Hh]},{provide:Fh,useExisting:ag},{provide:XI,useExisting:$h},{provide:$h,useClass:$h,deps:[ct]},{provide:jx,useClass:jx,deps:[xt]},{provide:sg,useClass:sg,deps:[rg,xt]},{provide:class Uj{},useClass:Yj,deps:[]}];let iR=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Hh,useValue:t.appId},{provide:qI,useExisting:Hh},qj]}}}return n.\u0275fac=function(t){return new(t||n)($(n,12))},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({providers:hW,imports:[Er,_8]}),n})();function aR(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}"undefined"!=typeof window&&window;const Gi=1001,Qn=1003,Hn=1006,Po=1009,Qh=1012,Oo=1015,Tl=1016,Du=1020,Il=1022,li=1023,Rl=1026,Au=1027,Tu=2400,Iu=2401,As=3e3,Ru=3001,Zh=35044,Kh=35048;class Pl{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Si=[];for(let n=0;n<256;n++)Si[n]=(n<16?"0":"")+n.toString(16);const Ol=Math.PI/180,Jh=180/Math.PI;function Dr(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Si[255&n]+Si[n>>8&255]+Si[n>>16&255]+Si[n>>24&255]+"-"+Si[255&e]+Si[e>>8&255]+"-"+Si[e>>16&15|64]+Si[e>>24&255]+"-"+Si[63&t|128]+Si[t>>8&255]+"-"+Si[t>>16&255]+Si[t>>24&255]+Si[255&i]+Si[i>>8&255]+Si[i>>16&255]+Si[i>>24&255]).toUpperCase()}function Ei(n,e,t){return Math.max(e,Math.min(t,n))}function ef(n,e,t){return(1-t)*n+t*e}function Eb(n){return 0==(n&n-1)&&0!==n}function PR(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class se{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}se.prototype.isVector2=!0;class gi{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],g=r[0],_=r[3],y=r[6],m=r[1],x=r[4],v=r[7],M=r[2],D=r[5],R=r[8];return s[0]=o*g+a*m+l*M,s[3]=o*_+a*x+l*D,s[6]=o*y+a*v+l*R,s[1]=c*g+u*m+d*M,s[4]=c*_+u*x+d*D,s[7]=c*y+u*v+d*R,s[2]=h*g+f*m+p*M,s[5]=h*_+f*x+p*D,s[8]=h*y+f*v+p*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,p=t*d+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=d*g,e[1]=(r*c-u*i)*g,e[2]=(a*i-r*o)*g,e[3]=h*g,e[4]=(u*t-r*l)*g,e[5]=(r*s-a*t)*g,e[6]=f*g,e[7]=(i*l-c*t)*g,e[8]=(o*t-i*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+i*l,r[3]=t*o+i*c,r[6]=t*a+i*u,r[1]=-i*s+t*l,r[4]=-i*o+t*c,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function OR(n){if(0===n.length)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}function xg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}let Fu;gi.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;class ku{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Fu&&(Fu=xg("canvas")),Fu.width=e.width,Fu.height=e.height;const i=Fu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Fu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let h7=0;class ci extends Pl{constructor(e=ci.DEFAULT_IMAGE,t=ci.DEFAULT_MAPPING,i=Gi,r=Gi,s=Hn,o=1008,a=li,l=Po,c=1,u=As){super(),Object.defineProperty(this,"id",{value:h7++}),this.uuid=Dr(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new se(0,0),this.repeat=new se(1,1),this.center=new se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=Dr()),!t&&void 0===e.images[r.uuid]){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(Db(r[o].isDataTexture?r[o].image:r[o]))}else s=Db(r);e.images[r.uuid]={uuid:r.uuid,url:s}}i.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case Gi:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case Gi:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function Db(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?ku.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}ci.DEFAULT_IMAGE=void 0,ci.DEFAULT_MAPPING=300,ci.prototype.isTexture=!0;class an{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const o=.01,a=.1,l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],g=l[2],_=l[6],y=l[10];if(Math.abs(u-h)<o&&Math.abs(d-g)<o&&Math.abs(p-_)<o){if(Math.abs(u+h)<a&&Math.abs(d+g)<a&&Math.abs(p+_)<a&&Math.abs(c+f+y-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,v=(f+1)/2,M=(y+1)/2,D=(u+h)/4,R=(d+g)/4,B=(p+_)/4;return x>v&&x>M?x<o?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=D/i,s=R/i):v>M?v<o?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(v),i=D/r,s=B/r):M<o?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(M),i=R/s,r=B/s),this.set(i,r,s,t),this}let m=Math.sqrt((_-p)*(_-p)+(d-g)*(d-g)+(h-u)*(h-u));return Math.abs(m)<.001&&(m=1),this.x=(_-p)/m,this.y=(d-g)/m,this.z=(h-u)/m,this.w=Math.acos((c+f+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}an.prototype.isVector4=!0;class Zr extends Pl{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new an(0,0,e,t),this.scissorTest=!1,this.viewport=new an(0,0,e,t),this.texture=new ci(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Hn,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=nV({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Zr.prototype.isWebGLRenderTarget=!0,class f7 extends Zr{constructor(e,t,i){super(e,t);const r=this.texture;this.texture=[];for(let s=0;s<i;s++)this.texture[s]=r.clone()}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class Ab extends Zr{constructor(e,t,i={}){super(e,t,i),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===i.ignoreDepth||i.ignoreDepth,this.useRenderToTexture=void 0!==i.useRenderToTexture&&i.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}Ab.prototype.isWebGLMultisampleRenderTarget=!0;class Di{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],g=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=g);if(d!==g||l!==h||c!==f||u!==p){let _=1-a;const y=l*h+c*f+u*p+d*g,m=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const M=Math.sqrt(x),D=Math.atan2(M,y*m);_=Math.sin(_*D)/M,a=Math.sin(a*D)/M}const v=a*m;if(l=l*_+h*v,c=c*_+f*v,u=u*_+p*v,d=d*_+g*v,_===1-a){const M=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=M,c*=M,u*=M,d*=M}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+l*f-c*h,e[t+1]=l*p+u*h+c*d-a*f,e[t+2]=c*p+u*f+a*h-l*d,e[t+3]=u*p-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),h=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ei(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Di.prototype.isQuaternion=!0;class S{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(FR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(FR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,d=l*r+s*i-o*t,h=-s*t-o*i-a*r;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Tb.copy(this).projectOnVector(e),this.sub(Tb)}reflect(e){return this.sub(Tb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ei(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}S.prototype.isVector3=!0;const Tb=new S,FR=new Di;class Kr{constructor(e=new S(1/0,1/0,1/0),t=new S(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=tf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Ib.copy(t.boundingBox),Ib.applyMatrix4(e.matrixWorld),this.union(Ib));const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,tf),tf.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(nf),bg.subVectors(this.max,nf),Lu.subVectors(e.a,nf),Nu.subVectors(e.b,nf),Bu.subVectors(e.c,nf),Ta.subVectors(Nu,Lu),Ia.subVectors(Bu,Nu),Fl.subVectors(Lu,Bu);let t=[0,-Ta.z,Ta.y,0,-Ia.z,Ia.y,0,-Fl.z,Fl.y,Ta.z,0,-Ta.x,Ia.z,0,-Ia.x,Fl.z,0,-Fl.x,-Ta.y,Ta.x,0,-Ia.y,Ia.x,0,-Fl.y,Fl.x,0];return!(!Rb(t,Lu,Nu,Bu,bg)||(t=[1,0,0,0,1,0,0,0,1],!Rb(t,Lu,Nu,Bu,bg)))&&(wg.crossVectors(Ta,Ia),t=[wg.x,wg.y,wg.z],Rb(t,Lu,Nu,Bu,bg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return tf.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(tf).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Fo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Kr.prototype.isBox3=!0;const Fo=[new S,new S,new S,new S,new S,new S,new S,new S],tf=new S,Ib=new Kr,Lu=new S,Nu=new S,Bu=new S,Ta=new S,Ia=new S,Fl=new S,nf=new S,bg=new S,wg=new S,kl=new S;function Rb(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){kl.fromArray(n,s);const a=r.x*Math.abs(kl.x)+r.y*Math.abs(kl.y)+r.z*Math.abs(kl.z),l=e.dot(kl),c=t.dot(kl),u=i.dot(kl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const p7=new Kr,kR=new S,Mg=new S,Pb=new S;class Ll{constructor(e=new S,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):p7.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Pb.subVectors(e,this.center);const t=Pb.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(Pb.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return!0===this.center.equals(e.center)?Mg.set(0,0,1).multiplyScalar(e.radius):Mg.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(kR.copy(e.center).add(Mg)),this.expandByPoint(kR.copy(e.center).sub(Mg)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ko=new S,Ob=new S,Cg=new S,Ra=new S,Fb=new S,Sg=new S,kb=new S;class Nl{constructor(e=new S,t=new S(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ko)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ko.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ko.copy(this.direction).multiplyScalar(t).add(this.origin),ko.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Ob.copy(e).add(t).multiplyScalar(.5),Cg.copy(t).sub(e).normalize(),Ra.copy(this.origin).sub(Ob);const s=.5*e.distanceTo(t),o=-this.direction.dot(Cg),a=Ra.dot(this.direction),l=-Ra.dot(Cg),c=Ra.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*l-a,h=o*a-l,p=s*u,d>=0)if(h>=-p)if(h<=p){const g=1/u;d*=g,h*=g,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(Cg).multiplyScalar(h).add(Ob),f}intersectSphere(e,t){ko.subVectors(e.center,this.origin);const i=ko.dot(this.direction),r=ko.dot(ko)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,ko)}intersectTriangle(e,t,i,r,s){Fb.subVectors(t,e),Sg.subVectors(i,e),kb.crossVectors(Fb,Sg);let a,o=this.direction.dot(kb);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ra.subVectors(this.origin,e);const l=a*this.direction.dot(Sg.crossVectors(Ra,Sg));if(l<0)return null;const c=a*this.direction.dot(Fb.cross(Ra));if(c<0||l+c>o)return null;const u=-a*Ra.dot(kb);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ve{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c,u,d,h,f,p,g,_){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=d,y[14]=h,y[3]=f,y[7]=p,y[11]=g,y[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ve).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Vu.setFromMatrixColumn(e,0).length(),s=1/Vu.setFromMatrixColumn(e,1).length(),o=1/Vu.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,p=a*u,g=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+p*c,t[5]=h-g*c,t[9]=-a*l,t[2]=g-h*c,t[6]=p+f*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*u,f=l*d,p=c*u,g=c*d;t[0]=h+g*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=g+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*u,f=l*d,p=c*u,g=c*d;t[0]=h-g*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=g-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*u,f=o*d,p=a*u,g=a*d;t[0]=l*u,t[4]=p*c-f,t[8]=h*c+g,t[1]=l*d,t[5]=g*c+h,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,f=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=g-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+p,t[10]=h-g*d}else if("XZY"===e.order){const h=o*l,f=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+g,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=g*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(m7,e,g7)}lookAt(e,t,i){const r=this.elements;return Ar.subVectors(e,t),0===Ar.lengthSq()&&(Ar.z=1),Ar.normalize(),Pa.crossVectors(i,Ar),0===Pa.lengthSq()&&(1===Math.abs(i.z)?Ar.x+=1e-4:Ar.z+=1e-4,Ar.normalize(),Pa.crossVectors(i,Ar)),Pa.normalize(),Eg.crossVectors(Ar,Pa),r[0]=Pa.x,r[4]=Eg.x,r[8]=Ar.x,r[1]=Pa.y,r[5]=Eg.y,r[9]=Ar.y,r[2]=Pa.z,r[6]=Eg.z,r[10]=Ar.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],g=i[6],_=i[10],y=i[14],m=i[3],x=i[7],v=i[11],M=i[15],D=r[0],R=r[4],B=r[8],Y=r[12],U=r[1],H=r[5],E=r[9],T=r[13],z=r[2],q=r[6],L=r[10],V=r[14],J=r[3],le=r[7],Q=r[11],ee=r[15];return s[0]=o*D+a*U+l*z+c*J,s[4]=o*R+a*H+l*q+c*le,s[8]=o*B+a*E+l*L+c*Q,s[12]=o*Y+a*T+l*V+c*ee,s[1]=u*D+d*U+h*z+f*J,s[5]=u*R+d*H+h*q+f*le,s[9]=u*B+d*E+h*L+f*Q,s[13]=u*Y+d*T+h*V+f*ee,s[2]=p*D+g*U+_*z+y*J,s[6]=p*R+g*H+_*q+y*le,s[10]=p*B+g*E+_*L+y*Q,s[14]=p*Y+g*T+_*V+y*ee,s[3]=m*D+x*U+v*z+M*J,s[7]=m*R+x*H+v*q+M*le,s[11]=m*B+x*E+v*L+M*Q,s[15]=m*Y+x*T+v*V+M*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*l*d-r*c*d-s*a*h+i*c*h+r*a*f-i*l*f)+e[7]*(+t*l*f-t*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*f-s*o*d+i*o*f+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*d+t*a*h+r*o*d-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],_=e[14],y=e[15],m=d*_*c-g*h*c+g*l*f-a*_*f-d*l*y+a*h*y,x=p*h*c-u*_*c-p*l*f+o*_*f+u*l*y-o*h*y,v=u*g*c-p*d*c+p*a*f-o*g*f-u*a*y+o*d*y,M=p*d*l-u*g*l-p*a*h+o*g*h+u*a*_-o*d*_,D=t*m+i*x+r*v+s*M;if(0===D)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/D;return e[0]=m*R,e[1]=(g*h*s-d*_*s-g*r*f+i*_*f+d*r*y-i*h*y)*R,e[2]=(a*_*s-g*l*s+g*r*c-i*_*c-a*r*y+i*l*y)*R,e[3]=(d*l*s-a*h*s-d*r*c+i*h*c+a*r*f-i*l*f)*R,e[4]=x*R,e[5]=(u*_*s-p*h*s+p*r*f-t*_*f-u*r*y+t*h*y)*R,e[6]=(p*l*s-o*_*s-p*r*c+t*_*c+o*r*y-t*l*y)*R,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*f+t*l*f)*R,e[8]=v*R,e[9]=(p*d*s-u*g*s-p*i*f+t*g*f+u*i*y-t*d*y)*R,e[10]=(o*g*s-p*a*s+p*i*c-t*g*c-o*i*y+t*a*y)*R,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*f-t*a*f)*R,e[12]=M*R,e[13]=(u*g*r-p*d*r+p*i*h-t*g*h-u*i*_+t*d*_)*R,e[14]=(p*a*r-o*g*r-p*i*l+t*g*l+o*i*_-t*a*_)*R,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*h+t*a*h)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,p=s*d,g=o*u,_=o*d,y=a*d,m=l*c,x=l*u,v=l*d,M=i.x,D=i.y,R=i.z;return r[0]=(1-(g+y))*M,r[1]=(f+v)*M,r[2]=(p-x)*M,r[3]=0,r[4]=(f-v)*D,r[5]=(1-(h+y))*D,r[6]=(_+m)*D,r[7]=0,r[8]=(p+x)*R,r[9]=(_-m)*R,r[10]=(1-(h+g))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Vu.set(r[0],r[1],r[2]).length();const o=Vu.set(r[4],r[5],r[6]).length(),a=Vu.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ts.copy(this);const c=1/s,u=1/o,d=1/a;return Ts.elements[0]*=c,Ts.elements[1]*=c,Ts.elements[2]*=c,Ts.elements[4]*=u,Ts.elements[5]*=u,Ts.elements[6]*=u,Ts.elements[8]*=d,Ts.elements[9]*=d,Ts.elements[10]*=d,t.setFromRotationMatrix(Ts),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(i-r),u=(t+e)/(t-e),d=(i+r)/(i-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),c=1/(i-r),u=1/(o-s),d=(t+e)*l,h=(i+r)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}Ve.prototype.isMatrix4=!0;const Vu=new S,Ts=new Ve,m7=new S(0,0,0),g7=new S(1,1,1),Pa=new S,Eg=new S,Ar=new S,LR=new Ve,NR=new Di;class Hu{constructor(e=0,t=0,i=0,r=Hu.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],d=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(Ei(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ei(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ei(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ei(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Ei(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Ei(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return LR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(LR,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return NR.setFromEuler(this),this.setFromQuaternion(NR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new S(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Hu.prototype.isEuler=!0,Hu.DefaultOrder="XYZ",Hu.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Lb{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let y7=0;const BR=new S,zu=new Di,Lo=new Ve,Dg=new S,rf=new S,_7=new S,v7=new Di,VR=new S(1,0,0),HR=new S(0,1,0),zR=new S(0,0,1),x7={type:"added"},UR={type:"removed"};class tn extends Pl{constructor(){super(),Object.defineProperty(this,"id",{value:y7++}),this.uuid=Dr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=tn.DefaultUp.clone();const e=new S,t=new Hu,i=new Di,r=new S(1,1,1);t._onChange(function s(){i.setFromEuler(t,!1)}),i._onChange(function o(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ve},normalMatrix:{value:new gi}}),this.matrix=new Ve,this.matrixWorld=new Ve,this.matrixAutoUpdate=tn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Lb,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return zu.setFromAxisAngle(e,t),this.quaternion.multiply(zu),this}rotateOnWorldAxis(e,t){return zu.setFromAxisAngle(e,t),this.quaternion.premultiply(zu),this}rotateX(e){return this.rotateOnAxis(VR,e)}rotateY(e){return this.rotateOnAxis(HR,e)}rotateZ(e){return this.rotateOnAxis(zR,e)}translateOnAxis(e,t){return BR.copy(e).applyQuaternion(this.quaternion),this.position.add(BR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(VR,e)}translateY(e){return this.translateOnAxis(HR,e)}translateZ(e){return this.translateOnAxis(zR,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Lo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Dg.copy(e):Dg.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),rf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Lo.lookAt(rf,Dg,this.up):Lo.lookAt(Dg,rf,this.up),this.quaternion.setFromRotationMatrix(Lo),r&&(Lo.extractRotation(r.matrixWorld),zu.setFromRotationMatrix(Lo),this.quaternion.premultiply(zu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(x7)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(UR)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(UR)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Lo.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Lo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Lo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(void 0!==o)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rf,e,_7),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rf,v7,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function s(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++)s(e.shapes,l[c]);else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++)r.animations.push(s(e.animations,this.animations[a]))}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),f=o(e.animations);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),f.length>0&&(i.animations=f)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let i=0;i<e.children.length;i++)this.add(e.children[i].clone());return this}}tn.DefaultUp=new S(0,1,0),tn.DefaultMatrixAutoUpdate=!0,tn.prototype.isObject3D=!0;const Is=new S,No=new S,Nb=new S,Bo=new S,Uu=new S,Gu=new S,GR=new S,Bb=new S,Vb=new S,Hb=new S;class Zn{constructor(e=new S,t=new S,i=new S){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Is.subVectors(e,t),r.cross(Is);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Is.subVectors(r,t),No.subVectors(i,t),Nb.subVectors(e,t);const o=Is.dot(Is),a=Is.dot(No),l=Is.dot(Nb),c=No.dot(No),u=No.dot(Nb),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Bo),Bo.x>=0&&Bo.y>=0&&Bo.x+Bo.y<=1}static getUV(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Bo),l.set(0,0),l.addScaledVector(s,Bo.x),l.addScaledVector(o,Bo.y),l.addScaledVector(a,Bo.z),l}static isFrontFacing(e,t,i,r){return Is.subVectors(i,t),No.subVectors(e,t),Is.cross(No).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Is.subVectors(this.c,this.b),No.subVectors(this.a,this.b),.5*Is.cross(No).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Zn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Zn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Zn.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Zn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Zn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Uu.subVectors(r,i),Gu.subVectors(s,i),Bb.subVectors(e,i);const l=Uu.dot(Bb),c=Gu.dot(Bb);if(l<=0&&c<=0)return t.copy(i);Vb.subVectors(e,r);const u=Uu.dot(Vb),d=Gu.dot(Vb);if(u>=0&&d<=u)return t.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Uu,o);Hb.subVectors(e,s);const f=Uu.dot(Hb),p=Gu.dot(Hb);if(p>=0&&f<=p)return t.copy(s);const g=f*c-l*p;if(g<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(Gu,a);const _=u*p-f*d;if(_<=0&&d-u>=0&&f-p>=0)return GR.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(GR,a);const y=1/(_+g+h);return o=g*y,a=h*y,t.copy(i).addScaledVector(Uu,o).addScaledVector(Gu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let b7=0;class Ai extends Pl{constructor(){super(),Object.defineProperty(this,"id",{value:b7++}),this.uuid=Dr(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.format=li,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==li&&(i.format=this.format),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Ai.prototype.isMaterial=!0;const jR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Rs={h:0,s:0,l:0},Ag={h:0,s:0,l:0};function zb(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function Ub(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Gb(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Pe=(()=>{class n{constructor(t,i,r){return void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,i,r){return this.r=t,this.g=i,this.b=r,this}setHSL(t,i,r){if(t=function Sb(n,e){return(n%e+e)%e}(t,1),i=Ei(i,0,1),r=Ei(r,0,1),0===i)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+i):r+i-r*i,o=2*r-s;this.r=zb(o,s,t+1/3),this.g=zb(o,s,t),this.b=zb(o,s,t-1/3)}return this}setStyle(t){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseInt(s[2],10)/100,u=parseInt(s[3],10)/100;return i(s[4]),this.setHSL(l,c,u)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=r[1],o=s.length;if(3===o)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(6===o)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const i=jR[t.toLowerCase()];return void 0!==i?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ub(t.r),this.g=Ub(t.g),this.b=Ub(t.b),this}copyLinearToSRGB(t){return this.r=Gb(t.r),this.g=Gb(t.g),this.b=Gb(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const i=this.r,r=this.g,s=this.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4}l/=6}return t.h=l,t.s=c,t.l=u,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,i,r){return this.getHSL(Rs),Rs.h+=t,Rs.s+=i,Rs.l+=r,this.setHSL(Rs.h,Rs.s,Rs.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(Rs),t.getHSL(Ag);const r=ef(Rs.h,Ag.h,i),s=ef(Rs.s,Ag.s,i),o=ef(Rs.l,Ag.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return n.NAMES=jR,n})();Pe.prototype.isColor=!0,Pe.prototype.r=1,Pe.prototype.g=1,Pe.prototype.b=1;class Oa extends Ai{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Oa.prototype.isMeshBasicMaterial=!0;const mn=new S,Tg=new se;class dn{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=Zh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Pe),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new se),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new S),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new an),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Tg.fromBufferAttribute(this,t),Tg.applyMatrix3(e),this.setXY(t,Tg.x,Tg.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)mn.fromBufferAttribute(this,t),mn.applyMatrix3(e),this.setXYZ(t,mn.x,mn.y,mn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)mn.x=this.getX(t),mn.y=this.getY(t),mn.z=this.getZ(t),mn.applyMatrix4(e),this.setXYZ(t,mn.x,mn.y,mn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)mn.x=this.getX(t),mn.y=this.getY(t),mn.z=this.getZ(t),mn.applyNormalMatrix(e),this.setXYZ(t,mn.x,mn.y,mn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)mn.x=this.getX(t),mn.y=this.getY(t),mn.z=this.getZ(t),mn.transformDirection(e),this.setXYZ(t,mn.x,mn.y,mn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Zh&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}dn.prototype.isBufferAttribute=!0;class jb extends dn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Wb extends dn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}(class D7 extends dn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}).prototype.isFloat16BufferAttribute=!0;class He extends dn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let T7=0;const Jr=new Ve,$b=new tn,ju=new S,Tr=new Kr,sf=new Kr,yi=new S;class et extends Pl{constructor(){super(),Object.defineProperty(this,"id",{value:T7++}),this.uuid=Dr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(OR(e)>65535?Wb:jb)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new gi).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Jr.makeRotationFromQuaternion(e),this.applyMatrix4(Jr),this}rotateX(e){return Jr.makeRotationX(e),this.applyMatrix4(Jr),this}rotateY(e){return Jr.makeRotationY(e),this.applyMatrix4(Jr),this}rotateZ(e){return Jr.makeRotationZ(e),this.applyMatrix4(Jr),this}translate(e,t,i){return Jr.makeTranslation(e,t,i),this.applyMatrix4(Jr),this}scale(e,t,i){return Jr.makeScale(e,t,i),this.applyMatrix4(Jr),this}lookAt(e){return $b.lookAt(e),$b.updateMatrix(),this.applyMatrix4($b.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ju).negate(),this.translate(ju.x,ju.y,ju.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new He(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Kr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new S(-1/0,-1/0,-1/0),new S(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Tr.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(yi.addVectors(this.boundingBox.min,Tr.min),this.boundingBox.expandByPoint(yi),yi.addVectors(this.boundingBox.max,Tr.max),this.boundingBox.expandByPoint(yi)):(this.boundingBox.expandByPoint(Tr.min),this.boundingBox.expandByPoint(Tr.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ll);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new S,1/0);if(e){const i=this.boundingSphere.center;if(Tr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)sf.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(yi.addVectors(Tr.min,sf.min),Tr.expandByPoint(yi),yi.addVectors(Tr.max,sf.max),Tr.expandByPoint(yi)):(Tr.expandByPoint(sf.min),Tr.expandByPoint(sf.max));Tr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)yi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(yi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)yi.fromBufferAttribute(a,c),l&&(ju.fromBufferAttribute(e,c),yi.add(ju)),r=Math.max(r,i.distanceToSquared(yi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new dn(new Float32Array(4*a),4));const l=t.tangent.array,c=[],u=[];for(let U=0;U<a;U++)c[U]=new S,u[U]=new S;const d=new S,h=new S,f=new S,p=new se,g=new se,_=new se,y=new S,m=new S;function x(U,H,E){d.fromArray(r,3*U),h.fromArray(r,3*H),f.fromArray(r,3*E),p.fromArray(o,2*U),g.fromArray(o,2*H),_.fromArray(o,2*E),h.sub(d),f.sub(d),g.sub(p),_.sub(p);const T=1/(g.x*_.y-_.x*g.y);!isFinite(T)||(y.copy(h).multiplyScalar(_.y).addScaledVector(f,-g.y).multiplyScalar(T),m.copy(f).multiplyScalar(g.x).addScaledVector(h,-_.x).multiplyScalar(T),c[U].add(y),c[H].add(y),c[E].add(y),u[U].add(m),u[H].add(m),u[E].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:i.length}]);for(let U=0,H=v.length;U<H;++U){const E=v[U],T=E.start;for(let q=T,L=T+E.count;q<L;q+=3)x(i[q+0],i[q+1],i[q+2])}const M=new S,D=new S,R=new S,B=new S;function Y(U){R.fromArray(s,3*U),B.copy(R);const H=c[U];M.copy(H),M.sub(R.multiplyScalar(R.dot(H))).normalize(),D.crossVectors(B,H);const T=D.dot(u[U])<0?-1:1;l[4*U]=M.x,l[4*U+1]=M.y,l[4*U+2]=M.z,l[4*U+3]=T}for(let U=0,H=v.length;U<H;++U){const E=v[U],T=E.start;for(let q=T,L=T+E.count;q<L;q+=3)Y(i[q+0]),Y(i[q+1]),Y(i[q+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new dn(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new S,s=new S,o=new S,a=new S,l=new S,c=new S,u=new S,d=new S;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),g=e.getX(h+1),_=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,_),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,_),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(void 0===e.attributes[r])continue;const o=i[r].array,a=e.attributes[r],l=a.array,c=a.itemSize*t,u=Math.min(l.length,o.length-c);for(let d=0,h=c;d<u;d++,h++)o[h]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)yi.fromBufferAttribute(e,t),yi.normalize(),e.setXYZ(t,yi.x,yi.y,yi.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let g=0,_=l.length;g<_;g++){f=a.isInterleavedBufferAttribute?l[g]*a.data.stride+a.offset:l[g]*u;for(let y=0;y<u;y++)h[p++]=c[f++]}return new dn(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new et,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}et.prototype.isBufferGeometry=!0;const WR=new Ve,Wu=new Nl,qb=new Ll,Fa=new S,ka=new S,La=new S,Yb=new S,Xb=new S,Qb=new S,Ig=new S,Rg=new S,Pg=new S,Og=new se,Fg=new se,kg=new se,Zb=new S,Lg=new S;class _i extends tn{constructor(e=new et,t=new Oa){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),qb.copy(i.boundingSphere),qb.applyMatrix4(s),!1===e.ray.intersectsSphere(qb))||(WR.copy(s).invert(),Wu.copy(e.ray).applyMatrix4(WR),null!==i.boundingBox&&!1===Wu.intersectsBox(i.boundingBox)))return;let o;if(i.isBufferGeometry){const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,d=i.attributes.uv,h=i.attributes.uv2,f=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(r))for(let g=0,_=f.length;g<_;g++){const y=f[g],m=r[y.materialIndex];for(let M=Math.max(y.start,p.start),D=Math.min(a.count,Math.min(y.start+y.count,p.start+p.count));M<D;M+=3){const R=a.getX(M),B=a.getX(M+1),Y=a.getX(M+2);o=Ng(this,m,e,Wu,l,c,u,d,h,R,B,Y),o&&(o.faceIndex=Math.floor(M/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else for(let y=Math.max(0,p.start),m=Math.min(a.count,p.start+p.count);y<m;y+=3){const x=a.getX(y),v=a.getX(y+1),M=a.getX(y+2);o=Ng(this,r,e,Wu,l,c,u,d,h,x,v,M),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let g=0,_=f.length;g<_;g++){const y=f[g],m=r[y.materialIndex];for(let M=Math.max(y.start,p.start),D=Math.min(l.count,Math.min(y.start+y.count,p.start+p.count));M<D;M+=3)o=Ng(this,m,e,Wu,l,c,u,d,h,M,M+1,M+2),o&&(o.faceIndex=Math.floor(M/3),o.face.materialIndex=y.materialIndex,t.push(o))}else for(let y=Math.max(0,p.start),m=Math.min(l.count,p.start+p.count);y<m;y+=3)o=Ng(this,r,e,Wu,l,c,u,d,h,y,y+1,y+2),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Ng(n,e,t,i,r,s,o,a,l,c,u,d){Fa.fromBufferAttribute(r,c),ka.fromBufferAttribute(r,u),La.fromBufferAttribute(r,d);const h=n.morphTargetInfluences;if(s&&h){Ig.set(0,0,0),Rg.set(0,0,0),Pg.set(0,0,0);for(let p=0,g=s.length;p<g;p++){const _=h[p],y=s[p];0!==_&&(Yb.fromBufferAttribute(y,c),Xb.fromBufferAttribute(y,u),Qb.fromBufferAttribute(y,d),o?(Ig.addScaledVector(Yb,_),Rg.addScaledVector(Xb,_),Pg.addScaledVector(Qb,_)):(Ig.addScaledVector(Yb.sub(Fa),_),Rg.addScaledVector(Xb.sub(ka),_),Pg.addScaledVector(Qb.sub(La),_)))}Fa.add(Ig),ka.add(Rg),La.add(Pg)}n.isSkinnedMesh&&(n.boneTransform(c,Fa),n.boneTransform(u,ka),n.boneTransform(d,La));const f=function I7(n,e,t,i,r,s,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===l)return null;Lg.copy(a),Lg.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Lg);return c<t.near||c>t.far?null:{distance:c,point:Lg.clone(),object:n}}(n,e,t,i,Fa,ka,La,Zb);if(f){a&&(Og.fromBufferAttribute(a,c),Fg.fromBufferAttribute(a,u),kg.fromBufferAttribute(a,d),f.uv=Zn.getUV(Zb,Fa,ka,La,Og,Fg,kg,new se)),l&&(Og.fromBufferAttribute(l,c),Fg.fromBufferAttribute(l,u),kg.fromBufferAttribute(l,d),f.uv2=Zn.getUV(Zb,Fa,ka,La,Og,Fg,kg,new se));const p={a:c,b:u,c:d,normal:new S,materialIndex:0};Zn.getNormal(Fa,ka,La,p.normal),f.face=p}return f}_i.prototype.isMesh=!0;class Bl extends et{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function p(g,_,y,m,x,v,M,D,R,B,Y){const U=v/R,H=M/B,E=v/2,T=M/2,z=D/2,q=R+1,L=B+1;let V=0,J=0;const le=new S;for(let Q=0;Q<L;Q++){const ee=Q*H-T;for(let _e=0;_e<q;_e++)le[g]=(_e*U-E)*m,le[_]=ee*x,le[y]=z,c.push(le.x,le.y,le.z),le[g]=0,le[_]=0,le[y]=D>0?1:-1,u.push(le.x,le.y,le.z),d.push(_e/R),d.push(1-Q/B),V+=1}for(let Q=0;Q<B;Q++)for(let ee=0;ee<R;ee++){const xe=h+ee+q*(Q+1),ge=h+(ee+1)+q*(Q+1),Dt=h+(ee+1)+q*Q;l.push(h+ee+q*Q,xe,Dt),l.push(xe,ge,Dt),J+=6}a.addGroup(f,J,Y),f+=J,h+=V}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new He(c,3)),this.setAttribute("normal",new He(u,3)),this.setAttribute("uv",new He(d,2))}static fromJSON(e){return new Bl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function $u(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function ji(n){const e={};for(let t=0;t<n.length;t++){const i=$u(n[t]);for(const r in i)e[r]=i[r]}return e}const R7={clone:$u,merge:ji};class Na extends Ai{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$u(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}Na.prototype.isShaderMaterial=!0;class Bg extends tn{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Ve,this.projectionMatrix=new Ve,this.projectionMatrixInverse=new Ve}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Bg.prototype.isCamera=!0;class Ti extends Bg{constructor(e=50,t=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Jh*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ol*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Jh*Math.atan(Math.tan(.5*Ol*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ol*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Ti.prototype.isPerspectiveCamera=!0;class Kb extends tn{constructor(e,t,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const r=new Ti(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new S(1,0,0)),this.add(r);const s=new Ti(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new S(-1,0,0)),this.add(s);const o=new Ti(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new S(0,1,0)),this.add(o);const a=new Ti(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new S(0,-1,0)),this.add(a);const l=new Ti(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new S(0,0,1)),this.add(l);const c=new Ti(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new S(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;const h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(d),e.xr.enabled=u}}class af extends ci{constructor(e,t,i,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,l,c,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}af.prototype.isCubeTexture=!0;class Jb extends Zr{constructor(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),super(e,e,t),this.texture=new af(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Hn,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=li,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Bl(5,5,5),s=new Na({name:"CubemapFromEquirect",uniforms:$u(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new _i(r,s),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=Hn),new Kb(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}Jb.prototype.isWebGLCubeRenderTarget=!0;const ew=new S,F7=new S,k7=new gi;class Vo{constructor(e=new S(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=ew.subVectors(i,t).cross(F7.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(ew),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||k7.getNormalMatrix(e),r=this.coplanarPoint(ew).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Vo.prototype.isPlane=!0;const Xu=new Ll,Vg=new S;class Hg{constructor(e=new Vo,t=new Vo,i=new Vo,r=new Vo,s=new Vo,o=new Vo){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],f=i[9],p=i[10],g=i[11],_=i[12],y=i[13],m=i[14],x=i[15];return t[0].setComponents(a-r,d-l,g-h,x-_).normalize(),t[1].setComponents(a+r,d+l,g+h,x+_).normalize(),t[2].setComponents(a+s,d+c,g+f,x+y).normalize(),t[3].setComponents(a-s,d-c,g-f,x-y).normalize(),t[4].setComponents(a-o,d-u,g-p,x-m).normalize(),t[5].setComponents(a+o,d+u,g+p,x+m).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Xu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Xu)}intersectsSprite(e){return Xu.center.set(0,0,0),Xu.radius=.7071067811865476,Xu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xu)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Vg.x=r.normal.x>0?e.max.x:e.min.x,Vg.y=r.normal.y>0?e.max.y:e.min.y,Vg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Vg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function $R(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function L7(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);return void((!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);void 0===d?i.set(c,function r(c,u){const d=c.array,h=c.usage,f=n.createBuffer();n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback();let p=5126;return d instanceof Float32Array?p=5126:d instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):d instanceof Uint16Array?c.isFloat16BufferAttribute?t?p=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):p=5123:d instanceof Int16Array?p=5122:d instanceof Uint32Array?p=5125:d instanceof Int32Array?p=5124:d instanceof Int8Array?p=5120:(d instanceof Uint8Array||d instanceof Uint8ClampedArray)&&(p=5121),{buffer:f,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class lf extends et{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,f=[],p=[],g=[],_=[];for(let y=0;y<u;y++){const m=y*h-o;for(let x=0;x<c;x++)p.push(x*d-s,-m,0),g.push(0,0,1),_.push(x/a),_.push(1-y/l)}for(let y=0;y<l;y++)for(let m=0;m<a;m++){const v=m+c*(y+1),M=m+1+c*(y+1),D=m+1+c*y;f.push(m+c*y,v,D),f.push(v,M,D)}this.setIndex(f),this.setAttribute("position",new He(p,3)),this.setAttribute("normal",new He(g,3)),this.setAttribute("uv",new He(_,2))}static fromJSON(e){return new lf(e.width,e.height,e.widthSegments,e.heightSegments)}}const Bt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ce={common:{diffuse:{value:new Pe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new gi},uv2Transform:{value:new gi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new se(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gi}},sprite:{diffuse:{value:new Pe(16777215)},opacity:{value:1},center:{value:new se(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gi}}},Js={basic:{uniforms:ji([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.fog]),vertexShader:Bt.meshbasic_vert,fragmentShader:Bt.meshbasic_frag},lambert:{uniforms:ji([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.fog,Ce.lights,{emissive:{value:new Pe(0)}}]),vertexShader:Bt.meshlambert_vert,fragmentShader:Bt.meshlambert_frag},phong:{uniforms:ji([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new Pe(0)},specular:{value:new Pe(1118481)},shininess:{value:30}}]),vertexShader:Bt.meshphong_vert,fragmentShader:Bt.meshphong_frag},standard:{uniforms:ji([Ce.common,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.roughnessmap,Ce.metalnessmap,Ce.fog,Ce.lights,{emissive:{value:new Pe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag},toon:{uniforms:ji([Ce.common,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.gradientmap,Ce.fog,Ce.lights,{emissive:{value:new Pe(0)}}]),vertexShader:Bt.meshtoon_vert,fragmentShader:Bt.meshtoon_frag},matcap:{uniforms:ji([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,{matcap:{value:null}}]),vertexShader:Bt.meshmatcap_vert,fragmentShader:Bt.meshmatcap_frag},points:{uniforms:ji([Ce.points,Ce.fog]),vertexShader:Bt.points_vert,fragmentShader:Bt.points_frag},dashed:{uniforms:ji([Ce.common,Ce.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bt.linedashed_vert,fragmentShader:Bt.linedashed_frag},depth:{uniforms:ji([Ce.common,Ce.displacementmap]),vertexShader:Bt.depth_vert,fragmentShader:Bt.depth_frag},normal:{uniforms:ji([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,{opacity:{value:1}}]),vertexShader:Bt.meshnormal_vert,fragmentShader:Bt.meshnormal_frag},sprite:{uniforms:ji([Ce.sprite,Ce.fog]),vertexShader:Bt.sprite_vert,fragmentShader:Bt.sprite_frag},background:{uniforms:{uvTransform:{value:new gi},t2D:{value:null}},vertexShader:Bt.background_vert,fragmentShader:Bt.background_frag},cube:{uniforms:ji([Ce.envmap,{opacity:{value:1}}]),vertexShader:Bt.cube_vert,fragmentShader:Bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bt.equirect_vert,fragmentShader:Bt.equirect_frag},distanceRGBA:{uniforms:ji([Ce.common,Ce.displacementmap,{referencePosition:{value:new S},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bt.distanceRGBA_vert,fragmentShader:Bt.distanceRGBA_frag},shadow:{uniforms:ji([Ce.lights,Ce.fog,{color:{value:new Pe(0)},opacity:{value:1}}]),vertexShader:Bt.shadow_vert,fragmentShader:Bt.shadow_frag}};function Rq(n,e,t,i,r){const s=new Pe(0);let a,l,o=0,c=null,u=0,d=null;function f(p,g){t.buffers.color.setClear(p.r,p.g,p.b,g,r)}return{getClearColor:function(){return s},setClearColor:function(p,g=1){s.set(p),o=g,f(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,f(s,o)},render:function h(p,g){let _=!1,y=!0===g.isScene?g.background:null;y&&y.isTexture&&(y=e.get(y));const m=n.xr,x=m.getSession&&m.getSession();x&&"additive"===x.environmentBlendMode&&(y=null),null===y?f(s,o):y&&y.isColor&&(f(y,1),_=!0),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||306===y.mapping)?(void 0===l&&(l=new _i(new Bl(1,1,1),new Na({name:"BackgroundCubeMaterial",uniforms:$u(Js.cube.uniforms),vertexShader:Js.cube.vertexShader,fragmentShader:Js.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(v,M,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=y,l.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,(c!==y||u!==y.version||d!==n.toneMapping)&&(l.material.needsUpdate=!0,c=y,u=y.version,d=n.toneMapping),p.unshift(l,l.geometry,l.material,0,0,null)):y&&y.isTexture&&(void 0===a&&(a=new _i(new lf(2,2),new Na({name:"BackgroundMaterial",uniforms:$u(Js.background.uniforms),vertexShader:Js.background.vertexShader,fragmentShader:Js.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=y,!0===y.matrixAutoUpdate&&y.updateMatrix(),a.material.uniforms.uvTransform.value.copy(y.matrix),(c!==y||u!==y.version||d!==n.toneMapping)&&(a.material.needsUpdate=!0,c=y,u=y.version,d=n.toneMapping),p.unshift(a,a.geometry,a.material,0,0,null))}}}function Pq(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=g(null);let c=l;function h(T){return i.isWebGL2?n.bindVertexArray(T):s.bindVertexArrayOES(T)}function f(T){return i.isWebGL2?n.deleteVertexArray(T):s.deleteVertexArrayOES(T)}function g(T){const z=[],q=[],L=[];for(let V=0;V<r;V++)z[V]=0,q[V]=0,L[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:q,attributeDivisors:L,object:T,attributes:{},index:null}}function m(){const T=c.newAttributes;for(let z=0,q=T.length;z<q;z++)T[z]=0}function x(T){v(T,0)}function v(T,z){const L=c.enabledAttributes,V=c.attributeDivisors;c.newAttributes[T]=1,0===L[T]&&(n.enableVertexAttribArray(T),L[T]=1),V[T]!==z&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](T,z),V[T]=z)}function M(){const T=c.newAttributes,z=c.enabledAttributes;for(let q=0,L=z.length;q<L;q++)z[q]!==T[q]&&(n.disableVertexAttribArray(q),z[q]=0)}function D(T,z,q,L,V,J){!0!==i.isWebGL2||5124!==q&&5125!==q?n.vertexAttribPointer(T,z,q,L,V,J):n.vertexAttribIPointer(T,z,q,V,J)}function H(){E(),c!==l&&(c=l,h(c.object))}function E(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function u(T,z,q,L,V){let J=!1;if(o){const le=function p(T,z,q){const L=!0===q.wireframe;let V=a[T.id];void 0===V&&(V={},a[T.id]=V);let J=V[z.id];void 0===J&&(J={},V[z.id]=J);let le=J[L];return void 0===le&&(le=g(function d(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),J[L]=le),le}(L,q,z);c!==le&&(c=le,h(c.object)),J=function _(T,z){const q=c.attributes,L=T.attributes;let V=0;for(const J in L){const le=q[J],Q=L[J];if(void 0===le||le.attribute!==Q||le.data!==Q.data)return!0;V++}return c.attributesNum!==V||c.index!==z}(L,V),J&&function y(T,z){const q={},L=T.attributes;let V=0;for(const J in L){const le=L[J],Q={};Q.attribute=le,le.data&&(Q.data=le.data),q[J]=Q,V++}c.attributes=q,c.attributesNum=V,c.index=z}(L,V)}else{const le=!0===z.wireframe;(c.geometry!==L.id||c.program!==q.id||c.wireframe!==le)&&(c.geometry=L.id,c.program=q.id,c.wireframe=le,J=!0)}!0===T.isInstancedMesh&&(J=!0),null!==V&&t.update(V,34963),J&&(function R(T,z,q,L){if(!1===i.isWebGL2&&(T.isInstancedMesh||L.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;m();const V=L.attributes,J=q.getAttributes(),le=z.defaultAttributeValues;for(const Q in J){const ee=J[Q];if(ee.location>=0){let _e=V[Q];if(void 0===_e&&("instanceMatrix"===Q&&T.instanceMatrix&&(_e=T.instanceMatrix),"instanceColor"===Q&&T.instanceColor&&(_e=T.instanceColor)),void 0!==_e){const xe=_e.normalized,ge=_e.itemSize,Dt=t.get(_e);if(void 0===Dt)continue;const ce=Dt.buffer,je=Dt.type,Ue=Dt.bytesPerElement;if(_e.isInterleavedBufferAttribute){const Fe=_e.data,ze=Fe.stride,Ht=_e.offset;if(Fe&&Fe.isInstancedInterleavedBuffer){for(let te=0;te<ee.locationSize;te++)v(ee.location+te,Fe.meshPerAttribute);!0!==T.isInstancedMesh&&void 0===L._maxInstanceCount&&(L._maxInstanceCount=Fe.meshPerAttribute*Fe.count)}else for(let te=0;te<ee.locationSize;te++)x(ee.location+te);n.bindBuffer(34962,ce);for(let te=0;te<ee.locationSize;te++)D(ee.location+te,ge/ee.locationSize,je,xe,ze*Ue,(Ht+ge/ee.locationSize*te)*Ue)}else{if(_e.isInstancedBufferAttribute){for(let Fe=0;Fe<ee.locationSize;Fe++)v(ee.location+Fe,_e.meshPerAttribute);!0!==T.isInstancedMesh&&void 0===L._maxInstanceCount&&(L._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let Fe=0;Fe<ee.locationSize;Fe++)x(ee.location+Fe);n.bindBuffer(34962,ce);for(let Fe=0;Fe<ee.locationSize;Fe++)D(ee.location+Fe,ge/ee.locationSize,je,xe,ge*Ue,ge/ee.locationSize*Fe*Ue)}}else if(void 0!==le){const xe=le[Q];if(void 0!==xe)switch(xe.length){case 2:n.vertexAttrib2fv(ee.location,xe);break;case 3:n.vertexAttrib3fv(ee.location,xe);break;case 4:n.vertexAttrib4fv(ee.location,xe);break;default:n.vertexAttrib1fv(ee.location,xe)}}}}M()}(T,z,q,L),null!==V&&n.bindBuffer(34963,t.get(V).buffer))},reset:H,resetDefaultState:E,dispose:function B(){H();for(const T in a){const z=a[T];for(const q in z){const L=z[q];for(const V in L)f(L[V].object),delete L[V];delete z[q]}delete a[T]}},releaseStatesOfGeometry:function Y(T){if(void 0===a[T.id])return;const z=a[T.id];for(const q in z){const L=z[q];for(const V in L)f(L[V].object),delete L[V];delete z[q]}delete a[T.id]},releaseStatesOfProgram:function U(T){for(const z in a){const q=a[z];if(void 0===q[T.id])continue;const L=q[T.id];for(const V in L)f(L[V].object),delete L[V];delete q[T.id]}},initAttributes:m,enableAttribute:x,disableUnusedAttributes:M}}function Oq(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(r)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,u,d),t.update(u,s,d)}}function Fq(n,e,t){let i;function s(R){if("highp"===R){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";R="mediump"}return"mediump"===R&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),g=n.getParameter(34921),_=n.getParameter(36347),y=n.getParameter(36348),m=n.getParameter(36349),x=h>0,v=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:_,maxVaryings:y,maxFragmentUniforms:m,vertexTextures:x,floatFragmentTextures:v,floatVertexTextures:x&&v,maxSamples:o?n.getParameter(36183):0}}function kq(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Vo,a=new gi,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,p){const g=null!==d?d.length:0;let _=null;if(0!==g){if(_=l.value,!0!==p||null===_){const y=f+4*g,m=h.matrixWorldInverse;a.getNormalMatrix(m),(null===_||_.length<y)&&(_=new Float32Array(y));for(let x=0,v=f;x!==g;++x,v+=4)o.copy(d[x]).applyMatrix4(m,a),o.normal.toArray(_,v),_[v+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,_}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const p=0!==d.length||h||0!==i||r;return r=h,t=u(d,f,0),i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const p=d.clippingPlanes,g=d.clipIntersection,_=d.clipShadows,y=n.get(d);if(!r||null===p||0===p.length||s&&!_)s?u(null):c();else{const m=s?0:i,x=4*m;let v=y.clippingState||null;l.value=v,v=u(p,h,x,f);for(let M=0;M!==x;++M)v[M]=t[M];y.clippingState=v,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=m}}}function Lq(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=n.getRenderTarget(),u=new Jb(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),n.setRenderTarget(c),o.addEventListener("dispose",r),t(u.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}Js.physical={uniforms:ji([Js.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new se(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Pe(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new se},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Pe(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Pe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag};class zg extends Bg{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}zg.prototype.isOrthographicCamera=!0;class cf extends Na{constructor(e){super(e),this.type="RawShaderMaterial"}}cf.prototype.isRawShaderMaterial=!0;const eo=Math.pow(2,8),qR=[.125,.215,.35,.446,.526,.582],YR=5+qR.length,Ug={[As]:0,[Ru]:1},tw=new zg,{_lodPlanes:uf,_sizeLods:XR,_sigmas:Gg}=Bq(),QR=new Pe;let nw=null;const Vl=(1+Math.sqrt(5))/2,Ku=1/Vl,ZR=[new S(1,1,1),new S(-1,1,1),new S(1,1,-1),new S(-1,1,-1),new S(0,Vl,Ku),new S(0,Vl,-Ku),new S(Ku,0,Vl),new S(-Ku,0,Vl),new S(Vl,Ku,0),new S(-Vl,Ku,0)];class Nq{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function Vq(n){const e=new Float32Array(n),t=new S(0,1,0);return new cf({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){nw=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=eP(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=JR(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<uf.length;e++)uf[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(nw),e.scissorTest=!1,jg(e,0,0,e.width,e.height)}_fromTexture(e){nw=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:Hn,minFilter:Hn,generateMipmaps:!1,type:Tl,format:li,encoding:As,depthBuffer:!1},i=KR(t);return i.depthBuffer=!e,this._pingPongRenderTarget=KR(t),i}_compileMaterial(e){const t=new _i(uf[0],e);this._renderer.compile(t,tw)}_sceneToCubeUV(e,t,i,r){const a=new Ti(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(QR),u.toneMapping=0,u.autoClear=!1;const f=new Oa({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new _i(new Bl,f);let g=!1;const _=e.background;_?_.isColor&&(f.color.copy(_),e.background=null,g=!0):(f.color.copy(QR),g=!0);for(let y=0;y<6;y++){const m=y%3;0==m?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):1==m?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y])),jg(r,m*eo,y>2?eo:0,eo,eo),u.setRenderTarget(r),g&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=_}_setEncoding(e,t){e.value=!0===this._renderer.capabilities.isWebGL2&&t.format===li&&t.type===Po&&t.encoding===Ru?Ug[As]:Ug[t.encoding]}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?null==this._cubemapShader&&(this._cubemapShader=eP()):null==this._equirectShader&&(this._equirectShader=JR());const s=r?this._cubemapShader:this._equirectShader,o=new _i(uf[0],s),a=s.uniforms;a.envMap.value=e,r||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),jg(t,0,0,3*eo,2*eo),i.setRenderTarget(t),i.render(o,tw)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<YR;r++){const s=Math.sqrt(Gg[r]*Gg[r]-Gg[r-1]*Gg[r-1]);this._blur(e,r-1,r,s,ZR[(r-1)%ZR.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new _i(uf[r],c),h=c.uniforms,f=XR[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,g=s/p,_=isFinite(s)?1+Math.floor(3*g):20;_>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to 20`);const y=[];let m=0;for(let D=0;D<20;++D){const R=D/g,B=Math.exp(-R*R/2);y.push(B),0==D?m+=B:D<_&&(m+=2*B)}for(let D=0;D<y.length;D++)y[D]=y[D]/m;h.envMap.value=e.texture,h.samples.value=_,h.weights.value=y,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a),h.dTheta.value=p,h.mipInt.value=8-i;const x=XR[r];jg(t,3*Math.max(0,eo-2*x),(0===r?0:2*eo)+2*x*(r>4?r-8+4:0),3*x,2*x),l.setRenderTarget(t),l.render(d,tw)}}function Bq(){const n=[],e=[],t=[];let i=8;for(let r=0;r<YR;r++){const s=Math.pow(2,i);e.push(s);let o=1/s;r>4?o=qR[r-8+4-1]:0==r&&(o=0),t.push(o);const a=1/(s-1),l=-a/2,c=1+a/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],d=6,h=6,f=3,p=2,g=1,_=new Float32Array(f*h*d),y=new Float32Array(p*h*d),m=new Float32Array(g*h*d);for(let v=0;v<d;v++){const M=v%3*2/3-1,D=v>2?0:-1;_.set([M,D,0,M+2/3,D,0,M+2/3,D+1,0,M,D,0,M+2/3,D+1,0,M,D+1,0],f*h*v),y.set(u,p*h*v),m.set([v,v,v,v,v,v],g*h*v)}const x=new et;x.setAttribute("position",new dn(_,f)),x.setAttribute("uv",new dn(y,p)),x.setAttribute("faceIndex",new dn(m,g)),n.push(x),i>4&&i--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function KR(n){const e=new Zr(3*eo,3*eo,n);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function jg(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function JR(){const n=new se(1,1);return new cf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:Ug[As]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function eP(){return new cf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Ug[As]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Hq(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){const h=n.getRenderTarget();null===t&&(t=new Nq(n));const f=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),n.setRenderTarget(h),a.addEventListener("dispose",s),f.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function zq(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Uq(n,e,t,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,p=d.attributes.position;let g=0;if(null!==f){const m=f.array;g=f.version;for(let x=0,v=m.length;x<v;x+=3){const M=m[x+0],D=m[x+1],R=m[x+2];h.push(M,D,D,R,R,M)}}else{g=p.version;for(let x=0,v=p.array.length/3-1;x<v;x+=3){const M=x+0,D=x+1,R=x+2;h.push(M,D,D,R,R,M)}}const _=new(OR(h)>65535?Wb:jb)(h,1);_.version=g;const y=s.get(d);y&&e.remove(y),s.set(d,_)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const p in h)e.update(h[p],34962);const f=d.morphAttributes;for(const p in f){const g=f[p];for(let _=0,y=g.length;_<y;_++)e.update(g[_],34962)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function Gq(n,e,t,i){const r=i.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){n.drawElements(s,f,a,h*l),t.update(f,s,1)},this.renderInstances=function d(h,f,p){if(0===p)return;let g,_;if(r)g=n,_="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",null===g)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g[_](s,f,a,h*l,p),t.update(f,s,p)}}function jq(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}class sw extends ci{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Qn,this.minFilter=Qn,this.wrapR=Gi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function Wq(n,e){return n[0]-e[0]}function $q(n,e){return Math.abs(e[1])-Math.abs(n[1])}function tP(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function qq(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new S,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position.length;let g=s.get(u);if(void 0===g||g.count!==p){void 0!==g&&g.texture.dispose();const m=void 0!==u.morphAttributes.normal,x=u.morphAttributes.position,v=u.morphAttributes.normal||[],D=!0===m?2:1;let R=u.attributes.position.count*D,B=1;R>e.maxTextureSize&&(B=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const Y=new Float32Array(R*B*4*p),U=new sw(Y,R,B,p);U.format=li,U.type=Oo,U.needsUpdate=!0;const H=4*D;for(let E=0;E<p;E++){const T=x[E],z=v[E],q=R*B*4*E;for(let L=0;L<T.count;L++){o.fromBufferAttribute(T,L),!0===T.normalized&&tP(o,T);const V=L*H;Y[q+V+0]=o.x,Y[q+V+1]=o.y,Y[q+V+2]=o.z,Y[q+V+3]=0,!0===m&&(o.fromBufferAttribute(z,L),!0===z.normalized&&tP(o,z),Y[q+V+4]=o.x,Y[q+V+5]=o.y,Y[q+V+6]=o.z,Y[q+V+7]=0)}}g={count:p,texture:U,size:new se(R,B)},s.set(u,g)}let _=0;for(let m=0;m<f.length;m++)_+=f[m];const y=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const p=void 0===f?0:f.length;let g=i[u.id];if(void 0===g||g.length!==p){g=[];for(let v=0;v<p;v++)g[v]=[v,0];i[u.id]=g}for(let v=0;v<p;v++){const M=g[v];M[0]=v,M[1]=f[v]}g.sort($q);for(let v=0;v<8;v++)v<p&&g[v][1]?(a[v][0]=g[v][0],a[v][1]=g[v][1]):(a[v][0]=Number.MAX_SAFE_INTEGER,a[v][1]=0);a.sort(Wq);const _=u.morphAttributes.position,y=u.morphAttributes.normal;let m=0;for(let v=0;v<8;v++){const M=a[v],D=M[0],R=M[1];D!==Number.MAX_SAFE_INTEGER&&R?(_&&u.getAttribute("morphTarget"+v)!==_[D]&&u.setAttribute("morphTarget"+v,_[D]),y&&u.getAttribute("morphNormal"+v)!==y[D]&&u.setAttribute("morphNormal"+v,y[D]),r[v]=R,m+=R):(_&&!0===u.hasAttribute("morphTarget"+v)&&u.deleteAttribute("morphTarget"+v),y&&!0===u.hasAttribute("morphNormal"+v)&&u.deleteAttribute("morphNormal"+v),r[v]=0)}const x=u.morphTargetsRelative?1:1-m;h.getUniforms().setValue(n,"morphTargetBaseInfluence",x),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function Yq(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,d=e.get(l,l.geometry);return r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function o(){r=new WeakMap}}}sw.prototype.isDataTexture2DArray=!0;class nP extends ci{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Qn,this.minFilter=Qn,this.wrapR=Gi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}nP.prototype.isDataTexture3D=!0;const iP=new ci,rP=new sw,sP=new nP,oP=new af,aP=[],lP=[],cP=new Float32Array(16),uP=new Float32Array(9),dP=new Float32Array(4);function Ju(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=aP[r];if(void 0===s&&(s=new Float32Array(r),aP[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function or(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Wi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Wg(n,e){let t=lP[e];void 0===t&&(t=new Int32Array(e),lP[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Xq(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Qq(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(or(t,e))return;n.uniform2fv(this.addr,e),Wi(t,e)}}function Zq(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(or(t,e))return;n.uniform3fv(this.addr,e),Wi(t,e)}}function Kq(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(or(t,e))return;n.uniform4fv(this.addr,e),Wi(t,e)}}function Jq(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(or(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Wi(t,e)}else{if(or(t,i))return;dP.set(i),n.uniformMatrix2fv(this.addr,!1,dP),Wi(t,i)}}function eY(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(or(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Wi(t,e)}else{if(or(t,i))return;uP.set(i),n.uniformMatrix3fv(this.addr,!1,uP),Wi(t,i)}}function tY(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(or(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Wi(t,e)}else{if(or(t,i))return;cP.set(i),n.uniformMatrix4fv(this.addr,!1,cP),Wi(t,i)}}function nY(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function iY(n,e){const t=this.cache;or(t,e)||(n.uniform2iv(this.addr,e),Wi(t,e))}function rY(n,e){const t=this.cache;or(t,e)||(n.uniform3iv(this.addr,e),Wi(t,e))}function sY(n,e){const t=this.cache;or(t,e)||(n.uniform4iv(this.addr,e),Wi(t,e))}function oY(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function aY(n,e){const t=this.cache;or(t,e)||(n.uniform2uiv(this.addr,e),Wi(t,e))}function lY(n,e){const t=this.cache;or(t,e)||(n.uniform3uiv(this.addr,e),Wi(t,e))}function cY(n,e){const t=this.cache;or(t,e)||(n.uniform4uiv(this.addr,e),Wi(t,e))}function uY(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||iP,r)}function dY(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||sP,r)}function hY(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||oP,r)}function fY(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||rP,r)}function mY(n,e){n.uniform1fv(this.addr,e)}function gY(n,e){const t=Ju(e,this.size,2);n.uniform2fv(this.addr,t)}function yY(n,e){const t=Ju(e,this.size,3);n.uniform3fv(this.addr,t)}function _Y(n,e){const t=Ju(e,this.size,4);n.uniform4fv(this.addr,t)}function vY(n,e){const t=Ju(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function xY(n,e){const t=Ju(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function bY(n,e){const t=Ju(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function wY(n,e){n.uniform1iv(this.addr,e)}function MY(n,e){n.uniform2iv(this.addr,e)}function CY(n,e){n.uniform3iv(this.addr,e)}function SY(n,e){n.uniform4iv(this.addr,e)}function EY(n,e){n.uniform1uiv(this.addr,e)}function DY(n,e){n.uniform2uiv(this.addr,e)}function AY(n,e){n.uniform3uiv(this.addr,e)}function TY(n,e){n.uniform4uiv(this.addr,e)}function IY(n,e,t){const i=e.length,r=Wg(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTexture2D(e[s]||iP,r[s])}function RY(n,e,t){const i=e.length,r=Wg(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||sP,r[s])}function PY(n,e,t){const i=e.length,r=Wg(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTextureCube(e[s]||oP,r[s])}function OY(n,e,t){const i=e.length,r=Wg(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||rP,r[s])}function kY(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=function pY(n){switch(n){case 5126:return Xq;case 35664:return Qq;case 35665:return Zq;case 35666:return Kq;case 35674:return Jq;case 35675:return eY;case 35676:return tY;case 5124:case 35670:return nY;case 35667:case 35671:return iY;case 35668:case 35672:return rY;case 35669:case 35673:return sY;case 5125:return oY;case 36294:return aY;case 36295:return lY;case 36296:return cY;case 35678:case 36198:case 36298:case 36306:case 35682:return uY;case 35679:case 36299:case 36307:return dY;case 35680:case 36300:case 36308:case 36293:return hY;case 36289:case 36303:case 36311:case 36292:return fY}}(e.type)}function hP(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function FY(n){switch(n){case 5126:return mY;case 35664:return gY;case 35665:return yY;case 35666:return _Y;case 35674:return vY;case 35675:return xY;case 35676:return bY;case 5124:case 35670:return wY;case 35667:case 35671:return MY;case 35668:case 35672:return CY;case 35669:case 35673:return SY;case 5125:return EY;case 36294:return DY;case 36295:return AY;case 36296:return TY;case 35678:case 36198:case 36298:case 36306:case 35682:return IY;case 35679:case 36299:case 36307:return RY;case 35680:case 36300:case 36308:case 36293:return PY;case 36289:case 36303:case 36311:case 36292:return OY}}(e.type)}function fP(n){this.id=n,this.seq=[],this.map={}}hP.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Wi(e,n)},fP.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,e[o.id],t)}};const ow=/(\w+)(\])?(\[|\.)?/g;function pP(n,e){n.seq.push(e),n.map[e.id]=e}function LY(n,e,t){const i=n.name,r=i.length;for(ow.lastIndex=0;;){const s=ow.exec(i),o=ow.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){pP(t,void 0===c?new kY(a,n,e):new hP(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new fP(a),pP(t,d)),t=d}}}function Va(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i);LY(r,n.getUniformLocation(e,r.name),this)}}function mP(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}Va.prototype.setValue=function(n,e,t,i){const r=this.map[e];void 0!==r&&r.setValue(n,t,i)},Va.prototype.setOptional=function(n,e,t){const i=e[t];void 0!==i&&this.setValue(n,t,i)},Va.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const o=e[r],a=t[o.id];!1!==a.needsUpdate&&o.setValue(n,a.value,i)}},Va.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};let NY=0;function gP(n){switch(n){case As:return["Linear","( value )"];case Ru:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function yP(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();return i&&""===r?"":t.toUpperCase()+"\n\n"+r+"\n\n"+function BY(n){const e=n.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(n.getShaderSource(e))}function Hl(n,e){const t=gP(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function VY(n,e){const t=gP(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function HY(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function df(n){return""!==n}function _P(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function vP(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const jY=/^[ \t]*#include +<([\w\d./]+)>/gm;function aw(n){return n.replace(jY,WY)}function WY(n,e){const t=Bt[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return aw(t)}const $Y=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,qY=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xP(n){return n.replace(qY,bP).replace($Y,YY)}function YY(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),bP(0,e,t,i)}function bP(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function wP(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function JY(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function XY(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function QY(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function ZY(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(t),d=function KY(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=t.isWebGL2?"":function zY(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(df).join("\n")}(t),f=function UY(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),p=r.createProgram();let g,_,y=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(g=[f].filter(df).join("\n"),g.length>0&&(g+="\n"),_=[h,f].filter(df).join("\n"),_.length>0&&(_+="\n")):(g=[wP(t),"#define SHADER_NAME "+t.shaderName,f,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(df).join("\n"),_=[h,wP(t),"#define SHADER_NAME "+t.shaderName,f,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Bt.tonemapping_pars_fragment:"",0!==t.toneMapping?HY("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===Il?"#define OPAQUE":"",Bt.encodings_pars_fragment,t.map?Hl("mapTexelToLinear",t.mapEncoding):"",t.matcap?Hl("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?Hl("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?Hl("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?Hl("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?Hl("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?Hl("lightMapTexelToLinear",t.lightMapEncoding):"",VY("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(df).join("\n")),o=aw(o),o=_P(o,t),o=vP(o,t),a=aw(a),a=_P(a,t),a=vP(a,t),o=xP(o),a=xP(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,_=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const x=y+_+a,v=mP(r,35633,y+g+o),M=mP(r,35632,x);if(r.attachShader(p,v),r.attachShader(p,M),void 0!==t.index0AttributeName?r.bindAttribLocation(p,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(p,0,"position"),r.linkProgram(p),n.debug.checkShaderErrors){const B=r.getProgramInfoLog(p).trim(),Y=r.getShaderInfoLog(v).trim(),U=r.getShaderInfoLog(M).trim();let H=!0,E=!0;if(!1===r.getProgramParameter(p,35714)){H=!1;const T=yP(r,v,"vertex"),z=yP(r,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(p,35715)+"\n\nProgram Info Log: "+B+"\n"+T+"\n"+z)}else""!==B?console.warn("THREE.WebGLProgram: Program Info Log:",B):(""===Y||""===U)&&(E=!1);E&&(this.diagnostics={runnable:H,programLog:B,vertexShader:{log:Y,prefix:g},fragmentShader:{log:U,prefix:_}})}let D,R;return r.deleteShader(v),r.deleteShader(M),this.getUniforms=function(){return void 0===D&&(D=new Va(r,p)),D},this.getAttributes=function(){return void 0===R&&(R=function GY(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,p)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(p),this.program=void 0},this.name=t.shaderName,this.id=NY++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=v,this.fragmentShader=M,this}let eX=0;class tX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const i=new nX;t.set(e,i)}return t.get(e)}}class nX{constructor(){this.id=eX++,this.usedTimes=0}}function iX(n,e,t,i,r,s,o){const a=new Lb,l=new tX,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.floatVertexTextures,f=r.maxVertexUniforms,p=r.vertexTextures;let g=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(E){let T;return E&&E.isTexture?T=E.encoding:E&&E.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),T=E.texture.encoding):T=As,u&&E&&E.isTexture&&E.format===li&&E.type===Po&&E.encoding===Ru&&(T=As),T}return{getParameters:function x(E,T,z,q,L){const V=q.fog,le=(E.isMeshStandardMaterial?t:e).get(E.envMap||(E.isMeshStandardMaterial?q.environment:null)),Q=_[E.type],ee=L.isSkinnedMesh?function y(E){const z=E.skeleton.bones;if(h)return 1024;{const L=Math.floor((f-20)/4),V=Math.min(L,z.length);return V<z.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+z.length+" bones. This GPU supports "+V+"."),0):V}}(L):0;let _e,xe,ge,Dt;if(null!==E.precision&&(g=r.getMaxPrecision(E.precision),g!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",g,"instead.")),Q){const ze=Js[Q];_e=ze.vertexShader,xe=ze.fragmentShader}else _e=E.vertexShader,xe=E.fragmentShader,l.update(E),ge=l.getVertexShaderID(E),Dt=l.getFragmentShaderID(E);const ce=n.getRenderTarget(),je=E.alphaTest>0,Ue=E.clearcoat>0;return{isWebGL2:u,shaderID:Q,shaderName:E.type,vertexShader:_e,fragmentShader:xe,defines:E.defines,customVertexShaderID:ge,customFragmentShaderID:Dt,isRawShaderMaterial:!0===E.isRawShaderMaterial,glslVersion:E.glslVersion,precision:g,instancing:!0===L.isInstancedMesh,instancingColor:!0===L.isInstancedMesh&&null!==L.instanceColor,supportsVertexTextures:p,outputEncoding:null!==ce?m(ce.texture):n.outputEncoding,map:!!E.map,mapEncoding:m(E.map),matcap:!!E.matcap,matcapEncoding:m(E.matcap),envMap:!!le,envMapMode:le&&le.mapping,envMapEncoding:m(le),envMapCubeUV:!!le&&(306===le.mapping||307===le.mapping),lightMap:!!E.lightMap,lightMapEncoding:m(E.lightMap),aoMap:!!E.aoMap,emissiveMap:!!E.emissiveMap,emissiveMapEncoding:m(E.emissiveMap),bumpMap:!!E.bumpMap,normalMap:!!E.normalMap,objectSpaceNormalMap:1===E.normalMapType,tangentSpaceNormalMap:0===E.normalMapType,clearcoat:Ue,clearcoatMap:Ue&&!!E.clearcoatMap,clearcoatRoughnessMap:Ue&&!!E.clearcoatRoughnessMap,clearcoatNormalMap:Ue&&!!E.clearcoatNormalMap,displacementMap:!!E.displacementMap,roughnessMap:!!E.roughnessMap,metalnessMap:!!E.metalnessMap,specularMap:!!E.specularMap,specularIntensityMap:!!E.specularIntensityMap,specularColorMap:!!E.specularColorMap,specularColorMapEncoding:m(E.specularColorMap),alphaMap:!!E.alphaMap,alphaTest:je,gradientMap:!!E.gradientMap,sheen:E.sheen>0,sheenColorMap:!!E.sheenColorMap,sheenColorMapEncoding:m(E.sheenColorMap),sheenRoughnessMap:!!E.sheenRoughnessMap,transmission:E.transmission>0,transmissionMap:!!E.transmissionMap,thicknessMap:!!E.thicknessMap,combine:E.combine,vertexTangents:!!E.normalMap&&!!L.geometry&&!!L.geometry.attributes.tangent,vertexColors:E.vertexColors,vertexAlphas:!0===E.vertexColors&&!!L.geometry&&!!L.geometry.attributes.color&&4===L.geometry.attributes.color.itemSize,vertexUvs:!!(E.map||E.bumpMap||E.normalMap||E.specularMap||E.alphaMap||E.emissiveMap||E.roughnessMap||E.metalnessMap||E.clearcoatMap||E.clearcoatRoughnessMap||E.clearcoatNormalMap||E.displacementMap||E.transmissionMap||E.thicknessMap||E.specularIntensityMap||E.specularColorMap||E.sheenColorMap||E.sheenRoughnessMap),uvsVertexOnly:!(E.map||E.bumpMap||E.normalMap||E.specularMap||E.alphaMap||E.emissiveMap||E.roughnessMap||E.metalnessMap||E.clearcoatNormalMap||E.transmission>0||E.transmissionMap||E.thicknessMap||E.specularIntensityMap||E.specularColorMap||E.sheen>0||E.sheenColorMap||E.sheenRoughnessMap||!E.displacementMap),fog:!!V,useFog:E.fog,fogExp2:V&&V.isFogExp2,flatShading:!!E.flatShading,sizeAttenuation:E.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===L.isSkinnedMesh&&ee>0,maxBones:ee,useVertexTexture:h,morphTargets:!!L.geometry&&!!L.geometry.morphAttributes.position,morphNormals:!!L.geometry&&!!L.geometry.morphAttributes.normal,morphTargetsCount:L.geometry&&L.geometry.morphAttributes.position?L.geometry.morphAttributes.position.length:0,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:E.format,dithering:E.dithering,shadowMapEnabled:n.shadowMap.enabled&&z.length>0,shadowMapType:n.shadowMap.type,toneMapping:E.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:E.premultipliedAlpha,doubleSided:2===E.side,flipSided:1===E.side,depthPacking:void 0!==E.depthPacking&&E.depthPacking,index0AttributeName:E.index0AttributeName,extensionDerivatives:E.extensions&&E.extensions.derivatives,extensionFragDepth:E.extensions&&E.extensions.fragDepth,extensionDrawBuffers:E.extensions&&E.extensions.drawBuffers,extensionShaderTextureLOD:E.extensions&&E.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:E.customProgramCacheKey()}},getProgramCacheKey:function v(E){const T=[];if(E.shaderID?T.push(E.shaderID):(T.push(E.customVertexShaderID),T.push(E.customFragmentShaderID)),void 0!==E.defines)for(const z in E.defines)T.push(z),T.push(E.defines[z]);return!1===E.isRawShaderMaterial&&(function M(E,T){E.push(T.precision),E.push(T.outputEncoding),E.push(T.mapEncoding),E.push(T.matcapEncoding),E.push(T.envMapMode),E.push(T.envMapEncoding),E.push(T.lightMapEncoding),E.push(T.emissiveMapEncoding),E.push(T.combine),E.push(T.vertexUvs),E.push(T.fogExp2),E.push(T.sizeAttenuation),E.push(T.maxBones),E.push(T.morphTargetsCount),E.push(T.numDirLights),E.push(T.numPointLights),E.push(T.numSpotLights),E.push(T.numHemiLights),E.push(T.numRectAreaLights),E.push(T.numDirLightShadows),E.push(T.numPointLightShadows),E.push(T.numSpotLightShadows),E.push(T.shadowMapType),E.push(T.toneMapping),E.push(T.numClippingPlanes),E.push(T.numClipIntersection),E.push(T.format),E.push(T.specularColorMapEncoding),E.push(T.sheenColorMapEncoding)}(T,E),function D(E,T){a.disableAll(),T.isWebGL2&&a.enable(0),T.supportsVertexTextures&&a.enable(1),T.instancing&&a.enable(2),T.instancingColor&&a.enable(3),T.map&&a.enable(4),T.matcap&&a.enable(5),T.envMap&&a.enable(6),T.envMapCubeUV&&a.enable(7),T.lightMap&&a.enable(8),T.aoMap&&a.enable(9),T.emissiveMap&&a.enable(10),T.bumpMap&&a.enable(11),T.normalMap&&a.enable(12),T.objectSpaceNormalMap&&a.enable(13),T.tangentSpaceNormalMap&&a.enable(14),T.clearcoat&&a.enable(15),T.clearcoatMap&&a.enable(16),T.clearcoatRoughnessMap&&a.enable(17),T.clearcoatNormalMap&&a.enable(18),T.displacementMap&&a.enable(19),T.specularMap&&a.enable(20),T.roughnessMap&&a.enable(21),T.metalnessMap&&a.enable(22),T.gradientMap&&a.enable(23),T.alphaMap&&a.enable(24),T.alphaTest&&a.enable(25),T.vertexColors&&a.enable(26),T.vertexAlphas&&a.enable(27),T.vertexUvs&&a.enable(28),T.vertexTangents&&a.enable(29),T.uvsVertexOnly&&a.enable(30),T.fog&&a.enable(31),E.push(a.mask),a.disableAll(),T.useFog&&a.enable(0),T.flatShading&&a.enable(1),T.logarithmicDepthBuffer&&a.enable(2),T.skinning&&a.enable(3),T.useVertexTexture&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.premultipliedAlpha&&a.enable(7),T.shadowMapEnabled&&a.enable(8),T.physicallyCorrectLights&&a.enable(9),T.doubleSided&&a.enable(10),T.flipSided&&a.enable(11),T.depthPacking&&a.enable(12),T.dithering&&a.enable(13),T.specularIntensityMap&&a.enable(14),T.specularColorMap&&a.enable(15),T.transmission&&a.enable(16),T.transmissionMap&&a.enable(17),T.thicknessMap&&a.enable(18),T.sheen&&a.enable(19),T.sheenColorMap&&a.enable(20),T.sheenRoughnessMap&&a.enable(21),E.push(a.mask)}(T,E),T.push(n.outputEncoding)),T.push(E.customProgramCacheKey),T.join()},getUniforms:function R(E){const T=_[E.type];let z;return z=T?R7.clone(Js[T].uniforms):E.uniforms,z},acquireProgram:function B(E,T){let z;for(let q=0,L=c.length;q<L;q++){const V=c[q];if(V.cacheKey===T){z=V,++z.usedTimes;break}}return void 0===z&&(z=new JY(n,T,E,s),c.push(z)),z},releaseProgram:function Y(E){if(0==--E.usedTimes){const T=c.indexOf(E);c[T]=c[c.length-1],c.pop(),E.destroy()}},releaseShaderCache:function U(E){l.remove(E)},programs:c,dispose:function H(){l.dispose()}}}function rX(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function sX(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function MP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function CP(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,h,f,p,g,_){let y=n[e];return void 0===y?(y={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:g,group:_},n[e]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=f,y.groupOrder=p,y.renderOrder=d.renderOrder,y.z=g,y.group=_),e++,y}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,h,f,p,g,_){const y=o(d,h,f,p,g,_);f.transmission>0?i.push(y):!0===f.transparent?r.push(y):t.push(y)},unshift:function l(d,h,f,p,g,_){const y=o(d,h,f,p,g,_);f.transmission>0?i.unshift(y):!0===f.transparent?r.unshift(y):t.unshift(y)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){t.length>1&&t.sort(d||sX),i.length>1&&i.sort(h||MP),r.length>1&&r.sort(h||MP)}}}function oX(){let n=new WeakMap;return{get:function e(i,r){let s;return!1===n.has(i)?(s=new CP,n.set(i,[s])):r>=n.get(i).length?(s=new CP,n.get(i).push(s)):s=n.get(i)[r],s},dispose:function t(){n=new WeakMap}}}function aX(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new S,color:new Pe};break;case"SpotLight":t={position:new S,direction:new S,color:new Pe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new S,color:new Pe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new S,skyColor:new Pe,groundColor:new Pe};break;case"RectAreaLight":t={color:new Pe,position:new S,halfWidth:new S,halfHeight:new S}}return n[e.id]=t,t}}}let cX=0;function uX(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function dX(n,e){const t=new aX,i=function lX(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new se};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new se,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new S);const s=new S,o=new Ve,a=new Ve;return{setup:function l(u,d){let h=0,f=0,p=0;for(let Y=0;Y<9;Y++)r.probe[Y].set(0,0,0);let g=0,_=0,y=0,m=0,x=0,v=0,M=0,D=0;u.sort(uX);const R=!0!==d?Math.PI:1;for(let Y=0,U=u.length;Y<U;Y++){const H=u[Y],E=H.color,T=H.intensity,z=H.distance,q=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)h+=E.r*T*R,f+=E.g*T*R,p+=E.b*T*R;else if(H.isLightProbe)for(let L=0;L<9;L++)r.probe[L].addScaledVector(H.sh.coefficients[L],T);else if(H.isDirectionalLight){const L=t.get(H);if(L.color.copy(H.color).multiplyScalar(H.intensity*R),H.castShadow){const V=H.shadow,J=i.get(H);J.shadowBias=V.bias,J.shadowNormalBias=V.normalBias,J.shadowRadius=V.radius,J.shadowMapSize=V.mapSize,r.directionalShadow[g]=J,r.directionalShadowMap[g]=q,r.directionalShadowMatrix[g]=H.shadow.matrix,v++}r.directional[g]=L,g++}else if(H.isSpotLight){const L=t.get(H);if(L.position.setFromMatrixPosition(H.matrixWorld),L.color.copy(E).multiplyScalar(T*R),L.distance=z,L.coneCos=Math.cos(H.angle),L.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),L.decay=H.decay,H.castShadow){const V=H.shadow,J=i.get(H);J.shadowBias=V.bias,J.shadowNormalBias=V.normalBias,J.shadowRadius=V.radius,J.shadowMapSize=V.mapSize,r.spotShadow[y]=J,r.spotShadowMap[y]=q,r.spotShadowMatrix[y]=H.shadow.matrix,D++}r.spot[y]=L,y++}else if(H.isRectAreaLight){const L=t.get(H);L.color.copy(E).multiplyScalar(T),L.halfWidth.set(.5*H.width,0,0),L.halfHeight.set(0,.5*H.height,0),r.rectArea[m]=L,m++}else if(H.isPointLight){const L=t.get(H);if(L.color.copy(H.color).multiplyScalar(H.intensity*R),L.distance=H.distance,L.decay=H.decay,H.castShadow){const V=H.shadow,J=i.get(H);J.shadowBias=V.bias,J.shadowNormalBias=V.normalBias,J.shadowRadius=V.radius,J.shadowMapSize=V.mapSize,J.shadowCameraNear=V.camera.near,J.shadowCameraFar=V.camera.far,r.pointShadow[_]=J,r.pointShadowMap[_]=q,r.pointShadowMatrix[_]=H.shadow.matrix,M++}r.point[_]=L,_++}else if(H.isHemisphereLight){const L=t.get(H);L.skyColor.copy(H.color).multiplyScalar(T*R),L.groundColor.copy(H.groundColor).multiplyScalar(T*R),r.hemi[x]=L,x++}}m>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Ce.LTC_FLOAT_1,r.rectAreaLTC2=Ce.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Ce.LTC_HALF_1,r.rectAreaLTC2=Ce.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const B=r.hash;(B.directionalLength!==g||B.pointLength!==_||B.spotLength!==y||B.rectAreaLength!==m||B.hemiLength!==x||B.numDirectionalShadows!==v||B.numPointShadows!==M||B.numSpotShadows!==D)&&(r.directional.length=g,r.spot.length=y,r.rectArea.length=m,r.point.length=_,r.hemi.length=x,r.directionalShadow.length=v,r.directionalShadowMap.length=v,r.pointShadow.length=M,r.pointShadowMap.length=M,r.spotShadow.length=D,r.spotShadowMap.length=D,r.directionalShadowMatrix.length=v,r.pointShadowMatrix.length=M,r.spotShadowMatrix.length=D,B.directionalLength=g,B.pointLength=_,B.spotLength=y,B.rectAreaLength=m,B.hemiLength=x,B.numDirectionalShadows=v,B.numPointShadows=M,B.numSpotShadows=D,r.version=cX++)},setupView:function c(u,d){let h=0,f=0,p=0,g=0,_=0;const y=d.matrixWorldInverse;for(let m=0,x=u.length;m<x;m++){const v=u[m];if(v.isDirectionalLight){const M=r.directional[h];M.direction.setFromMatrixPosition(v.matrixWorld),s.setFromMatrixPosition(v.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(y),h++}else if(v.isSpotLight){const M=r.spot[p];M.position.setFromMatrixPosition(v.matrixWorld),M.position.applyMatrix4(y),M.direction.setFromMatrixPosition(v.matrixWorld),s.setFromMatrixPosition(v.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(y),p++}else if(v.isRectAreaLight){const M=r.rectArea[g];M.position.setFromMatrixPosition(v.matrixWorld),M.position.applyMatrix4(y),a.identity(),o.copy(v.matrixWorld),o.premultiply(y),a.extractRotation(o),M.halfWidth.set(.5*v.width,0,0),M.halfHeight.set(0,.5*v.height,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),g++}else if(v.isPointLight){const M=r.point[f];M.position.setFromMatrixPosition(v.matrixWorld),M.position.applyMatrix4(y),f++}else if(v.isHemisphereLight){const M=r.hemi[_];M.direction.setFromMatrixPosition(v.matrixWorld),M.direction.transformDirection(y),M.direction.normalize(),_++}}},state:r}}function SP(n,e){const t=new dX(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function l(d){t.setup(i,d)},setupLightsView:function c(d){t.setupView(i,d)},pushLight:function o(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function hX(n,e){let t=new WeakMap;return{get:function i(s,o=0){let a;return!1===t.has(s)?(a=new SP(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new SP(n,e),t.get(s).push(a)):a=t.get(s)[o],a},dispose:function r(){t=new WeakMap}}}class lw extends Ai{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}lw.prototype.isMeshDepthMaterial=!0;class cw extends Ai{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new S,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function EP(n,e,t){let i=new Hg;const r=new se,s=new se,o=new an,a=new lw({depthPacking:3201}),l=new cw,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new Na({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new se},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new et;p.setAttribute("position",new dn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new _i(p,h),_=this;function y(v,M){const D=e.update(g);h.defines.VSM_SAMPLES!==v.blurSamples&&(h.defines.VSM_SAMPLES=v.blurSamples,f.defines.VSM_SAMPLES=v.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),h.uniforms.shadow_pass.value=v.map.texture,h.uniforms.resolution.value=v.mapSize,h.uniforms.radius.value=v.radius,n.setRenderTarget(v.mapPass),n.clear(),n.renderBufferDirect(M,null,D,h,g,null),f.uniforms.shadow_pass.value=v.mapPass.texture,f.uniforms.resolution.value=v.mapSize,f.uniforms.radius.value=v.radius,n.setRenderTarget(v.map),n.clear(),n.renderBufferDirect(M,null,D,f,g,null)}function m(v,M,D,R,B,Y,U){let H=null;const E=!0===R.isPointLight?v.customDistanceMaterial:v.customDepthMaterial;if(H=void 0!==E?E:!0===R.isPointLight?l:a,n.localClippingEnabled&&!0===D.clipShadows&&0!==D.clippingPlanes.length||D.displacementMap&&0!==D.displacementScale||D.alphaMap&&D.alphaTest>0){const T=H.uuid,z=D.uuid;let q=c[T];void 0===q&&(q={},c[T]=q);let L=q[z];void 0===L&&(L=H.clone(),q[z]=L),H=L}return H.visible=D.visible,H.wireframe=D.wireframe,H.side=3===U?null!==D.shadowSide?D.shadowSide:D.side:null!==D.shadowSide?D.shadowSide:d[D.side],H.alphaMap=D.alphaMap,H.alphaTest=D.alphaTest,H.clipShadows=D.clipShadows,H.clippingPlanes=D.clippingPlanes,H.clipIntersection=D.clipIntersection,H.displacementMap=D.displacementMap,H.displacementScale=D.displacementScale,H.displacementBias=D.displacementBias,H.wireframeLinewidth=D.wireframeLinewidth,H.linewidth=D.linewidth,!0===R.isPointLight&&!0===H.isMeshDistanceMaterial&&(H.referencePosition.setFromMatrixPosition(R.matrixWorld),H.nearDistance=B,H.farDistance=Y),H}function x(v,M,D,R,B){if(!1===v.visible)return;if(v.layers.test(M.layers)&&(v.isMesh||v.isLine||v.isPoints)&&(v.castShadow||v.receiveShadow&&3===B)&&(!v.frustumCulled||i.intersectsObject(v))){v.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,v.matrixWorld);const H=e.update(v),E=v.material;if(Array.isArray(E)){const T=H.groups;for(let z=0,q=T.length;z<q;z++){const L=T[z],V=E[L.materialIndex];if(V&&V.visible){const J=m(v,0,V,R,D.near,D.far,B);n.renderBufferDirect(D,null,H,J,v,L)}}}else if(E.visible){const T=m(v,0,E,R,D.near,D.far,B);n.renderBufferDirect(D,null,H,T,v,null)}}const U=v.children;for(let H=0,E=U.length;H<E;H++)x(U[H],M,D,R,B)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(v,M,D){if(!1===_.enabled||!1===_.autoUpdate&&!1===_.needsUpdate||0===v.length)return;const R=n.getRenderTarget(),B=n.getActiveCubeFace(),Y=n.getActiveMipmapLevel(),U=n.state;U.setBlending(0),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);for(let H=0,E=v.length;H<E;H++){const T=v[H],z=T.shadow;if(void 0===z){console.warn("THREE.WebGLShadowMap:",T,"has no shadow.");continue}if(!1===z.autoUpdate&&!1===z.needsUpdate)continue;r.copy(z.mapSize);const q=z.getFrameExtents();if(r.multiply(q),s.copy(z.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/q.x),r.x=s.x*q.x,z.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/q.y),r.y=s.y*q.y,z.mapSize.y=s.y)),null===z.map&&!z.isPointLightShadow&&3===this.type){const V={minFilter:Hn,magFilter:Hn,format:li};z.map=new Zr(r.x,r.y,V),z.map.texture.name=T.name+".shadowMap",z.mapPass=new Zr(r.x,r.y,V),z.camera.updateProjectionMatrix()}null===z.map&&(z.map=new Zr(r.x,r.y,{minFilter:Qn,magFilter:Qn,format:li}),z.map.texture.name=T.name+".shadowMap",z.camera.updateProjectionMatrix()),n.setRenderTarget(z.map),n.clear();const L=z.getViewportCount();for(let V=0;V<L;V++){const J=z.getViewport(V);o.set(s.x*J.x,s.y*J.y,s.x*J.z,s.y*J.w),U.viewport(o),z.updateMatrices(T,V),i=z.getFrustum(),x(M,D,z.camera,T,this.type)}!z.isPointLightShadow&&3===this.type&&y(z,D),z.needsUpdate=!1}_.needsUpdate=!1,n.setRenderTarget(R,B,Y)}}function mX(n,e,t){const i=t.isWebGL2,a=new function r(){let N=!1;const we=new an;let ve=null;const yt=new an(0,0,0,0);return{setMask:function(Ge){ve!==Ge&&!N&&(n.colorMask(Ge,Ge,Ge,Ge),ve=Ge)},setLocked:function(Ge){N=Ge},setClear:function(Ge,It,Ie,Et,gn){!0===gn&&(Ge*=Et,It*=Et,Ie*=Et),we.set(Ge,It,Ie,Et),!1===yt.equals(we)&&(n.clearColor(Ge,It,Ie,Et),yt.copy(we))},reset:function(){N=!1,ve=null,yt.set(-1,0,0,0)}}},l=new function s(){let N=!1,we=null,ve=null,yt=null;return{setTest:function(Ge){Ge?xe(2929):ge(2929)},setMask:function(Ge){we!==Ge&&!N&&(n.depthMask(Ge),we=Ge)},setFunc:function(Ge){if(ve!==Ge){if(Ge)switch(Ge){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);ve=Ge}},setLocked:function(Ge){N=Ge},setClear:function(Ge){yt!==Ge&&(n.clearDepth(Ge),yt=Ge)},reset:function(){N=!1,we=null,ve=null,yt=null}}},c=new function o(){let N=!1,we=null,ve=null,yt=null,Ge=null,It=null,Ie=null,Et=null,gn=null;return{setTest:function(cn){N||(cn?xe(2960):ge(2960))},setMask:function(cn){we!==cn&&!N&&(n.stencilMask(cn),we=cn)},setFunc:function(cn,ho,fo){(ve!==cn||yt!==ho||Ge!==fo)&&(n.stencilFunc(cn,ho,fo),ve=cn,yt=ho,Ge=fo)},setOp:function(cn,ho,fo){(It!==cn||Ie!==ho||Et!==fo)&&(n.stencilOp(cn,ho,fo),It=cn,Ie=ho,Et=fo)},setLocked:function(cn){N=cn},setClear:function(cn){gn!==cn&&(n.clearStencil(cn),gn=cn)},reset:function(){N=!1,we=null,ve=null,yt=null,Ge=null,It=null,Ie=null,Et=null,gn=null}}};let u={},d={},h=null,f=!1,p=null,g=null,_=null,y=null,m=null,x=null,v=null,M=!1,D=null,R=null,B=null,Y=null,U=null;const H=n.getParameter(35661);let E=!1,T=0;const z=n.getParameter(7938);-1!==z.indexOf("WebGL")?(T=parseFloat(/^WebGL (\d)/.exec(z)[1]),E=T>=1):-1!==z.indexOf("OpenGL ES")&&(T=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),E=T>=2);let q=null,L={};const V=n.getParameter(3088),J=n.getParameter(2978),le=(new an).fromArray(V),Q=(new an).fromArray(J);function ee(N,we,ve){const yt=new Uint8Array(4),Ge=n.createTexture();n.bindTexture(N,Ge),n.texParameteri(N,10241,9728),n.texParameteri(N,10240,9728);for(let It=0;It<ve;It++)n.texImage2D(we+It,0,6408,1,1,0,6408,5121,yt);return Ge}const _e={};function xe(N){!0!==u[N]&&(n.enable(N),u[N]=!0)}function ge(N){!1!==u[N]&&(n.disable(N),u[N]=!1)}_e[3553]=ee(3553,3553,1),_e[34067]=ee(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),xe(2929),l.setFunc(3),Ht(!1),te(1),xe(2884),Fe(0);const je={100:32774,101:32778,102:32779};if(i)je[103]=32775,je[104]=32776;else{const N=e.get("EXT_blend_minmax");null!==N&&(je[103]=N.MIN_EXT,je[104]=N.MAX_EXT)}const Ue={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Fe(N,we,ve,yt,Ge,It,Ie,Et){if(0!==N){if(!1===f&&(xe(3042),f=!0),5===N)Ge=Ge||we,It=It||ve,Ie=Ie||yt,(we!==g||Ge!==m)&&(n.blendEquationSeparate(je[we],je[Ge]),g=we,m=Ge),(ve!==_||yt!==y||It!==x||Ie!==v)&&(n.blendFuncSeparate(Ue[ve],Ue[yt],Ue[It],Ue[Ie]),_=ve,y=yt,x=It,v=Ie),p=N,M=null;else if(N!==p||Et!==M){if((100!==g||100!==m)&&(n.blendEquation(32774),g=100,m=100),Et)switch(N){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,0,769,771);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",N)}else switch(N){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFunc(0,769);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",N)}_=null,y=null,x=null,v=null,p=N,M=Et}}else!0===f&&(ge(3042),f=!1)}function Ht(N){D!==N&&(n.frontFace(N?2304:2305),D=N)}function te(N){0!==N?(xe(2884),N!==R&&n.cullFace(1===N?1029:2===N?1028:1032)):ge(2884),R=N}function be(N,we,ve){N?(xe(32823),(Y!==we||U!==ve)&&(n.polygonOffset(we,ve),Y=we,U=ve)):ge(32823)}function Te(N){void 0===N&&(N=33984+H-1),q!==N&&(n.activeTexture(N),q=N)}return{buffers:{color:a,depth:l,stencil:c},enable:xe,disable:ge,bindFramebuffer:function Dt(N,we){return d[N]!==we&&(n.bindFramebuffer(N,we),d[N]=we,i&&(36009===N&&(d[36160]=we),36160===N&&(d[36009]=we)),!0)},useProgram:function ce(N){return h!==N&&(n.useProgram(N),h=N,!0)},setBlending:Fe,setMaterial:function ze(N,we){2===N.side?ge(2884):xe(2884);let ve=1===N.side;we&&(ve=!ve),Ht(ve),1===N.blending&&!1===N.transparent?Fe(0):Fe(N.blending,N.blendEquation,N.blendSrc,N.blendDst,N.blendEquationAlpha,N.blendSrcAlpha,N.blendDstAlpha,N.premultipliedAlpha),l.setFunc(N.depthFunc),l.setTest(N.depthTest),l.setMask(N.depthWrite),a.setMask(N.colorWrite);const yt=N.stencilWrite;c.setTest(yt),yt&&(c.setMask(N.stencilWriteMask),c.setFunc(N.stencilFunc,N.stencilRef,N.stencilFuncMask),c.setOp(N.stencilFail,N.stencilZFail,N.stencilZPass)),be(N.polygonOffset,N.polygonOffsetFactor,N.polygonOffsetUnits),!0===N.alphaToCoverage?xe(32926):ge(32926)},setFlipSided:Ht,setCullFace:te,setLineWidth:function me(N){N!==B&&(E&&n.lineWidth(N),B=N)},setPolygonOffset:be,setScissorTest:function Ne(N){N?xe(3089):ge(3089)},activeTexture:Te,bindTexture:function mt(N,we){null===q&&Te();let ve=L[q];void 0===ve&&(ve={type:void 0,texture:void 0},L[q]=ve),(ve.type!==N||ve.texture!==we)&&(n.bindTexture(N,we||_e[N]),ve.type=N,ve.texture=we)},unbindTexture:function gt(){const N=L[q];void 0!==N&&void 0!==N.type&&(n.bindTexture(N.type,null),N.type=void 0,N.texture=void 0)},compressedTexImage2D:function Ft(){try{n.compressedTexImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},texImage2D:function Se(){try{n.texImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},texImage3D:function fe(){try{n.texImage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},texStorage2D:function ue(){try{n.texStorage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},texStorage3D:function pe(){try{n.texStorage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},texSubImage2D:function vn(){try{n.texSubImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},texSubImage3D:function F(){try{n.texSubImage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},compressedTexSubImage2D:function I(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},scissor:function ut(N){!1===le.equals(N)&&(n.scissor(N.x,N.y,N.z,N.w),le.copy(N))},viewport:function qe(N){!1===Q.equals(N)&&(n.viewport(N.x,N.y,N.z,N.w),Q.copy(N))},reset:function Me(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},q=null,L={},d={},h=null,f=!1,p=null,g=null,_=null,y=null,m=null,x=null,v=null,M=!1,D=null,R=null,B=null,Y=null,U=null,le.set(0,0,n.canvas.width,n.canvas.height),Q.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function gX(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,p=new WeakMap;let g,_=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(F){}function y(F,I){return _?new OffscreenCanvas(F,I):xg("canvas")}function m(F,I,ue,pe){let Se=1;if((F.width>pe||F.height>pe)&&(Se=pe/Math.max(F.width,F.height)),Se<1||!0===I){if("undefined"!=typeof HTMLImageElement&&F instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&F instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&F instanceof ImageBitmap){const fe=I?PR:Math.floor,ut=fe(Se*F.width),qe=fe(Se*F.height);void 0===g&&(g=y(ut,qe));const Me=ue?y(ut,qe):g;return Me.width=ut,Me.height=qe,Me.getContext("2d").drawImage(F,0,0,ut,qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+ut+"x"+qe+")."),Me}return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F}return F}function x(F){return Eb(F.width)&&Eb(F.height)}function M(F,I){return F.generateMipmaps&&I&&F.minFilter!==Qn&&F.minFilter!==Hn}function D(F){n.generateMipmap(F)}function R(F,I,ue,pe){if(!1===a)return I;if(null!==F){if(void 0!==n[F])return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let Se=I;return 6403===I&&(5126===ue&&(Se=33326),5131===ue&&(Se=33325),5121===ue&&(Se=33321)),6407===I&&(5126===ue&&(Se=34837),5131===ue&&(Se=34843),5121===ue&&(Se=32849)),6408===I&&(5126===ue&&(Se=34836),5131===ue&&(Se=34842),5121===ue&&(Se=pe===Ru?35907:32856)),(33325===Se||33326===Se||34842===Se||34836===Se)&&e.get("EXT_color_buffer_float"),Se}function B(F,I,ue){return!0===M(F,ue)||F.isFramebufferTexture&&F.minFilter!==Qn&&F.minFilter!==Hn?Math.log2(Math.max(I.width,I.height))+1:void 0!==F.mipmaps&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?I.mipmaps.length:1}function Y(F){return F===Qn||1004===F||1005===F?9728:9729}function U(F){const I=F.target;I.removeEventListener("dispose",U),function E(F){const I=i.get(F);void 0!==I.__webglInit&&(n.deleteTexture(I.__webglTexture),i.remove(F))}(I),I.isVideoTexture&&p.delete(I),o.memory.textures--}function H(F){const I=F.target;I.removeEventListener("dispose",H),function T(F){const I=F.texture,ue=i.get(F),pe=i.get(I);if(F){if(void 0!==pe.__webglTexture&&(n.deleteTexture(pe.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++)n.deleteFramebuffer(ue.__webglFramebuffer[Se]),ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer[Se]);else n.deleteFramebuffer(ue.__webglFramebuffer),ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer),ue.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ue.__webglMultisampledFramebuffer),ue.__webglColorRenderbuffer&&n.deleteRenderbuffer(ue.__webglColorRenderbuffer),ue.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ue.__webglDepthRenderbuffer);if(F.isWebGLMultipleRenderTargets)for(let Se=0,fe=I.length;Se<fe;Se++){const ut=i.get(I[Se]);ut.__webglTexture&&(n.deleteTexture(ut.__webglTexture),o.memory.textures--),i.remove(I[Se])}i.remove(I),i.remove(F)}}(I)}let z=0;function V(F,I){const ue=i.get(F);if(F.isVideoTexture&&function Te(F){const I=o.render.frame;p.get(F)!==I&&(p.set(F,I),F.update())}(F),F.version>0&&ue.__version!==F.version){const pe=F.image;if(void 0===pe)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==pe.complete)return void Dt(ue,F,I);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+I),t.bindTexture(3553,ue.__webglTexture)}function Q(F,I){const ue=i.get(F);F.version>0&&ue.__version!==F.version?function ce(F,I,ue){if(6!==I.image.length)return;ge(F,I),t.activeTexture(33984+ue),t.bindTexture(34067,F.__webglTexture),n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const pe=I&&(I.isCompressedTexture||I.image[0].isCompressedTexture),Se=I.image[0]&&I.image[0].isDataTexture,fe=[];for(let Ie=0;Ie<6;Ie++)fe[Ie]=pe||Se?Se?I.image[Ie].image:I.image[Ie]:m(I.image[Ie],!1,!0,c);const ut=fe[0],qe=x(ut)||a,Me=s.convert(I.format),N=s.convert(I.type),we=R(I.internalFormat,Me,N,I.encoding),ve=a&&!0!==I.isVideoTexture,yt=void 0===F.__version;let It,Ge=B(I,ut,qe);if(xe(34067,I,qe),pe){ve&&yt&&t.texStorage2D(34067,Ge,we,ut.width,ut.height);for(let Ie=0;Ie<6;Ie++){It=fe[Ie].mipmaps;for(let Et=0;Et<It.length;Et++){const gn=It[Et];I.format!==li&&I.format!==Il?null!==Me?ve?t.compressedTexSubImage2D(34069+Ie,Et,0,0,gn.width,gn.height,Me,gn.data):t.compressedTexImage2D(34069+Ie,Et,we,gn.width,gn.height,0,gn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ve?t.texSubImage2D(34069+Ie,Et,0,0,gn.width,gn.height,Me,N,gn.data):t.texImage2D(34069+Ie,Et,we,gn.width,gn.height,0,Me,N,gn.data)}}}else{It=I.mipmaps,ve&&yt&&(It.length>0&&Ge++,t.texStorage2D(34067,Ge,we,fe[0].width,fe[0].height));for(let Ie=0;Ie<6;Ie++)if(Se){ve?t.texSubImage2D(34069+Ie,0,0,0,fe[Ie].width,fe[Ie].height,Me,N,fe[Ie].data):t.texImage2D(34069+Ie,0,we,fe[Ie].width,fe[Ie].height,0,Me,N,fe[Ie].data);for(let Et=0;Et<It.length;Et++){const cn=It[Et].image[Ie].image;ve?t.texSubImage2D(34069+Ie,Et+1,0,0,cn.width,cn.height,Me,N,cn.data):t.texImage2D(34069+Ie,Et+1,we,cn.width,cn.height,0,Me,N,cn.data)}}else{ve?t.texSubImage2D(34069+Ie,0,0,0,Me,N,fe[Ie]):t.texImage2D(34069+Ie,0,we,Me,N,fe[Ie]);for(let Et=0;Et<It.length;Et++){const gn=It[Et];ve?t.texSubImage2D(34069+Ie,Et+1,0,0,Me,N,gn.image[Ie]):t.texImage2D(34069+Ie,Et+1,we,Me,N,gn.image[Ie])}}}M(I,qe)&&D(34067),F.__version=I.version,I.onUpdate&&I.onUpdate(I)}(ue,F,I):(t.activeTexture(33984+I),t.bindTexture(34067,ue.__webglTexture))}const ee={1e3:10497,[Gi]:33071,1002:33648},_e={[Qn]:9728,1004:9984,1005:9986,[Hn]:9729,1007:9985,1008:9987};function xe(F,I,ue){if(ue?(n.texParameteri(F,10242,ee[I.wrapS]),n.texParameteri(F,10243,ee[I.wrapT]),(32879===F||35866===F)&&n.texParameteri(F,32882,ee[I.wrapR]),n.texParameteri(F,10240,_e[I.magFilter]),n.texParameteri(F,10241,_e[I.minFilter])):(n.texParameteri(F,10242,33071),n.texParameteri(F,10243,33071),(32879===F||35866===F)&&n.texParameteri(F,32882,33071),(I.wrapS!==Gi||I.wrapT!==Gi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(F,10240,Y(I.magFilter)),n.texParameteri(F,10241,Y(I.minFilter)),I.minFilter!==Qn&&I.minFilter!==Hn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const pe=e.get("EXT_texture_filter_anisotropic");if(I.type===Oo&&!1===e.has("OES_texture_float_linear")||!1===a&&I.type===Tl&&!1===e.has("OES_texture_half_float_linear"))return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(n.texParameterf(F,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function ge(F,I){void 0===F.__webglInit&&(F.__webglInit=!0,I.addEventListener("dispose",U),F.__webglTexture=n.createTexture(),o.memory.textures++)}function Dt(F,I,ue){let pe=3553;I.isDataTexture2DArray&&(pe=35866),I.isDataTexture3D&&(pe=32879),ge(F,I),t.activeTexture(33984+ue),t.bindTexture(pe,F.__webglTexture),n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const Se=function v(F){return!a&&(F.wrapS!==Gi||F.wrapT!==Gi||F.minFilter!==Qn&&F.minFilter!==Hn)}(I)&&!1===x(I.image),fe=m(I.image,Se,!1,u),ut=x(fe)||a,qe=s.convert(I.format);let we,Me=s.convert(I.type),N=R(I.internalFormat,qe,Me,I.encoding);xe(pe,I,ut);const ve=I.mipmaps,yt=a&&!0!==I.isVideoTexture,Ge=void 0===F.__version,It=B(I,fe,ut);if(I.isDepthTexture)N=6402,a?N=I.type===Oo?36012:1014===I.type?33190:I.type===Du?35056:33189:I.type===Oo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===Rl&&6402===N&&I.type!==Qh&&1014!==I.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=Qh,Me=s.convert(I.type)),I.format===Au&&6402===N&&(N=34041,I.type!==Du&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=Du,Me=s.convert(I.type))),yt&&Ge?t.texStorage2D(3553,1,N,fe.width,fe.height):t.texImage2D(3553,0,N,fe.width,fe.height,0,qe,Me,null);else if(I.isDataTexture)if(ve.length>0&&ut){yt&&Ge&&t.texStorage2D(3553,It,N,ve[0].width,ve[0].height);for(let Ie=0,Et=ve.length;Ie<Et;Ie++)we=ve[Ie],yt?t.texSubImage2D(3553,0,0,0,we.width,we.height,qe,Me,we.data):t.texImage2D(3553,Ie,N,we.width,we.height,0,qe,Me,we.data);I.generateMipmaps=!1}else yt?(Ge&&t.texStorage2D(3553,It,N,fe.width,fe.height),t.texSubImage2D(3553,0,0,0,fe.width,fe.height,qe,Me,fe.data)):t.texImage2D(3553,0,N,fe.width,fe.height,0,qe,Me,fe.data);else if(I.isCompressedTexture){yt&&Ge&&t.texStorage2D(3553,It,N,ve[0].width,ve[0].height);for(let Ie=0,Et=ve.length;Ie<Et;Ie++)we=ve[Ie],I.format!==li&&I.format!==Il?null!==qe?yt?t.compressedTexSubImage2D(3553,Ie,0,0,we.width,we.height,qe,we.data):t.compressedTexImage2D(3553,Ie,N,we.width,we.height,0,we.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):yt?t.texSubImage2D(3553,Ie,0,0,we.width,we.height,qe,Me,we.data):t.texImage2D(3553,Ie,N,we.width,we.height,0,qe,Me,we.data)}else if(I.isDataTexture2DArray)yt?(Ge&&t.texStorage3D(35866,It,N,fe.width,fe.height,fe.depth),t.texSubImage3D(35866,0,0,0,0,fe.width,fe.height,fe.depth,qe,Me,fe.data)):t.texImage3D(35866,0,N,fe.width,fe.height,fe.depth,0,qe,Me,fe.data);else if(I.isDataTexture3D)yt?(Ge&&t.texStorage3D(32879,It,N,fe.width,fe.height,fe.depth),t.texSubImage3D(32879,0,0,0,0,fe.width,fe.height,fe.depth,qe,Me,fe.data)):t.texImage3D(32879,0,N,fe.width,fe.height,fe.depth,0,qe,Me,fe.data);else if(I.isFramebufferTexture)yt&&Ge?t.texStorage2D(3553,It,N,fe.width,fe.height):t.texImage2D(3553,0,N,fe.width,fe.height,0,qe,Me,null);else if(ve.length>0&&ut){yt&&Ge&&t.texStorage2D(3553,It,N,ve[0].width,ve[0].height);for(let Ie=0,Et=ve.length;Ie<Et;Ie++)we=ve[Ie],yt?t.texSubImage2D(3553,Ie,0,0,qe,Me,we):t.texImage2D(3553,Ie,N,qe,Me,we);I.generateMipmaps=!1}else yt?(Ge&&t.texStorage2D(3553,It,N,fe.width,fe.height),t.texSubImage2D(3553,0,0,0,qe,Me,fe)):t.texImage2D(3553,0,N,qe,Me,fe);M(I,ut)&&D(pe),F.__version=I.version,I.onUpdate&&I.onUpdate(I)}function je(F,I,ue,pe,Se){const fe=s.convert(ue.format),ut=s.convert(ue.type),qe=R(ue.internalFormat,fe,ut,ue.encoding);i.get(I).__hasExternalTextures||(32879===Se||35866===Se?t.texImage3D(Se,0,qe,I.width,I.height,I.depth,0,fe,ut,null):t.texImage2D(Se,0,qe,I.width,I.height,0,fe,ut,null)),t.bindFramebuffer(36160,F),I.useRenderToTexture?f.framebufferTexture2DMultisampleEXT(36160,pe,Se,i.get(ue).__webglTexture,0,Ne(I)):n.framebufferTexture2D(36160,pe,Se,i.get(ue).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ue(F,I,ue){if(n.bindRenderbuffer(36161,F),I.depthBuffer&&!I.stencilBuffer){let pe=33189;if(ue||I.useRenderToTexture){const Se=I.depthTexture;Se&&Se.isDepthTexture&&(Se.type===Oo?pe=36012:1014===Se.type&&(pe=33190));const fe=Ne(I);I.useRenderToTexture?f.renderbufferStorageMultisampleEXT(36161,fe,pe,I.width,I.height):n.renderbufferStorageMultisample(36161,fe,pe,I.width,I.height)}else n.renderbufferStorage(36161,pe,I.width,I.height);n.framebufferRenderbuffer(36160,36096,36161,F)}else if(I.depthBuffer&&I.stencilBuffer){const pe=Ne(I);ue&&I.useRenderbuffer?n.renderbufferStorageMultisample(36161,pe,35056,I.width,I.height):I.useRenderToTexture?f.renderbufferStorageMultisampleEXT(36161,pe,35056,I.width,I.height):n.renderbufferStorage(36161,34041,I.width,I.height),n.framebufferRenderbuffer(36160,33306,36161,F)}else{const pe=!0===I.isWebGLMultipleRenderTargets?I.texture[0]:I.texture,Se=s.convert(pe.format),fe=s.convert(pe.type),ut=R(pe.internalFormat,Se,fe,pe.encoding),qe=Ne(I);ue&&I.useRenderbuffer?n.renderbufferStorageMultisample(36161,qe,ut,I.width,I.height):I.useRenderToTexture?f.renderbufferStorageMultisampleEXT(36161,qe,ut,I.width,I.height):n.renderbufferStorage(36161,ut,I.width,I.height)}n.bindRenderbuffer(36161,null)}function ze(F){const I=i.get(F),ue=!0===F.isWebGLCubeRenderTarget;if(F.depthTexture&&!I.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");!function Fe(F,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,F),!I.depthTexture||!I.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),V(I.depthTexture,0);const pe=i.get(I.depthTexture).__webglTexture,Se=Ne(I);if(I.depthTexture.format===Rl)I.useRenderToTexture?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,pe,0,Se):n.framebufferTexture2D(36160,36096,3553,pe,0);else{if(I.depthTexture.format!==Au)throw new Error("Unknown depthTexture format");I.useRenderToTexture?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,pe,0,Se):n.framebufferTexture2D(36160,33306,3553,pe,0)}}(I.__webglFramebuffer,F)}else if(ue){I.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)t.bindFramebuffer(36160,I.__webglFramebuffer[pe]),I.__webglDepthbuffer[pe]=n.createRenderbuffer(),Ue(I.__webglDepthbuffer[pe],F,!1)}else t.bindFramebuffer(36160,I.__webglFramebuffer),I.__webglDepthbuffer=n.createRenderbuffer(),Ue(I.__webglDepthbuffer,F,!1);t.bindFramebuffer(36160,null)}function Ne(F){return a&&(F.useRenderbuffer||F.useRenderToTexture)?Math.min(d,F.samples):0}let mt=!1,gt=!1;this.allocateTextureUnit=function L(){const F=z;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),z+=1,F},this.resetTextureUnits=function q(){z=0},this.setTexture2D=V,this.setTexture2DArray=function J(F,I){const ue=i.get(F);F.version>0&&ue.__version!==F.version?Dt(ue,F,I):(t.activeTexture(33984+I),t.bindTexture(35866,ue.__webglTexture))},this.setTexture3D=function le(F,I){const ue=i.get(F);F.version>0&&ue.__version!==F.version?Dt(ue,F,I):(t.activeTexture(33984+I),t.bindTexture(32879,ue.__webglTexture))},this.setTextureCube=Q,this.rebindTextures=function Ht(F,I,ue){const pe=i.get(F);void 0!==I&&je(pe.__webglFramebuffer,F,F.texture,36064,3553),void 0!==ue&&ze(F)},this.setupRenderTarget=function te(F){const I=F.texture,ue=i.get(F),pe=i.get(I);F.addEventListener("dispose",H),!0!==F.isWebGLMultipleRenderTargets&&(void 0===pe.__webglTexture&&(pe.__webglTexture=n.createTexture()),pe.__version=I.version,o.memory.textures++);const Se=!0===F.isWebGLCubeRenderTarget,fe=!0===F.isWebGLMultipleRenderTargets,ut=I.isDataTexture3D||I.isDataTexture2DArray,qe=x(F)||a;if(a&&I.format===Il&&(I.type===Oo||I.type===Tl)&&(I.format=li,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Se){ue.__webglFramebuffer=[];for(let Me=0;Me<6;Me++)ue.__webglFramebuffer[Me]=n.createFramebuffer()}else if(ue.__webglFramebuffer=n.createFramebuffer(),fe)if(r.drawBuffers){const Me=F.texture;for(let N=0,we=Me.length;N<we;N++){const ve=i.get(Me[N]);void 0===ve.__webglTexture&&(ve.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(F.useRenderbuffer)if(a){ue.__webglMultisampledFramebuffer=n.createFramebuffer(),ue.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,ue.__webglColorRenderbuffer);const Me=s.convert(I.format),N=s.convert(I.type),we=R(I.internalFormat,Me,N,I.encoding),ve=Ne(F);n.renderbufferStorageMultisample(36161,ve,we,F.width,F.height),t.bindFramebuffer(36160,ue.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,ue.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),F.depthBuffer&&(ue.__webglDepthRenderbuffer=n.createRenderbuffer(),Ue(ue.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Se){t.bindTexture(34067,pe.__webglTexture),xe(34067,I,qe);for(let Me=0;Me<6;Me++)je(ue.__webglFramebuffer[Me],F,I,36064,34069+Me);M(I,qe)&&D(34067),t.unbindTexture()}else if(fe){const Me=F.texture;for(let N=0,we=Me.length;N<we;N++){const ve=Me[N],yt=i.get(ve);t.bindTexture(3553,yt.__webglTexture),xe(3553,ve,qe),je(ue.__webglFramebuffer,F,ve,36064+N,3553),M(ve,qe)&&D(3553)}t.unbindTexture()}else{let Me=3553;ut&&(a?Me=I.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(Me,pe.__webglTexture),xe(Me,I,qe),je(ue.__webglFramebuffer,F,I,36064,Me),M(I,qe)&&D(Me),t.unbindTexture()}F.depthBuffer&&ze(F)},this.updateRenderTargetMipmap=function me(F){const I=x(F)||a,ue=!0===F.isWebGLMultipleRenderTargets?F.texture:[F.texture];for(let pe=0,Se=ue.length;pe<Se;pe++){const fe=ue[pe];if(M(fe,I)){const ut=F.isWebGLCubeRenderTarget?34067:3553,qe=i.get(fe).__webglTexture;t.bindTexture(ut,qe),D(ut),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function be(F){if(F.useRenderbuffer)if(a){const I=F.width,ue=F.height;let pe=16384;const Se=[36064],fe=F.stencilBuffer?33306:36096;F.depthBuffer&&Se.push(fe),F.ignoreDepthForMultisampleCopy||(F.depthBuffer&&(pe|=256),F.stencilBuffer&&(pe|=1024));const ut=i.get(F);t.bindFramebuffer(36008,ut.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,ut.__webglFramebuffer),F.ignoreDepthForMultisampleCopy&&(n.invalidateFramebuffer(36008,[fe]),n.invalidateFramebuffer(36009,[fe])),n.blitFramebuffer(0,0,I,ue,0,0,I,ue,pe,9728),n.invalidateFramebuffer(36008,Se),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,ut.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=ze,this.setupFrameBufferTexture=je,this.safeSetTexture2D=function Ft(F,I){F&&F.isWebGLRenderTarget&&(!1===mt&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),mt=!0),F=F.texture),V(F,I)},this.safeSetTextureCube=function vn(F,I){F&&F.isWebGLCubeRenderTarget&&(!1===gt&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),gt=!0),F=F.texture),Q(F,I)}}function yX(n,e,t){const i=t.isWebGL2;return{convert:function r(s){let o;if(s===Po)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1019===s)return 33635;if(1010===s)return 5120;if(1011===s)return 5122;if(s===Qh)return 5123;if(1013===s)return 5124;if(1014===s)return 5125;if(s===Oo)return 5126;if(s===Tl)return i?5131:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Il)return 6407;if(s===li)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===Rl)return 6402;if(s===Au)return 34041;if(1028===s)return 6403;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1032===s)return 36248;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s){if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(33776===s)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(35840===s)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===s||37496===s)&&(o=e.get("WEBGL_compressed_texture_etc"),null!==o)){if(37492===s)return o.COMPRESSED_RGB8_ETC2;if(37496===s)return o.COMPRESSED_RGBA8_ETC2_EAC}return 37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s||37840===s||37841===s||37842===s||37843===s||37844===s||37845===s||37846===s||37847===s||37848===s||37849===s||37850===s||37851===s||37852===s||37853===s?(o=e.get("WEBGL_compressed_texture_astc"),null!==o?s:null):36492===s?(o=e.get("EXT_texture_compression_bptc"),null!==o?s:null):s===Du?i?34042:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}cw.prototype.isMeshDistanceMaterial=!0;class DP extends Ti{constructor(e=[]){super(),this.cameras=e}}DP.prototype.isArrayCamera=!0;class ed extends tn{constructor(){super(),this.type="Group"}}ed.prototype.isGroup=!0;const _X={type:"move"};class uw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ed,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ed,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new S,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new S),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ed,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new S,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new S),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(_X))),c&&e.hand){o=!0;for(const g of e.hand.values()){const _=t.getJointPose(g,i);if(void 0===c.joints[g.jointName]){const m=new ed;m.matrixAutoUpdate=!1,m.visible=!1,c.joints[g.jointName]=m,c.add(m)}const y=c.joints[g.jointName];null!==_&&(y.matrix.fromArray(_.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=_.radius),y.visible=null!==_}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class dw extends ci{constructor(e,t,i,r,s,o,a,l,c,u){if((u=void 0!==u?u:Rl)!==Rl&&u!==Au)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Rl&&(i=Qh),void 0===i&&u===Au&&(i=Du),super(null,r,s,o,a,l,u,i,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Qn,this.minFilter=void 0!==l?l:Qn,this.flipY=!1,this.generateMipmaps=!1}}dw.prototype.isDepthTexture=!0;class vX extends Pl{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor";const l=e.extensions.has("WEBGL_multisampled_render_to_texture");let c=null,u=null,d=null,h=null,f=!1,p=null;const g=t.getContextAttributes();let _=null,y=null;const m=[],x=new Map,v=new Ti;v.layers.enable(1),v.viewport=new an;const M=new Ti;M.layers.enable(2),M.viewport=new an;const D=[v,M],R=new DP;R.layers.enable(1),R.layers.enable(2);let B=null,Y=null;function U(Q){const ee=x.get(Q.inputSource);ee&&ee.dispatchEvent({type:Q.type,data:Q.inputSource})}function H(){x.forEach(function(Q,ee){Q.disconnect(ee)}),x.clear(),B=null,Y=null,e.setRenderTarget(_),h=null,d=null,u=null,r=null,y=null,le.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function E(Q){const ee=r.inputSources;for(let _e=0;_e<m.length;_e++)x.set(ee[_e],m[_e]);for(let _e=0;_e<Q.removed.length;_e++){const xe=Q.removed[_e],ge=x.get(xe);ge&&(ge.dispatchEvent({type:"disconnected",data:xe}),x.delete(xe))}for(let _e=0;_e<Q.added.length;_e++){const xe=Q.added[_e],ge=x.get(xe);ge&&ge.dispatchEvent({type:"connected",data:xe})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let ee=m[Q];return void 0===ee&&(ee=new uw,m[Q]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(Q){let ee=m[Q];return void 0===ee&&(ee=new uw,m[Q]=ee),ee.getGripSpace()},this.getHand=function(Q){let ee=m[Q];return void 0===ee&&(ee=new uw,m[Q]=ee),ee.getHandSpace()},this.setFramebufferScaleFactor=function(Q){s=Q,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){a=Q,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(){var Q=function MW(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){aR(s,i,r,o,a,"next",l)}function a(l){aR(s,i,r,o,a,"throw",l)}o(void 0)})}}(function*(ee){if(r=ee,null!==r){if(_=e.getRenderTarget(),r.addEventListener("select",U),r.addEventListener("selectstart",U),r.addEventListener("selectend",U),r.addEventListener("squeeze",U),r.addEventListener("squeezestart",U),r.addEventListener("squeezeend",U),r.addEventListener("end",H),r.addEventListener("inputsourceschange",E),!0!==g.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||g.antialias,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:h}),y=new Zr(h.framebufferWidth,h.framebufferHeight,{format:li,type:Po,encoding:e.outputEncoding});else{f=g.antialias;let _e=null,xe=null,ge=null;g.depth&&(ge=g.stencil?35056:33190,_e=g.stencil?Au:Rl,xe=g.stencil?Du:Qh);const Dt={colorFormat:g.alpha||f?32856:32849,depthFormat:ge,scaleFactor:s};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(Dt),r.updateRenderState({layers:[d]}),y=f?new Ab(d.textureWidth,d.textureHeight,{format:li,type:Po,depthTexture:new dw(d.textureWidth,d.textureHeight,xe,void 0,void 0,void 0,void 0,void 0,void 0,_e),stencilBuffer:g.stencil,ignoreDepth:d.ignoreDepthValues,useRenderToTexture:l,encoding:e.outputEncoding}):new Zr(d.textureWidth,d.textureHeight,{format:g.alpha?li:Il,type:Po,depthTexture:new dw(d.textureWidth,d.textureHeight,xe,void 0,void 0,void 0,void 0,void 0,void 0,_e),stencilBuffer:g.stencil,ignoreDepth:d.ignoreDepthValues,encoding:e.outputEncoding})}this.setFoveation(1),o=yield r.requestReferenceSpace(a),le.setContext(r),le.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(ee){return Q.apply(this,arguments)}}();const T=new S,z=new S;function L(Q,ee){null===ee?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(ee.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(null===r)return;R.near=M.near=v.near=Q.near,R.far=M.far=v.far=Q.far,(B!==R.near||Y!==R.far)&&(r.updateRenderState({depthNear:R.near,depthFar:R.far}),B=R.near,Y=R.far);const ee=Q.parent,_e=R.cameras;L(R,ee);for(let ge=0;ge<_e.length;ge++)L(_e[ge],ee);R.matrixWorld.decompose(R.position,R.quaternion,R.scale),Q.position.copy(R.position),Q.quaternion.copy(R.quaternion),Q.scale.copy(R.scale),Q.matrix.copy(R.matrix),Q.matrixWorld.copy(R.matrixWorld);const xe=Q.children;for(let ge=0,Dt=xe.length;ge<Dt;ge++)xe[ge].updateMatrixWorld(!0);2===_e.length?function q(Q,ee,_e){T.setFromMatrixPosition(ee.matrixWorld),z.setFromMatrixPosition(_e.matrixWorld);const xe=T.distanceTo(z),ge=ee.projectionMatrix.elements,Dt=_e.projectionMatrix.elements,ce=ge[14]/(ge[10]-1),je=ge[14]/(ge[10]+1),Ue=(ge[9]+1)/ge[5],Fe=(ge[9]-1)/ge[5],ze=(ge[8]-1)/ge[0],Ht=(Dt[8]+1)/Dt[0],te=ce*ze,me=ce*Ht,be=xe/(-ze+Ht),Ne=be*-ze;ee.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(Ne),Q.translateZ(be),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert();const Te=ce+be,mt=je+be;Q.projectionMatrix.makePerspective(te-Ne,me+(xe-Ne),Ue*je/mt*Te,Fe*je/mt*Te,Te,mt)}(R,v,M):R.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return R},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(Q){null!==d&&(d.fixedFoveation=Q),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=Q)};let V=null;const le=new $R;le.setAnimationLoop(function J(Q,ee){if(c=ee.getViewerPose(o),p=ee,null!==c){const xe=c.views;null!==h&&(e.setRenderTargetFramebuffer(y,h.framebuffer),e.setRenderTarget(y));let ge=!1;xe.length!==R.cameras.length&&(R.cameras.length=0,ge=!0);for(let Dt=0;Dt<xe.length;Dt++){const ce=xe[Dt];let je=null;if(null!==h)je=h.getViewport(ce);else{const Fe=u.getViewSubImage(d,ce);je=Fe.viewport,0===Dt&&(e.setRenderTargetTextures(y,Fe.colorTexture,d.ignoreDepthValues?void 0:Fe.depthStencilTexture),e.setRenderTarget(y))}const Ue=D[Dt];Ue.matrix.fromArray(ce.transform.matrix),Ue.projectionMatrix.fromArray(ce.projectionMatrix),Ue.viewport.set(je.x,je.y,je.width,je.height),0===Dt&&R.matrix.copy(Ue.matrix),!0===ge&&R.cameras.push(Ue)}}const _e=r.inputSources;for(let xe=0;xe<m.length;xe++)m[xe].update(_e[xe],ee,o);V&&V(Q,ee),p=null}),this.setAnimationLoop=function(Q){V=Q},this.dispose=function(){}}}function xX(n){function i(y,m){y.opacity.value=m.opacity,m.color&&y.diffuse.value.copy(m.color),m.emissive&&y.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(y.map.value=m.map),m.alphaMap&&(y.alphaMap.value=m.alphaMap),m.specularMap&&(y.specularMap.value=m.specularMap),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest);const x=n.get(m).envMap;let v,M;x&&(y.envMap.value=x,y.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,y.reflectivity.value=m.reflectivity,y.ior.value=m.ior,y.refractionRatio.value=m.refractionRatio),m.lightMap&&(y.lightMap.value=m.lightMap,y.lightMapIntensity.value=m.lightMapIntensity),m.aoMap&&(y.aoMap.value=m.aoMap,y.aoMapIntensity.value=m.aoMapIntensity),m.map?v=m.map:m.specularMap?v=m.specularMap:m.displacementMap?v=m.displacementMap:m.normalMap?v=m.normalMap:m.bumpMap?v=m.bumpMap:m.roughnessMap?v=m.roughnessMap:m.metalnessMap?v=m.metalnessMap:m.alphaMap?v=m.alphaMap:m.emissiveMap?v=m.emissiveMap:m.clearcoatMap?v=m.clearcoatMap:m.clearcoatNormalMap?v=m.clearcoatNormalMap:m.clearcoatRoughnessMap?v=m.clearcoatRoughnessMap:m.specularIntensityMap?v=m.specularIntensityMap:m.specularColorMap?v=m.specularColorMap:m.transmissionMap?v=m.transmissionMap:m.thicknessMap?v=m.thicknessMap:m.sheenColorMap?v=m.sheenColorMap:m.sheenRoughnessMap&&(v=m.sheenRoughnessMap),void 0!==v&&(v.isWebGLRenderTarget&&(v=v.texture),!0===v.matrixAutoUpdate&&v.updateMatrix(),y.uvTransform.value.copy(v.matrix)),m.aoMap?M=m.aoMap:m.lightMap&&(M=m.lightMap),void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),y.uv2Transform.value.copy(M.matrix))}function d(y,m){y.roughness.value=m.roughness,y.metalness.value=m.metalness,m.roughnessMap&&(y.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(y.metalnessMap.value=m.metalnessMap),m.emissiveMap&&(y.emissiveMap.value=m.emissiveMap),m.bumpMap&&(y.bumpMap.value=m.bumpMap,y.bumpScale.value=m.bumpScale,1===m.side&&(y.bumpScale.value*=-1)),m.normalMap&&(y.normalMap.value=m.normalMap,y.normalScale.value.copy(m.normalScale),1===m.side&&y.normalScale.value.negate()),m.displacementMap&&(y.displacementMap.value=m.displacementMap,y.displacementScale.value=m.displacementScale,y.displacementBias.value=m.displacementBias),n.get(m).envMap&&(y.envMapIntensity.value=m.envMapIntensity)}return{refreshFogUniforms:function e(y,m){y.fogColor.value.copy(m.color),m.isFog?(y.fogNear.value=m.near,y.fogFar.value=m.far):m.isFogExp2&&(y.fogDensity.value=m.density)},refreshMaterialUniforms:function t(y,m,x,v,M){m.isMeshBasicMaterial?i(y,m):m.isMeshLambertMaterial?(i(y,m),function l(y,m){m.emissiveMap&&(y.emissiveMap.value=m.emissiveMap)}(y,m)):m.isMeshToonMaterial?(i(y,m),function u(y,m){m.gradientMap&&(y.gradientMap.value=m.gradientMap),m.emissiveMap&&(y.emissiveMap.value=m.emissiveMap),m.bumpMap&&(y.bumpMap.value=m.bumpMap,y.bumpScale.value=m.bumpScale,1===m.side&&(y.bumpScale.value*=-1)),m.normalMap&&(y.normalMap.value=m.normalMap,y.normalScale.value.copy(m.normalScale),1===m.side&&y.normalScale.value.negate()),m.displacementMap&&(y.displacementMap.value=m.displacementMap,y.displacementScale.value=m.displacementScale,y.displacementBias.value=m.displacementBias)}(y,m)):m.isMeshPhongMaterial?(i(y,m),function c(y,m){y.specular.value.copy(m.specular),y.shininess.value=Math.max(m.shininess,1e-4),m.emissiveMap&&(y.emissiveMap.value=m.emissiveMap),m.bumpMap&&(y.bumpMap.value=m.bumpMap,y.bumpScale.value=m.bumpScale,1===m.side&&(y.bumpScale.value*=-1)),m.normalMap&&(y.normalMap.value=m.normalMap,y.normalScale.value.copy(m.normalScale),1===m.side&&y.normalScale.value.negate()),m.displacementMap&&(y.displacementMap.value=m.displacementMap,y.displacementScale.value=m.displacementScale,y.displacementBias.value=m.displacementBias)}(y,m)):m.isMeshStandardMaterial?(i(y,m),m.isMeshPhysicalMaterial?function h(y,m,x){d(y,m),y.ior.value=m.ior,m.sheen>0&&(y.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),y.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(y.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(y.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(y.clearcoat.value=m.clearcoat,y.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(y.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),y.clearcoatNormalMap.value=m.clearcoatNormalMap,1===m.side&&y.clearcoatNormalScale.value.negate())),m.transmission>0&&(y.transmission.value=m.transmission,y.transmissionSamplerMap.value=x.texture,y.transmissionSamplerSize.value.set(x.width,x.height),m.transmissionMap&&(y.transmissionMap.value=m.transmissionMap),y.thickness.value=m.thickness,m.thicknessMap&&(y.thicknessMap.value=m.thicknessMap),y.attenuationDistance.value=m.attenuationDistance,y.attenuationColor.value.copy(m.attenuationColor)),y.specularIntensity.value=m.specularIntensity,y.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(y.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(y.specularColorMap.value=m.specularColorMap)}(y,m,M):d(y,m)):m.isMeshMatcapMaterial?(i(y,m),function f(y,m){m.matcap&&(y.matcap.value=m.matcap),m.bumpMap&&(y.bumpMap.value=m.bumpMap,y.bumpScale.value=m.bumpScale,1===m.side&&(y.bumpScale.value*=-1)),m.normalMap&&(y.normalMap.value=m.normalMap,y.normalScale.value.copy(m.normalScale),1===m.side&&y.normalScale.value.negate()),m.displacementMap&&(y.displacementMap.value=m.displacementMap,y.displacementScale.value=m.displacementScale,y.displacementBias.value=m.displacementBias)}(y,m)):m.isMeshDepthMaterial?(i(y,m),function p(y,m){m.displacementMap&&(y.displacementMap.value=m.displacementMap,y.displacementScale.value=m.displacementScale,y.displacementBias.value=m.displacementBias)}(y,m)):m.isMeshDistanceMaterial?(i(y,m),function g(y,m){m.displacementMap&&(y.displacementMap.value=m.displacementMap,y.displacementScale.value=m.displacementScale,y.displacementBias.value=m.displacementBias),y.referencePosition.value.copy(m.referencePosition),y.nearDistance.value=m.nearDistance,y.farDistance.value=m.farDistance}(y,m)):m.isMeshNormalMaterial?(i(y,m),function _(y,m){m.bumpMap&&(y.bumpMap.value=m.bumpMap,y.bumpScale.value=m.bumpScale,1===m.side&&(y.bumpScale.value*=-1)),m.normalMap&&(y.normalMap.value=m.normalMap,y.normalScale.value.copy(m.normalScale),1===m.side&&y.normalScale.value.negate()),m.displacementMap&&(y.displacementMap.value=m.displacementMap,y.displacementScale.value=m.displacementScale,y.displacementBias.value=m.displacementBias)}(y,m)):m.isLineBasicMaterial?(function r(y,m){y.diffuse.value.copy(m.color),y.opacity.value=m.opacity}(y,m),m.isLineDashedMaterial&&function s(y,m){y.dashSize.value=m.dashSize,y.totalSize.value=m.dashSize+m.gapSize,y.scale.value=m.scale}(y,m)):m.isPointsMaterial?function o(y,m,x,v){let M;y.diffuse.value.copy(m.color),y.opacity.value=m.opacity,y.size.value=m.size*x,y.scale.value=.5*v,m.map&&(y.map.value=m.map),m.alphaMap&&(y.alphaMap.value=m.alphaMap),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest),m.map?M=m.map:m.alphaMap&&(M=m.alphaMap),void 0!==M&&(!0===M.matrixAutoUpdate&&M.updateMatrix(),y.uvTransform.value.copy(M.matrix))}(y,m,x,v):m.isSpriteMaterial?function a(y,m){let x;y.diffuse.value.copy(m.color),y.opacity.value=m.opacity,y.rotation.value=m.rotation,m.map&&(y.map.value=m.map),m.alphaMap&&(y.alphaMap.value=m.alphaMap),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest),m.map?x=m.map:m.alphaMap&&(x=m.alphaMap),void 0!==x&&(!0===x.matrixAutoUpdate&&x.updateMatrix(),y.uvTransform.value.copy(x.matrix))}(y,m):m.isShadowMaterial?(y.color.value.copy(m.color),y.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}}}function ln(n={}){const e=void 0!==n.canvas?n.canvas:function bX(){const n=xg("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0!==n.alpha&&n.alpha,r=void 0===n.depth||n.depth,s=void 0===n.stencil||n.stencil,o=void 0!==n.antialias&&n.antialias,a=void 0===n.premultipliedAlpha||n.premultipliedAlpha,l=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,c=void 0!==n.powerPreference?n.powerPreference:"default",u=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let d=null,h=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=As,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const g=this;let _=!1,y=0,m=0,x=null,v=-1,M=null;const D=new an,R=new an;let B=null,Y=e.width,U=e.height,H=1,E=null,T=null;const z=new an(0,0,Y,U),q=new an(0,0,Y,U);let L=!1;const V=[],J=new Hg;let le=!1,Q=!1,ee=null;const _e=new Ve,xe=new S,ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Dt(){return null===x?H:1}let Ue,Fe,ze,Ht,te,me,be,Ne,Te,mt,gt,Ft,vn,F,I,ue,pe,Se,fe,ut,qe,Me,N,ce=t;function je(A,j){for(let K=0;K<A.length;K++){const re=e.getContext(A[K],j);if(null!==re)return re}return null}try{const A={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r136"),e.addEventListener("webglcontextlost",yt,!1),e.addEventListener("webglcontextrestored",Ge,!1),null===ce){const j=["webgl2","webgl","experimental-webgl"];if(!0===g.isWebGL1Renderer&&j.shift(),ce=je(j,A),null===ce)throw je(j)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(A){throw console.error("THREE.WebGLRenderer: "+A.message),A}function we(){Ue=new zq(ce),Fe=new Fq(ce,Ue,n),Ue.init(Fe),Me=new yX(ce,Ue,Fe),ze=new mX(ce,Ue,Fe),V[0]=1029,Ht=new jq(ce),te=new rX,me=new gX(ce,Ue,ze,te,Fe,Me,Ht),be=new Lq(g),Ne=new Hq(g),Te=new L7(ce,Fe),N=new Pq(ce,Ue,Te,Fe),mt=new Uq(ce,Te,Ht,N),gt=new Yq(ce,mt,Te,Ht),fe=new qq(ce,Fe,me),ue=new kq(te),Ft=new iX(g,be,Ne,Ue,Fe,N,ue),vn=new xX(te),F=new oX,I=new hX(Ue,Fe),Se=new Rq(g,be,ze,gt,a),pe=new EP(g,gt,Fe),ut=new Oq(ce,Ue,Ht,Fe),qe=new Gq(ce,Ue,Ht,Fe),Ht.programs=Ft.programs,g.capabilities=Fe,g.extensions=Ue,g.properties=te,g.renderLists=F,g.shadowMap=pe,g.state=ze,g.info=Ht}we();const ve=new vX(g,ce);function yt(A){A.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Ge(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const A=Ht.autoReset,j=pe.enabled,K=pe.autoUpdate,X=pe.needsUpdate,re=pe.type;we(),Ht.autoReset=A,pe.enabled=j,pe.autoUpdate=K,pe.needsUpdate=X,pe.type=re}function It(A){const j=A.target;j.removeEventListener("dispose",It),function Ie(A){(function Et(A){const j=te.get(A).programs;void 0!==j&&(j.forEach(function(K){Ft.releaseProgram(K)}),A.isShaderMaterial&&Ft.releaseShaderCache(A))})(A),te.remove(A)}(j)}this.xr=ve,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const A=Ue.get("WEBGL_lose_context");A&&A.loseContext()},this.forceContextRestore=function(){const A=Ue.get("WEBGL_lose_context");A&&A.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(A){void 0!==A&&(H=A,this.setSize(Y,U,!1))},this.getSize=function(A){return A.set(Y,U)},this.setSize=function(A,j,K){ve.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Y=A,U=j,e.width=Math.floor(A*H),e.height=Math.floor(j*H),!1!==K&&(e.style.width=A+"px",e.style.height=j+"px"),this.setViewport(0,0,A,j))},this.getDrawingBufferSize=function(A){return A.set(Y*H,U*H).floor()},this.setDrawingBufferSize=function(A,j,K){Y=A,U=j,H=K,e.width=Math.floor(A*K),e.height=Math.floor(j*K),this.setViewport(0,0,A,j)},this.getCurrentViewport=function(A){return A.copy(D)},this.getViewport=function(A){return A.copy(z)},this.setViewport=function(A,j,K,X){A.isVector4?z.set(A.x,A.y,A.z,A.w):z.set(A,j,K,X),ze.viewport(D.copy(z).multiplyScalar(H).floor())},this.getScissor=function(A){return A.copy(q)},this.setScissor=function(A,j,K,X){A.isVector4?q.set(A.x,A.y,A.z,A.w):q.set(A,j,K,X),ze.scissor(R.copy(q).multiplyScalar(H).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(A){ze.setScissorTest(L=A)},this.setOpaqueSort=function(A){E=A},this.setTransparentSort=function(A){T=A},this.getClearColor=function(A){return A.copy(Se.getClearColor())},this.setClearColor=function(){Se.setClearColor.apply(Se,arguments)},this.getClearAlpha=function(){return Se.getClearAlpha()},this.setClearAlpha=function(){Se.setClearAlpha.apply(Se,arguments)},this.clear=function(A,j,K){let X=0;(void 0===A||A)&&(X|=16384),(void 0===j||j)&&(X|=256),(void 0===K||K)&&(X|=1024),ce.clear(X)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",yt,!1),e.removeEventListener("webglcontextrestored",Ge,!1),F.dispose(),I.dispose(),te.dispose(),be.dispose(),Ne.dispose(),gt.dispose(),N.dispose(),Ft.dispose(),ve.dispose(),ve.removeEventListener("sessionstart",ho),ve.removeEventListener("sessionend",fo),ee&&(ee.dispose(),ee=null),hc.stop()},this.renderBufferDirect=function(A,j,K,X,re,dt){null===j&&(j=ge);const _t=re.isMesh&&re.matrixWorld.determinant()<0,kt=function ffe(A,j,K,X,re){!0!==j.isScene&&(j=ge),me.resetTextureUnits();const dt=j.fog,kt=null===x?g.outputEncoding:x.texture.encoding,ht=(X.isMeshStandardMaterial?Ne:be).get(X.envMap||(X.isMeshStandardMaterial?j.environment:null)),Xt=!0===X.vertexColors&&!!K.attributes.color&&4===K.attributes.color.itemSize,Lt=!!X.normalMap&&!!K.attributes.tangent,Yt=!!K.morphAttributes.position,Fn=!!K.morphAttributes.normal,fc=K.morphAttributes.position?K.morphAttributes.position.length:0,Hd=X.toneMapped?g.toneMapping:0,nn=te.get(X),po=h.state.lights;!0!==le||!0!==Q&&A===M||ue.setState(X,A,A===M&&X.id===v);let di=!1;X.version===nn.__version?(nn.needsLights&&nn.lightsStateVersion!==po.state.version||nn.outputEncoding!==kt||re.isInstancedMesh&&!1===nn.instancing||!re.isInstancedMesh&&!0===nn.instancing||re.isSkinnedMesh&&!1===nn.skinning||!re.isSkinnedMesh&&!0===nn.skinning||nn.envMap!==ht||X.fog&&nn.fog!==dt||void 0!==nn.numClippingPlanes&&(nn.numClippingPlanes!==ue.numPlanes||nn.numIntersection!==ue.numIntersection)||nn.vertexAlphas!==Xt||nn.vertexTangents!==Lt||nn.morphTargets!==Yt||nn.morphNormals!==Fn||nn.toneMapping!==Hd||!0===Fe.isWebGL2&&nn.morphTargetsCount!==fc)&&(di=!0):(di=!0,nn.__version=X.version);let mo=nn.currentProgram;!0===di&&(mo=zS(X,j,re));let gv=!1,go=!1,ra=!1;const qi=mo.getUniforms(),bp=nn.uniforms;if(ze.useProgram(mo.program)&&(gv=!0,go=!0,ra=!0),X.id!==v&&(v=X.id,go=!0),gv||M!==A){if(qi.setValue(ce,"projectionMatrix",A.projectionMatrix),Fe.logarithmicDepthBuffer&&qi.setValue(ce,"logDepthBufFC",2/(Math.log(A.far+1)/Math.LN2)),M!==A&&(M=A,go=!0,ra=!0),X.isShaderMaterial||X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshStandardMaterial||X.envMap){const Ls=qi.map.cameraPosition;void 0!==Ls&&Ls.setValue(ce,xe.setFromMatrixPosition(A.matrixWorld))}(X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial)&&qi.setValue(ce,"isOrthographic",!0===A.isOrthographicCamera),(X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial||X.isShadowMaterial||re.isSkinnedMesh)&&qi.setValue(ce,"viewMatrix",A.matrixWorldInverse)}if(re.isSkinnedMesh){qi.setOptional(ce,re,"bindMatrix"),qi.setOptional(ce,re,"bindMatrixInverse");const Ls=re.skeleton;Ls&&(Fe.floatVertexTextures?(null===Ls.boneTexture&&Ls.computeBoneTexture(),qi.setValue(ce,"boneTexture",Ls.boneTexture,me),qi.setValue(ce,"boneTextureSize",Ls.boneTextureSize)):qi.setOptional(ce,Ls,"boneMatrices"))}return!!K&&(void 0!==K.morphAttributes.position||void 0!==K.morphAttributes.normal)&&fe.update(re,K,X,mo),(go||nn.receiveShadow!==re.receiveShadow)&&(nn.receiveShadow=re.receiveShadow,qi.setValue(ce,"receiveShadow",re.receiveShadow)),go&&(qi.setValue(ce,"toneMappingExposure",g.toneMappingExposure),nn.needsLights&&function pfe(A,j){A.ambientLightColor.needsUpdate=j,A.lightProbe.needsUpdate=j,A.directionalLights.needsUpdate=j,A.directionalLightShadows.needsUpdate=j,A.pointLights.needsUpdate=j,A.pointLightShadows.needsUpdate=j,A.spotLights.needsUpdate=j,A.spotLightShadows.needsUpdate=j,A.rectAreaLights.needsUpdate=j,A.hemisphereLights.needsUpdate=j}(bp,ra),dt&&X.fog&&vn.refreshFogUniforms(bp,dt),vn.refreshMaterialUniforms(bp,X,H,U,ee),Va.upload(ce,nn.uniformsList,bp,me)),X.isShaderMaterial&&!0===X.uniformsNeedUpdate&&(Va.upload(ce,nn.uniformsList,bp,me),X.uniformsNeedUpdate=!1),X.isSpriteMaterial&&qi.setValue(ce,"center",re.center),qi.setValue(ce,"modelViewMatrix",re.modelViewMatrix),qi.setValue(ce,"normalMatrix",re.normalMatrix),qi.setValue(ce,"modelMatrix",re.matrixWorld),mo}(A,j,K,X,re);ze.setMaterial(X,_t);let ht=K.index;const Xt=K.attributes.position;if(null===ht){if(void 0===Xt||0===Xt.count)return}else if(0===ht.count)return;let Lt=1;!0===X.wireframe&&(ht=mt.getWireframeAttribute(K),Lt=2),N.setup(re,X,kt,K,ht);let Yt,Fn=ut;null!==ht&&(Yt=Te.get(ht),Fn=qe,Fn.setIndex(Yt));const fc=null!==ht?ht.count:Xt.count,Hd=K.drawRange.start*Lt,nn=K.drawRange.count*Lt,po=null!==dt?dt.start*Lt:0,di=null!==dt?dt.count*Lt:1/0,mo=Math.max(Hd,po),gv=Math.min(fc,Hd+nn,po+di)-1,go=Math.max(0,gv-mo+1);if(0!==go){if(re.isMesh)!0===X.wireframe?(ze.setLineWidth(X.wireframeLinewidth*Dt()),Fn.setMode(1)):Fn.setMode(4);else if(re.isLine){let ra=X.linewidth;void 0===ra&&(ra=1),ze.setLineWidth(ra*Dt()),Fn.setMode(re.isLineSegments?1:re.isLineLoop?2:3)}else re.isPoints?Fn.setMode(0):re.isSprite&&Fn.setMode(4);if(re.isInstancedMesh)Fn.renderInstances(mo,go,re.count);else if(K.isInstancedBufferGeometry){const ra=Math.min(K.instanceCount,K._maxInstanceCount);Fn.renderInstances(mo,go,ra)}else Fn.render(mo,go)}},this.compile=function(A,j){h=I.get(A),h.init(),p.push(h),A.traverseVisible(function(K){K.isLight&&K.layers.test(j.layers)&&(h.pushLight(K),K.castShadow&&h.pushShadow(K))}),h.setupLights(g.physicallyCorrectLights),A.traverse(function(K){const X=K.material;if(X)if(Array.isArray(X))for(let re=0;re<X.length;re++)zS(X[re],A,K);else zS(X,A,K)}),p.pop(),h=null};let gn=null;function ho(){hc.stop()}function fo(){hc.start()}const hc=new $R;function ZB(A,j,K,X){if(!1===A.visible)return;if(A.layers.test(j.layers))if(A.isGroup)K=A.renderOrder;else if(A.isLOD)!0===A.autoUpdate&&A.update(j);else if(A.isLight)h.pushLight(A),A.castShadow&&h.pushShadow(A);else if(A.isSprite){if(!A.frustumCulled||J.intersectsSprite(A)){X&&xe.setFromMatrixPosition(A.matrixWorld).applyMatrix4(_e);const _t=gt.update(A),kt=A.material;kt.visible&&d.push(A,_t,kt,K,xe.z,null)}}else if((A.isMesh||A.isLine||A.isPoints)&&(A.isSkinnedMesh&&A.skeleton.frame!==Ht.render.frame&&(A.skeleton.update(),A.skeleton.frame=Ht.render.frame),!A.frustumCulled||J.intersectsObject(A))){X&&xe.setFromMatrixPosition(A.matrixWorld).applyMatrix4(_e);const _t=gt.update(A),kt=A.material;if(Array.isArray(kt)){const ht=_t.groups;for(let Xt=0,Lt=ht.length;Xt<Lt;Xt++){const Yt=ht[Xt],Fn=kt[Yt.materialIndex];Fn&&Fn.visible&&d.push(A,_t,Fn,K,xe.z,Yt)}}else kt.visible&&d.push(A,_t,kt,K,xe.z,null)}const dt=A.children;for(let _t=0,kt=dt.length;_t<kt;_t++)ZB(dt[_t],j,K,X)}function KB(A,j,K,X){const re=A.opaque,dt=A.transmissive,_t=A.transparent;h.setupLightsView(K),dt.length>0&&function dfe(A,j,K){null===ee&&(ee=new(!0===o&&!0===Fe.isWebGL2?Ab:Zr)(1024,1024,{generateMipmaps:!0,type:null!==Me.convert(Tl)?Tl:Po,minFilter:1008,magFilter:Qn,wrapS:Gi,wrapT:Gi,useRenderToTexture:Ue.has("WEBGL_multisampled_render_to_texture")}));const X=g.getRenderTarget();g.setRenderTarget(ee),g.clear();const re=g.toneMapping;g.toneMapping=0,mv(A,j,K),g.toneMapping=re,me.updateMultisampleRenderTarget(ee),me.updateRenderTargetMipmap(ee),g.setRenderTarget(X)}(re,j,K),X&&ze.viewport(D.copy(X)),re.length>0&&mv(re,j,K),dt.length>0&&mv(dt,j,K),_t.length>0&&mv(_t,j,K)}function mv(A,j,K){const X=!0===j.isScene?j.overrideMaterial:null;for(let re=0,dt=A.length;re<dt;re++){const _t=A[re],kt=_t.object,ht=_t.geometry,Xt=null===X?_t.material:X,Lt=_t.group;kt.layers.test(K.layers)&&hfe(kt,j,K,ht,Xt,Lt)}}function hfe(A,j,K,X,re,dt){A.onBeforeRender(g,j,K,X,re,dt),A.modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,A.matrixWorld),A.normalMatrix.getNormalMatrix(A.modelViewMatrix),re.onBeforeRender(g,j,K,X,A,dt),!0===re.transparent&&2===re.side?(re.side=1,re.needsUpdate=!0,g.renderBufferDirect(K,j,X,re,A,dt),re.side=0,re.needsUpdate=!0,g.renderBufferDirect(K,j,X,re,A,dt),re.side=2):g.renderBufferDirect(K,j,X,re,A,dt),A.onAfterRender(g,j,K,X,re,dt)}function zS(A,j,K){!0!==j.isScene&&(j=ge);const X=te.get(A),re=h.state.lights,_t=re.state.version,kt=Ft.getParameters(A,re.state,h.state.shadowsArray,j,K),ht=Ft.getProgramCacheKey(kt);let Xt=X.programs;X.environment=A.isMeshStandardMaterial?j.environment:null,X.fog=j.fog,X.envMap=(A.isMeshStandardMaterial?Ne:be).get(A.envMap||X.environment),void 0===Xt&&(A.addEventListener("dispose",It),Xt=new Map,X.programs=Xt);let Lt=Xt.get(ht);if(void 0!==Lt){if(X.currentProgram===Lt&&X.lightsStateVersion===_t)return JB(A,kt),Lt}else kt.uniforms=Ft.getUniforms(A),A.onBuild(K,kt,g),A.onBeforeCompile(kt,g),Lt=Ft.acquireProgram(kt,ht),Xt.set(ht,Lt),X.uniforms=kt.uniforms;const Yt=X.uniforms;(!A.isShaderMaterial&&!A.isRawShaderMaterial||!0===A.clipping)&&(Yt.clippingPlanes=ue.uniform),JB(A,kt),X.needsLights=function mfe(A){return A.isMeshLambertMaterial||A.isMeshToonMaterial||A.isMeshPhongMaterial||A.isMeshStandardMaterial||A.isShadowMaterial||A.isShaderMaterial&&!0===A.lights}(A),X.lightsStateVersion=_t,X.needsLights&&(Yt.ambientLightColor.value=re.state.ambient,Yt.lightProbe.value=re.state.probe,Yt.directionalLights.value=re.state.directional,Yt.directionalLightShadows.value=re.state.directionalShadow,Yt.spotLights.value=re.state.spot,Yt.spotLightShadows.value=re.state.spotShadow,Yt.rectAreaLights.value=re.state.rectArea,Yt.ltc_1.value=re.state.rectAreaLTC1,Yt.ltc_2.value=re.state.rectAreaLTC2,Yt.pointLights.value=re.state.point,Yt.pointLightShadows.value=re.state.pointShadow,Yt.hemisphereLights.value=re.state.hemi,Yt.directionalShadowMap.value=re.state.directionalShadowMap,Yt.directionalShadowMatrix.value=re.state.directionalShadowMatrix,Yt.spotShadowMap.value=re.state.spotShadowMap,Yt.spotShadowMatrix.value=re.state.spotShadowMatrix,Yt.pointShadowMap.value=re.state.pointShadowMap,Yt.pointShadowMatrix.value=re.state.pointShadowMatrix);const Fn=Lt.getUniforms(),fc=Va.seqWithValue(Fn.seq,Yt);return X.currentProgram=Lt,X.uniformsList=fc,Lt}function JB(A,j){const K=te.get(A);K.outputEncoding=j.outputEncoding,K.instancing=j.instancing,K.skinning=j.skinning,K.morphTargets=j.morphTargets,K.morphNormals=j.morphNormals,K.morphTargetsCount=j.morphTargetsCount,K.numClippingPlanes=j.numClippingPlanes,K.numIntersection=j.numClipIntersection,K.vertexAlphas=j.vertexAlphas,K.vertexTangents=j.vertexTangents,K.toneMapping=j.toneMapping}hc.setAnimationLoop(function cn(A){gn&&gn(A)}),"undefined"!=typeof window&&hc.setContext(window),this.setAnimationLoop=function(A){gn=A,ve.setAnimationLoop(A),null===A?hc.stop():hc.start()},ve.addEventListener("sessionstart",ho),ve.addEventListener("sessionend",fo),this.render=function(A,j){if(void 0===j||!0===j.isCamera){if(!0!==_){if(!0===A.autoUpdate&&A.updateMatrixWorld(),null===j.parent&&j.updateMatrixWorld(),!0===ve.enabled&&!0===ve.isPresenting&&(!0===ve.cameraAutoUpdate&&ve.updateCamera(j),j=ve.getCamera()),!0===A.isScene&&A.onBeforeRender(g,A,j,x),h=I.get(A,p.length),h.init(),p.push(h),_e.multiplyMatrices(j.projectionMatrix,j.matrixWorldInverse),J.setFromProjectionMatrix(_e),Q=this.localClippingEnabled,le=ue.init(this.clippingPlanes,Q,j),d=F.get(A,f.length),d.init(),f.push(d),ZB(A,j,0,g.sortObjects),d.finish(),!0===g.sortObjects&&d.sort(E,T),!0===le&&ue.beginShadows(),pe.render(h.state.shadowsArray,A,j),!0===le&&ue.endShadows(),!0===this.info.autoReset&&this.info.reset(),Se.render(d,A),h.setupLights(g.physicallyCorrectLights),j.isArrayCamera){const X=j.cameras;for(let re=0,dt=X.length;re<dt;re++){const _t=X[re];KB(d,A,_t,_t.viewport)}}else KB(d,A,j);null!==x&&(me.updateMultisampleRenderTarget(x),me.updateRenderTargetMipmap(x)),!0===A.isScene&&A.onAfterRender(g,A,j),ze.buffers.depth.setTest(!0),ze.buffers.depth.setMask(!0),ze.buffers.color.setMask(!0),ze.setPolygonOffset(!1),N.resetDefaultState(),v=-1,M=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return m},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(A,j,K){te.get(A.texture).__webglTexture=j,te.get(A.depthTexture).__webglTexture=K;const X=te.get(A);X.__hasExternalTextures=!0,X.__hasExternalTextures&&(X.__autoAllocateDepthBuffer=void 0===K,X.__autoAllocateDepthBuffer||A.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),A.useRenderToTexture=!1,A.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(A,j){const K=te.get(A);K.__webglFramebuffer=j,K.__useDefaultFramebuffer=void 0===j},this.setRenderTarget=function(A,j=0,K=0){x=A,y=j,m=K;let X=!0;if(A){const ht=te.get(A);void 0!==ht.__useDefaultFramebuffer?(ze.bindFramebuffer(36160,null),X=!1):void 0===ht.__webglFramebuffer?me.setupRenderTarget(A):ht.__hasExternalTextures&&me.rebindTextures(A,te.get(A.texture).__webglTexture,te.get(A.depthTexture).__webglTexture)}let re=null,dt=!1,_t=!1;if(A){const ht=A.texture;(ht.isDataTexture3D||ht.isDataTexture2DArray)&&(_t=!0);const Xt=te.get(A).__webglFramebuffer;A.isWebGLCubeRenderTarget?(re=Xt[j],dt=!0):re=A.useRenderbuffer?te.get(A).__webglMultisampledFramebuffer:Xt,D.copy(A.viewport),R.copy(A.scissor),B=A.scissorTest}else D.copy(z).multiplyScalar(H).floor(),R.copy(q).multiplyScalar(H).floor(),B=L;if(ze.bindFramebuffer(36160,re)&&Fe.drawBuffers&&X){let ht=!1;if(A)if(A.isWebGLMultipleRenderTargets){const Xt=A.texture;if(V.length!==Xt.length||36064!==V[0]){for(let Lt=0,Yt=Xt.length;Lt<Yt;Lt++)V[Lt]=36064+Lt;V.length=Xt.length,ht=!0}}else(1!==V.length||36064!==V[0])&&(V[0]=36064,V.length=1,ht=!0);else(1!==V.length||1029!==V[0])&&(V[0]=1029,V.length=1,ht=!0);ht&&(Fe.isWebGL2?ce.drawBuffers(V):Ue.get("WEBGL_draw_buffers").drawBuffersWEBGL(V))}if(ze.viewport(D),ze.scissor(R),ze.setScissorTest(B),dt){const ht=te.get(A.texture);ce.framebufferTexture2D(36160,36064,34069+j,ht.__webglTexture,K)}else if(_t){const ht=te.get(A.texture);ce.framebufferTextureLayer(36160,36064,ht.__webglTexture,K||0,j||0)}v=-1},this.readRenderTargetPixels=function(A,j,K,X,re,dt,_t){if(!A||!A.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let kt=te.get(A).__webglFramebuffer;if(A.isWebGLCubeRenderTarget&&void 0!==_t&&(kt=kt[_t]),kt){ze.bindFramebuffer(36160,kt);try{const ht=A.texture,Xt=ht.format,Lt=ht.type;if(Xt!==li&&Me.convert(Xt)!==ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Yt=Lt===Tl&&(Ue.has("EXT_color_buffer_half_float")||Fe.isWebGL2&&Ue.has("EXT_color_buffer_float"));if(!(Lt===Po||Me.convert(Lt)===ce.getParameter(35738)||Lt===Oo&&(Fe.isWebGL2||Ue.has("OES_texture_float")||Ue.has("WEBGL_color_buffer_float"))||Yt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ce.checkFramebufferStatus(36160)?j>=0&&j<=A.width-X&&K>=0&&K<=A.height-re&&ce.readPixels(j,K,X,re,Me.convert(Xt),Me.convert(Lt),dt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const ht=null!==x?te.get(x).__webglFramebuffer:null;ze.bindFramebuffer(36160,ht)}}},this.copyFramebufferToTexture=function(A,j,K=0){if(!0!==j.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const X=Math.pow(2,-K),re=Math.floor(j.image.width*X),dt=Math.floor(j.image.height*X);me.setTexture2D(j,0),ce.copyTexSubImage2D(3553,K,0,0,A.x,A.y,re,dt),ze.unbindTexture()},this.copyTextureToTexture=function(A,j,K,X=0){const re=j.image.width,dt=j.image.height,_t=Me.convert(K.format),kt=Me.convert(K.type);me.setTexture2D(K,0),ce.pixelStorei(37440,K.flipY),ce.pixelStorei(37441,K.premultiplyAlpha),ce.pixelStorei(3317,K.unpackAlignment),j.isDataTexture?ce.texSubImage2D(3553,X,A.x,A.y,re,dt,_t,kt,j.image.data):j.isCompressedTexture?ce.compressedTexSubImage2D(3553,X,A.x,A.y,j.mipmaps[0].width,j.mipmaps[0].height,_t,j.mipmaps[0].data):ce.texSubImage2D(3553,X,A.x,A.y,_t,kt,j.image),0===X&&K.generateMipmaps&&ce.generateMipmap(3553),ze.unbindTexture()},this.copyTextureToTexture3D=function(A,j,K,X,re=0){if(g.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const dt=A.max.x-A.min.x+1,_t=A.max.y-A.min.y+1,kt=A.max.z-A.min.z+1,ht=Me.convert(X.format),Xt=Me.convert(X.type);let Lt;if(X.isDataTexture3D)me.setTexture3D(X,0),Lt=32879;else{if(!X.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");me.setTexture2DArray(X,0),Lt=35866}ce.pixelStorei(37440,X.flipY),ce.pixelStorei(37441,X.premultiplyAlpha),ce.pixelStorei(3317,X.unpackAlignment);const Yt=ce.getParameter(3314),Fn=ce.getParameter(32878),fc=ce.getParameter(3316),Hd=ce.getParameter(3315),nn=ce.getParameter(32877),po=K.isCompressedTexture?K.mipmaps[0]:K.image;ce.pixelStorei(3314,po.width),ce.pixelStorei(32878,po.height),ce.pixelStorei(3316,A.min.x),ce.pixelStorei(3315,A.min.y),ce.pixelStorei(32877,A.min.z),K.isDataTexture||K.isDataTexture3D?ce.texSubImage3D(Lt,re,j.x,j.y,j.z,dt,_t,kt,ht,Xt,po.data):K.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ce.compressedTexSubImage3D(Lt,re,j.x,j.y,j.z,dt,_t,kt,ht,po.data)):ce.texSubImage3D(Lt,re,j.x,j.y,j.z,dt,_t,kt,ht,Xt,po),ce.pixelStorei(3314,Yt),ce.pixelStorei(32878,Fn),ce.pixelStorei(3316,fc),ce.pixelStorei(3315,Hd),ce.pixelStorei(32877,nn),0===re&&X.generateMipmaps&&ce.generateMipmap(Lt),ze.unbindTexture()},this.initTexture=function(A){me.setTexture2D(A,0),ze.unbindTexture()},this.resetState=function(){y=0,m=0,x=null,ze.reset(),N.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}ln.prototype.isWebGLRenderer=!0,class wX extends ln{}.prototype.isWebGL1Renderer=!0;class $g{constructor(e,t=25e-5){this.name="",this.color=new Pe(e),this.density=t}clone(){return new $g(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}$g.prototype.isFogExp2=!0;class qg{constructor(e,t=1,i=1e3){this.name="",this.color=new Pe(e),this.near=t,this.far=i}clone(){return new qg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}qg.prototype.isFog=!0;class hw extends tn{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}hw.prototype.isScene=!0;class td{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Zh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Dr()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}td.prototype.isInterleavedBuffer=!0;const zn=new S;class zl{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)zn.x=this.getX(t),zn.y=this.getY(t),zn.z=this.getZ(t),zn.applyMatrix4(e),this.setXYZ(t,zn.x,zn.y,zn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)zn.x=this.getX(t),zn.y=this.getY(t),zn.z=this.getZ(t),zn.applyNormalMatrix(e),this.setXYZ(t,zn.x,zn.y,zn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)zn.x=this.getX(t),zn.y=this.getY(t),zn.z=this.getZ(t),zn.transformDirection(e),this.setXYZ(t,zn.x,zn.y,zn.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new dn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new zl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}zl.prototype.isInterleavedBufferAttribute=!0;class fw extends Ai{constructor(e){super(),this.type="SpriteMaterial",this.color=new Pe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let nd;fw.prototype.isSpriteMaterial=!0;const hf=new S,id=new S,rd=new S,sd=new se,ff=new se,AP=new Ve,Yg=new S,pf=new S,Xg=new S,TP=new se,pw=new se,IP=new se;function Qg(n,e,t,i,r,s){sd.subVectors(n,t).addScalar(.5).multiply(i),void 0!==r?(ff.x=s*sd.x-r*sd.y,ff.y=r*sd.x+s*sd.y):ff.copy(sd),n.copy(e),n.x+=ff.x,n.y+=ff.y,n.applyMatrix4(AP)}(class mw extends tn{constructor(e){if(super(),this.type="Sprite",void 0===nd){nd=new et;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new td(t,5);nd.setIndex([0,1,2,0,2,3]),nd.setAttribute("position",new zl(i,3,0,!1)),nd.setAttribute("uv",new zl(i,2,3,!1))}this.geometry=nd,this.material=void 0!==e?e:new fw,this.center=new se(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),id.setFromMatrixScale(this.matrixWorld),AP.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),rd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&id.multiplyScalar(-rd.z);const i=this.material.rotation;let r,s;0!==i&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Qg(Yg.set(-.5,-.5,0),rd,o,id,r,s),Qg(pf.set(.5,-.5,0),rd,o,id,r,s),Qg(Xg.set(.5,.5,0),rd,o,id,r,s),TP.set(0,0),pw.set(1,0),IP.set(1,1);let a=e.ray.intersectTriangle(Yg,pf,Xg,!1,hf);if(null===a&&(Qg(pf.set(-.5,.5,0),rd,o,id,r,s),pw.set(0,1),a=e.ray.intersectTriangle(Yg,Xg,pf,!1,hf),null===a))return;const l=e.ray.origin.distanceTo(hf);l<e.near||l>e.far||t.push({distance:l,point:hf.clone(),uv:Zn.getUV(hf,Yg,pf,Xg,TP,pw,IP,new se),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const PP=new S,OP=new an,FP=new an,CX=new S,kP=new Ve;class gw extends _i{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ve,this.bindMatrixInverse=new Ve}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new an,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;OP.fromBufferAttribute(r.attributes.skinIndex,e),FP.fromBufferAttribute(r.attributes.skinWeight,e),PP.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=FP.getComponent(s);if(0!==o){const a=OP.getComponent(s);kP.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(CX.copy(PP).applyMatrix4(kP),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}gw.prototype.isSkinnedMesh=!0;(class yw extends tn{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class od extends ci{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Qn,u=Qn,d,h){super(null,o,a,l,c,u,r,s,d,h),this.image={data:e,width:t,height:i},this.magFilter=c,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}).prototype.isDataTexture=!0;class ad extends dn{constructor(e,t,i,r=1){"number"==typeof i&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}ad.prototype.isInstancedBufferAttribute=!0;const NP=new Ve,BP=new Ve,Kg=[],mf=new _i;(class VP extends _i{constructor(e,t,i){super(e,t),this.instanceMatrix=new ad(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(mf.geometry=this.geometry,mf.material=this.material,void 0!==mf.material)for(let s=0;s<r;s++){this.getMatrixAt(s,NP),BP.multiplyMatrices(i,NP),mf.matrixWorld=BP,mf.raycast(e,Kg);for(let o=0,a=Kg.length;o<a;o++){const l=Kg[o];l.instanceId=s,l.object=this,t.push(l)}Kg.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new ad(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Ii extends Ai{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Pe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Ii.prototype.isLineBasicMaterial=!0;const HP=new S,zP=new S,UP=new Ve,vw=new Nl,Jg=new Ll;class Ul extends tn{constructor(e=new et,t=new Ii){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)HP.fromBufferAttribute(t,r-1),zP.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=HP.distanceTo(zP);e.setAttribute("lineDistance",new He(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Jg.copy(i.boundingSphere),Jg.applyMatrix4(r),Jg.radius+=s,!1===e.ray.intersectsSphere(Jg))return;UP.copy(r).invert(),vw.copy(e.ray).applyMatrix4(UP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new S,u=new S,d=new S,h=new S,f=this.isLineSegments?2:1;if(i.isBufferGeometry){const p=i.index,_=i.attributes.position;if(null!==p)for(let x=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count)-1;x<v;x+=f){const M=p.getX(x),D=p.getX(x+1);if(c.fromBufferAttribute(_,M),u.fromBufferAttribute(_,D),vw.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(h);B<e.near||B>e.far||t.push({distance:B,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}else for(let x=Math.max(0,o.start),v=Math.min(_.count,o.start+o.count)-1;x<v;x+=f){if(c.fromBufferAttribute(_,x),u.fromBufferAttribute(_,x+1),vw.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(h);D<e.near||D>e.far||t.push({distance:D,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Ul.prototype.isLine=!0;const GP=new S,jP=new S;class Ha extends Ul{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)GP.fromBufferAttribute(t,r),jP.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+GP.distanceTo(jP);e.setAttribute("lineDistance",new He(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Ha.prototype.isLineSegments=!0;(class WP extends Ul{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class ld extends Ai{constructor(e){super(),this.type="PointsMaterial",this.color=new Pe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}ld.prototype.isPointsMaterial=!0;const $P=new Ve,xw=new Nl,ey=new Ll,ty=new S;function qP(n,e,t,i,r,s,o){const a=xw.distanceSqToPoint(n);if(a<t){const l=new S;xw.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}(class ny extends tn{constructor(e=new et,t=new ld){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),ey.copy(i.boundingSphere),ey.applyMatrix4(r),ey.radius+=s,!1===e.ray.intersectsSphere(ey))return;$P.copy(r).invert(),xw.copy(e.ray).applyMatrix4($P);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(i.isBufferGeometry){const c=i.index,d=i.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);p<g;p++){const _=c.getX(p);ty.fromBufferAttribute(d,_),qP(ty,_,l,r,e,t,this)}else for(let p=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);p<g;p++)ty.fromBufferAttribute(d,p),qP(ty,p,l,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class EX extends ci{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.format=void 0!==a?a:Il,this.minFilter=void 0!==o?o:Hn,this.magFilter=void 0!==s?s:Hn,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class DX extends ci{constructor(e,t,i){super({width:e,height:t}),this.format=i,this.magFilter=Qn,this.minFilter=Qn,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class YP extends ci{constructor(e,t,i,r,s,o,a,l,c,u,d,h){super(null,o,a,l,c,u,r,s,d,h),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class AX extends ci{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,new S,new S,new S,new Zn;class es{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){const i=1e-4;let r=e-i,s=e+i;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new se:new S);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new S,r=[],s=[],o=[],a=new S,l=new Ve;for(let f=0;f<=e;f++)r[f]=this.getTangentAt(f/e,new S);s[0]=new S,o[0]=new S;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Ei(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(!0===t){let f=Math.acos(Ei(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class cy extends es{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new se,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}cy.prototype.isEllipseCurve=!0;class QP extends cy{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.type="ArcCurve"}}function ww(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,f*=u,r(o,a,h,f)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}QP.prototype.isArcCurve=!0;const uy=new S,Mw=new ww,Cw=new ww,Sw=new ww;class ZP extends es{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new S){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(uy.subVectors(r[0],r[1]).add(r[0]),c=uy);const d=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(uy.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=uy),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let p=Math.pow(c.distanceToSquared(d),f),g=Math.pow(d.distanceToSquared(h),f),_=Math.pow(h.distanceToSquared(u),f);g<1e-4&&(g=1),p<1e-4&&(p=g),_<1e-4&&(_=g),Mw.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,p,g,_),Cw.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,p,g,_),Sw.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,p,g,_)}else"catmullrom"===this.curveType&&(Mw.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),Cw.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),Sw.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return i.set(Mw.calc(l),Cw.calc(l),Sw.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new S).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function KP(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function gf(n,e,t,i){return function TX(n,e){const t=1-n;return t*t*e}(n,e)+function IX(n,e){return 2*(1-n)*n*e}(n,t)+function RX(n,e){return n*n*e}(n,i)}function yf(n,e,t,i,r){return function PX(n,e){const t=1-n;return t*t*t*e}(n,e)+function OX(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function FX(n,e){return 3*(1-n)*n*n*e}(n,i)+function kX(n,e){return n*n*n*e}(n,r)}ZP.prototype.isCatmullRomCurve3=!0;class Ew extends es{constructor(e=new se,t=new se,i=new se,r=new se){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new se){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(yf(e,r.x,s.x,o.x,a.x),yf(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Ew.prototype.isCubicBezierCurve=!0;class JP extends es{constructor(e=new S,t=new S,i=new S,r=new S){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new S){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(yf(e,r.x,s.x,o.x,a.x),yf(e,r.y,s.y,o.y,a.y),yf(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}JP.prototype.isCubicBezierCurve3=!0;class dy extends es{constructor(e=new se,t=new se){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new se){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new se;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}dy.prototype.isLineCurve=!0;class Dw extends es{constructor(e=new se,t=new se,i=new se){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new se){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(gf(e,r.x,s.x,o.x),gf(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Dw.prototype.isQuadraticBezierCurve=!0;class Aw extends es{constructor(e=new S,t=new S,i=new S){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new S){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(gf(e,r.x,s.x,o.x),gf(e,r.y,s.y,o.y),gf(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Aw.prototype.isQuadraticBezierCurve3=!0;class Tw extends es{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new se){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(KP(a,l.x,c.x,u.x,d.x),KP(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new se).fromArray(r))}return this}}Tw.prototype.isSplineCurve=!0;var Iw=Object.freeze({__proto__:null,ArcCurve:QP,CatmullRomCurve3:ZP,CubicBezierCurve:Ew,CubicBezierCurve3:JP,EllipseCurve:cy,LineCurve:dy,LineCurve3:class LX extends es{constructor(e=new S,t=new S){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new S){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Dw,QuadraticBezierCurve3:Aw,SplineCurve:Tw});class NX extends es{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new dy(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new Iw[r.type]).fromJSON(r))}return this}}class hy extends NX{constructor(e){super(),this.type="Path",this.currentPoint=new se,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new dy(this.currentPoint.clone(),new se(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Dw(this.currentPoint.clone(),new se(e,t),new se(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new Ew(this.currentPoint.clone(),new se(e,t),new se(i,r),new se(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Tw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new cy(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ho extends hy{constructor(e){super(e),this.uuid=Dr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new hy).fromJSON(r))}return this}}function eO(n,e,t,i,r){let s,o;if(r===function eQ(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)o=iO(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=iO(s,n[s],n[s+1],o);return o&&fy(o,o.next)&&(xf(o),o=o.next),o}function Ua(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!fy(t,t.next)&&0!==En(t.prev,t,t.next))t=t.next;else{if(xf(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function _f(n,e,t,i,r,s,o){if(!n)return;!o&&s&&function YX(n,e,t,i){let r=n;do{null===r.z&&(r.z=Rw(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function XX(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,i);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1)}(r)}(n,i,r,s);let l,c,a=n;for(;n.prev!==n.next;)if(l=n.prev,c=n.next,s?HX(n,i,r,s):VX(n))e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),xf(n),n=c.next,a=c.next;else if((n=c)===a){o?1===o?_f(n=zX(Ua(n),e,t),e,t,i,r,s,2):2===o&&UX(n,e,t,i,r,s):_f(Ua(n),e,t,i,r,s,1);break}}function VX(n){const e=n.prev,t=n,i=n.next;if(En(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(ud(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&En(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function HX(n,e,t,i){const r=n.prev,s=n,o=n.next;if(En(r,s,o)>=0)return!1;const c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,d=Rw(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,t,i),h=Rw(c,u,e,t,i);let f=n.prevZ,p=n.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==n.prev&&f!==n.next&&ud(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&En(f.prev,f,f.next)>=0||(f=f.prevZ,p!==n.prev&&p!==n.next&&ud(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&En(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==n.prev&&f!==n.next&&ud(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&En(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==n.prev&&p!==n.next&&ud(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&En(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function zX(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!fy(r,s)&&tO(r,i,i.next,s)&&vf(r,s)&&vf(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),xf(i),xf(i.next),i=n=s),i=i.next}while(i!==n);return Ua(i)}function UX(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&ZX(o,a)){let l=nO(o,a);return o=Ua(o,o.next),l=Ua(l,l.next),_f(o,e,t,i,r,s),void _f(l,e,t,i,r,s)}a=a.next}o=o.next}while(o!==n)}function jX(n,e){return n.x-e.x}function WX(n,e){if(e=function $X(n,e){let t=e;const i=n.x,r=n.y;let o,s=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=i&&h>s){if(s=h,h===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,l=o.x,c=o.y;let d,u=1/0;t=o;do{i>=t.x&&t.x>=l&&i!==t.x&&ud(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(i-t.x),vf(t,n)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&qX(o,t)))&&(o=t,u=d)),t=t.next}while(t!==a);return o}(n,e),e){const t=nO(e,n);Ua(e,e.next),Ua(t,t.next)}}function qX(n,e){return En(n.prev,n,e.prev)<0&&En(e.next,n,n.next)<0}function Rw(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*r)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function QX(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function ud(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function ZX(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function KX(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&tO(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(vf(n,e)&&vf(e,n)&&function JX(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(En(n.prev,n,e.prev)||En(n,e.prev,e))||fy(n,e)&&En(n.prev,n,n.next)>0&&En(e.prev,e,e.next)>0)}function En(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function fy(n,e){return n.x===e.x&&n.y===e.y}function tO(n,e,t,i){const r=my(En(n,e,t)),s=my(En(n,e,i)),o=my(En(t,i,n)),a=my(En(t,i,e));return!!(r!==s&&o!==a||0===r&&py(n,t,e)||0===s&&py(n,i,e)||0===o&&py(t,n,i)||0===a&&py(t,e,i))}function py(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function my(n){return n>0?1:n<0?-1:0}function vf(n,e){return En(n.prev,n,n.next)<0?En(n,e,n.next)>=0&&En(n,n.prev,e)>=0:En(n,e,n.prev)<0||En(n,n.next,e)<0}function nO(n,e){const t=new Pw(n.i,n.x,n.y),i=new Pw(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function iO(n,e,t,i){const r=new Pw(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function xf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Pw(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class zo{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return zo.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];rO(e),sO(i,e);let o=e.length;t.forEach(rO);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,sO(i,t[l]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=eO(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,f;if(i&&(s=function GX(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=eO(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(QX(c));for(r.sort(jX),s=0;s<r.length;s++)WX(r[s],t),t=Ua(t,t.next);return t}(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let p=t;p<r;p+=t)d=n[p],h=n[p+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=0!==f?1/f:0}return _f(s,o,t,a,l,f),o}(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function rO(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function sO(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ga extends et{constructor(e=new Ho([new se(.5,.5),new se(-.5,.5),new se(-.5,-.5),new se(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++)o(e[a]);function o(a){const l=[],c=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1;let d=void 0!==t.depth?t.depth:1,h=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,p=void 0!==t.bevelSize?t.bevelSize:f-.1,g=void 0!==t.bevelOffset?t.bevelOffset:0,_=void 0!==t.bevelSegments?t.bevelSegments:3;const y=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:tQ;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);let x,M,D,R,B,v=!1;y&&(x=y.getSpacedPoints(u),v=!0,h=!1,M=y.computeFrenetFrames(u,!1),D=new S,R=new S,B=new S),h||(_=0,f=0,p=0,g=0);const Y=a.extractPoints(c);let U=Y.shape;const H=Y.holes;if(!zo.isClockWise(U)){U=U.reverse();for(let te=0,me=H.length;te<me;te++){const be=H[te];zo.isClockWise(be)&&(H[te]=be.reverse())}}const T=zo.triangulateShape(U,H),z=U;for(let te=0,me=H.length;te<me;te++)U=U.concat(H[te]);function q(te,me,be){return me||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().multiplyScalar(be).add(te)}const L=U.length,V=T.length;function J(te,me,be){let Ne,Te,mt;const gt=te.x-me.x,Ft=te.y-me.y,vn=be.x-te.x,F=be.y-te.y,I=gt*gt+Ft*Ft;if(Math.abs(gt*F-Ft*vn)>Number.EPSILON){const pe=Math.sqrt(I),Se=Math.sqrt(vn*vn+F*F),fe=me.x-Ft/pe,ut=me.y+gt/pe,N=((be.x-F/Se-fe)*F-(be.y+vn/Se-ut)*vn)/(gt*F-Ft*vn);Ne=fe+gt*N-te.x,Te=ut+Ft*N-te.y;const we=Ne*Ne+Te*Te;if(we<=2)return new se(Ne,Te);mt=Math.sqrt(we/2)}else{let pe=!1;gt>Number.EPSILON?vn>Number.EPSILON&&(pe=!0):gt<-Number.EPSILON?vn<-Number.EPSILON&&(pe=!0):Math.sign(Ft)===Math.sign(F)&&(pe=!0),pe?(Ne=-Ft,Te=gt,mt=Math.sqrt(I)):(Ne=gt,Te=Ft,mt=Math.sqrt(I/2))}return new se(Ne/mt,Te/mt)}const le=[];for(let te=0,me=z.length,be=me-1,Ne=te+1;te<me;te++,be++,Ne++)be===me&&(be=0),Ne===me&&(Ne=0),le[te]=J(z[te],z[be],z[Ne]);const Q=[];let ee,_e=le.concat();for(let te=0,me=H.length;te<me;te++){const be=H[te];ee=[];for(let Ne=0,Te=be.length,mt=Te-1,gt=Ne+1;Ne<Te;Ne++,mt++,gt++)mt===Te&&(mt=0),gt===Te&&(gt=0),ee[Ne]=J(be[Ne],be[mt],be[gt]);Q.push(ee),_e=_e.concat(ee)}for(let te=0;te<_;te++){const me=te/_,be=f*Math.cos(me*Math.PI/2),Ne=p*Math.sin(me*Math.PI/2)+g;for(let Te=0,mt=z.length;Te<mt;Te++){const gt=q(z[Te],le[Te],Ne);je(gt.x,gt.y,-be)}for(let Te=0,mt=H.length;Te<mt;Te++){const gt=H[Te];ee=Q[Te];for(let Ft=0,vn=gt.length;Ft<vn;Ft++){const F=q(gt[Ft],ee[Ft],Ne);je(F.x,F.y,-be)}}}const xe=p+g;for(let te=0;te<L;te++){const me=h?q(U[te],_e[te],xe):U[te];v?(R.copy(M.normals[0]).multiplyScalar(me.x),D.copy(M.binormals[0]).multiplyScalar(me.y),B.copy(x[0]).add(R).add(D),je(B.x,B.y,B.z)):je(me.x,me.y,0)}for(let te=1;te<=u;te++)for(let me=0;me<L;me++){const be=h?q(U[me],_e[me],xe):U[me];v?(R.copy(M.normals[te]).multiplyScalar(be.x),D.copy(M.binormals[te]).multiplyScalar(be.y),B.copy(x[te]).add(R).add(D),je(B.x,B.y,B.z)):je(be.x,be.y,d/u*te)}for(let te=_-1;te>=0;te--){const me=te/_,be=f*Math.cos(me*Math.PI/2),Ne=p*Math.sin(me*Math.PI/2)+g;for(let Te=0,mt=z.length;Te<mt;Te++){const gt=q(z[Te],le[Te],Ne);je(gt.x,gt.y,d+be)}for(let Te=0,mt=H.length;Te<mt;Te++){const gt=H[Te];ee=Q[Te];for(let Ft=0,vn=gt.length;Ft<vn;Ft++){const F=q(gt[Ft],ee[Ft],Ne);v?je(F.x,F.y+x[u-1].y,x[u-1].x+be):je(F.x,F.y,d+be)}}}function ce(te,me){let be=te.length;for(;--be>=0;){const Ne=be;let Te=be-1;Te<0&&(Te=te.length-1);for(let mt=0,gt=u+2*_;mt<gt;mt++){const Ft=L*mt,vn=L*(mt+1);Fe(me+Ne+Ft,me+Te+Ft,me+Te+vn,me+Ne+vn)}}}function je(te,me,be){l.push(te),l.push(me),l.push(be)}function Ue(te,me,be){ze(te),ze(me),ze(be);const Ne=r.length/3,Te=m.generateTopUV(i,r,Ne-3,Ne-2,Ne-1);Ht(Te[0]),Ht(Te[1]),Ht(Te[2])}function Fe(te,me,be,Ne){ze(te),ze(me),ze(Ne),ze(me),ze(be),ze(Ne);const Te=r.length/3,mt=m.generateSideWallUV(i,r,Te-6,Te-3,Te-2,Te-1);Ht(mt[0]),Ht(mt[1]),Ht(mt[3]),Ht(mt[1]),Ht(mt[2]),Ht(mt[3])}function ze(te){r.push(l[3*te+0]),r.push(l[3*te+1]),r.push(l[3*te+2])}function Ht(te){s.push(te.x),s.push(te.y)}(function ge(){const te=r.length/3;if(h){let me=0,be=L*me;for(let Ne=0;Ne<V;Ne++){const Te=T[Ne];Ue(Te[2]+be,Te[1]+be,Te[0]+be)}me=u+2*_,be=L*me;for(let Ne=0;Ne<V;Ne++){const Te=T[Ne];Ue(Te[0]+be,Te[1]+be,Te[2]+be)}}else{for(let me=0;me<V;me++){const be=T[me];Ue(be[2],be[1],be[0])}for(let me=0;me<V;me++){const be=T[me];Ue(be[0]+L*u,be[1]+L*u,be[2]+L*u)}}i.addGroup(te,r.length/3-te,0)})(),function Dt(){const te=r.length/3;let me=0;ce(z,me),me+=z.length;for(let be=0,Ne=H.length;be<Ne;be++){const Te=H[be];ce(Te,me),me+=Te.length}i.addGroup(te,r.length/3-te,1)}()}this.setAttribute("position",new He(r,3)),this.setAttribute("uv",new He(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function nQ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Iw[r.type]).fromJSON(r)),new Ga(i,e.options)}}const tQ={generateTopUV:function(n,e,t,i,r){const a=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new se(e[3*t],e[3*t+1]),new se(a,l),new se(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[3*t],a=e[3*t+1],l=e[3*t+2],c=e[3*i],u=e[3*i+1],d=e[3*i+2],h=e[3*r],f=e[3*r+1],p=e[3*r+2],g=e[3*s],_=e[3*s+1],y=e[3*s+2];return Math.abs(a-u)<Math.abs(o-c)?[new se(o,1-l),new se(c,1-d),new se(h,1-p),new se(g,1-y)]:[new se(a,1-l),new se(u,1-d),new se(f,1-p),new se(_,1-y)]}};class wf extends et{constructor(e=new Ho([new se(0,.5),new se(-.5,-.5),new se(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(!1===Array.isArray(e))c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;function c(u){const d=r.length/3,h=u.extractPoints(t);let f=h.shape;const p=h.holes;!1===zo.isClockWise(f)&&(f=f.reverse());for(let _=0,y=p.length;_<y;_++){const m=p[_];!0===zo.isClockWise(m)&&(p[_]=m.reverse())}const g=zo.triangulateShape(f,p);for(let _=0,y=p.length;_<y;_++)f=f.concat(p[_]);for(let _=0,y=f.length;_<y;_++){const m=f[_];r.push(m.x,m.y,0),s.push(0,0,1),o.push(m.x,m.y)}for(let _=0,y=g.length;_<y;_++){const m=g[_];i.push(m[0]+d,m[1]+d,m[2]+d),l+=3}}this.setIndex(i),this.setAttribute("position",new He(r,3)),this.setAttribute("normal",new He(s,3)),this.setAttribute("uv",new He(o,2))}toJSON(){const e=super.toJSON();return function iQ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++)i.push(t[e.shapes[r]]);return new wf(i,e.curveSegments)}}(class cO extends Ai{constructor(e){super(),this.type="ShadowMaterial",this.color=new Pe(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class Ow extends Ai{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Ow.prototype.isMeshStandardMaterial=!0;(class uO extends Ow{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new se(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ei(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Pe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Pe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}).prototype.isMeshPhysicalMaterial=!0;(class dO extends Ai{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Pe(16777215),this.specular=new Pe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class hO extends Ai{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class fO extends Ai{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class pO extends Ai{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class mO extends Ai{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class gO extends Ii{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const Mn={arraySlice:function(n,e,t){return Mn.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<t||p>=i)){d.push(c.times[f]);for(let g=0;g<u;++g)h.push(c.values[f*u+g])}}0!==d.length&&(c.times=Mn.convertArray(d,c.times.constructor),c.values=Mn.convertArray(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(void 0===c)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const p=a.times.length-1;let g;if(s<=a.times[0])g=Mn.arraySlice(a.values,u,d-u);else if(s>=a.times[p]){const y=p*d+u;g=Mn.arraySlice(a.values,y,y+d-u)}else{const y=a.createInterpolant(),m=u,x=d-u;y.evaluate(s),g=Mn.arraySlice(y.resultBuffer,m,x)}"quaternion"===l&&(new Di).fromArray(g).normalize().conjugate().toArray(g);const _=c.times.length;for(let y=0;y<_;++y){const m=y*f+h;if("quaternion"===l)Di.multiplyQuaternionsFlat(c.values,m,g,0,c.values,m);else{const x=f-2*h;for(let v=0;v<x;++v)c.values[m+v]-=g[v]}}}return n.blendMode=2501,n}};class ja{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,s)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,e)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}ja.prototype.beforeStart_=ja.prototype.copySampleValue_,ja.prototype.afterEnd_=ja.prototype.copySampleValue_;class sQ extends ja{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Tu,endingEnd:Tu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Iu:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case Iu:o=e,l=2*i-t;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),g=p*p,_=g*p,y=-h*_+2*h*g-h*p,m=(1+h)*_+(-1.5-2*h)*g+(-.5+h)*p+1,x=(-1-f)*_+(1.5+f)*g+.5*p,v=f*_-f*g;for(let M=0;M!==a;++M)s[M]=y*o[u+M]+m*o[c+M]+x*o[l+M]+v*o[d+M];return s}}class yO extends ja{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class oQ extends ja{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class to{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Mn.convertArray(t,this.TimeBufferType),this.values=Mn.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Mn.convertArray(e.times,Array),values:Mn.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new oQ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new yO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new sQ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Mn.arraySlice(i,s,o),this.values=Mn.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&Mn.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Mn.arraySlice(this.times),t=Mn.arraySlice(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){const g=t[d+p];if(g!==t[h+p]||g!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Mn.arraySlice(e,0,o),this.values=Mn.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Mn.arraySlice(this.times,0),t=Mn.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}to.prototype.TimeBufferType=Float32Array,to.prototype.ValueBufferType=Float32Array,to.prototype.DefaultInterpolation=2301;class dd extends to{}dd.prototype.ValueTypeName="bool",dd.prototype.ValueBufferType=Array,dd.prototype.DefaultInterpolation=2300,dd.prototype.InterpolantFactoryMethodLinear=void 0,dd.prototype.InterpolantFactoryMethodSmooth=void 0;class _O extends to{}_O.prototype.ValueTypeName="color";class My extends to{}My.prototype.ValueTypeName="number";class aQ extends ja{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Di.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Cf extends to{InterpolantFactoryMethodLinear(e){return new aQ(this.times,this.values,this.getValueSize(),e)}}Cf.prototype.ValueTypeName="quaternion",Cf.prototype.DefaultInterpolation=2301,Cf.prototype.InterpolantFactoryMethodSmooth=void 0;class hd extends to{}hd.prototype.ValueTypeName="string",hd.prototype.ValueBufferType=Array,hd.prototype.DefaultInterpolation=2300,hd.prototype.InterpolantFactoryMethodLinear=void 0,hd.prototype.InterpolantFactoryMethodSmooth=void 0;class Cy extends to{}Cy.prototype.ValueTypeName="vector";class Sy{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Dr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(cQ(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(to.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Mn.getKeyframeOrder(l);l=Mn.sortedArray(l,1,u),c=Mn.sortedArray(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new My(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,p,g){if(0!==f.length){const _=[],y=[];Mn.flattenJSON(f,_,y,p),0!==_.length&&g.push(new d(h,_,y))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let g=0;g<h[p].morphTargets.length;g++)f[h[p].morphTargets[g]]=-1;for(const g in f){const _=[],y=[];for(let m=0;m!==h[p].morphTargets.length;++m){const x=h[p];_.push(x.time),y.push(x.morphTarget===g?1:0)}r.push(new My(".morphTargetInfluence["+g+"]",_,y))}l=f.length*(o||1)}else{const f=".bones["+t[d].name+"]";i(Cy,f+".position",h,"pos",r),i(Cf,f+".quaternion",h,"rot",r),i(Cy,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function cQ(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function lQ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return My;case"vector":case"vector2":case"vector3":case"vector4":return Cy;case"color":return _O;case"quaternion":return Cf;case"bool":case"boolean":return dd;case"string":return hd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];Mn.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const fd={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const uQ=new class vO{constructor(e,t,i){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}};class Wa{constructor(e){this.manager=void 0!==e?e:uQ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Uo={};class Go extends Wa{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=fd.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Uo[e])return void Uo[e].push({onLoad:t,onProgress:i,onError:r});Uo[e]=[],Uo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then(a=>{if(200===a.status||0===a.status){if(0===a.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===a.body.getReader)return a;const l=Uo[e],c=a.body.getReader(),u=a.headers.get("Content-Length"),d=u?parseInt(u):0,h=0!==d;let f=0;const p=new ReadableStream({start(g){!function _(){c.read().then(({done:y,value:m})=>{if(y)g.close();else{f+=m.byteLength;const x=new ProgressEvent("progress",{lengthComputable:h,loaded:f,total:d});for(let v=0,M=l.length;v<M;v++){const D=l[v];D.onProgress&&D.onProgress(x)}g.enqueue(m),_()}})}()}});return new Response(p)}throw Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>{switch(this.responseType){case"arraybuffer":return a.arrayBuffer();case"blob":return a.blob();case"document":return a.text().then(l=>(new DOMParser).parseFromString(l,this.mimeType));case"json":return a.json();default:return a.text()}}).then(a=>{fd.add(e,a);const l=Uo[e];delete Uo[e];for(let c=0,u=l.length;c<u;c++){const d=l[c];d.onLoad&&d.onLoad(a)}}).catch(a=>{const l=Uo[e];if(void 0===l)throw this.manager.itemError(e),a;delete Uo[e];for(let c=0,u=l.length;c<u;c++){const d=l[c];d.onError&&d.onError(a)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Ey extends Wa{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=fd.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=xg("img");function l(){u(),fd.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class dQ extends Wa{constructor(e){super(e)}load(e,t,i,r){const s=new af,o=new Ey(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,6===a&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class fQ extends Wa{constructor(e){super(e)}load(e,t,i,r){const s=new ci,o=new Ey(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class no extends tn{constructor(e,t=1){super(),this.type="Light",this.color=new Pe(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}no.prototype.isLight=!0;(class xO extends no{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy(tn.DefaultUp),this.updateMatrix(),this.groundColor=new Pe(t)}copy(e){return no.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const bO=new Ve,wO=new S,MO=new S;class Fw{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new se(512,512),this.map=null,this.mapPass=null,this.matrix=new Ve,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Hg,this._frameExtents=new se(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;wO.setFromMatrixPosition(e.matrixWorld),t.position.copy(wO),MO.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(MO),t.updateMatrixWorld(),bO.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bO),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class CO extends Fw{constructor(){super(new Ti(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=2*Jh*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}CO.prototype.isSpotLightShadow=!0;(class SO extends no{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(tn.DefaultUp),this.updateMatrix(),this.target=new tn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new CO}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const EO=new Ve,Sf=new S,kw=new S;class DO extends Fw{constructor(){super(new Ti(90,1,.5,500)),this._frameExtents=new se(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new S(1,0,0),new S(-1,0,0),new S(0,0,1),new S(0,0,-1),new S(0,1,0),new S(0,-1,0)],this._cubeUps=[new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,0,1),new S(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Sf.setFromMatrixPosition(e.matrixWorld),i.position.copy(Sf),kw.copy(i.position),kw.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(kw),i.updateMatrixWorld(),r.makeTranslation(-Sf.x,-Sf.y,-Sf.z),EO.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(EO)}}DO.prototype.isPointLightShadow=!0;(class AO extends no{constructor(e,t,i=0,r=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new DO}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class TO extends Fw{constructor(){super(new zg(-5,5,5,-5,.5,500))}}TO.prototype.isDirectionalLightShadow=!0;(class IO extends no{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(tn.DefaultUp),this.updateMatrix(),this.target=new tn,this.shadow=new TO}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class RO extends no{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class PO extends no{constructor(e,t,i=10,r=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class OO{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new S)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],i*r*1.092548),t.addScaledVector(o[5],r*s*1.092548),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],i*s*1.092548),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*s),t.addScaledVector(o[3],1.023328*i),t.addScaledVector(o[4],.858086*i*r),t.addScaledVector(o[5],.858086*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],.858086*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}OO.prototype.isSphericalHarmonics3=!0;class Dy extends no{constructor(e=new OO,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Dy.prototype.isLightProbe=!0;let Ay;(class FO extends et{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class yQ extends Wa{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=fd.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){fd.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class _Q extends Wa{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Go(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);(void 0===Ay&&(Ay=new(window.AudioContext||window.webkitAudioContext)),Ay).decodeAudioData(l,function(u){t(u)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}(class vQ extends Dy{constructor(e,t,i=1){super(void 0,i);const r=(new Pe).set(e),s=(new Pe).set(t),o=new S(r.r,r.g,r.b),a=new S(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class xQ extends Dy{constructor(e,t=1){super(void 0,t);const i=(new Pe).set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class EQ{constructor(e,t,i){let r,s,o;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else o+=t,this._mixBufferRegion(i,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(i,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const t=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Di.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Di.multiplyQuaternionsFlat(e,o,e,t,e,i),Di.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const Nw="\\[\\]\\.:\\/",DQ=new RegExp("["+Nw+"]","g"),Bw="[^"+Nw+"]",AQ="[^"+Nw.replace("\\.","")+"]",TQ=/((?:WC+[\/:])*)/.source.replace("WC",Bw),IQ=/(WCOD+)?/.source.replace("WCOD",AQ),RQ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Bw),PQ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Bw),OQ=new RegExp("^"+TQ+IQ+RQ+PQ+"$"),FQ=["material","materials","bones"];class kQ{constructor(e,t,i){const r=i||yn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let yn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(DQ,"")}static parseTrackName(t){const i=OQ.exec(t);if(!i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==FQ.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(!i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=kQ,n})();yn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},yn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},yn.prototype.GetterByBindingType=[yn.prototype._getValue_direct,yn.prototype._getValue_array,yn.prototype._getValue_arrayElement,yn.prototype._getValue_toArray],yn.prototype.SetterByBindingTypeAndVersioning=[[yn.prototype._setValue_direct,yn.prototype._setValue_direct_setNeedsUpdate,yn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[yn.prototype._setValue_array,yn.prototype._setValue_array_setNeedsUpdate,yn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[yn.prototype._setValue_arrayElement,yn.prototype._setValue_arrayElement_setNeedsUpdate,yn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[yn.prototype._setValue_fromArray,yn.prototype._setValue_fromArray_setNeedsUpdate,yn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class NQ{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Tu,endingEnd:Tu};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const l=(e-s)*i;if(l<0||0===i)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);else for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=2202===i;if(0===e)return-1===s?r:o&&1==(1&s)?t-r:r;if(2200===i){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Iu,r.endingEnd=Iu):(r.endingStart=e?this.zeroSlopeAtStart?Iu:Tu:2402,r.endingEnd=t?this.zeroSlopeAtEnd?Iu:Tu:2402)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}(class BQ extends Pl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=r[d],f=h.name;let p=u[f];if(void 0!==p)o[d]=p;else{if(p=o[d],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}p=new EQ(yn.create(i,f,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new yO(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o="string"==typeof e?Sy.findByName(r,e):e;const a=null!==o?o.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==l){const d=l.actionByRoot[s];if(void 0!==d&&d.blendMode===i)return d;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const u=new NQ(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s="string"==typeof e?Sy.findByName(i,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)e[i].stop();return this}update(e){const t=this._actions,i=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Vw{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Vw(void 0===this.value.clone?this.value:this.value.clone())}}(class VQ extends td{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;const jO=new se;class Ef{constructor(e=new se(1/0,1/0),t=new se(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=jO.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return jO.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ef.prototype.isBox2=!0;const $a=new S,Iy=new Ve,zw=new Ve;function qO(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,qO(n.children[t]));return e}const JO=new Float32Array(1);new Int32Array(JO.buffer),es.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(es.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n},hy.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},class jQ extends Ha{constructor(e=10,t=10,i=4473924,r=8947848){i=new Pe(i),r=new Pe(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,p=-a;h<=t;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const g=h===s?i:r;g.toArray(c,f),f+=3,g.toArray(c,f),f+=3,g.toArray(c,f),f+=3,g.toArray(c,f),f+=3}const u=new et;u.setAttribute("position",new He(l,3)),u.setAttribute("color",new He(c,3)),super(u,new Ii({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class UQ extends Ha{constructor(e){const t=qO(e),i=new et,r=[],s=[],o=new Pe(0,0,1),a=new Pe(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new He(r,3)),i.setAttribute("color",new He(s,3)),super(i,new Ii({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");zw.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Iy.multiplyMatrices(zw,a.matrixWorld),$a.setFromMatrixPosition(Iy),r.setXYZ(o,$a.x,$a.y,$a.z),Iy.multiplyMatrices(zw,a.parent.matrixWorld),$a.setFromMatrixPosition(Iy),r.setXYZ(o+1,$a.x,$a.y,$a.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Wa.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class Lw{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(i){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(n)},Wa.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Ef.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},Ef.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ef.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Ef.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},Kr.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},Kr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Kr.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Kr.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},Kr.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},Ll.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Hg.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},gi.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},gi.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},gi.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},gi.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},gi.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},gi.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},Ve.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},Ve.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Ve.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new S).setFromMatrixColumn(this,3)},Ve.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},Ve.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Ve.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ve.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ve.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Ve.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},Ve.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ve.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Ve.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Ve.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Ve.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Ve.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Ve.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ve.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Ve.prototype.makeFrustum=function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)},Ve.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},Vo.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},Di.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},Di.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Nl.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Nl.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},Nl.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},Zn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Zn.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},Zn.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},Zn.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},Zn.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},Zn.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Zn.getBarycoord(n,e,t,i,r)},Zn.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Zn.getNormal(n,e,t,i)},Ho.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},Ho.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ga(this,n)},Ho.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new wf(this,n)},se.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},se.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},se.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},S.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},S.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},S.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},S.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},S.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},S.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},S.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},S.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},S.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},an.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},an.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},tn.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},tn.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},tn.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},tn.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},tn.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(tn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),_i.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(_i.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),gw.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Ti.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(n)},Object.defineProperties(no.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(dn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Kh},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Kh)}}}),dn.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Kh:Zh),this},dn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},dn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},et.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},et.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new dn(arguments[1],arguments[2])))},et.prototype.addDrawCall=function(n,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},et.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},et.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},et.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},et.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(et.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),td.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Kh:Zh),this},td.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ga.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Ga.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Ga.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},hw.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Vw.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Ai.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Pe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Na.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),ln.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)},ln.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},ln.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},ln.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},ln.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},ln.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},ln.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},ln.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},ln.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},ln.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},ln.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},ln.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},ln.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},ln.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},ln.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},ln.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},ln.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},ln.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},ln.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},ln.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},ln.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},ln.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},ln.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},ln.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},ln.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(ln.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?Ru:As}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(EP.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Zr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class MQ extends tn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new _Q).load(n,function(i){e.setBuffer(i)}),this},Kb.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)},Kb.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)},ku.crossOrigin=void 0,ku.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new fQ;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s},ku.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new dQ;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s},ku.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ku.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"136"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="136"),new S,new Di,new S;class nF extends tn{constructor(e=document.createElement("div")){super(),this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&null!==t.element.parentNode&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this}}var ky,n;nF.prototype.isCSS3DObject=!0,class XQ extends nF{constructor(e){super(e),this.rotation2D=0}copy(e,t){return super.copy(e,t),this.rotation2D=e.rotation2D,this}}.prototype.isCSS3DSprite=!0,new Ve,new Ve,(n=ky||(ky={})).createTween=function e(r,s,o,a,l){return new zt(c=>{let u;const d=h=>{u=u||h;const f=h-u;if(f<a){if(Array.isArray(s)&&Array.isArray(o)){const p=new Array;for(let g=0;g<s.length;g++)p.push(r(f,s[g],o[g],a,l));c.next(p)}else c.next(r(f,s,o,a,l));requestAnimationFrame(d)}else{if(Array.isArray(s)&&Array.isArray(o)){const p=new Array;for(let g=0;g<s.length;g++)p.push(o[g]);c.next(p)}else c.next(o);c.complete()}};requestAnimationFrame(d)})},n.linear=function t(r,s,o,a){return(o-s)*r/a+s},n.easeInOutQuad=function i(r,s,o,a){const l=o-s;return(r/=a/2)<1?l/2*r*r+s:-l/2*(--r*(r-2)-1)+s};let JQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Er]]}),n})(),eZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Er,JQ]]}),n})();class iF{}const jo="*";function rF(n,e=null){return{type:2,steps:n,options:e}}function vi(n){return{type:6,styles:n,offset:null}}function sF(n){Promise.resolve(null).then(n)}class md{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){sF(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class oF{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?sF(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function aF(){return"undefined"!=typeof window&&void 0!==window.document}function jw(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Ya(n){switch(n.length){case 0:return new md;case 1:return n[0];default:return new oF(n)}}function lF(n,e,t,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let g=p,_=u[p];if("offset"!==p)switch(g=e.normalizePropertyName(g,o),_){case"!":_=r[p];break;case jo:_=s[p];break;default:_=e.normalizeStyleValue(p,g,_,o)}f[g]=_}),h||a.push(f),c=f,l=d}),o.length){const u="\n - ";throw new Error(`Unable to animate due to the following errors:${u}${o.join(u)}`)}return a}function Ww(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&$w(t,"start",n)));break;case"done":n.onDone(()=>i(t&&$w(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&$w(t,"destroy",n)))}}function $w(n,e,t){const i=t.totalTime,s=qw(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function qw(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Ir(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function cF(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Yw=(n,e)=>!1,uF=(n,e,t)=>[];(jw()||"undefined"!=typeof Element)&&(Yw=aF()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),uF=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Xl=null,dF=!1;function Xw(n){Xl||(Xl=function oZ(){return"undefined"!=typeof document?document.body:null}()||{},dF=!!Xl.style&&"WebkitAppearance"in Xl.style);let e=!0;return Xl.style&&!function sZ(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Xl.style,!e&&dF&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Xl.style)),e}const Qw=Yw,Zw=uF;function hF(n){const e={};return Object.keys(n).forEach(t=>{const i=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=n[t]}),e}let fF=(()=>{class n{validateStyleProperty(t){return Xw(t)}matchesElement(t,i){return!1}containsElement(t,i){return Qw(t,i)}query(t,i,r){return Zw(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new md(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})(),Kw=(()=>{class n{}return n.NOOP=new fF,n})();const Jw="ng-enter",Ly="ng-leave",Ny="ng-trigger",By=".ng-trigger",mF="ng-animating",eM=".ng-animating";function Ql(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tM(parseFloat(e[1]),e[2])}function tM(n,e){return"s"===e?1e3*n:n}function Vy(n,e,t){return n.hasOwnProperty("duration")?n:function cZ(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};r=tM(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=tM(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),a=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&e.splice(l,0,`The provided timing value "${n}" is invalid.`)}return{duration:r,delay:s,easing:o}}(n,e,t)}function gd(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Xa(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else gd(n,t);return t}function yF(n,e,t){return t?e+":"+t+";":""}function _F(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=yF(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=yF(0,hZ(t),n.style[t]));n.setAttribute("style",e)}function so(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=iM(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),jw()&&_F(n))}function Zl(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=iM(t);n.style[i]=""}),jw()&&_F(n))}function Df(n){return Array.isArray(n)?1==n.length?n[0]:rF(n):n}const nM=new RegExp("{{\\s*(.+?)\\s*}}","g");function vF(n){let e=[];if("string"==typeof n){let t;for(;t=nM.exec(n);)e.push(t[1]);nM.lastIndex=0}return e}function Hy(n,e,t){const i=n.toString(),r=i.replace(nM,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(`Please provide a value for the animation param ${o}`),a=""),a.toString()});return r==i?n:r}function zy(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const dZ=/-+([a-z0-9])/g;function iM(n){return n.replace(dZ,(...e)=>e[1].toUpperCase())}function hZ(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function xF(n,e){return 0===n||0===e}function bF(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var r=1;r<e.length;r++){let a=e[r];o.forEach(function(l){a[l]=rM(n,l)})}}return e}function Rr(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function rM(n,e){return window.getComputedStyle(n)[e]}function fZ(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function pZ(n,e,t){if(":"==n[0]){const l=function mZ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const r=i[1],s=i[2],o=i[3];e.push(wF(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(wF(o,r))}(i,t,e)):t.push(n),t}const Gy=new Set(["true","1"]),jy=new Set(["false","0"]);function wF(n,e){const t=Gy.has(n)||jy.has(n),i=Gy.has(e)||jy.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?Gy.has(n):jy.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?Gy.has(e):jy.has(e)),o&&a}}const gZ=new RegExp("s*:selfs*,?","g");function sM(n,e,t){return new yZ(n).build(e,t)}class yZ{constructor(e){this._driver=e}build(e,t){const i=new xZ(t);return this._resetContextStyleTimingState(i),Rr(this,Df(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};if(i.styles.forEach(a=>{if(Wy(a)){const l=a;Object.keys(l).forEach(c=>{vF(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size){const a=zy(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Rr(this,Df(e.animation),t);return{type:1,matchers:fZ(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Kl(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Rr(this,i,t)),options:Kl(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Rr(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Kl(e.options)}}visitAnimate(e,t){const i=function wZ(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return oM(Vy(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=oM(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||Vy(i,e),oM(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:vi({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=vi(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==jo?i.push(o):t.errors.push(`The provided style string value ${o} is not allowed.`):i.push(o)}):i.push(e.styles);let r=!1,s=null;return i.forEach(o=>{if(Wy(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void t.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(t.errors.push(`The CSS property "${a}" that exists between the times of "${c.startTime}ms" and "${c.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${r}ms"`),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:r}),t.options&&function uZ(n,e,t){const i=e.params||{},r=vF(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(y=>{const m=this._makeStyleAst(y,t);let x=null!=m.offset?m.offset:function bZ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Wy(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(Wy(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(m.styles),v=0;return null!=x&&(s++,v=m.offset=x),l=l||v<0||v>1,a=a||v<c,c=v,o.push(v),m});l&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&t.errors.push("Please ensure that all keyframe offsets are in order");const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,g=t.currentAnimateTimings,_=g.duration;return u.forEach((y,m)=>{const x=h>0?m==f?1:h*m:o[m],v=x*_;t.currentTime=p+g.delay+v,g.duration=v,this._validateStyleAst(y,t),y.offset=x,i.styles.push(y)}),i}visitReference(e,t){return{type:8,animation:Rr(this,Df(e.animation),t),options:Kl(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Kl(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Kl(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function _Z(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(gZ,"")),n=n.replace(/@\*/g,By).replace(/@\w+/g,t=>By+"-"+t.substr(1)).replace(/:animating/g,eM),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Ir(t.collectedStyles,t.currentQuerySelector,{});const a=Rr(this,Df(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Kl(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Vy(e.timings,t.errors,!0);return{type:12,animation:Rr(this,Df(e.animation),t),timings:i,options:null}}}class xZ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Wy(n){return!Array.isArray(n)&&"object"==typeof n}function Kl(n){return n?(n=gd(n)).params&&(n.params=function vZ(n){return n?gd(n):null}(n.params)):n={},n}function oM(n,e,t){return{duration:n,delay:e,easing:t}}function aM(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class $y{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const SZ=new RegExp(":enter","g"),DZ=new RegExp(":leave","g");function lM(n,e,t,i,r,s={},o={},a,l,c=[]){return(new AZ).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class AZ{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new $y;const d=new cM(e,t,c,r,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),Rr(this,i,d);const h=d.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=h.length-1;p>=0;p--){const g=h[p];if(g.element===t){f=g;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[aM(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Ql(i.duration):null,a=null!=i.delay?Ql(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Rr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=qy);const o=Ql(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Rr(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ql(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Rr(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Vy(t.params?Hy(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Ql(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=qy);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),Rr(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Rr(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const qy={};class cM{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qy,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Yy(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Ql(i.duration)),null!=i.delay&&(r.delay=Ql(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Hy(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new cM(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=qy,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new TZ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(SZ,"."+this._enterClassName)).replace(DZ,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),a}}class Yy{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Yy(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||jo,this._currentKeyframe[t]=jo}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},o=function IZ(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=jo})):Xa(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=Hy(o[a],s,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:jo),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Xa(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?e.add(u):d==jo&&t.add(u)}),i||(c.offset=l/this.duration),r.push(c)});const s=e.size?zy(e.values()):[],o=t.size?zy(t.values()):[];if(i){const a=r[0],l=gd(a);a.offset=0,l.offset=1,r=[a,l]}return aM(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class TZ extends Yy{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=Xa(e[0],!1);l.offset=0,s.push(l);const c=Xa(e[0],!1);c.offset=SF(a),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=Xa(e[d],!1);h.offset=SF((t+h.offset*i)/o),s.push(h)}i=o,t=0,r="",e=s}return aM(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function SF(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class uM{}class RZ extends uM{normalizePropertyName(e,t){return iM(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(PZ[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(`Please provide a CSS unit value for ${e}:${i}`)}return o+s}}const PZ=(()=>function OZ(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function EF(n,e,t,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const dM={};class DF{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function FZ(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],o=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):o}build(e,t,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||dM,p=this.buildStyles(i,a&&a.params||dM,d),g=l&&l.params||dM,_=this.buildStyles(r,g,d),y=new Set,m=new Map,x=new Map,v="void"===r,M={params:Object.assign(Object.assign({},h),g)},D=u?[]:lM(e,t,this.ast.animation,s,o,p,_,M,c,d);let R=0;if(D.forEach(Y=>{R=Math.max(Y.duration+Y.delay,R)}),d.length)return EF(t,this._triggerName,i,r,v,p,_,[],[],m,x,R,d);D.forEach(Y=>{const U=Y.element,H=Ir(m,U,{});Y.preStyleProps.forEach(T=>H[T]=!0);const E=Ir(x,U,{});Y.postStyleProps.forEach(T=>E[T]=!0),U!==t&&y.add(U)});const B=zy(y.values());return EF(t,this._triggerName,i,r,v,p,_,D,B,m,x,R)}}class kZ{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=gd(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=Hy(l,r,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),i[c]=l})}}),i}}class NZ{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new kZ(r.style,r.options&&r.options.params||{},i)}),AF(this.states,"true","1"),AF(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new DF(e,r,this.states))}),this.fallbackTransition=function BZ(n,e,t){return new DF(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function AF(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const VZ=new $y;class HZ{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],r=sM(this._driver,t,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,i){const r=e.element,s=lF(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let o;const a=new Map;if(s?(o=lM(this._driver,t,s,Jw,Ly,{},{},i,VZ,r),o.forEach(u=>{const d=Ir(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,jo)})});const c=Ya(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,i,r){const s=qw(t,"","","");return Ww(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const TF="ng-animate-queued",hM="ng-animate-disabled",WZ=[],IF={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},$Z={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ts="__ng_removed";class fM{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function QZ(n){return null!=n?n:null}(i?e.value:e),i){const s=gd(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Af="void",pM=new fM(Af);class qZ{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ns(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${t}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function ZZ(n){return"start"==n||"done"==n}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${t}" is not supported!`);const s=Ir(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Ir(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(ns(e,Ny),ns(e,Ny+"-"+t),a[t]=pM),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new mM(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(ns(e,Ny),ns(e,Ny+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new fM(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=pM),c.value!==Af&&l.value===c.value){if(!function eK(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const g=[],_=s.matchStyles(l.value,l.params,g),y=s.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Zl(e,_),so(e,y)})}return}const h=Ir(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(ns(e,TF),o.onStart(()=>{yd(e,TF)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const _=this._engine.playersByElement.get(e);if(_){let y=_.indexOf(o);y>=0&&_.splice(y,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,By,!0);i.forEach(r=>{if(r[ts])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const c=this.trigger(e,l,Af,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Ya(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||pM,u=new fM(Af),d=new mM(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[ts];(!s||s===IF)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){ns(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=qw(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,Ww(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class YZ{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new qZ(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let s=i;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,r){if(Xy(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Xy(t))return;const s=t[ts];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ns(e,hM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),yd(e,hM))}removeNode(e,t,i,r){if(Xy(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[ts]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return Xy(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,By,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,eM,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ya(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[ts];if(i&&i.setForRemoval){if(e[ts]=IF,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(hM))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ns(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Ya(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const i=new $y,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(L=>{u.add(L);const V=this.driver.query(L,".ng-animate-queued",!0);for(let J=0;J<V.length;J++)u.add(V[J])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=OF(h,this.collectedEnterElements),p=new Map;let g=0;f.forEach((L,V)=>{const J=Jw+g++;p.set(V,J),L.forEach(le=>ns(le,J))});const _=[],y=new Set,m=new Set;for(let L=0;L<this.collectedLeaveElements.length;L++){const V=this.collectedLeaveElements[L],J=V[ts];J&&J.setForRemoval&&(_.push(V),y.add(V),J.hasAnimation?this.driver.query(V,".ng-star-inserted",!0).forEach(le=>y.add(le)):m.add(V))}const x=new Map,v=OF(h,Array.from(y));v.forEach((L,V)=>{const J=Ly+g++;x.set(V,J),L.forEach(le=>ns(le,J))}),e.push(()=>{f.forEach((L,V)=>{const J=p.get(V);L.forEach(le=>yd(le,J))}),v.forEach((L,V)=>{const J=x.get(V);L.forEach(le=>yd(le,J))}),_.forEach(L=>{this.processLeaveNode(L)})});const M=[],D=[];for(let L=this._namespaceList.length-1;L>=0;L--)this._namespaceList[L].drainQueuedTransitions(t).forEach(J=>{const le=J.player,Q=J.element;if(M.push(le),this.collectedEnterElements.length){const je=Q[ts];if(je&&je.setForMove){if(je.previousTriggersValues&&je.previousTriggersValues.has(J.triggerName)){const Ue=je.previousTriggersValues.get(J.triggerName),Fe=this.statesByElement.get(J.element);Fe&&Fe[J.triggerName]&&(Fe[J.triggerName].value=Ue)}return void le.destroy()}}const ee=!d||!this.driver.containsElement(d,Q),_e=x.get(Q),xe=p.get(Q),ge=this._buildInstruction(J,i,xe,_e,ee);if(ge.errors&&ge.errors.length)return void D.push(ge);if(ee)return le.onStart(()=>Zl(Q,ge.fromStyles)),le.onDestroy(()=>so(Q,ge.toStyles)),void r.push(le);if(J.isFallbackTransition)return le.onStart(()=>Zl(Q,ge.fromStyles)),le.onDestroy(()=>so(Q,ge.toStyles)),void r.push(le);const Dt=[];ge.timelines.forEach(je=>{je.stretchStartingKeyframe=!0,this.disabledNodes.has(je.element)||Dt.push(je)}),ge.timelines=Dt,i.append(Q,ge.timelines),o.push({instruction:ge,player:le,element:Q}),ge.queriedElements.forEach(je=>Ir(a,je,[]).push(le)),ge.preStyleProps.forEach((je,Ue)=>{const Fe=Object.keys(je);if(Fe.length){let ze=l.get(Ue);ze||l.set(Ue,ze=new Set),Fe.forEach(Ht=>ze.add(Ht))}}),ge.postStyleProps.forEach((je,Ue)=>{const Fe=Object.keys(je);let ze=c.get(Ue);ze||c.set(Ue,ze=new Set),Fe.forEach(Ht=>ze.add(Ht))})});if(D.length){const L=[];D.forEach(V=>{L.push(`@${V.triggerName} has failed due to:\n`),V.errors.forEach(J=>L.push(`- ${J}\n`))}),M.forEach(V=>V.destroy()),this.reportError(L)}const R=new Map,B=new Map;o.forEach(L=>{const V=L.element;i.has(V)&&(B.set(V,V),this._beforeAnimationBuild(L.player.namespaceId,L.instruction,R))}),r.forEach(L=>{const V=L.element;this._getPreviousPlayers(V,!1,L.namespaceId,L.triggerName,null).forEach(le=>{Ir(R,V,[]).push(le),le.destroy()})});const Y=_.filter(L=>kF(L,l,c)),U=new Map;PF(U,this.driver,m,c,jo).forEach(L=>{kF(L,l,c)&&Y.push(L)});const E=new Map;f.forEach((L,V)=>{PF(E,this.driver,new Set(L),l,"!")}),Y.forEach(L=>{const V=U.get(L),J=E.get(L);U.set(L,Object.assign(Object.assign({},V),J))});const T=[],z=[],q={};o.forEach(L=>{const{element:V,player:J,instruction:le}=L;if(i.has(V)){if(u.has(V))return J.onDestroy(()=>so(V,le.toStyles)),J.disabled=!0,J.overrideTotalTime(le.totalTime),void r.push(J);let Q=q;if(B.size>1){let _e=V;const xe=[];for(;_e=_e.parentNode;){const ge=B.get(_e);if(ge){Q=ge;break}xe.push(_e)}xe.forEach(ge=>B.set(ge,Q))}const ee=this._buildAnimation(J.namespaceId,le,R,s,E,U);if(J.setRealPlayer(ee),Q===q)T.push(J);else{const _e=this.playersByElement.get(Q);_e&&_e.length&&(J.parentPlayer=Ya(_e)),r.push(J)}}else Zl(V,le.fromStyles),J.onDestroy(()=>so(V,le.toStyles)),z.push(J),u.has(V)&&r.push(J)}),z.forEach(L=>{const V=s.get(L.element);if(V&&V.length){const J=Ya(V);L.setRealPlayer(J)}}),r.forEach(L=>{L.parentPlayer?L.syncPlayerEvents(L.parentPlayer):L.destroy()});for(let L=0;L<_.length;L++){const V=_[L],J=V[ts];if(yd(V,Ly),J&&J.hasAnimation)continue;let le=[];if(a.size){let ee=a.get(V);ee&&ee.length&&le.push(...ee);let _e=this.driver.query(V,eM,!0);for(let xe=0;xe<_e.length;xe++){let ge=a.get(_e[xe]);ge&&ge.length&&le.push(...ge)}}const Q=le.filter(ee=>!ee.destroyed);Q.length?KZ(this,V,Q):this.processLeaveNode(V)}return _.length=0,T.forEach(L=>{this.players.push(L),L.onDone(()=>{L.destroy();const V=this.players.indexOf(L);this.players.splice(V,1)}),L.play()}),T}elementContainsData(e,t){let i=!1;const r=t[ts];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Af;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=Ir(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Zl(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const g=p.element;u.add(g);const _=g[ts];if(_&&_.removedBeforeQueried)return new md(p.duration,p.delay);const y=g!==l,m=function JZ(n){const e=[];return FF(n,e),e}((i.get(g)||WZ).map(R=>R.getRealPlayer())).filter(R=>!!R.element&&R.element===g),x=s.get(g),v=o.get(g),M=lF(0,this._normalizer,0,p.keyframes,x,v),D=this._buildPlayer(p,M,m);if(p.subTimeline&&r&&d.add(g),y){const R=new mM(e,a,g);R.setRealPlayer(D),c.push(R)}return D});c.forEach(p=>{Ir(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function XZ(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>ns(p,mF));const f=Ya(h);return f.onDestroy(()=>{u.forEach(p=>yd(p,mF)),so(l,t.toStyles)}),d.forEach(p=>{Ir(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new md(e.duration,e.delay)}}class mM{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new md,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>Ww(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ir(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Xy(n){return n&&1===n.nodeType}function RF(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function PF(n,e,t,i,r){const s=[];t.forEach(l=>s.push(RF(l)));const o=[];i.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=e.computeStyle(c,d,r);(!h||0==h.length)&&(c[ts]=$Z,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>RF(l,s[a++])),o}function OF(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function ns(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function yd(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function KZ(n,e,t){Ya(t).onDone(()=>n.processLeaveNode(e))}function FF(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof oF?FF(i.players,e):e.push(i)}}function kF(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class Qy{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new YZ(e,t,i),this._timelineEngine=new HZ(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=sM(this._driver,s,l);if(l.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);a=function LZ(n,e,t){return new NZ(n,e,t)}(r,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=cF(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=cF(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function LF(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=gM(e[0]),e.length>1&&(i=gM(e[e.length-1]))):e&&(t=gM(e)),t||i?new tK(n,t,i):null}let tK=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&so(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(so(this._element,this._initialStyles),this._endStyles&&(so(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Zl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zl(this._element,this._endStyles),this._endStyles=null),so(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function gM(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];nK(r)&&(e=e||{},e[r]=n[r])}return e}function nK(n){return"display"===n||"position"===n}const NF="animation",BF="animationend";class sK{constructor(e,t,i,r,s,o,a){this._element=e,this._name=t,this._duration=i,this._delay=r,this._easing=s,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=l=>this._handleCallback(l)}apply(){(function oK(n,e){const t=_M(n,"").trim();let i=0;t.length&&(i=function lK(n,e){let t=0;for(let i=0;i<n.length;i++)n.charAt(i)===e&&t++;return t}(t,",")+1,e=`${t}, ${e}`),Zy(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),zF(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){VF(this._element,this._name,"paused")}resume(){VF(this._element,this._name,"running")}setPosition(e){const t=HF(this._element,this._name);this._position=e*this._duration,Zy(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),zF(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function aK(n,e){const i=_M(n,"").split(","),r=yM(i,e);r>=0&&(i.splice(r,1),Zy(n,"",i.join(",")))}(this._element,this._name))}}function VF(n,e,t){Zy(n,"PlayState",t,HF(n,e))}function HF(n,e){const t=_M(n,"");return t.indexOf(",")>0?yM(t.split(","),e):yM([t],e)}function yM(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function zF(n,e,t){t?n.removeEventListener(BF,e):n.addEventListener(BF,e)}function Zy(n,e,t,i){const r=NF+e;if(null!=i){const s=n.style[r];if(s.length){const o=s.split(",");o[i]=t,t=o.join(",")}}n.style[r]=t}function _M(n,e){return n.style[NF+e]||""}class UF{constructor(e,t,i,r,s,o,a,l){this.element=e,this.keyframes=t,this.animationName=i,this._duration=r,this._delay=s,this._finalStyles=a,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new sK(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(e[i]=t?this._finalStyles[i]:rM(this.element,i))})}this.currentSnapshot=e}}class dK extends md{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=hF(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class jF{constructor(){this._count=0}validateStyleProperty(e){return Xw(e)}matchesElement(e,t){return!1}containsElement(e,t){return Qw(e,t)}query(e,t,i){return Zw(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,i){i=i.map(a=>hF(a));let r=`@keyframes ${t} {\n`,s="";i.forEach(a=>{s=" ";const l=parseFloat(a.offset);r+=`${s}${100*l}% {\n`,s+=" ",Object.keys(a).forEach(c=>{const u=a[c];switch(c){case"offset":return;case"easing":return void(u&&(r+=`${s}animation-timing-function: ${u};\n`));default:return void(r+=`${s}${c}: ${u};\n`)}}),r+=`${s}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(e,t,i,r,s,o=[],a){const l=o.filter(_=>_ instanceof UF),c={};xF(i,r)&&l.forEach(_=>{let y=_.currentSnapshot;Object.keys(y).forEach(m=>c[m]=y[m])});const u=function pK(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(i=>{Object.keys(i).forEach(r=>{"offset"==r||"easing"==r||(e[r]=i[r])})}),e}(t=bF(e,t,c));if(0==i)return new dK(e,u);const d="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,d,t);(function fK(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(h);const p=LF(e,t),g=new UF(e,t,d,i,r,s,u,p);return g.onDestroy(()=>function mK(n){n.parentNode.removeChild(n)}(h)),g}}class $F{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:rM(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class gK{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(qF().toString()),this._cssKeyframesDriver=new jF}validateStyleProperty(e){return Xw(e)}matchesElement(e,t){return!1}containsElement(e,t){return Qw(e,t)}query(e,t,i){return Zw(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,i,r,s,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,i,r,s,o);const u={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(u.easing=s);const d={},h=o.filter(p=>p instanceof $F);xF(i,r)&&h.forEach(p=>{let g=p.currentSnapshot;Object.keys(g).forEach(_=>d[_]=g[_])});const f=LF(e,t=bF(e,t=t.map(p=>Xa(p,!1)),d));return new $F(e,t,u,f)}}function qF(){return aF()&&Element.prototype.animate||{}}let _K=(()=>{class n extends iF{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:fs.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?rF(t):t;return YF(this._renderer,null,i,"register",[r]),new vK(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)($(Fh),$(ct))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();class vK extends class tZ{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new xK(this._id,e,t||{},this._renderer)}}class xK{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return YF(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function YF(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const XF="@.disabled";let bK=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new QF("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new wK(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)($(Fh),$(Qy),$(xt))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();class QF{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==XF?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class wK extends QF{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==XF?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function MK(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function CK(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let SK=(()=>{class n extends Qy{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)($(ct),$(Kw),$(uM))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();const Ps=new ye("AnimationModuleType"),ZF=[{provide:iF,useClass:_K},{provide:uM,useFactory:function DK(){return new RZ}},{provide:Qy,useClass:SK},{provide:Fh,useFactory:function AK(n,e,t){return new bK(n,e,t)},deps:[ag,Qy,xt]}],KF=[{provide:Kw,useFactory:function EK(){return function yK(){return"function"==typeof qF()}()?new gK:new jF}},{provide:Ps,useValue:"BrowserAnimations"},...ZF],TK=[{provide:Kw,useClass:fF},{provide:Ps,useValue:"NoopAnimations"},...ZF];let IK=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?TK:KF}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({providers:KF,imports:[iR]}),n})();const RK=new ye("cdk-dir-doc",{providedIn:"root",factory:function PK(){return fh(ct)}}),OK=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let vM,oo=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new nt,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function FK(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?OK.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)($(RK,8))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_d=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({}),n})();try{vM="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){vM=!1}let Tf,Jl,bM,Pr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Al(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!vM)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)($(Yr))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({}),n})();function If(n){return function kK(){if(null==Tf&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Tf=!0}))}finally{Tf=Tf||!1}return Tf}()?n:!!n.capture}function LK(){if(null==Jl){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Jl=!1,Jl;if("scrollBehavior"in document.documentElement.style)Jl=!0;else{const n=Element.prototype.scrollTo;Jl=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Jl}function ec(n){return n.composedPath?n.composedPath()[0]:n.target}function wM(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}class Kn extends it{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function We(...n){return Nn(n,hl(n))}function xi(n,e,t){const i=Rt(n)||e||t?{next:n,error:e,complete:t}:n;return i?xn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(new rn(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):gr}class QK extends bt{constructor(e,t){super()}schedule(e,t=0){return this}}const e_={setInterval(...n){const{delegate:e}=e_;return((null==e?void 0:e.setInterval)||setInterval)(...n)},clearInterval(n){const{delegate:e}=e_;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class EM extends QK{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return e_.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;e_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,zd(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const rk={now:()=>(rk.delegate||Date).now(),delegate:void 0};class kf{constructor(e,t=kf.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}kf.now=rk.now;class DM extends kf{constructor(e,t=kf.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const AM=new DM(EM),ZK=AM;function ui(n,e){return xn((t,i)=>{let r=0;t.subscribe(new rn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function KK(n,e){return n===e}function Vt(n){return xn((e,t)=>{Zi(n).subscribe(new rn(t,()=>t.complete(),yo)),!t.closed&&e.subscribe(t)})}function St(n){return null!=n&&"false"!=`${n}`}function Ri(n,e=0){return function ok(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function t_(n){return Array.isArray(n)?n:[n]}function Jn(n){return null==n?"":"string"==typeof n?n:`${n}px`}function tc(n){return n instanceof ke?n.nativeElement:n}let ak=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({providers:[ak]}),n})();function gk(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function yk(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const dJ=new ye("cdk-input-modality-detector-options"),hJ={ignoreKeys:[18,17,224,91,16]},xd=If({passive:!0,capture:!0});let fJ=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Kn(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ec(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(gk(o)?"keyboard":"mouse"),this._mostRecentTarget=ec(o))},this._onTouchstart=o=>{yk(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ec(o))},this._options=Object.assign(Object.assign({},hJ),s),this.modalityDetected=this._modality.pipe(function sk(n){return ui((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(function IM(n,e=gr){return n=null!=n?n:KK,xn((t,i)=>{let r,s=!0;t.subscribe(new rn(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,xd),r.addEventListener("mousedown",this._onMousedown,xd),r.addEventListener("touchstart",this._onTouchstart,xd)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,xd),document.removeEventListener("mousedown",this._onMousedown,xd),document.removeEventListener("touchstart",this._onTouchstart,xd))}}return n.\u0275fac=function(t){return new(t||n)($(Pr),$(xt),$(ct),$(dJ,8))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _J=new ye("cdk-focus-monitor-default-options"),r_=If({passive:!0,capture:!0});let bd=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new it,this._rootNodeFocusAndBlurListener=a=>{const l=ec(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=tc(t);if(!this._platform.isBrowser||1!==r.nodeType)return We(null);const s=function BK(n){if(function NK(){if(null==bM){const n="undefined"!=typeof document?document.head:null;bM=!(!n||!n.createShadowRoot&&!n.attachShadow)}return bM}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new it,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=tc(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=tc(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=ec(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,r_),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,r_)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Vt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,r_),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,r_),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)($(xt),$(Pr),$(fJ),$(ct,8),$(_J,8))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vk="cdk-high-contrast-black-on-white",xk="cdk-high-contrast-white-on-black",PM="cdk-high-contrast-active";let bk=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(PM),t.remove(vk),t.remove(xk),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(PM),t.add(vk)):2===i&&(t.add(PM),t.add(xk))}}}return n.\u0275fac=function(t){return new(t||n)($(Pr),$(ct))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vJ=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)($(bk))},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[xM,lk]]}),n})();function s_(...n){return function xJ(){return Bs(1)}()(Nn(n,hl(n)))}function Os(...n){const e=hl(n);return xn((t,i)=>{(e?s_(n,t,e):s_(n,t)).subscribe(i)})}const SJ=new ye("mat-sanity-checks",{providedIn:"root",factory:function CJ(){return!0}});let Kt=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!wM()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)($(bk),$(SJ,8),$(ct))},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[_d],_d]}),n})();function o_(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=St(e)}}}function a_(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function l_(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=St(e)}}}let Mk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=W({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function Lf(n,e,t){n.nativeElement.classList.toggle(e,t)}let c_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Kt],Kt]}),n})();class IJ{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Sk={enterDuration:225,exitDuration:150},FM=If({passive:!0}),Ek=["mousedown","touchstart"],Dk=["mouseup","mouseleave","touchend","touchcancel"];class PJ{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=tc(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},Sk),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function FJ(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function OJ(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const d=new IJ(this,u,i);return d.state=0,this._activeRipples.add(d),i.persistent||(this._mostRecentTransientRipple=d),this._runTimeoutOutsideZone(()=>{const h=d===this._mostRecentTransientRipple;d.state=1,!i.persistent&&(!h||!this._isPointerDown)&&d.fadeOut()},c),d}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},Sk),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=tc(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Ek))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Dk),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=gk(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!yk(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,FM)})})}_removeTriggerEvents(){this._triggerElement&&(Ek.forEach(e=>{this._triggerElement.removeEventListener(e,this,FM)}),this._pointerUpEventsRegistered&&Dk.forEach(e=>{this._triggerElement.removeEventListener(e,this,FM)}))}}const kJ=new ye("mat-ripple-global-options");let Nf=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new PJ(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(b(ke),b(xt),b(Pr),b(kJ,8),b(Ps,8))},n.\u0275dir=W({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&fn("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),kM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Kt,xM],Kt]}),n})(),LM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Kt]]}),n})(),Ok=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[kM,Er,Kt,LM]]}),n})(),HJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Kt],Kt]}),n})();function Fk(n){for(let e in n){let t=n[e]||"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":t=t||"row",n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}const NM="inline",u_=["row","column","row-reverse","column-reverse"];function kk(n){let[e,t,i]=Lk(n);return function UJ(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,i)}function Lk(n){n=n?n.toLowerCase():"";let[e,t,i]=n.split(" ");return u_.find(r=>r===e)||(e=u_[0]),t===NM&&(t=i!==NM?i:"",i=NM),[e,zJ(t),!!i]}function Bf(n){let[e]=Lk(n);return e.indexOf("row")>-1}function zJ(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function Wo(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}const jJ={provide:Hx,useFactory:function GJ(n,e){return()=>{if(Al(e)){const t=Array.from(n.querySelectorAll(`[class*=${Nk}]`)),i=/\bflex-layout-.+?\b/g;t.forEach(r=>{r.classList.contains(`${Nk}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[ct,Yr],multi:!0},Nk="flex-layout-";let BM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({providers:[jJ]}),n})();class nc{constructor(e=!1,t="all",i="",r="",s=0){this.matches=e,this.mediaQuery=t,this.mqAlias=i,this.suffix=r,this.priority=s,this.property=""}clone(){return new nc(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let WJ=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,i,r){const s=this.stylesheet.get(t);s?s.set(i,r):this.stylesheet.set(t,new Map([[i,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,i){const r=this.stylesheet.get(t);let s="";if(r){const o=r.get(i);("number"==typeof o||"string"==typeof o)&&(s=o+"")}return s}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VM={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},Qa=new ye("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>VM}),wd=new ye("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),HM=new ye("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Bk(n,e){return n=n?n.clone():new nc,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}class On{constructor(){this.shouldCache=!0}sideEffect(e,t,i){}}let _n=(()=>{class n{constructor(t,i,r,s){this._serverStylesheet=t,this._serverModuleLoaded=i,this._platformId=r,this.layoutConfig=s}applyStyleToElement(t,i,r=null){let s={};"string"==typeof i&&(s[i]=r,i=s),s=this.layoutConfig.disableVendorPrefixes?i:Fk(i),this._applyMultiValueStyleToElement(s,t)}applyStyleToElements(t,i=[]){const r=this.layoutConfig.disableVendorPrefixes?t:Fk(t);i.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(t){const i="flex-direction";let r=this.lookupStyle(t,i);return[r||"row",this.lookupInlineStyle(t,i)||xu(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,i){return t.getAttribute(i)||""}lookupInlineStyle(t,i){return Al(this._platformId)?t.style.getPropertyValue(i):this._getServerStyle(t,i)}lookupStyle(t,i,r=!1){let s="";return t&&((s=this.lookupInlineStyle(t,i))||(Al(this._platformId)?r||(s=getComputedStyle(t).getPropertyValue(i)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(t,i)))),s?s.trim():""}_applyMultiValueStyleToElement(t,i){Object.keys(t).sort().forEach(r=>{const s=t[r],o=Array.isArray(s)?s:[s];o.sort();for(let a of o)a=a?a+"":"",Al(this._platformId)||!this._serverModuleLoaded?Al(this._platformId)?i.style.setProperty(r,a):this._setServerStyle(i,r,a):this._serverStylesheet.addStyleToElement(i,r,a)})}_setServerStyle(t,i,r){i=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const s=this._readStyleAttribute(t);s[i]=r||"",this._writeStyleAttribute(t,s)}_getServerStyle(t,i){return this._readStyleAttribute(t)[i]||""}_readStyleAttribute(t){const i={},r=t.getAttribute("style");if(r){const s=r.split(/;+/g);for(let o=0;o<s.length;o++){const a=s[o].trim();if(a.length>0){const l=a.indexOf(":");if(-1===l)throw new Error(`Invalid CSS style: ${a}`);i[a.substr(0,l).trim()]=a.substr(l+1).trim()}}}return i}_writeStyleAttribute(t,i){let r="";for(const s in i)i[s]&&(r+=s+":"+i[s]+";");t.setAttribute("style",r)}}return n.\u0275fac=function(t){return new(t||n)($(WJ),$(wd),$(Yr),$(Qa))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Vf(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function $J(n,e){return(n.priority||0)-(e.priority||0)}let zM=(()=>{class n{constructor(t,i,r){this._zone=t,this._platformId=i,this._document=r,this.source=new Kn(new nc(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((i,r)=>{i.matches&&t.push(r)}),t}isActive(t){const i=this.registry.get(t);return i?i.matches:this.registerQuery(t).some(r=>r.matches)}observe(t,i=!1){if(t&&t.length){const r=this._observable$.pipe(ui(o=>!i||t.indexOf(o.mediaQuery)>-1));return yr(new zt(o=>{const a=this.registerQuery(t);if(a.length){const l=a.pop();a.forEach(c=>{o.next(c)}),this.source.next(l)}o.complete()}),r)}return this._observable$}registerQuery(t){const i=Array.isArray(t)?t:[t],r=[];return function qJ(n,e){const t=n.filter(i=>!Vk[i]);if(t.length>0){const i=t.join(", ");try{const r=e.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),e.head.appendChild(r),t.forEach(s=>Vk[s]=r)}catch(r){console.error(r)}}}(i,this._document),i.forEach(s=>{const o=l=>{this._zone.run(()=>this.source.next(new nc(l.matches,s)))};let a=this.registry.get(s);a||(a=this.buildMQL(s),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(s,a)),a.matches&&r.push(new nc(!0,s))}),r}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function YJ(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,Al(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)($(xt),$(Yr),$(ct))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vk={},XJ=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Hk="(orientation: portrait) and (max-width: 599.98px)",zk="(orientation: landscape) and (max-width: 959.98px)",Uk="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",Gk="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",jk="(orientation: portrait) and (min-width: 840px)",Wk="(orientation: landscape) and (min-width: 1280px)",$o={HANDSET:`${Hk}, ${zk}`,TABLET:`${Uk} , ${Gk}`,WEB:`${jk}, ${Wk} `,HANDSET_PORTRAIT:`${Hk}`,TABLET_PORTRAIT:`${Uk} `,WEB_PORTRAIT:`${jk}`,HANDSET_LANDSCAPE:`${zk}`,TABLET_LANDSCAPE:`${Gk}`,WEB_LANDSCAPE:`${Wk}`},QJ=[{alias:"handset",priority:2e3,mediaQuery:$o.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:$o.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:$o.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:$o.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:$o.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:$o.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:$o.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:$o.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:$o.WEB_PORTRAIT,overlapping:!0}],ZJ=/(\.|-|_)/g;function KJ(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}const nee=new ye("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=fh(HM),e=fh(Qa),t=[].concat.apply([],(n||[]).map(r=>Array.isArray(r)?r:[r]));return function tee(n,e=[]){const t={};return n.forEach(i=>{t[i.alias]=i}),e.forEach(i=>{t[i.alias]?Wo(t[i.alias],i):t[i.alias]=i}),function eee(n){return n.forEach(e=>{e.suffix||(e.suffix=function JJ(n){return n.replace(ZJ,"|").split("|").map(KJ).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(i=>t[i]))}((e.disableDefaultBps?[]:XJ).concat(e.addOrientationBps?QJ:[]),t)}});let UM=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort($J)}findByAlias(t){return t?this.findWithPredicate(t,i=>i.alias==t):null}findByQuery(t){return this.findWithPredicate(t,i=>i.mediaQuery==t)}get overlappings(){return this.items.filter(t=>1==t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t.suffix?t.suffix:"")}findWithPredicate(t,i){let r=this.findByMap.get(t);return r||(r=this.items.find(i)||null,this.findByMap.set(t,r)),r||null}}return n.\u0275fac=function(t){return new(t||n)($(nee))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Md="print",iee={alias:Md,mediaQuery:Md,priority:1e3};let ree=(()=>{class n{constructor(t,i,r){this.breakpoints=t,this.layoutConfig=i,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.isPrinting=!1,this.queue=new see,this.deactivations=[]}withPrintQuery(t){return[...t,Md]}isPrintEvent(t){return t.mediaQuery.startsWith(Md)}get printAlias(){return this.layoutConfig.printWithBreakpoints||[]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const i=this.breakpoints.findByQuery(t);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(Vf)}updateEvent(t){let i=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(i=this.getEventBreakpoints(t)[0],t.mediaQuery=i?i.mediaQuery:""),Bk(t,i)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new nc(!0,Md))),t.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(r)}interceptEvents(t){return this.registerBeforeAfterPrintHooks(t),i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(i)),t.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(i)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,i){this.isPrinting=!0,t.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}collectActivations(t){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(t.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{const i=this.breakpoints.findByQuery(t.mediaQuery);i&&(this.deactivations.push(i),this.deactivations.sort(Vf))}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)($(UM),$(Qa),$(ct))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class see{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(iee),e.sort(Vf),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function oee(n){return!!n&&n.mediaQuery.startsWith(Md)}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}let Cn=(()=>{class n{constructor(t,i,r){this.matchMedia=t,this.breakpoints=i,this.hook=r,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new it,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}onMediaChange(t){const i=this.findByQuery(t.mediaQuery);i&&((t=Bk(t,i)).matches&&-1===this.activatedBreakpoints.indexOf(i)?(this.activatedBreakpoints.push(i),this.activatedBreakpoints.sort(Vf),this.updateStyles()):!t.matches&&-1!==this.activatedBreakpoints.indexOf(i)&&(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(i),1),this.activatedBreakpoints.sort(Vf),this.updateStyles()))}init(t,i,r,s,o=[]){$k(this.updateMap,t,i,r),$k(this.clearMap,t,i,s),this.buildElementKeyMap(t,i),this.watchExtraTriggers(t,i,o)}getValue(t,i,r){const s=this.elementMap.get(t);if(s){const o=void 0!==r?s.get(r):this.getActivatedValues(s,i);if(o)return o.get(i)}}hasValue(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);if(s)return void 0!==s.get(i)||!1}return!1}setValue(t,i,r,s){let o=this.elementMap.get(t);if(o){const l=(o.get(s)||new Map).set(i,r);o.set(s,l),this.elementMap.set(t,o)}else o=(new Map).set(s,(new Map).set(i,r)),this.elementMap.set(t,o);const a=this.getValue(t,i);void 0!==a&&this.updateElement(t,i,a)}trackValue(t,i){return this.subject.asObservable().pipe(ui(r=>r.element===t&&r.key===i))}updateStyles(){this.elementMap.forEach((t,i)=>{const r=new Set(this.elementKeyMap.get(i));let s=this.getActivatedValues(t);s&&s.forEach((o,a)=>{this.updateElement(i,a,o),r.delete(a)}),r.forEach(o=>{if(s=this.getActivatedValues(t,o),s){const a=s.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(t,i){const r=this.clearMap.get(t);if(r){const s=r.get(i);s&&(s(),this.subject.next({element:t,key:i,value:""}))}}updateElement(t,i,r){const s=this.updateMap.get(t);if(s){const o=s.get(i);o&&(o(r),this.subject.next({element:t,key:i,value:r}))}}releaseElement(t){const i=this.watcherMap.get(t);i&&(i.forEach(s=>s.unsubscribe()),this.watcherMap.delete(t));const r=this.elementMap.get(t);r&&(r.forEach((s,o)=>r.delete(o)),this.elementMap.delete(t))}triggerUpdate(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);s&&(i?this.updateElement(t,i,s.get(i)):s.forEach((o,a)=>this.updateElement(t,a,o)))}}buildElementKeyMap(t,i){let r=this.elementKeyMap.get(t);r||(r=new Set,this.elementKeyMap.set(t,r)),r.add(i)}watchExtraTriggers(t,i,r){if(r&&r.length){let s=this.watcherMap.get(t);if(s||(s=new Map,this.watcherMap.set(t,s)),!s.get(i)){const a=yr(...r).subscribe(()=>{const l=this.getValue(t,i);this.updateElement(t,i,l)});s.set(i,a)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,i){for(let s=0;s<this.activatedBreakpoints.length;s++){const a=t.get(this.activatedBreakpoints[s].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}const r=t.get("");return void 0===i||r&&r.has(i)?r:void 0}observeActivations(){const i=this.breakpoints.items.map(r=>r.mediaQuery);this.matchMedia.observe(this.hook.withPrintQuery(i)).pipe(xi(this.hook.interceptEvents(this)),ui(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)($(zM),$(UM),$(ree))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $k(n,e,t,i){if(void 0!==i){let r=n.get(e);r||(r=new Map,n.set(e,r)),r.set(t,i)}}let Dn=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.styleBuilder=i,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new it,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split(".").slice(1).join(".");this.setValue(t[i].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,i){const r=this.styleBuilder,s=r.shouldCache;let o=this.styleCache.get(t);(!o||!s)&&(o=r.buildStyles(t,i),s&&this.styleCache.set(t,o)),this.mru=Object.assign({},o),this.applyStyleToElement(o),r.sideEffect(t,o,i)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={}}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,i=!1){if(t){const[r,s]=this.styler.getFlowDirection(t);if(!s&&i){const o=kk(r);this.styler.applyStyleToElements(o,[t])}return r.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,i,r=this.nativeElement){this.styler.applyStyleToElement(r,t,i)}setValue(t,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,i)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(b(ke),b(On),b(_n),b(Cn))},n.\u0275dir=W({type:n,features:[wn]}),n})();function qk(n,e="1",t="1"){let i=[e,t,n],r=n.indexOf("calc");if(r>0){i[2]=Yk(n.substring(r).trim());let s=n.substr(0,r).trim().split(" ");2==s.length&&(i[0]=s[0],i[1]=s[1])}else if(0==r)i[2]=Yk(n.trim());else{let s=n.split(" ");i=3===s.length?s:[e,t,n]}return i}function Yk(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}let pee=(()=>{class n extends Dn{constructor(t,i,r,s,o,a,l){super(t,null,i,r),this.ngClassInstance=l,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new Dl(s,o,t,a)),this.init(),this.setValue("","")}set klass(t){this.ngClassInstance.klass=t,this.setValue(t,"")}updateWithValue(t){this.ngClassInstance.ngClass=t,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return n.\u0275fac=function(t){return new(t||n)(b(ke),b(_n),b(Cn),b(Ss),b(Sa),b(Ms),b(Dl,10))},n.\u0275dir=W({type:n,inputs:{klass:["class","klass"]},features:[ne]}),n})();const mee=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let GM=(()=>{class n extends pee{constructor(){super(...arguments),this.inputs=mee}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=De(n)))(i||n)}}(),n.\u0275dir=W({type:n,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[ne]}),n})(),gee=(()=>{class n extends On{buildStyles(t,i){return{display:"true"===t?i.display||(i.isServer?"initial":""):"none"}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=De(n)))(i||n)}}(),n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yee=(()=>{class n extends Dn{constructor(t,i,r,s,o,a,l){super(t,i,r,s),this.layoutConfig=o,this.platformId=a,this.serverModuleLoaded=l,this.DIRECTIVE_KEY="show-hide",this.display="",this.hasLayout=!1,this.hasFlexChild=!1}ngAfterViewInit(){this.trackExtraTriggers();const t=Array.from(this.nativeElement.children);for(let r=0;r<t.length;r++)if(this.marshal.hasValue(t[r],"flex")){this.hasFlexChild=!0;break}jM.has(this.nativeElement)?this.display=jM.get(this.nativeElement):(this.display=this.getDisplayStyle(),jM.set(this.nativeElement,this.display)),this.init();const i=this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY,"");void 0===i||""===i?this.setValue(!0,""):this.triggerUpdate()}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split("."),s=r.slice(1).join("."),o=t[i].currentValue;let a=""===o||0!==o&&St(o);"fxHide"===r[0]&&(a=!a),this.setValue(a,s)}})}trackExtraTriggers(){this.hasLayout=this.marshal.hasValue(this.nativeElement,"layout"),["layout","layout-align"].forEach(t=>{this.marshal.trackValue(this.nativeElement,t).pipe(Vt(this.destroySubject)).subscribe(this.triggerUpdate.bind(this))})}getDisplayStyle(){return this.hasLayout||this.hasFlexChild&&this.layoutConfig.addFlexToParent?"flex":this.styler.lookupStyle(this.nativeElement,"display",!0)}updateWithValue(t=!0){if(""===t)return;const i=xu(this.platformId);this.addStyles(t?"true":"false",{display:this.display,isServer:i}),i&&this.serverModuleLoaded&&this.nativeElement.style.setProperty("display",""),this.marshal.triggerUpdate(this.parentElement,"layout-gap")}}return n.\u0275fac=function(t){return new(t||n)(b(ke),b(gee),b(_n),b(Cn),b(Qa),b(Yr),b(wd))},n.\u0275dir=W({type:n,features:[ne,wn]}),n})();const jM=new WeakMap,_ee=["fxShow","fxShow.print","fxShow.xs","fxShow.sm","fxShow.md","fxShow.lg","fxShow.xl","fxShow.lt-sm","fxShow.lt-md","fxShow.lt-lg","fxShow.lt-xl","fxShow.gt-xs","fxShow.gt-sm","fxShow.gt-md","fxShow.gt-lg","fxHide","fxHide.print","fxHide.xs","fxHide.sm","fxHide.md","fxHide.lg","fxHide.xl","fxHide.lt-sm","fxHide.lt-md","fxHide.lt-lg","fxHide.lt-xl","fxHide.gt-xs","fxHide.gt-sm","fxHide.gt-md","fxHide.gt-lg"];let Xk=(()=>{class n extends yee{constructor(){super(...arguments),this.inputs=_ee}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=De(n)))(i||n)}}(),n.\u0275dir=W({type:n,selectors:[["","fxShow",""],["","fxShow.print",""],["","fxShow.xs",""],["","fxShow.sm",""],["","fxShow.md",""],["","fxShow.lg",""],["","fxShow.xl",""],["","fxShow.lt-sm",""],["","fxShow.lt-md",""],["","fxShow.lt-lg",""],["","fxShow.lt-xl",""],["","fxShow.gt-xs",""],["","fxShow.gt-sm",""],["","fxShow.gt-md",""],["","fxShow.gt-lg",""],["","fxHide",""],["","fxHide.print",""],["","fxHide.xs",""],["","fxHide.sm",""],["","fxHide.md",""],["","fxHide.lg",""],["","fxHide.xl",""],["","fxHide.lt-sm",""],["","fxHide.lt-md",""],["","fxHide.lt-lg",""],["","fxHide.lt-xl",""],["","fxHide.gt-xs",""],["","fxHide.gt-sm",""],["","fxHide.gt-md",""],["","fxHide.gt-lg",""]],inputs:{fxShow:"fxShow","fxShow.print":"fxShow.print","fxShow.xs":"fxShow.xs","fxShow.sm":"fxShow.sm","fxShow.md":"fxShow.md","fxShow.lg":"fxShow.lg","fxShow.xl":"fxShow.xl","fxShow.lt-sm":"fxShow.lt-sm","fxShow.lt-md":"fxShow.lt-md","fxShow.lt-lg":"fxShow.lt-lg","fxShow.lt-xl":"fxShow.lt-xl","fxShow.gt-xs":"fxShow.gt-xs","fxShow.gt-sm":"fxShow.gt-sm","fxShow.gt-md":"fxShow.gt-md","fxShow.gt-lg":"fxShow.gt-lg",fxHide:"fxHide","fxHide.print":"fxHide.print","fxHide.xs":"fxHide.xs","fxHide.sm":"fxHide.sm","fxHide.md":"fxHide.md","fxHide.lg":"fxHide.lg","fxHide.xl":"fxHide.xl","fxHide.lt-sm":"fxHide.lt-sm","fxHide.lt-md":"fxHide.lt-md","fxHide.lt-lg":"fxHide.lt-lg","fxHide.lt-xl":"fxHide.lt-xl","fxHide.gt-xs":"fxHide.gt-xs","fxHide.gt-sm":"fxHide.gt-sm","fxHide.gt-md":"fxHide.gt-md","fxHide.gt-lg":"fxHide.gt-lg"},features:[ne]}),n})(),tL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[BM]]}),n})(),See=(()=>{class n extends On{buildStyles(t){return kk(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=De(n)))(i||n)}}(),n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Eee=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let Dee=(()=>{class n extends Dn{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="layout",this.styleCache=Aee,this.init()}}return n.\u0275fac=function(t){return new(t||n)(b(ke),b(_n),b(See),b(Cn))},n.\u0275dir=W({type:n,features:[ne]}),n})(),nL=(()=>{class n extends Dee{constructor(){super(...arguments),this.inputs=Eee}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=De(n)))(i||n)}}(),n.\u0275dir=W({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[ne]}),n})();const Aee=new Map;let Hee=(()=>{class n extends On{constructor(t){super(),this.layoutConfig=t}buildStyles(t,i){let[r,s,...o]=t.split(" "),a=o.join(" ");const l=i.direction.indexOf("column")>-1?"column":"row",c=Bf(l)?"max-width":"max-height",u=Bf(l)?"min-width":"min-height",d=String(a).indexOf("calc")>-1,h=d||"auto"===a,f=String(a).indexOf("%")>-1&&!d,p=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let g=d||p;r="0"==r?0:r,s="0"==s?0:s;const _=!r&&!s;let y={};const m={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const x=!1!==this.layoutConfig.useColumnBasisZero;a="row"===l?"0%":x?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,a="auto";break;case"grow":a="100%";break;case"noshrink":s=0,a="auto";break;case"auto":break;case"none":r=0,s=0,a="auto";break;default:!g&&!f&&!isNaN(a)&&(a+="%"),"0%"===a&&(g=!0),"0px"===a&&(a="0%"),y=Wo(m,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":g?a:"100%"}:{flex:`${r} ${s} ${g?a:"100%"}`})}return y.flex||y["flex-grow"]||(y=Wo(m,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(y[u]=_||g&&r?a:null,y[c]=_||!h&&s?a:null),y[u]||y[c]?i.hasWrap&&(y[d?"flex-basis":"flex"]=y[c]?d?y[c]:`${r} ${s} ${y[c]}`:d?y[u]:`${r} ${s} ${y[u]}`):y=Wo(m,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`}),Wo(y,{"box-sizing":"border-box"})}}return n.\u0275fac=function(t){return new(t||n)($(Qa))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zee=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let Uee=(()=>{class n extends Dn{constructor(t,i,r,s,o){super(t,s,i,o),this.layoutConfig=r,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(Vt(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(Vt(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const r=t.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),o=this.wrap;s&&o?this.styleCache=Wee:s&&!o?this.styleCache=Gee:!s&&o?this.styleCache=$ee:!s&&!o&&(this.styleCache=jee);const l=qk(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(l.join(" "),{direction:r,hasWrap:o})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const i=qk(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return n.\u0275fac=function(t){return new(t||n)(b(ke),b(_n),b(Qa),b(Hee),b(Cn))},n.\u0275dir=W({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[ne]}),n})(),WM=(()=>{class n extends Uee{constructor(){super(...arguments),this.inputs=zee}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=De(n)))(i||n)}}(),n.\u0275dir=W({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[ne]}),n})();const Gee=new Map,jee=new Map,Wee=new Map,$ee=new Map;let mte=(()=>{class n extends On{buildStyles(t,i){const r={},[s,o]=t.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return Wo(r,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?Bf(i.layout)?null:"100%":null,"max-height":"stretch"===o&&Bf(i.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=De(n)))(i||n)}}(),n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gte=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let yte=(()=>{class n extends Dn{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Vt(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const i=this.layout||"row",r=this.inline;"row"===i&&r?this.styleCache=wte:"row"!==i||r?"row-reverse"===i&&r?this.styleCache=Cte:"row-reverse"!==i||r?"column"===i&&r?this.styleCache=Mte:"column"!==i||r?"column-reverse"===i&&r?this.styleCache=Ste:"column-reverse"===i&&!r&&(this.styleCache=bte):this.styleCache=vte:this.styleCache=xte:this.styleCache=_te,this.addStyles(t,{layout:i,inline:r})}onLayoutChange(t){const i=t.value.split(" ");this.layout=i[0],this.inline=t.value.includes("inline"),u_.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(b(ke),b(_n),b(mte),b(Cn))},n.\u0275dir=W({type:n,features:[ne]}),n})(),Hf=(()=>{class n extends yte{constructor(){super(...arguments),this.inputs=gte}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=De(n)))(i||n)}}(),n.\u0275dir=W({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[ne]}),n})();const _te=new Map,vte=new Map,xte=new Map,bte=new Map,wte=new Map,Mte=new Map,Cte=new Map,Ste=new Map;let sL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[BM,_d]]}),n})(),fL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[BM]]}),n})(),qne=(()=>{class n{constructor(t,i){xu(i)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,i=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:Qa,useValue:Object.assign(Object.assign({},VM),t)},{provide:HM,useValue:i,multi:!0},{provide:wd,useValue:!0}]:[{provide:Qa,useValue:Object.assign(Object.assign({},VM),t)},{provide:HM,useValue:i,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)($(wd),$(Yr))},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[sL,tL,fL],sL,tL,fL]}),n})();Yi(386);const pL=["mat-button",""],mL=["*"],Qne=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Zne=a_(o_(l_(class{constructor(n){this._elementRef=n}})));let $M=(()=>{class n extends Zne{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of Qne)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(b(ke),b(bd),b(Ps,8))},n.\u0275cmp=vt({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&function $n(n,e,t){const i=qt();i.firstCreatePass&&(LT(i,new OT(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),kT(i,oe(),e)}(Nf,5),2&t){let r;Xe(r=Qe())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(sn("disabled",i.disabled||null),fn("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ne],attrs:pL,ngContentSelectors:mL,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Mi(),P(0,"span",0),$t(1),O(),ae(2,"span",1),ae(3,"span",2)),2&t&&(Z(2),fn("mat-button-ripple-round",i.isRoundButton||i.isIconButton),ie("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Nf],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),Kne=(()=>{class n extends $M{constructor(t,i,r,s){super(i,t,r),this._ngZone=s,this._haltDisabledEvents=o=>{this.disabled&&(o.preventDefault(),o.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return n.\u0275fac=function(t){return new(t||n)(b(bd),b(ke),b(Ps,8),b(xt,8))},n.\u0275cmp=vt({type:n,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(t,i){2&t&&(sn("tabindex",i.disabled?-1:i.tabIndex||0)("disabled",i.disabled||null)("aria-disabled",i.disabled.toString()),fn("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[ne],attrs:pL,ngContentSelectors:mL,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Mi(),P(0,"span",0),$t(1),O(),ae(2,"span",1),ae(3,"span",2)),2&t&&(Z(2),fn("mat-button-ripple-round",i.isRoundButton||i.isIconButton),ie("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Nf],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),qM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[kM,Kt],Kt]}),n})();const{isArray:Jne}=Array,{getPrototypeOf:eie,prototype:tie,keys:nie}=Object;const{isArray:rie}=Array;function YM(n){return st(e=>function sie(n,e){return rie(e)?n(...e):n(e)}(n,e))}function zf(...n){const e=hl(n),t=function $d(n){return Rt(Wd(n))?n.pop():void 0}(n),{args:i,keys:r}=function gL(n){if(1===n.length){const e=n[0];if(Jne(e))return{args:e,keys:null};if(function iie(n){return n&&"object"==typeof n&&eie(n)===tie}(e)){const t=nie(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}(n);if(0===i.length)return Nn([],e);const s=new zt(function oie(n,e,t=gr){return i=>{_L(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)_L(e,()=>{const c=Nn(n[l],e);let u=!1;c.subscribe(new rn(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>function yL(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}(r,o):gr));return t?s.pipe(YM(t)):s}function _L(n,e,t){n?ls(t,n,e):e()}const h_=hi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function XM(n){return new zt(e=>{Zi(n()).subscribe(e)})}function vL(){return xn((n,e)=>{let t=null;n._refCount++;const i=new rn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class aie extends zt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Dp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bt;const t=this.getSubject();e.add(this.source.subscribe(new rn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bt.EMPTY)}return e}refCount(){return vL()(this)}}function qo(n,e){return xn((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(new rn(i,l=>{null==r||r.unsubscribe();let c=0;const u=s++;Zi(n(l,u)).subscribe(r=new rn(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function lie(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(new rn(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function xL(n,e){return xn(lie(n,e,arguments.length>=2,!0))}function Yo(n){return xn((e,t)=>{let s,i=null,r=!1;i=e.subscribe(new rn(t,void 0,void 0,o=>{s=Zi(n(o,Yo(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Cd(n,e){return Rt(e)?Ln(n,e,1):Ln(n,1)}function QM(n){return n<=0?()=>Vr:xn((e,t)=>{let i=[];e.subscribe(new rn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function bL(n=cie){return xn((e,t)=>{let i=!1;e.subscribe(new rn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function cie(){return new h_}function wL(n){return xn((e,t)=>{let i=!1;e.subscribe(new rn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Sd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ui((r,s)=>n(r,s,i)):gr,Gn(1),t?wL(e):bL(()=>new h_))}class Xo{constructor(e,t){this.id=e,this.url=t}}class ZM extends Xo{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Uf extends Xo{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class CL extends Xo{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class die extends Xo{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hie extends Xo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fie extends Xo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pie extends Xo{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mie extends Xo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gie extends Xo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SL{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class EL{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yie{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _ie{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vie{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xie{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DL{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ot="primary";class bie{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ed(n){return new bie(n)}const AL="ngNavigationCancelingError";function KM(n){const e=Error("NavigationCancelingError: "+n);return e[AL]=!0,e}function Mie(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function co(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!TL(n[r],e[r]))return!1;return!0}function TL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function IL(n){return Array.prototype.concat.apply([],n)}function RL(n){return n.length>0?n[n.length-1]:null}function Pi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function uo(n){return px(n)?n:Ah(n)?Nn(Promise.resolve(n)):We(n)}const Eie={exact:function FL(n,e,t){if(!rc(n.segments,e.segments)||!f_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!FL(n.children[i],e.children[i],t))return!1;return!0},subset:kL},PL={exact:function Die(n,e){return co(n,e)},subset:function Aie(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>TL(n[t],e[t]))},ignored:()=>!0};function OL(n,e,t){return Eie[t.paths](n.root,e.root,t.matrixParams)&&PL[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function kL(n,e,t){return LL(n,e,e.segments,t)}function LL(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!rc(r,t)||e.hasChildren()||!f_(r,t,i))}if(n.segments.length===t.length){if(!rc(n.segments,t)||!f_(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!kL(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(rc(n.segments,r)&&f_(n.segments,r,i)&&n.children[Ot])&&LL(n.children[Ot],e,s,i)}}function f_(n,e,t){return e.every((i,r)=>PL[t](n[r].parameters,i.parameters))}class ic{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ed(this.queryParams)),this._queryParamMap}toString(){return Rie.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Pi(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return p_(this)}}class Gf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ed(this.parameters)),this._parameterMap}toString(){return zL(this)}}function rc(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class NL{}class BL{parse(e){const t=new Hie(e);return new ic(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${jf(e.root,!0)}`,i=function Fie(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${m_(t)}=${m_(r)}`).join("&"):`${m_(t)}=${m_(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function Pie(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const Rie=new BL;function p_(n){return n.segments.map(e=>zL(e)).join("/")}function jf(n,e){if(!n.hasChildren())return p_(n);if(e){const t=n.children[Ot]?jf(n.children[Ot],!1):"",i=[];return Pi(n.children,(r,s)=>{s!==Ot&&i.push(`${s}:${jf(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Iie(n,e){let t=[];return Pi(n.children,(i,r)=>{r===Ot&&(t=t.concat(e(i,r)))}),Pi(n.children,(i,r)=>{r!==Ot&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Ot?[jf(n.children[Ot],!1)]:[`${r}:${jf(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${p_(n)}/${t[0]}`:`${p_(n)}/(${t.join("//")})`}}function VL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function m_(n){return VL(n).replace(/%3B/gi,";")}function JM(n){return VL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function g_(n){return decodeURIComponent(n)}function HL(n){return g_(n.replace(/\+/g,"%20"))}function zL(n){return`${JM(n.path)}${function Oie(n){return Object.keys(n).map(e=>`;${JM(e)}=${JM(n[e])}`).join("")}(n.parameters)}`}const kie=/^[^\/()?;=#]+/;function y_(n){const e=n.match(kie);return e?e[0]:""}const Lie=/^[^=?&#]+/,Bie=/^[^&#]+/;class Hie{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Ot]=new Gt(e,t)),i}parseSegment(){const e=y_(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Gf(g_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=y_(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=y_(this.remaining);r&&(i=r,this.capture(i))}e[g_(t)]=g_(i)}parseQueryParam(e){const t=function Nie(n){const e=n.match(Lie);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function Vie(n){const e=n.match(Bie);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=HL(t),s=HL(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=y_(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ot);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ot]:new Gt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class UL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=eC(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=eC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return tC(e,this._root).map(t=>t.value)}}function eC(n,e){if(n===e.value)return e;for(const t of e.children){const i=eC(n,t);if(i)return i}return null}function tC(n,e){if(n===e.value)return[e];for(const t of e.children){const i=tC(n,t);if(i.length)return i.unshift(e),i}return[]}class Qo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Dd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class GL extends UL{constructor(e,t){super(e),this.snapshot=t,nC(this,e)}toString(){return this.snapshot.toString()}}function jL(n,e){const t=function zie(n,e){const o=new __([],{},{},"",{},Ot,e,null,n.root,-1,{});return new $L("",new Qo(o,[]))}(n,e),i=new Kn([new Gf("",{})]),r=new Kn({}),s=new Kn({}),o=new Kn({}),a=new Kn(""),l=new Za(i,r,o,a,s,Ot,e,t.root);return l.snapshot=t.root,new GL(new Qo(l,[]),t)}class Za{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(st(e=>Ed(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(st(e=>Ed(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WL(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Uie(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class __{constructor(e,t,i,r,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ed(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ed(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $L extends UL{constructor(e,t){super(t),this.url=e,nC(this,t)}toString(){return qL(this._root)}}function nC(n,e){e.value._routerState=n,e.children.forEach(t=>nC(n,t))}function qL(n){const e=n.children.length>0?` { ${n.children.map(qL).join(", ")} } `:"";return`${n.value}${e}`}function iC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,co(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),co(e.params,t.params)||n.params.next(t.params),function Cie(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!co(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),co(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function rC(n,e){const t=co(n.params,e.params)&&function Tie(n,e){return rc(n,e)&&n.every((t,i)=>co(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||rC(n.parent,e.parent))}function Wf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function jie(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Wf(n,i,r);return Wf(n,i)})}(n,e,t);return new Qo(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Wf(n,a)),o}}const i=function Wie(n){return new Za(new Kn(n.url),new Kn(n.params),new Kn(n.queryParams),new Kn(n.fragment),new Kn(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Wf(n,s));return new Qo(i,r)}}function v_(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function $f(n){return"object"==typeof n&&null!=n&&n.outlets}function sC(n,e,t,i,r){let s={};return i&&Pi(i,(o,a)=>{s[a]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new ic(t.root===n?e:YL(t.root,n,e),s,r)}function YL(n,e,t){const i={};return Pi(n.children,(r,s)=>{i[s]=r===e?t:YL(r,e,t)}),new Gt(n.segments,i)}class XL{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&v_(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find($f);if(r&&r!==RL(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class oC{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function QL(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return x_(n,e,t);const i=function Zie(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if($f(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!KL(l,c,o))return s;i+=2}else{if(!KL(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Gt(n.segments.slice(0,i.pathIndex),{});return s.children[Ot]=new Gt(n.segments.slice(i.pathIndex),n.children),x_(s,0,r)}return i.match&&0===r.length?new Gt(n.segments,{}):i.match&&!n.hasChildren()?aC(n,e,t):i.match?x_(n,0,r):aC(n,e,t)}function x_(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const i=function Qie(n){return $f(n[0])?n[0].outlets:{[Ot]:n}}(t),r={};return Pi(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=QL(n.children[o],e,s))}),Pi(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new Gt(n.segments,r)}}function aC(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if($f(s)){const l=Kie(s.outlets);return new Gt(i,l)}if(0===r&&v_(t[0])){i.push(new Gf(n.segments[e].path,ZL(t[0]))),r++;continue}const o=$f(s)?s.outlets[Ot]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&v_(a)?(i.push(new Gf(o,ZL(a))),r+=2):(i.push(new Gf(o,{})),r++)}return new Gt(i,{})}function Kie(n){const e={};return Pi(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=aC(new Gt([],{}),0,t))}),e}function ZL(n){const e={};return Pi(n,(t,i)=>e[i]=`${t}`),e}function KL(n,e,t){return n==t.path&&co(e,t.parameters)}class ere{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),iC(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Dd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Pi(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Dd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Dd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Dd(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new xie(s.value.snapshot))}),e.children.length&&this.forwardEvent(new _ie(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(iC(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),iC(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function tre(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class lC{constructor(e,t){this.routes=e,this.module=t}}function Ka(n){return"function"==typeof n}function sc(n){return n instanceof ic}const qf=Symbol("INITIAL_VALUE");function Yf(){return qo(n=>zf(n.map(e=>e.pipe(Gn(1),Os(qf)))).pipe(xL((e,t)=>{let i=!1;return t.reduce((r,s,o)=>r!==qf?r:(s===qf&&(i=!0),i||!1!==s&&o!==t.length-1&&!sc(s)?r:s),e)},qf),ui(e=>e!==qf),st(e=>sc(e)?e:!0===e),Gn(1)))}class are{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Xf,this.attachRef=null}}class Xf{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new are,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let cC=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.name=s||Ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new lre(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(b(Xf),b(Wn),b(Ma),ys("name"),b(Ui))},n.\u0275dir=W({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class lre{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Za?this.route:e===Xf?this.childContexts:this.parent.get(e,t)}}let JL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=vt({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&ae(0,"router-outlet")},directives:[cC],encapsulation:2}),n})();function e2(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];cre(i,ure(e,i))}}function cre(n,e){n.children&&e2(n.children,e)}function ure(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function uC(n){const e=n.children&&n.children.map(uC),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=JL),t}function is(n){return n.outlet||Ot}function t2(n,e){const t=n.filter(i=>is(i)===e);return t.push(...n.filter(i=>is(i)!==e)),t}const n2={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function b_(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},n2):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Mie)(t,n,e);if(!s)return Object.assign({},n2);const o={};Pi(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:a,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function w_(n,e,t,i,r="corrected"){if(t.length>0&&function fre(n,e,t){return t.some(i=>M_(n,e,i)&&is(i)!==Ot)}(n,t,i)){const o=new Gt(e,function hre(n,e,t,i){const r={};r[Ot]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&is(s)!==Ot){const o=new Gt([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[is(s)]=o}return r}(n,e,i,new Gt(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function pre(n,e,t){return t.some(i=>M_(n,e,i))}(n,t,i)){const o=new Gt(n.segments,function dre(n,e,t,i,r,s){const o={};for(const a of i)if(M_(n,t,a)&&!r[is(a)]){const l=new Gt([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[is(a)]=l}return Object.assign(Object.assign({},r),o)}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Gt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function M_(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function r2(n,e,t,i){return!!(is(n)===i||i!==Ot&&M_(e,t,n))&&("**"===n.path||b_(e,n,t).matched)}function s2(n,e,t){return 0===e.length&&!n.children[t]}class Qf{constructor(e){this.segmentGroup=e||null}}class o2{constructor(e){this.urlTree=e}}function C_(n){return new zt(e=>e.error(new Qf(n)))}function a2(n){return new zt(e=>e.error(new o2(n)))}function mre(n){return new zt(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class _re{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(So)}apply(){const e=w_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Gt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ot).pipe(st(s=>this.createUrlTree(dC(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yo(s=>{if(s instanceof o2)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Qf?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ot).pipe(st(r=>this.createUrlTree(dC(r),e.queryParams,e.fragment))).pipe(Yo(r=>{throw r instanceof Qf?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new Gt([],{[Ot]:e}):e;return new ic(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(st(s=>new Gt([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Nn(r).pipe(Cd(s=>{const o=i.children[s],a=t2(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(st(l=>({segment:l,outlet:s})))}),xL((s,o)=>(s[o.outlet]=o.segment,s),{}),function uie(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ui((r,s)=>n(r,s,i)):gr,QM(1),t?wL(e):bL(()=>new h_))}())}expandSegment(e,t,i,r,s,o){return Nn(i).pipe(Cd(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(Yo(c=>{if(c instanceof Qf)return We(null);throw c}))),Sd(a=>!!a),Yo((a,l)=>{if(a instanceof h_||"EmptyError"===a.name){if(s2(t,r,s))return We(new Gt([],{}));throw new Qf(t)}throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return r2(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):C_(t):C_(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?a2(s):this.lineralizeSegments(i,s).pipe(Ln(o=>{const a=new Gt(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,lastChild:c,positionalParamSegments:u}=b_(t,r,s);if(!a)return C_(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?a2(d):this.lineralizeSegments(r,d).pipe(Ln(h=>this.expandSegment(e,t,i,h.concat(s.slice(c)),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?We(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(st(h=>(i._loadedConfig=h,new Gt(r,{})))):We(new Gt(r,{}));const{matched:o,consumedSegments:a,lastChild:l}=b_(t,i,r);if(!o)return C_(t);const c=r.slice(l);return this.getChildConfig(e,i,r).pipe(Ln(d=>{const h=d.module,f=d.routes,{segmentGroup:p,slicedSegments:g}=w_(t,a,c,f),_=new Gt(p.segments,p.children);if(0===g.length&&_.hasChildren())return this.expandChildren(h,f,_).pipe(st(v=>new Gt(a,v)));if(0===f.length&&0===g.length)return We(new Gt(a,{}));const y=is(i)===s;return this.expandSegment(h,_,f,g,y?Ot:s,!0).pipe(st(x=>new Gt(a.concat(x.segments),x.children)))}))}getChildConfig(e,t,i){return t.children?We(new lC(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?We(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(Ln(r=>r?this.configLoader.load(e.injector,t).pipe(st(s=>(t._loadedConfig=s,s))):function gre(n){return new zt(e=>e.error(KM(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):We(new lC([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;if(!r||0===r.length)return We(!0);const s=r.map(o=>{const a=e.get(o);let l;if(function ire(n){return n&&Ka(n.canLoad)}(a))l=a.canLoad(t,i);else{if(!Ka(a))throw new Error("Invalid CanLoad guard");l=a(t,i)}return uo(l)});return We(s).pipe(Yf(),xi(o=>{if(!sc(o))return;const a=KM(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),st(o=>!0===o))}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return We(i);if(r.numberOfChildren>1||!r.children[Ot])return mre(e.redirectTo);r=r.children[Ot]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new ic(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Pi(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Pi(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new Gt(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function dC(n){const e={};for(const i of Object.keys(n.children)){const s=dC(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function vre(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}class l2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class S_{constructor(e,t){this.component=e,this.route=t}}function bre(n,e,t){const i=n._root;return Zf(i,e?e._root:null,t,[i.value])}function E_(n,e,t){const i=function Mre(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function Zf(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Dd(e);return n.children.forEach(o=>{(function Cre(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Sre(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!rc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!rc(n.url,e.url)||!co(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rC(n,e)||!co(n.queryParams,e.queryParams);default:return!rC(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new l2(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Zf(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new S_(a.outlet.component,o))}else o&&Kf(e,a,r),r.canActivateChecks.push(new l2(i)),Zf(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Pi(s,(o,a)=>Kf(o,t.getContext(a),r)),r}function Kf(n,e,t){const i=Dd(n),r=n.value;Pi(i,(s,o)=>{Kf(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new S_(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class Fre{}function c2(n){return new zt(e=>e.error(n))}class Lre{constructor(e,t,i,r,s,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=w_(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ot);if(null===t)return null;const i=new __([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Qo(i,t),s=new $L(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=WL(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=t2(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;i.push(...l)}const r=u2(i);return function Nre(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,i,r);if(null!==o)return o}return s2(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!r2(e,t,i,r))return null;let s,o=[],a=[];if("**"===e.path){const f=i.length>0?RL(i).parameters:{};s=new __(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,f2(e),is(e),e.component,e,d2(t),h2(t)+i.length,p2(e))}else{const f=b_(t,e,i);if(!f.matched)return null;o=f.consumedSegments,a=i.slice(f.lastChild),s=new __(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,f2(e),is(e),e.component,e,d2(t),h2(t)+o.length,p2(e))}const l=function Bre(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=w_(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new Qo(s,f)]}if(0===l.length&&0===u.length)return[new Qo(s,[])];const d=is(e)===r,h=this.processSegment(l,c,u,d?Ot:r);return null===h?null:[new Qo(s,h)]}}function Vre(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function u2(n){const e=[],t=new Set;for(const i of n){if(!Vre(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=u2(i.children);e.push(new Qo(i.value,r))}return e.filter(i=>!t.has(i))}function d2(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function h2(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function f2(n){return n.data||{}}function p2(n){return n.resolve||{}}function hC(n){return qo(e=>{const t=n(e);return t?Nn(t).pipe(st(()=>e)):We(e)})}class qre extends class $re{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const fC=new ye("ROUTES");class m2{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe(st(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new lC(IL(o.injector.get(fC,void 0,ft.Self|ft.Optional)).map(uC),o)}),Yo(s=>{throw t._loader$=void 0,s}));return t._loader$=new aie(r,()=>new it).pipe(vL()),t._loader$}loadModuleFactory(e){return uo(e()).pipe(Ln(t=>t instanceof bT?We(t):Nn(this.compiler.compileModuleAsync(t))))}}class Xre{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Qre(n){throw n}function Zre(n,e,t){return e.parse("/")}function g2(n,e){return We(null)}const Kre={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jre={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fr=(()=>{class n{constructor(t,i,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new it,this.errorHandler=Qre,this.malformedUriErrorHandler=Zre,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:g2,afterPreactivation:g2},this.urlHandlingStrategy=new Xre,this.routeReuseStrategy=new qre,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(So),this.console=o.get(tI);const d=o.get(xt);this.isNgZoneEnabled=d instanceof xt&&xt.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Sie(){return new ic(new Gt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new m2(o,a,h=>this.triggerEvent(new SL(h)),h=>this.triggerEvent(new EL(h))),this.routerState=jL(this.currentUrlTree,this.rootComponentType),this.transitions=new Kn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(ui(r=>0!==r.id),st(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),qo(r=>{let s=!1,o=!1;return We(r).pipe(xi(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qo(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return D_(a.source)&&(this.browserUrlTree=a.extractedUrl),We(a).pipe(qo(d=>{const h=this.transitions.getValue();return i.next(new ZM(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Vr:Promise.resolve(d)}),function xre(n,e,t,i){return qo(r=>function yre(n,e,t,i,r){return new _re(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(st(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),xi(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function Hre(n,e,t,i,r){return Ln(s=>function kre(n,e,t,i,r="emptyOnly",s="legacy"){try{const o=new Lre(n,e,t,i,r,s).recognize();return null===o?c2(new Fre):We(o)}catch(o){return c2(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe(st(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),xi(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new hie(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:_}=a,y=new ZM(h,this.serializeUrl(f),p,g);i.next(y);const m=jL(f,this.rootComponentType).snapshot;return We(Object.assign(Object.assign({},a),{targetSnapshot:m,urlAfterRedirects:f,extras:Object.assign(Object.assign({},_),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Vr}),hC(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),xi(a=>{const l=new fie(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),st(a=>Object.assign(Object.assign({},a),{guards:bre(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function Ere(n,e){return Ln(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?We(Object.assign(Object.assign({},t),{guardsResult:!0})):function Dre(n,e,t,i){return Nn(n).pipe(Ln(r=>function Ore(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?We(s.map(a=>{const l=E_(a,e,r);let c;if(function ore(n){return n&&Ka(n.canDeactivate)}(l))c=uo(l.canDeactivate(n,e,t,i));else{if(!Ka(l))throw new Error("Invalid CanDeactivate guard");c=uo(l(n,e,t,i))}return c.pipe(Sd())})).pipe(Yf()):We(!0)}(r.component,r.route,t,e,i)),Sd(r=>!0!==r,!0))}(o,i,r,n).pipe(Ln(a=>a&&function nre(n){return"boolean"==typeof n}(a)?function Are(n,e,t,i){return Nn(e).pipe(Cd(r=>s_(function Ire(n,e){return null!==n&&e&&e(new yie(n)),We(!0)}(r.route.parent,i),function Tre(n,e){return null!==n&&e&&e(new vie(n)),We(!0)}(r.route,i),function Pre(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function wre(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>XM(()=>We(o.guards.map(l=>{const c=E_(l,o.node,t);let u;if(function sre(n){return n&&Ka(n.canActivateChild)}(c))u=uo(c.canActivateChild(i,n));else{if(!Ka(c))throw new Error("Invalid CanActivateChild guard");u=uo(c(i,n))}return u.pipe(Sd())})).pipe(Yf())));return We(s).pipe(Yf())}(n,r.path,t),function Rre(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return We(!0);const r=i.map(s=>XM(()=>{const o=E_(s,e,t);let a;if(function rre(n){return n&&Ka(n.canActivate)}(o))a=uo(o.canActivate(e,n));else{if(!Ka(o))throw new Error("Invalid CanActivate guard");a=uo(o(e,n))}return a.pipe(Sd())}));return We(r).pipe(Yf())}(n,r.route,t))),Sd(r=>!0!==r,!0))}(i,s,n,e):We(a)),st(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),xi(a=>{if(sc(a.guardsResult)){const c=KM(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new pie(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),ui(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),hC(a=>{if(a.guards.canActivateChecks.length)return We(a).pipe(xi(l=>{const c=new mie(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),qo(l=>{let c=!1;return We(l).pipe(function zre(n,e){return Ln(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return We(t);let s=0;return Nn(r).pipe(Cd(o=>function Ure(n,e,t,i){return function Gre(n,e,t,i){const r=Object.keys(n);if(0===r.length)return We({});const s={};return Nn(r).pipe(Ln(o=>function jre(n,e,t,i){const r=E_(n,e,i);return uo(r.resolve?r.resolve(e,t):r(e,t))}(n[o],e,t,i).pipe(xi(a=>{s[o]=a}))),QM(1),Ln(()=>Object.keys(s).length===r.length?We(s):Vr))}(n._resolve,n,e,i).pipe(st(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),WL(n,t).resolve),null)))}(o.route,i,n,e)),xi(()=>s++),QM(1),Ln(o=>s===r.length?We(t):Vr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),xi({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),xi(l=>{const c=new gie(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),hC(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),st(a=>{const l=function Gie(n,e,t){const i=Wf(n,e._root,t?t._root:void 0);return new GL(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),xi(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>st(i=>(new ere(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),xi({next(){s=!0},complete(){s=!0}}),function ML(n){return xn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),Yo(a=>{if(o=!0,function wie(n){return n&&n[AL]}(a)){const l=sc(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new CL(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||D_(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new die(r.id,this.serializeUrl(r.extractedUrl),a);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return Vr}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},o=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,i,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){e2(t),this.config=t.map(uC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function $ie(n,e,t,i,r){if(0===t.length)return sC(e.root,e.root,e,i,r);const s=function qie(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new XL(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Pi(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new XL(t,e,i)}(t);if(s.toRoot())return sC(e.root,new Gt([],{}),e,i,r);const o=function Yie(n,e,t){if(n.isAbsolute)return new oC(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new oC(s,s===e.root,0)}const i=v_(n.commands[0])?0:1;return function Xie(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new oC(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?x_(o.segmentGroup,o.index,s.commands):QL(o.segmentGroup,o.index,s.commands);return sC(o.segmentGroup,a,e,i,r)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=sc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function ese(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},Kre):!1===i?Object.assign({},Jre):i,sc(t))return OL(this.currentUrlTree,t,r);const s=this.parseUrl(t);return OL(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Uf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){var a,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=D_(i)&&u&&!D_(u.source),h=u.rawUrl.toString()===t.toString(),f=u.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(d&&h&&f)return Promise.resolve(!0);let g,_,y;o?(g=o.resolve,_=o.reject,y=o.promise):y=new Promise((v,M)=>{g=v,_=M});const m=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),x=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):x=0,this.setTransition({id:m,targetPageId:x,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:g,reject:_,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(v=>Promise.reject(v))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new CL(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){au()},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();function D_(n){return"imperative"!==n}let Jf=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new it,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Ad(this.skipLocationChange),replaceUrl:Ad(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ad(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(b(Fr),b(Za),ys("tabindex"),b(Ms),b(ke))},n.\u0275dir=W({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&ot("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[wn]}),n})(),A_=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new it,this.subscription=t.events.subscribe(s=>{s instanceof Uf&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,o){if(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:Ad(this.skipLocationChange),replaceUrl:Ad(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ad(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(b(Fr),b(Za),b(yu))},n.\u0275dir=W({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&ot("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&sn("target",i.target)("href",i.href,pi)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[wn]}),n})();function Ad(n){return""===n||!!n}let y2=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new nt,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof Uf&&this.update()})}ngAfterContentInit(){We(this.links.changes,this.linksWithHrefs.changes,We(null)).pipe(Bs()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const i=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Nn(i).pipe(Bs()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function tse(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(b(Fr),b(ke),b(Ms),b(Ui),b(Jf,8),b(A_,8))},n.\u0275dir=W({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&(en(r,Jf,5),en(r,A_,5)),2&t){let s;Xe(s=Qe())&&(i.links=s),Xe(s=Qe())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[wn]}),n})();class _2{}class v2{preload(e,t){return We(null)}}let x2=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new m2(r,i,l=>t.triggerEvent(new SL(l)),l=>t.triggerEvent(new EL(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(ui(t=>t instanceof Uf),Cd(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(So);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return Nn(r).pipe(Bs(),st(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?We(i._loadedConfig):this.loader.load(t.injector,i)).pipe(Ln(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)($(Fr),$(Gm),$(mi),$(_2))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})(),pC=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ZM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Uf&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof DL&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new DL(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){au()},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();const oc=new ye("ROUTER_CONFIGURATION"),b2=new ye("ROUTER_FORROOT_GUARD"),ise=[_u,{provide:NL,useClass:BL},{provide:Fr,useFactory:function lse(n,e,t,i,r,s,o={},a,l){const c=new Fr(null,n,e,t,i,r,IL(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function cse(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[NL,Xf,_u,mi,Gm,fC,oc,[class Yre{},new pr],[class Wre{},new pr]]},Xf,{provide:Za,useFactory:function use(n){return n.routerState.root},deps:[Fr]},x2,v2,class nse{preload(e,t){return t().pipe(Yo(()=>We(null)))}},{provide:oc,useValue:{enableTracing:!1}}];function rse(){return new aI("Router",Fr)}let mC=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[ise,w2(t),{provide:b2,useFactory:ase,deps:[[Fr,new pr,new xa]]},{provide:oc,useValue:i||{}},{provide:yu,useFactory:ose,deps:[El,[new mh(Kx),new pr],oc]},{provide:pC,useFactory:sse,deps:[Fr,Vj,oc]},{provide:_2,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:v2},{provide:aI,multi:!0,useFactory:rse},[gC,{provide:Um,multi:!0,useFactory:dse,deps:[gC]},{provide:M2,useFactory:hse,deps:[gC]},{provide:Hx,multi:!0,useExisting:M2}]]}}static forChild(t){return{ngModule:n,providers:[w2(t)]}}}return n.\u0275fac=function(t){return new(t||n)($(b2,8),$(Fr,8))},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({}),n})();function sse(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new pC(n,e,t)}function ose(n,e,t={}){return t.useHash?new E8(n,e):new TI(n,e)}function ase(n){return"guarded"}function w2(n){return[{provide:rH,multi:!0,useValue:n},{provide:fC,multi:!0,useValue:n}]}let gC=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new it}appInitializer(){return this.injector.get(M8,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),s=this.injector.get(Fr),o=this.injector.get(oc);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?We(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(oc),r=this.injector.get(x2),s=this.injector.get(pC),o=this.injector.get(Fr),a=this.injector.get(gu);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)($(mi))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();function dse(n){return n.appInitializer.bind(n)}function hse(n){return n.bootstrapListener.bind(n)}const M2=new ye("Router Initializer");let pse=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=vt({type:n,selectors:[["app-header"]],decls:22,vars:0,consts:[[1,"toolbar"],["fxFlex","","fxLayoutAlign","start center"],["src","./assets/images/logo.png","height","40"],["fxFlex","","fxLayoutAlign","end center"],[1,"fa","fa-home","fa-lg",2,"color","white","font-weight","bold"],["mat-button","","routerLink","home","routerLinkActive","active"],["STYLE","font-family:'Lucida'",2,"color","white","font-weight","bold"],["src","./assets/images/logo1.png","height","40"],["mat-button","","routerLink","historicoslider","routerLinkActive","active"],["src","./assets/images/logo2.png","height","40"],["mat-button","","routerLink","actualslider","routerLinkActive","active"]],template:function(t,i){1&t&&(P(0,"div",0),P(1,"div",1),Le(2," \xa0\xa0\xa0\xa0 "),P(3,"span"),ae(4,"img",2),O(),Le(5," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),O(),P(6,"div",3),ae(7,"span",4),P(8,"a",5),P(9,"span",6),Le(10," Home"),O(),O(),P(11,"span"),ae(12,"img",7),O(),P(13,"a",8),P(14,"span",6),Le(15," Personajes Hist\xf3ricos "),O(),O(),P(16,"span"),ae(17,"img",9),O(),P(18,"a",10),P(19,"span",6),Le(20," Personajes Actuales "),O(),O(),Le(21," \xa0\xa0\xa0\xa0 "),O(),O())},directives:[WM,Hf,Kne,A_,y2],styles:["a[_ngcontent-%COMP%]:hover{letter-spacing:1px;color:#ff0}"]}),n})(),mse=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=vt({type:n,selectors:[["app-footer"]],decls:21,vars:0,consts:[[1,"toolbar","footer",2,"height","43px","background-color","black"],["fxShow","true","fxHide.lt-md","","fxFlex","","fxLayout",""],["fxFlex","","fxLayoutAlign","start center"],["href","https://www.facebook.com/JapanGov","target","_blank"],["id","icon_facebook","src","./assets/images/icon_facebook.png","height","25","padding","42px"],["href","https://twitter.com/japangov","target","_blank"],["id","icon_twitter","src","./assets/images/icon_twitter.png","height","25"],["href","https://www.youtube.com/user/pmojapan","target","_blank"],["id","icon_youtube","src","./assets/images/icon_youtube.png","height","25"],["fxFlex","","fxLayoutAlign","end center"],["STYLE","font-family:'Lucida'",2,"color","white","font-weight","bold"],["title","Cristian Albuja","href","mailto:calbujam@gmail.com"],["src","./assets/images/logo.png","height","43"]],template:function(t,i){1&t&&(P(0,"div",0),P(1,"div",1),P(2,"div",2),Le(3," \xa0\xa0\xa0\xa0\xa0 "),P(4,"a",3),ae(5,"img",4),O(),Le(6," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),P(7,"a",5),ae(8,"img",6),O(),Le(9," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),P(10,"a",7),ae(11,"img",8),O(),O(),P(12,"div",9),P(13,"span",10),Le(14," \xa92022 \u2022 Realizado por "),P(15,"a",11),Le(16,"Cristian Albuja"),O(),O(),Le(17," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),P(18,"span"),ae(19,"img",12),O(),Le(20," \xa0\xa0\xa0\xa0\xa0 "),O(),O(),O())},directives:[Xk,WM,nL,Hf],styles:[".footer[_ngcontent-%COMP%]{position:relative;top:0px;padding:0;margin:0}"]}),n})(),gse=(()=>{class n{constructor(){this.title="Cultura Japonesa"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=vt({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,i){1&t&&(ae(0,"app-header"),ae(1,"router-outlet"),ae(2,"app-footer"))},directives:[pse,cC,mse],styles:[""]}),n})(),mN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({}),n})(),goe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[mN]]}),n})(),yoe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[goe]}),n})(),_oe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Kt],Kt]}),n})(),Poe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[c_,kM,Kt,LM,Er],c_,Kt,LM,_oe]}),n})();const FN=["*"],Ooe=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],Foe=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"];class Loe{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const e=Math.max(...this.tracker);return e>1?this.rowCount+e-1:this.rowCount}update(e,t){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(e),this.tracker.fill(0,0,this.tracker.length),this.positions=t.map(i=>this._trackTile(i))}_trackTile(e){const t=this._findMatchingGap(e.colspan);return this._markTilePosition(t,e),this.columnIndex=t+e.colspan,new Noe(this.rowIndex,t)}_findMatchingGap(e){let t=-1,i=-1;do{this.columnIndex+e>this.tracker.length?(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t)):(t=this.tracker.indexOf(0,this.columnIndex),-1!=t?(i=this._findGapEndIndex(t),this.columnIndex=t+1):(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t)))}while(i-t<e||0==i);return Math.max(t,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let e=0;e<this.tracker.length;e++)this.tracker[e]=Math.max(0,this.tracker[e]-1)}_findGapEndIndex(e){for(let t=e+1;t<this.tracker.length;t++)if(0!=this.tracker[t])return t;return this.tracker.length}_markTilePosition(e,t){for(let i=0;i<t.colspan;i++)this.tracker[e+i]=t.rowspan}}class Noe{constructor(e,t){this.row=e,this.col=t}}const kN=new ye("MAT_GRID_LIST");let HC=(()=>{class n{constructor(t,i){this._element=t,this._gridList=i,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(Ri(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(Ri(t))}_setStyle(t,i){this._element.nativeElement.style[t]=i}}return n.\u0275fac=function(t){return new(t||n)(b(ke),b(kN,8))},n.\u0275cmp=vt({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(t,i){2&t&&sn("rowspan",i.rowspan)("colspan",i.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:FN,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(t,i){1&t&&(Mi(),P(0,"div",0),$t(1),O())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})(),LN=(()=>{class n{constructor(t){this._element=t}ngAfterContentInit(){!function Ck(n,e,t="mat"){n.changes.pipe(Os(n)).subscribe(({length:i})=>{Lf(e,`${t}-2-line`,!1),Lf(e,`${t}-3-line`,!1),Lf(e,`${t}-multi-line`,!1),2===i||3===i?Lf(e,`${t}-${i}-line`,!0):i>3&&Lf(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}}return n.\u0275fac=function(t){return new(t||n)(b(ke))},n.\u0275cmp=vt({type:n,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(t,i,r){if(1&t&&en(r,Mk,5),2&t){let s;Xe(s=Qe())&&(i._lines=s)}},ngContentSelectors:Foe,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(t,i){1&t&&(Mi(Ooe),$t(0),P(1,"div",0),$t(2,1),O(),$t(3,2))},encapsulation:2,changeDetection:0}),n})(),NN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=W({type:n,selectors:[["mat-grid-tile-footer"]],hostAttrs:[1,"mat-grid-tile-footer"]}),n})();const Boe=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class zC{constructor(){this._rows=0,this._rowspan=0}init(e,t,i,r){this._gutterSize=BN(e),this._rows=t.rowCount,this._rowspan=t.rowspan,this._cols=i,this._direction=r}getBaseTileSize(e,t){return`(${e}% - (${this._gutterSize} * ${t}))`}getTilePosition(e,t){return 0===t?"0":lc(`(${e} + ${this._gutterSize}) * ${t}`)}getTileSize(e,t){return`(${e} * ${t}) + (${t-1} * ${this._gutterSize})`}setStyle(e,t,i){let r=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(e,i,r,s),this.setRowStyles(e,t,r,s)}setColStyles(e,t,i,r){let s=this.getBaseTileSize(i,r);e._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(s,t)),e._setStyle("width",lc(this.getTileSize(s,e.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(e){return`${this._rowspan} * ${this.getTileSize(e,1)}`}getComputedHeight(){return null}}class Voe extends zC{constructor(e){super(),this.fixedRowHeight=e}init(e,t,i,r){super.init(e,t,i,r),this.fixedRowHeight=BN(this.fixedRowHeight),Boe.test(this.fixedRowHeight)}setRowStyles(e,t){e._setStyle("top",this.getTilePosition(this.fixedRowHeight,t)),e._setStyle("height",lc(this.getTileSize(this.fixedRowHeight,e.rowspan)))}getComputedHeight(){return["height",lc(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["height",null]),e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}class Hoe extends zC{constructor(e){super(),this._parseRatio(e)}setRowStyles(e,t,i,r){this.baseTileHeight=this.getBaseTileSize(i/this.rowHeightRatio,r),e._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,t)),e._setStyle("paddingTop",lc(this.getTileSize(this.baseTileHeight,e.rowspan)))}getComputedHeight(){return["paddingBottom",lc(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["paddingBottom",null]),e._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(e){const t=e.split(":");this.rowHeightRatio=parseFloat(t[0])/parseFloat(t[1])}}class zoe extends zC{setRowStyles(e,t){let s=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);e._setStyle("top",this.getTilePosition(s,t)),e._setStyle("height",lc(this.getTileSize(s,e.rowspan)))}reset(e){e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}function lc(n){return`calc(${n})`}function BN(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}let VN=(()=>{class n{constructor(t,i){this._element=t,this._dir=i,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(Ri(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${null==t?"":t}`}get rowHeight(){return this._rowHeight}set rowHeight(t){const i=`${null==t?"":t}`;i!==this._rowHeight&&(this._rowHeight=i,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===t?new zoe:t&&t.indexOf(":")>-1?new Hoe(t):new Voe(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new Loe);const t=this._tileCoordinator,i=this._tiles.filter(s=>!s._gridList||s._gridList===this),r=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,i),this._tileStyler.init(this.gutterSize,t,this.cols,r),i.forEach((s,o)=>{const a=t.positions[o];this._tileStyler.setStyle(s,a.row,a.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}}return n.\u0275fac=function(t){return new(t||n)(b(ke),b(oo,8))},n.\u0275cmp=vt({type:n,selectors:[["mat-grid-list"]],contentQueries:function(t,i,r){if(1&t&&en(r,HC,5),2&t){let s;Xe(s=Qe())&&(i._tiles=s)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(t,i){2&t&&sn("cols",i.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[Ke([{provide:kN,useExisting:n}])],ngContentSelectors:FN,decls:2,vars:0,template:function(t,i){1&t&&(Mi(),P(0,"div"),$t(1),O())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})(),Goe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[c_,Kt],c_,Kt]}),n})(),HN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Kt],Kt]}),n})();function ap(n){return(ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function zN(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Xoe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){Xoe(n,r,t[r])})}return n}function UC(n,e){return function Zoe(n){if(Array.isArray(n))return n}(n)||function Joe(n,e){var t=[],i=!0,r=!1,s=void 0;try{for(var a,o=n[Symbol.iterator]();!(i=(a=o.next()).done)&&(t.push(a.value),!e||t.length!==e);i=!0);}catch(l){r=!0,s=l}finally{try{!i&&null!=o.return&&o.return()}finally{if(r)throw s}}return t}(n,e)||function tae(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var jC={},GN={};try{"undefined"!=typeof window&&(jC=window),"undefined"!=typeof document&&(GN=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&performance}catch(n){}var $N=(jC.navigator||{}).userAgent,qN=void 0===$N?"":$N,Id=jC,ei=GN,Ko=!!ei.documentElement&&!!ei.head&&"function"==typeof ei.addEventListener&&"function"==typeof ei.createElement,Jo=(~qN.indexOf("MSIE")||qN.indexOf("Trident/"),"___FONT_AWESOME___"),ZN="svg-inline--fa",t3=[1,2,3,4,5,6,7,8,9,10],hae=t3.concat([11,12,13,14,15,16,17,18,19,20]),cc={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},n3=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",cc.GROUP,cc.SWAP_OPACITY,cc.PRIMARY,cc.SECONDARY].concat(t3.map(function(n){return"".concat(n,"x")})).concat(hae.map(function(n){return"w-".concat(n)})),Id.FontAwesomeConfig||{});ei&&"function"==typeof ei.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=UC(n,2),i=e[1],r=function gae(n){return""===n||"false"!==n&&("true"===n||n)}(function mae(n){var e=ei.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(n3[i]=r)});var qC=jt({},{familyPrefix:"fa",replacementClass:ZN,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},n3);qC.autoReplaceSvg||(qC.observeMutations=!1);var pt=jt({},qC);Id.FontAwesomeConfig=pt;var ea=Id||{};ea[Jo]||(ea[Jo]={}),ea[Jo].styles||(ea[Jo].styles={}),ea[Jo].hooks||(ea[Jo].hooks={}),ea[Jo].shims||(ea[Jo].shims=[]);var Fs=ea[Jo],i3=[];Ko&&((ei.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ei.readyState)||ei.addEventListener("DOMContentLoaded",function n(){ei.removeEventListener("DOMContentLoaded",n),i3.map(function(e){return e()})}));var XC,YC="pending",r3="settled",z_="fulfilled",U_="rejected",bae=function(){},s3="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,wae="undefined"==typeof setImmediate?setTimeout:setImmediate,lp=[];function Mae(){for(var n=0;n<lp.length;n++)lp[n][0](lp[n][1]);lp=[],XC=!1}function G_(n,e){lp.push([n,e]),XC||(XC=!0,wae(Mae,0))}function o3(n){var e=n.owner,t=e._state,i=e._data,r=n[t],s=n.then;if("function"==typeof r){t=z_;try{i=r(i)}catch(o){cp(s,o)}}a3(s,i)||(t===z_&&QC(s,i),t===U_&&cp(s,i))}function a3(n,e){var t;try{if(n===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===ap(e))){var i=e.then;if("function"==typeof i)return i.call(e,function(r){t||(t=!0,e===r?l3(n,r):QC(n,r))},function(r){t||(t=!0,cp(n,r))}),!0}}catch(r){return t||cp(n,r),!0}return!1}function QC(n,e){(n===e||!a3(n,e))&&l3(n,e)}function l3(n,e){n._state===YC&&(n._state=r3,n._data=e,G_(Sae,n))}function cp(n,e){n._state===YC&&(n._state=r3,n._data=e,G_(Eae,n))}function c3(n){n._then=n._then.forEach(o3)}function Sae(n){n._state=z_,c3(n)}function Eae(n){n._state=U_,c3(n),!n._handled&&s3&&global.process.emit("unhandledRejection",n._data,n)}function Dae(n){global.process.emit("rejectionHandled",n)}function kr(n){if("function"!=typeof n)throw new TypeError("Promise resolver "+n+" is not a function");if(!(this instanceof kr))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function Cae(n,e){function i(r){cp(e,r)}try{n(function t(r){QC(e,r)},i)}catch(r){i(r)}}(n,this)}kr.prototype={constructor:kr,_state:YC,_then:null,_data:void 0,_handled:!1,then:function(e,t){var i={owner:this,then:new this.constructor(bae),fulfilled:e,rejected:t};return(t||e)&&!this._handled&&(this._handled=!0,this._state===U_&&s3&&G_(Dae,this)),this._state===z_||this._state===U_?G_(o3,i):this._then.push(i),i.then},catch:function(e){return this.then(null,e)}},kr.all=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.all().");return new kr(function(e,t){var i=[],r=0;function s(l){return r++,function(c){i[l]=c,--r||e(i)}}for(var a,o=0;o<n.length;o++)(a=n[o])&&"function"==typeof a.then?a.then(s(o),t):i[o]=a;r||e(i)})},kr.race=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.race().");return new kr(function(e,t){for(var r,i=0;i<n.length;i++)(r=n[i])&&"function"==typeof r.then?r.then(e,t):e(r)})},kr.resolve=function(n){return n&&"object"===ap(n)&&n.constructor===kr?n:new kr(function(e){e(n)})},kr.reject=function(n){return new kr(function(e,t){t(n)})};var iS=function(e,t,i,r){var l,c,u,s=Object.keys(e),o=s.length,a=void 0!==r?function(e,t){return function(i,r,s,o){return e.call(t,i,r,s,o)}}(t,r):t;for(void 0===i?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)u=a(u,e[c=s[l]],c,e);return u};function _3(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.skipHooks,r=void 0!==i&&i,s=Object.keys(e).reduce(function(o,a){var l=e[a];return l.icon?o[l.iconName]=l.icon:o[a]=l,o},{});"function"!=typeof Fs.hooks.addPack||r?Fs.styles[n]=jt({},Fs.styles[n]||{},s):Fs.hooks.addPack(n,s),"fas"===n&&_3("fa",e)}var v3=Fs.styles,zae=Fs.shims,M3=function(){var e=function(r){return iS(v3,function(s,o,a){return s[a]=iS(o,r,{}),s},{})};e(function(i,r,s){return r[3]&&(i[r[3]]=s),i}),e(function(i,r,s){var o=r[2];return i[s]=s,o.forEach(function(a){i[a]=s}),i});var t="far"in v3;iS(zae,function(i,r){var o=r[1];return"far"===o&&!t&&(o="fas"),i[r[0]]={prefix:o,iconName:r[2]},i},{})};function hp(n){this.name="MissingIcon",this.message=n||"Icon unavailable",this.stack=(new Error).stack}M3(),(hp.prototype=Object.create(Error.prototype)).constructor=hp;var q_={fill:"currentColor"},R3={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},aS=(jt({},q_,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),jt({},R3,{attributeName:"opacity"}));jt({},q_,{cx:"256",cy:"364",r:"28"}),jt({},R3,{attributeName:"r",values:"28;14;28;28;14;28;"}),jt({},aS,{values:"1;0;1;1;0;1;"}),jt({},q_,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),jt({},aS,{values:"1;0;0;0;0;1;"}),jt({},q_,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),jt({},aS,{values:"0;0;1;1;0;0;"});var gle=function(){function n(){(function qoe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function Yoe(n,e,t){e&&zN(n.prototype,e),t&&zN(n,t)}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=jt({},t.definitions[a]||{},o[a]),_3(a,o[a]),M3()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var o=r[s],a=o.prefix,l=o.iconName,c=o.icon;t[a]||(t[a]={}),t[a][l]=c}),t}}]),n}();new gle;let Ale=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({}),n})();const N3=[{id:"0",name:"Hirohiko Araki \u8352\u6728 \u98db\u5442\u5f66",image:"assets/images/Hirohiko Araki.png",description:"Legendario mangaka creador de la igualmente legendaria serie Jojo\u2019s Bizarre Adventure, que lleva en publicaci\xf3n por 34 a\xf1os por Shueisha, reconocido como uno de los m\xe1s revolucionarios mangas de su \xe9poca y tambi\xe9n de la actualidad, y siendo uno de los pocos mangakas que han colaborado con tanto marcas de moda como Gucci, como con el museo del Louvre.",audios:[{title:"Hirohiko Araki",link:"assets/audios/Hirohiko Araki.mp3"}],audio:"assets/audios/Hirohiko Araki.mp3",video:"assets/videos/Hirohiko Araki.mp4",QRImage:"assets/images/QRHirohiko_Araki.png",QRlink:"https://es.wikipedia.org/wiki/Hirohiko_Araki"},{id:"1",name:"Hideaki Anno \u5eb5\u91ce \u79c0\u660e",image:"assets/images/Hideaki Anno.png",description:"Es un Animador y Director, conocido principalmente por la ic\xf3nica serie Neon Genesis Evangelion, esta ha llegado a ser comparada como la Star wars japonesa por el impacto en la cultura popular que esta ha tenido tras su emisi\xf3n, asi mismo Anno es reconocido afuera de la esfera del anime debido a su pel\xedcula Shin Godzilla a la cual se le fue otorgada el equivalente al Oscar Japon\xe9s.",audios:[{title:"Hideaki Anno",link:"assets/audios/Hideaki Anno.mp3"}],audio:"assets/audios/Hideaki Anno.mp3",video:"assets/videos/Hideaki Anno.mp4",QRImage:"assets/images/QRHideaki_Anno.png",QRlink:"https://es.wikipedia.org/wiki/Hideaki_Anno"},{id:"2",name:"Naomi Osaka \u5927\u5742 \u306a\u304a\u307f",image:"assets/images/Naomi Osaka.png",description:"Hija de un padre haitiano y una madre japonesa, Osaka lleva entrenando casi toda su vida. Es reconocida por ser la primera Jugadora asi\xe1tica en llegar al n\xfamero 1 de la asociaci\xf3n de tenis femenil WTA, es una 4 veces ganadora del Gran Slam individual y la campeona actual del abierto de Australia.",audios:[{title:"Naomi Osaka",link:"assets/audios/Naomi Osaka.mp3"}],audio:"assets/audios/Naomi Osaka.mp3",video:"assets/videos/Naomi Osaka.mp4",QRImage:"assets/images/QRNaomi_Osaka.png",QRlink:"https://es.wikipedia.org/wiki/Naomi_Osaka"}];let fS=(()=>{class n{constructor(){}getActuales(){return N3}getActual(t){return N3.filter(i=>i.id===t)[0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const B3=[{id:"0",name:"Oda Nobunaga \u7e54\u7530 \u4fe1\u9577",image:"assets/images/Nobunaga.png",description:"Uno de los Se\xf1ores Feudales m\xe1s importantes de la historia de Jap\xf3n, considerado como el unificador del mismo, durante esta unificaci\xf3n se desarroll\xf3 innovaciones en t\xe1cticas militares, el comercio libre y se dio inicio al periodo Azuchi-Momoyama.",audios:[{title:"Oda Nobunaga",link:"assets/audios/Nobunaga.mp3"}],audio:"assets/audios/Nobunaga.mp3",video:"assets/videos/Nobunaga.mp4",QRImage:"assets/images/QROda_Nobunaga.png",QRlink:"https://es.wikipedia.org/wiki/Oda_Nobunaga"},{id:"1",name:"Minamoto no Yoshitsune \u6e90 \u7fa9\u7d4c",image:"assets/images/Yoshitsune.png",description:"Uno de los m\xe1s destacados generales y samur\xe1is en la historia del pa\xeds del sol naciente, al haber sido una de las piezas principales en la recuperaci\xf3n militar del clan Minamoto en las Guerras Genpei, tras estos conflictos el clan Minamoto se estableci\xf3 como el clan dominante en el territorio, Yoshitsune muri\xf3 traicionado en las manos de uno de los hijos de sus aliados.",audios:[{title:"Minamoto no Yoshitsune",link:"assets/audios/Yoshitsune.mp3"}],audio:"assets/audios/Yoshitsune.mp3",video:"assets/videos/Yoshitsune.mp4",QRImage:"assets/images/QRMinamoto_no_Yoshitsune.png",QRlink:"https://es.wikipedia.org/wiki/Minamoto_no_Yoshitsune"},{id:"2",name:"Miyamoto Musashi \u5bae\u672c \u6b66\u8535",image:"assets/images/Musashi.png",description:"Musashi fue un fil\xf3sofo, escritor, espadach\xedn y un ronin; conocido principalmente por su uso de dos espadas y el nunca haber sido vencido en un duelo, con un record final de 61-0. Su obra principal fue el libro de los 5 anillos donde este detalla sus experiencias e ideas sobre artes marciales y su vida. Musashi muri\xf3 de lo que se cree fue c\xe1ncer de pulm\xf3n tras haber terminado su \xfaltima obra Dokkodo (El camino de la soledad).",audios:[{title:"Miyamoto Musashi",link:"assets/audios/Musashi.mp3"}],audio:"assets/audios/Musashi.mp3",video:"assets/videos/Musashi.mp4",QRImage:"assets/images/QRMiyamoto_Musashi.png",QRlink:"https://es.wikipedia.org/wiki/Miyamoto_Musashi"}];let pS=(()=>{class n{constructor(){}getHistoricos(){return B3}getHistorico(t){return B3.filter(i=>i.id===t)[0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Tle=function(n){return["/actualDetalle",n]};function Ile(n,e){if(1&n&&(P(0,"mat-grid-tile",6),ae(1,"img",7),P(2,"mat-grid-tile-footer"),P(3,"h1"),Le(4),Eo(5,"uppercase"),O(),O(),O()),2&n){const t=e.$implicit;ie("routerLink",Lh(6,Tle,t.id)),Z(1),qr("src",t.image,pi),qr("alt",t.name),Z(3),In(Do(5,4,t.name))}}let Rle=(()=>{class n{constructor(t){this.actualservice=t}ngOnInit(){this.actuales=this.actualservice.getActuales()}OnSelect(t){this.selectedActual=t}}return n.\u0275fac=function(t){return new(t||n)(b(fS))},n.\u0275cmp=vt({type:n,selectors:[["app-actual"]],decls:9,vars:1,consts:[[1,"parent",2,"width","100%","height","500px"],[1,"text1"],["STYLE","font-family:'Lucida'",2,"color","#7F75FF","font-weight","bold","font-size","26pt","text-align","center"],["src","assets/images/fondo.jpg",1,"image1",2,"float","left","width","100%","height","100%","object-fit","fill"],["cols","2","rowHeight","200px"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],["height","200px",3,"src","alt"]],template:function(t,i){1&t&&(P(0,"div",0),P(1,"div",1),P(2,"span",2),Le(3,"PERSONAJES ACTUALES"),O(),O(),ae(4,"hr"),P(5,"div",0),ae(6,"img",3),P(7,"mat-grid-list",4),Re(8,Ile,6,8,"mat-grid-tile",5),O(),O(),O()),2&t&&(Z(8),ie("ngForOf",i.actuales))},directives:[VN,vu,HC,Jf,LN,NN],pipes:[jh],styles:[".parent[_ngcontent-%COMP%]{position:relative;top:0px;left:0}.image1[_ngcontent-%COMP%]{position:relative;top:0;left:0}.text1[_ngcontent-%COMP%]{position:relative;top:5px;text-align:center}"]}),n})();function Ple(n,e){if(1&n&&ae(0,"img",11),2&n){const t=Be().$implicit;ie("src",t.logo,pi)("alt",t.title)}}function Ole(n,e){if(1&n&&(P(0,"h2",12),Le(1),O()),2&n){const t=Be().$implicit;Z(1),In(t.title)}}const Fle=function(n){return{active:n}};function kle(n,e){if(1&n){const t=zi();P(0,"div",2),ot("click",function(){const s=bi(t).index;return Be().activeSlideIndex=s}),P(1,"div",3),P(2,"div",4),Re(3,Ple,1,2,"img",5),Re(4,Ole,2,1,"h2",6),P(5,"p",7),Le(6),O(),ae(7,"p",7),P(8,"a",8),ae(9,"img",9),O(),ae(10,"div",10),O(),O(),O()}if(2&n){const t=e.$implicit,i=e.index,r=Be();Sr("background-image",r.activeSlideIndex===i?t.backgroundExpanded:t.backgroundCollapsed),ie("ngClass",Lh(9,Fle,r.activeSlideIndex===i)),Z(2),Sr("color",t.textColor),Z(1),ie("ngIf",t.logo),Z(1),ie("ngIf",t.title),Z(2),In(t.description),Z(2),ie("href",t.ctaLink,pi)}}let Lle=(()=>{class n{constructor(){this.activeSlideIndex=0,this.slides=[{textColor:"#000",logo:"",title:"Hirohiko Araki",description:"Legendario mangaka creador de la igualmente legendaria serie Jojo\u2019s Bizarre Adventure, que lleva en publicaci\xf3n por 34 a\xf1os por Shueisha.",backgroundExpanded:"url('assets/images/1A-Expanded.png')",backgroundCollapsed:"url('assets/images/1A-Collapsed.png')",ctaText:"Detalles",ctaLink:"actualDetalle/0"},{textColor:"#000",logo:"",title:"Hideaki Anno",description:"Es un Animador y Director, conocido principalmente por la ic\xf3nica serie Neon Genesis Evangelion, esta ha llegado a ser comparada como la Star wars japonesa por el impacto en la cultura popular que esta ha tenido.",backgroundExpanded:"url('assets/images/2A-Expanded.png')",backgroundCollapsed:"url('assets/images/2A-Collapsed.png')",ctaText:"Detalles",ctaLink:"actualDetalle/1"},{textColor:"#000",logo:"",title:"Naomi Osaka",description:"Hija de un padre haitiano y una madre japonesa. Es reconocida por ser la primera Jugadora asi\xe1tica en llegar al n\xfamero 1 de la asociaci\xf3n de tenis femenil WTA.",backgroundExpanded:"url('assets/images/3A-Expanded.png')",backgroundCollapsed:"url('assets/images/3A-Collapsed.png')",ctaText:"Detalles",ctaLink:"actualDetalle/2"}]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=vt({type:n,selectors:[["app-actualslider"]],decls:2,vars:1,consts:[[1,"slider"],["class","slide",3,"background-image","ngClass","click",4,"ngFor","ngForOf"],[1,"slide",3,"ngClass","click"],[1,"content-wrapper"],[1,"content"],["class","logo",3,"src","alt",4,"ngIf"],["class","title",4,"ngIf"],[1,"description"],[1,"cta",3,"href"],["src","assets/images/Boton Detalles.png",2,"width","100%"],[1,"overlay"],[1,"logo",3,"src","alt"],[1,"title"]],template:function(t,i){1&t&&(P(0,"div",0),Re(1,kle,11,11,"div",1),O()),2&t&&(Z(1),ie("ngForOf",i.slides))},directives:[vu,Dl,GM,Ro],styles:[".slider[_ngcontent-%COMP%]{top:0px;position:relative;width:100%;height:540px;max-width:device-width;padding:0;margin:0;display:flex;flex-direction:row;overflow:hidden}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{width:20%;position:relative;height:inherit;transition:all ease-in-out .5s}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;height:inherit}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-left:43%;padding:35px;width:250px;display:flex;flex-direction:column;justify-content:center}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-width:175px;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;margin:0;font-size:2rem;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:50px;font-weight:500;font-size:1.2rem;display:none;background-color:#ffffffb3;color:#004391}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]{color:#fff;text-decoration:none;display:none;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]:hover{cursor:pointer}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1;opacity:1;transition:opacity ease-in-out .5s}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]:not(.active)   .title[_ngcontent-%COMP%]{position:relative;color:#fff;align-items:left;left:-60px}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]{width:70%}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:block}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{position:inherit}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;font-size:2.6rem}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:block}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]{display:inline-block;z-index:2}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transition:opacity ease-in-out .5s;opacity:0;z-index:-1}"]}),n})(),Nle=(()=>{class n{constructor(t,i,r){this.actualservice=t,this.route=i,this.location=r,this.msaapDisplayTitle=!1,this.msaapDisplayPlayList=!1,this.msaapPageSizeOptions=[2,4,6],this.msaapDisplayVolumeControls=!1,this.msaapDisplayRepeatControls=!1,this.msaapDisplayArtist=!1,this.msaapDisplayDuration=!1,this.msaapDisablePositionSlider=!1,this.currentTrack=null}ngOnInit(){this.actual=this.actualservice.getActual(this.route.snapshot.params.id),this.msaapPlaylist=this.actual.audios}goBack(){this.location.back()}Ended(){console.log("Ingresa")}}return n.\u0275fac=function(t){return new(t||n)(b(fS),b(Za),b(_u))},n.\u0275cmp=vt({type:n,selectors:[["app-actual-detalle"]],decls:24,vars:8,consts:[["fxLayoutAlign","center center",1,"titulo"],["STYLE","font-family:'Lucida'",2,"color","#7F75FF","font-weight","bold","font-size","calc(2vmax + 2px)","text-align","center"],[1,"cards"],[1,"card1"],["id","myVideo","width","85%","loop","","autoplay","",3,"src"],[1,"card2",2,"background-image","url('assets/images/Marco.png')"],[1,"header",2,"color","white","font-weight","bold","font-size","calc(2.3vw + 2px)","text-align","center"],[1,"main",2,"top","1%"],[1,"aside"],[1,"aside","aside-1"],[1,"aside","aside-2"],["target","_blank",3,"href"],["width","8%",3,"src"],[1,"aside","aside-3"],["controls",""],["type","audio/mp3",3,"src"],["src","assets/images/Boton regresar.png","width","22%",3,"click"]],template:function(t,i){1&t&&(P(0,"div",0),P(1,"span",1),Le(2,"PERSONAJES ACTUALES"),O(),O(),P(3,"div",2),P(4,"div",3),ae(5,"video",4),O(),P(6,"div",5),P(7,"header",6),Le(8),Eo(9,"uppercase"),O(),P(10,"article",7),P(11,"p"),Le(12),O(),O(),P(13,"div",8),P(14,"aside",9),Le(15,"Para mayor informaci\xf3n puede visitar el siguiente enlace"),O(),P(16,"aside",10),P(17,"a",11),ae(18,"img",12),O(),O(),O(),P(19,"aside",13),P(20,"audio",14),ae(21,"source",15),Le(22," Your browser does not support the audio tag! "),O(),P(23,"img",16),ot("click",function(){return i.goBack()}),O(),O(),O(),O()),2&t&&(Z(5),qr("src",i.actual.video,pi),Z(3),In(Do(9,6,i.actual.name)),Z(4),In(i.actual.description),Z(5),ie("href",i.actual.QRlink,pi),Z(1),ie("src",i.actual.QRImage,pi),Z(3),qr("src",i.actual.audio,pi))},directives:[Hf],pipes:[jh],styles:[".cards[_ngcontent-%COMP%]{display:flex;text-align:center;height:500px}.card1[_ngcontent-%COMP%]{background-size:cover;background-position:bottom;min-height:250px;width:34.9%;box-shadow:5px 5px 10px #00000054;background-color:#ead6be}.card2[_ngcontent-%COMP%]{background-size:cover;background-position:bottom;width:65%;min-height:250px;flex-flow:row wrap}.header[_ngcontent-%COMP%]{height:10%;background-color:#b02568}.footer[_ngcontent-%COMP%]{background:lightgreen}.main[_ngcontent-%COMP%]{height:55%;align-items:center;min-height:200px;text-align:justify;font-weight:500;font-size:calc(1.5vw + 2px);background-color:#ffffff80;color:#004391;padding:1% 10%}.aside[_ngcontent-%COMP%]{align-content:flex-start}.aside-1[_ngcontent-%COMP%]{background-color:#ffffff80;color:#004391;font-weight:500;font-size:calc(1.1vw + 2px)}.aside-2[_ngcontent-%COMP%]{background-color:#ffffff80}.aside-3[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around;background-color:#ffffff80;padding:0% 1%}audio[_ngcontent-%COMP%]{box-shadow:5px 5px 20px #ffffff80;border-radius:10px;transform:scale(.75)}.titulo[_ngcontent-%COMP%]{display:flex;justify-content:space-between;text-align:center;height:12%;background-color:#ead6be}"]}),n})();const Ble=function(n){return["/historicoDetalle",n]};function Vle(n,e){if(1&n&&(P(0,"mat-grid-tile",6),ae(1,"img",7),P(2,"mat-grid-tile-footer"),P(3,"h1"),Le(4),Eo(5,"uppercase"),O(),O(),O()),2&n){const t=e.$implicit;ie("routerLink",Lh(6,Ble,t.id)),Z(1),qr("src",t.image,pi),qr("alt",t.name),Z(3),In(Do(5,4,t.name))}}let Hle=(()=>{class n{constructor(t){this.historicoservice=t}ngOnInit(){this.historicos=this.historicoservice.getHistoricos()}OnSelect(t){this.SelectedHistorico=t}}return n.\u0275fac=function(t){return new(t||n)(b(pS))},n.\u0275cmp=vt({type:n,selectors:[["app-historico"]],decls:9,vars:1,consts:[[1,"parent",2,"width","100%","height","500px"],[1,"text1"],["STYLE","font-family:'Lucida'",2,"color","#7F75FF","font-weight","bold","font-size","26pt","text-align","center"],["src","assets/images/fondo.jpg",1,"image1",2,"float","left","width","100%","height","100%","object-fit","fill"],["cols","2","rowHeight","200px"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],["height","200px",3,"src","alt"]],template:function(t,i){1&t&&(P(0,"div",0),P(1,"div",1),P(2,"span",2),Le(3,"PERSONAJES HIST\xd3RICOS"),O(),O(),ae(4,"hr"),P(5,"div",0),ae(6,"img",3),P(7,"mat-grid-list",4),Re(8,Vle,6,8,"mat-grid-tile",5),O(),O(),O()),2&t&&(Z(8),ie("ngForOf",i.historicos))},directives:[VN,vu,HC,Jf,LN,NN],pipes:[jh],styles:[".parent[_ngcontent-%COMP%]{position:relative;top:0px;left:0}.image1[_ngcontent-%COMP%]{position:relative;top:0;left:0}.text1[_ngcontent-%COMP%]{position:absolute;top:5px;left:440px}"]}),n})(),zle=(()=>{class n{constructor(t,i,r){this.historicoservice=t,this.route=i,this.location=r,this.msaapDisplayTitle=!1,this.msaapDisplayPlayList=!1,this.msaapPageSizeOptions=[2,4,6],this.msaapDisplayVolumeControls=!1,this.msaapDisplayRepeatControls=!1,this.msaapDisplayArtist=!1,this.msaapDisplayDuration=!1,this.msaapDisablePositionSlider=!0}ngOnInit(){this.historico=this.historicoservice.getHistorico(this.route.snapshot.params.id)}goBack(){this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(b(pS),b(Za),b(_u))},n.\u0275cmp=vt({type:n,selectors:[["app-historico-detalle"]],decls:24,vars:8,consts:[["fxLayoutAlign","center center",1,"titulo"],["STYLE","font-family:'Lucida'",2,"color","#7F75FF","font-weight","bold","font-size","calc(2vmax + 2px)","text-align","center"],[1,"cards"],[1,"card1"],["id","myVideo","width","85%","loop","","autoplay","",3,"src"],[1,"card2",2,"background-image","url('assets/images/Marco2.png')"],[1,"header",2,"color","white","font-weight","bold","font-size","calc(2.3vw + 2px)","text-align","center"],[1,"main",2,"top","1%"],[1,"aside"],[1,"aside","aside-1"],[1,"aside","aside-2"],["target","_blank",3,"href"],["width","8%",3,"src"],[1,"aside","aside-3"],["controls",""],["type","audio/mp3",3,"src"],["src","assets/images/Boton regresar.png","width","22%",3,"click"]],template:function(t,i){1&t&&(P(0,"div",0),P(1,"span",1),Le(2,"PERSONAJES HIST\xd3RICOS"),O(),O(),P(3,"div",2),P(4,"div",3),ae(5,"video",4),O(),P(6,"div",5),P(7,"header",6),Le(8),Eo(9,"uppercase"),O(),P(10,"article",7),P(11,"p"),Le(12),O(),O(),P(13,"div",8),P(14,"aside",9),Le(15,"Para mayor informaci\xf3n puede visitar el siguiente enlace"),O(),P(16,"aside",10),P(17,"a",11),ae(18,"img",12),O(),O(),O(),P(19,"aside",13),P(20,"audio",14),ae(21,"source",15),Le(22," Your browser does not support the audio tag! "),O(),P(23,"img",16),ot("click",function(){return i.goBack()}),O(),O(),O(),O()),2&t&&(Z(5),qr("src",i.historico.video,pi),Z(3),In(Do(9,6,i.historico.name)),Z(4),In(i.historico.description),Z(5),ie("href",i.historico.QRlink,pi),Z(1),ie("src",i.historico.QRImage,pi),Z(3),qr("src",i.historico.audio,pi))},directives:[Hf],pipes:[jh],styles:[".cards[_ngcontent-%COMP%]{display:flex;text-align:center;height:500px}.card1[_ngcontent-%COMP%]{background-size:cover;background-position:bottom;min-height:250px;width:34.9%;box-shadow:5px 5px 10px #00000054;background-color:#ead6be}.card2[_ngcontent-%COMP%]{background-size:cover;background-position:bottom;width:65%;min-height:250px;flex-flow:row wrap}.header[_ngcontent-%COMP%]{height:10%;background-color:#b02568}.footer[_ngcontent-%COMP%]{background:lightgreen}.main[_ngcontent-%COMP%]{height:55%;align-items:center;min-height:200px;text-align:justify;font-weight:500;font-size:calc(1.5vw + 2px);background-color:#ffffff80;color:#004391;padding:1% 10%}.aside[_ngcontent-%COMP%]{align-content:flex-start}.aside-1[_ngcontent-%COMP%]{background-color:#ffffff80;color:#004391;font-weight:500;font-size:calc(1.1vw + 2px)}.aside-2[_ngcontent-%COMP%]{background-color:#ffffff80}.aside-3[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around;background-color:#ffffff80;padding:0% 1%}audio[_ngcontent-%COMP%]{box-shadow:5px 5px 20px #ffffff80;border-radius:10px;transform:scale(.75)}.titulo[_ngcontent-%COMP%]{display:flex;justify-content:space-between;text-align:center;height:12%;background-color:#ead6be}"]}),n})(),Ule=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=vt({type:n,selectors:[["app-home"]],decls:18,vars:0,consts:[[1,"parent",2,"height","470px"],["src","assets/videos/fondo.mp4","muted","","loop","","autoplay","",1,"image1","left=0","margin-left=0",2,"width","100%","height","100%","object-fit","cover"],["src","assets/images/letras.png",1,"image2",2,"top","10%","left","25%","float","center","width","50%","height","50%","object-fit","fill"],["STYLE","left:10%;top: 70%;",1,"parent","boton1"],["rel","noopener","href","historicoslider"],["src","assets/images/BotonHistoricos.png",2,"width","25%"],["STYLE","left:70%;top: 70%;",1,"parent","boton1"],["rel","noopener","href","actualslider"],["src","assets/images/BotonActuales.png",2,"width","70%"],[1,"parent","text1","top=5px",2,"height","70px","background-color","#ead6be"],[1,"text1",2,"margin-left","auto","margin-right","auto","text-align","center","color","black","font-weight","bold","font-size","16pt"],[2,"text-align","center"]],template:function(t,i){1&t&&(P(0,"div",0),ae(1,"video",1),ae(2,"img",2),P(3,"div",3),P(4,"a",4),ae(5,"img",5),O(),O(),P(6,"div",6),P(7,"a",7),ae(8,"img",8),O(),O(),O(),P(9,"div",9),P(10,"div",10),P(11,"p",11),Le(12," Los occidentales conocemos muy poco de la historia de Jap\xf3n y, sin embargo, est\xe1 llena de eventos y personajes coloridos. Entre samur\xe1is, personas y artistas excepcionales, cada uno de los personajes que se presentan han formado parte de la evoluci\xf3n de "),P(13,"strong"),Le(14,"la sociedad o"),O(),Le(15," la"),P(16,"strong"),Le(17,"\xa0cultura\xa0japonesa."),O(),O(),O(),O())},styles:[".parent[_ngcontent-%COMP%]{position:relative;top:0px;left:0;margin:0;padding:0}.image1[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:device-width;background-size:cover}.image2[_ngcontent-%COMP%]{position:absolute;top:0;text-align:center;display:block}.text1[_ngcontent-%COMP%]{position:relative;padding:1px;display:flex;justify-content:center;align-items:center}.boton1[_ngcontent-%COMP%]{position:absolute;border:none;text-align:left;text-decoration:none;display:inline-block}.boton1[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),n})();function Gle(n,e){if(1&n&&ae(0,"img",11),2&n){const t=Be().$implicit;ie("src",t.logo,pi)("alt",t.title)}}function jle(n,e){if(1&n&&(P(0,"h2",12),Le(1),O()),2&n){const t=Be().$implicit;Z(1),In(t.title)}}const Wle=function(n){return{active:n}};function $le(n,e){if(1&n){const t=zi();P(0,"div",2),ot("click",function(){const s=bi(t).index;return Be().activeSlideIndex=s}),P(1,"div",3),P(2,"div",4),Re(3,Gle,1,2,"img",5),Re(4,jle,2,1,"h2",6),P(5,"p",7),Le(6),O(),ae(7,"p",7),P(8,"a",8),ae(9,"img",9),O(),ae(10,"div",10),O(),O(),O()}if(2&n){const t=e.$implicit,i=e.index,r=Be();Sr("background-image",r.activeSlideIndex===i?t.backgroundExpanded:t.backgroundCollapsed),ie("ngClass",Lh(9,Wle,r.activeSlideIndex===i)),Z(2),Sr("color",t.textColor),Z(1),ie("ngIf",t.logo),Z(1),ie("ngIf",t.title),Z(2),In(t.description),Z(2),ie("href",t.ctaLink,pi)}}const qle=[{path:"home",component:Ule},{path:"actual",component:Rle},{path:"actualslider",component:Lle},{path:"actualDetalle/:id",component:Nle},{path:"historico",component:Hle},{path:"historicoDetalle/:id",component:zle},{path:"historicoslider",component:(()=>{class n{constructor(){this.activeSlideIndex=0,this.slides=[{textColor:"#000",logo:"",title:"Oda Nobunaga",description:"Uno de los Se\xf1ores Feudales m\xe1s importantes de la historia de Jap\xf3n, dio inicio al periodo Azuchi-Momoyama.",backgroundExpanded:"url('assets/images/1H-Expanded.png')",backgroundCollapsed:"url('assets/images/1H-Collapsed.png')",ctaText:"Detalles",ctaLink:"historicoDetalle/0"},{textColor:"#000",logo:"",title:"Minamoto no Yoshitsune",description:"Uno de los m\xe1s destacados generales y samur\xe1is en la historia del pa\xeds del sol naciente, fue una de las piezas principales en la recuperaci\xf3n militar del clan Minamoto.",backgroundExpanded:"url('assets/images/2H-Expanded.png')",backgroundCollapsed:"url('assets/images/2H-Collapsed.png')",ctaText:"Detalles",ctaLink:"historicoDetalle/1"},{textColor:"#000",logo:"",title:"Miyamoto Musashi",description:"Musashi fue un fil\xf3sofo, escritor, espadach\xedn y un ronin; conocido principalmente por su uso de dos espadas y el ser nunca haber sido vencido en un duelo.",backgroundExpanded:"url('assets/images/3H-Expanded.png')",backgroundCollapsed:"url('assets/images/3H-Collapsed.png')",ctaText:"Detalles",ctaLink:"historicoDetalle/2"}]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=vt({type:n,selectors:[["app-historicoslider"]],decls:2,vars:1,consts:[[1,"slider"],["class","slide",3,"background-image","ngClass","click",4,"ngFor","ngForOf"],[1,"slide",3,"ngClass","click"],[1,"content-wrapper"],[1,"content"],["class","logo",3,"src","alt",4,"ngIf"],["class","title",4,"ngIf"],[1,"description"],[1,"cta",3,"href"],["src","assets/images/Boton Detalles.png",2,"width","100%"],[1,"overlay"],[1,"logo",3,"src","alt"],[1,"title"]],template:function(t,i){1&t&&(P(0,"div",0),Re(1,$le,11,11,"div",1),O()),2&t&&(Z(1),ie("ngForOf",i.slides))},directives:[vu,Dl,GM,Ro],styles:[".slider[_ngcontent-%COMP%]{top:0px;position:relative;width:100%;height:540px;max-width:device-width;padding:0;margin:0;display:flex;flex-direction:row;overflow:hidden}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{width:20%;position:relative;height:inherit;transition:all ease-in-out .5s}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;height:inherit}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-left:43%;padding:35px;width:250px;display:flex;flex-direction:column;justify-content:center}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-width:175px;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;margin:0;font-size:2rem;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:50px;font-weight:500;font-size:1.2rem;display:none;background-color:#ffffffb3;color:#004391}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]{color:#fff;text-decoration:none;display:none;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]:hover{cursor:pointer}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1;opacity:1;transition:opacity ease-in-out .5s}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]:not(.active)   .title[_ngcontent-%COMP%]{position:relative;color:#fff;align-items:left;left:-80px}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]{width:70%}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:block}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{position:inherit}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;font-size:2.6rem}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:block}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]{display:inline-block;z-index:2}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transition:opacity ease-in-out .5s;opacity:0;z-index:-1}"]}),n})()},{path:"",redirectTo:"/home",pathMatch:"full"}];let Yle=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Er,mC.forRoot(qle)],mC]}),n})();const Qle=["addListener","removeListener"],Zle=["addEventListener","removeEventListener"],Kle=["on","off"];function Q_(n,e,t,i){if(Rt(t)&&(i=t,t=void 0),i)return Q_(n,e,t).pipe(YM(i));const[r,s]=function tce(n){return Rt(n.addEventListener)&&Rt(n.removeEventListener)}(n)?Zle.map(o=>a=>n[o](e,a,t)):function Jle(n){return Rt(n.addListener)&&Rt(n.removeListener)}(n)?Qle.map(V3(n,e)):function ece(n){return Rt(n.on)&&Rt(n.off)}(n)?Kle.map(V3(n,e)):[];if(!r&&bc(n))return Ln(o=>Q_(o,e,t))(Zi(n));if(!r)throw new TypeError("Invalid event target");return new zt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function V3(n,e){return t=>i=>n[t](e,i)}const pp={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=pp;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new bt(()=>null==t?void 0:t(r))},requestAnimationFrame(...n){const{delegate:e}=pp;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=pp;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};new class ice extends DM{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class nce extends EM{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=pp.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(pp.cancelAnimationFrame(t),e._scheduled=void 0)}});let mS,sce=1;const Z_={};function H3(n){return n in Z_&&(delete Z_[n],!0)}const oce={setImmediate(n){const e=sce++;return Z_[e]=!0,mS||(mS=Promise.resolve()),mS.then(()=>H3(e)&&n()),e},clearImmediate(n){H3(n)}},{setImmediate:ace,clearImmediate:lce}=oce,K_={setImmediate(...n){const{delegate:e}=K_;return((null==e?void 0:e.setImmediate)||ace)(...n)},clearImmediate(n){const{delegate:e}=K_;return((null==e?void 0:e.clearImmediate)||lce)(n)},delegate:void 0};new class uce extends DM{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class cce extends EM{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=K_.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(K_.clearImmediate(t),e._scheduled=void 0)}});function z3(n,e=AM){return function hce(n){return xn((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(new rn(t,c=>{i=!0,r=c,s||Zi(n(c)).subscribe(s=new rn(t,a,l))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>function pce(n=0,e,t=ZK){let i=-1;return null!=e&&(Mc(e)?t=e:i=e),new zt(r=>{let s=function fce(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,e))}let U3=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new it,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new zt(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(z3(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):We()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(ui(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=tc(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Q_(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)($(xt),$(Pr),$(ct,8))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J_=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new it,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(z3(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)($(Pr),$(xt),$(ct,8))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ev=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({}),n})(),gS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[_d,xM,ev],_d,ev]}),n})(),Ice=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[gS]]}),n})(),Uce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Ice,Kt],Kt]}),n})();class PS{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class eB extends PS{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class OS extends PS{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Wce extends PS{constructor(e){super(),this.element=e instanceof ke?e.nativeElement:e}}class $ce extends class tB{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof eB?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof OS?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Wce?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let nB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({}),n})();const iB=LK();class Xce{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Jn(-this._previousScrollPosition.left),e.style.top=Jn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),iB&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),iB&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class Qce{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class rB{enable(){}disable(){}attach(){}}function FS(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function sB(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Zce{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();FS(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Kce=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new rB,this.close=o=>new Qce(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Xce(this._viewportRuler,this._document),this.reposition=o=>new Zce(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)($(U3),$(J_),$(xt),$(ct))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class oB{constructor(e){if(this.scrollStrategy=new rB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class Jce{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class eue{constructor(e,t,i,r,s,o,a,l,c){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new it,this._attachments=new it,this._detachments=new it,this._locationChanges=bt.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._keydownEvents=new it,this._outsidePointerEvents=new it,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Gn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Jn(this._config.width),e.height=Jn(this._config.height),e.minWidth=Jn(this._config.minWidth),e.minHeight=Jn(this._config.minHeight),e.maxWidth=Jn(this._config.maxWidth),e.maxHeight=Jn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const i=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",i),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",i)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(e,t,i){const r=t_(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Vt(yr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null))}}let aB=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||wM()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),wM()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)($(ct),$(Pr))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lB="cdk-overlay-connected-position-bounding-box",tue=/([A-Za-z%]+)$/;class nue{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new it,this._resizeSubscription=bt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(lB),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&uc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(lB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=uB(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,0-o,o+s.width-i.width),g=this._subtractOverflows(s.height,h,f),_=p*g;return{visibleArea:_,isCompletelyWithinViewport:s.width*s.height===_,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=cB(this._overlayRef.getConfig().minHeight),a=cB(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=uB(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,d=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Jce(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Jn(i.height),r.top=Jn(i.top),r.bottom=Jn(i.bottom),r.width=Jn(i.width),r.left=Jn(i.left),r.right=Jn(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Jn(s)),o&&(r.maxWidth=Jn(o))}this._lastBoundingBoxSize=i,uc(this._boundingBox.style,r)}_resetBoundingBoxStyles(){uc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){uc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();uc(i,this._getExactOverlayY(t,e,u)),uc(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Jn(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Jn(o.maxWidth):s&&(i.maxWidth="")),uc(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Jn(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Jn(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:sB(e,i),isOriginOutsideView:FS(e,i),isOverlayClipped:sB(t,i),isOverlayOutsideView:FS(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&t_(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ke)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function uc(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function cB(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(tue);return t&&"px"!==t?null:parseFloat(e)}return n||null}function uB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const dB="cdk-global-overlay-wrapper";class iue{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(dB),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(dB),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let rue=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new iue}flexibleConnectedTo(t){return new nue(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)($(J_),$(ct),$(Pr),$(aB))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hB=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)($(ct))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sue=(()=>{class n extends hB{constructor(t){super(t),this._keydownListener=i=>{const r=this._attachedOverlays;for(let s=r.length-1;s>-1;s--)if(r[s]._keydownEvents.observers.length>0){r[s]._keydownEvents.next(i);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)($(ct))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oue=(()=>{class n extends hB{constructor(t,i){super(t),this._platform=i,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=ec(r)},this._clickListener=r=>{const s=ec(r),o="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const a=this._attachedOverlays.slice();for(let l=a.length-1;l>-1;l--){const c=a[l];if(!(c._outsidePointerEvents.observers.length<1)&&c.hasAttached()){if(c.overlayElement.contains(s)||c.overlayElement.contains(o))break;c._outsidePointerEvents.next(r)}}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(t){return new(t||n)($(ct),$(Pr))},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aue=0,Nd=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,h){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new oB(t);return o.direction=o.direction||this._directionality.value,new eue(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+aue++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(gu)),new $ce(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)($(Kce),$(aB),$(Ma),$(rue),$(sue),$(mi),$(xt),$(ct),$(oo),$(_u),$(oue))},n.\u0275prov=he({token:n,factory:n.\u0275fac}),n})();const uue={provide:new ye("cdk-connected-overlay-scroll-strategy"),deps:[Nd],useFactory:function cue(n){return()=>n.scrollStrategies.reposition()}};let gB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({providers:[Nd,uue],imports:[[_d,nB,gS],gS]}),n})(),bB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Er,Kt,lk],Kt]}),n})();const Que={provide:new ye("mat-select-scroll-strategy"),deps:[Nd],useFactory:function Yue(n){return()=>n.scrollStrategies.reposition()}};let nde=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({providers:[Que],imports:[[Er,gB,Ok,Kt],ev,bB,Ok,Kt]}),n})();const hde={provide:new ye("mat-tooltip-scroll-strategy"),deps:[Nd],useFactory:function dde(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let vde=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({providers:[hde],imports:[[vJ,Er,gB,Kt],Kt,ev]}),n})(),dv=(()=>{class n{constructor(){this.changes=new it,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const s=t*i;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+i,r):s+i} of ${r}`}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Dde={provide:dv,deps:[[new pr,new xa,dv]],useFactory:function Ede(n){return n||new dv}};let Pde=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({providers:[Dde],imports:[[Er,qM,nde,vde,Kt]]}),n})(),Ude=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Er,Kt],Kt]}),n})(),qde=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({}),n})(),ohe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Er,Kt,qde,nB]]}),n})(),The=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Kt],Kt]}),n})(),cfe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n}),n.\u0275inj=Ye({imports:[[Er,yoe,qM,HN,Uce,bB,Ude,ohe,Pde,The]]}),n})(),ufe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ze({type:n,bootstrap:[gse]}),n.\u0275inj=Ye({providers:[fS,pS],imports:[[mC,iR,IK,HJ,Poe,qne,Goe,HN,qM,Yle,Ale,cfe,eZ]]}),n})();(function Y6(){fI=!1})(),dW().bootstrapModule(ufe).catch(n=>console.error(n))},386:(lr,Fi,Yi)=>{var Rt;!function(hi,pc,zd,bt){"use strict";var ur,Ud=["","webkit","Moz","MS","ms","o"],wp=pc.createElement("div"),cr=Math.round,Lr=Math.abs,mc=Date.now;function yo(w,C,k){return setTimeout(rl(w,k),C)}function sa(w,C,k){return!!Array.isArray(w)&&(os(w,k[C],k),!0)}function os(w,C,k){var G;if(w)if(w.forEach)w.forEach(C,k);else if(w.length!==bt)for(G=0;G<w.length;)C.call(k,w[G],G,w),G++;else for(G in w)w.hasOwnProperty(G)&&C.call(k,w[G],G,w)}function Cp(w,C,k){var G="DEPRECATED METHOD: "+C+"\n"+k+" AT \n";return function(){var de=new Error("get-stack-trace"),Oe=de&&de.stack?de.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Tt=hi.console&&(hi.console.warn||hi.console.log);return Tt&&Tt.call(hi.console,G,Oe),w.apply(this,arguments)}}ur="function"!=typeof Object.assign?function(C){if(C===bt||null===C)throw new TypeError("Cannot convert undefined or null to object");for(var k=Object(C),G=1;G<arguments.length;G++){var de=arguments[G];if(de!==bt&&null!==de)for(var Oe in de)de.hasOwnProperty(Oe)&&(k[Oe]=de[Oe])}return k}:Object.assign;var Ns=Cp(function(C,k,G){for(var de=Object.keys(k),Oe=0;Oe<de.length;)(!G||G&&C[de[Oe]]===bt)&&(C[de[Oe]]=k[de[Oe]]),Oe++;return C},"extend","Use `assign`."),gc=Cp(function(C,k){return Ns(C,k,!0)},"merge","Use `assign`.");function Xi(w,C,k){var de,G=C.prototype;(de=w.prototype=Object.create(G)).constructor=w,de._super=G,k&&ur(de,k)}function rl(w,C){return function(){return w.apply(C,arguments)}}function oa(w,C){return"function"==typeof w?w.apply(C&&C[0]||bt,C):w}function yc(w,C){return w===bt?C:w}function sl(w,C,k){os(gr(C),function(G){w.addEventListener(G,k,!1)})}function aa(w,C,k){os(gr(C),function(G){w.removeEventListener(G,k,!1)})}function Sp(w,C){for(;w;){if(w==C)return!0;w=w.parentNode}return!1}function as(w,C){return w.indexOf(C)>-1}function gr(w){return w.trim().split(/\s+/g)}function ol(w,C,k){if(w.indexOf&&!k)return w.indexOf(C);for(var G=0;G<w.length;){if(k&&w[G][k]==C||!k&&w[G]===C)return G;G++}return-1}function al(w){return Array.prototype.slice.call(w,0)}function zt(w,C,k){for(var G=[],de=[],Oe=0;Oe<w.length;){var Tt=C?w[Oe][C]:w[Oe];ol(de,Tt)<0&&G.push(w[Oe]),de[Oe]=Tt,Oe++}return k&&(G=C?G.sort(function(Jt,wt){return Jt[C]>wt[C]}):G.sort()),G}function ll(w,C){for(var k,G,de=C[0].toUpperCase()+C.slice(1),Oe=0;Oe<Ud.length;){if((G=(k=Ud[Oe])?k+de:C)in w)return G;Oe++}return bt}var yv=1;function Ep(w){var C=w.ownerDocument||w;return C.defaultView||C.parentWindow||hi}var Gd="ontouchstart"in hi,Dp=ll(hi,"PointerEvent")!==bt,xn=Gd&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),rn="touch",cl="mouse",xv=["x","y"],Br=["clientX","clientY"];function dr(w,C){var k=this;this.manager=w,this.callback=C,this.element=w.element,this.target=w.options.inputTarget,this.domHandler=function(G){oa(w.options.enable,[w])&&k.handler(G)},this.init()}function bv(w,C,k){var G=k.pointers.length,de=k.changedPointers.length,Oe=1&C&&G-de==0,Tt=12&C&&G-de==0;k.isFirst=!!Oe,k.isFinal=!!Tt,Oe&&(w.session={}),k.eventType=C,function jS(w,C){var k=w.session,G=C.pointers,de=G.length;k.firstInput||(k.firstInput=Mv(C)),de>1&&!k.firstMultiple?k.firstMultiple=Mv(C):1===de&&(k.firstMultiple=!1);var Oe=k.firstInput,Tt=k.firstMultiple,ni=Tt?Tt.center:Oe.center,Jt=C.center=Cv(G);C.timeStamp=mc(),C.deltaTime=C.timeStamp-Oe.timeStamp,C.angle=wc(ni,Jt),C.distance=ul(ni,Jt),function wv(w,C){var k=C.center,G=w.offsetDelta||{},de=w.prevDelta||{},Oe=w.prevInput||{};(1===C.eventType||4===Oe.eventType)&&(de=w.prevDelta={x:Oe.deltaX||0,y:Oe.deltaY||0},G=w.offsetDelta={x:k.x,y:k.y}),C.deltaX=de.x+(k.x-G.x),C.deltaY=de.y+(k.y-G.y)}(k,C),C.offsetDirection=bc(C.deltaX,C.deltaY);var wt=Sv(C.deltaTime,C.deltaX,C.deltaY);C.overallVelocityX=wt.x,C.overallVelocityY=wt.y,C.overallVelocity=Lr(wt.x)>Lr(wt.y)?wt.x:wt.y,C.scale=Tt?function Ip(w,C){return ul(C[0],C[1],Br)/ul(w[0],w[1],Br)}(Tt.pointers,G):1,C.rotation=Tt?function Tp(w,C){return wc(C[1],C[0],Br)+wc(w[1],w[0],Br)}(Tt.pointers,G):0,C.maxPointers=k.prevInput?C.pointers.length>k.prevInput.maxPointers?C.pointers.length:k.prevInput.maxPointers:C.pointers.length,function WS(w,C){var de,Oe,Tt,ni,k=w.lastInterval||C,G=C.timeStamp-k.timeStamp;if(8!=C.eventType&&(G>25||k.velocity===bt)){var Jt=C.deltaX-k.deltaX,wt=C.deltaY-k.deltaY,ds=Sv(G,Jt,wt);Oe=ds.x,Tt=ds.y,de=Lr(ds.x)>Lr(ds.y)?ds.x:ds.y,ni=bc(Jt,wt),w.lastInterval=C}else de=k.velocity,Oe=k.velocityX,Tt=k.velocityY,ni=k.direction;C.velocity=de,C.velocityX=Oe,C.velocityY=Tt,C.direction=ni}(k,C);var ds=w.element;Sp(C.srcEvent.target,ds)&&(ds=C.srcEvent.target),C.target=ds}(w,k),w.emit("hammer.input",k),w.recognize(k),w.session.prevInput=k}function Mv(w){for(var C=[],k=0;k<w.pointers.length;)C[k]={clientX:cr(w.pointers[k].clientX),clientY:cr(w.pointers[k].clientY)},k++;return{timeStamp:mc(),pointers:C,center:Cv(C),deltaX:w.deltaX,deltaY:w.deltaY}}function Cv(w){var C=w.length;if(1===C)return{x:cr(w[0].clientX),y:cr(w[0].clientY)};for(var k=0,G=0,de=0;de<C;)k+=w[de].clientX,G+=w[de].clientY,de++;return{x:cr(k/C),y:cr(G/C)}}function Sv(w,C,k){return{x:C/w||0,y:k/w||0}}function bc(w,C){return w===C?1:Lr(w)>=Lr(C)?w<0?2:4:C<0?8:16}function ul(w,C,k){k||(k=xv);var G=C[k[0]]-w[k[0]],de=C[k[1]]-w[k[1]];return Math.sqrt(G*G+de*de)}function wc(w,C,k){return k||(k=xv),180*Math.atan2(C[k[1]]-w[k[1]],C[k[0]]-w[k[0]])/Math.PI}dr.prototype={handler:function(){},init:function(){this.evEl&&sl(this.element,this.evEl,this.domHandler),this.evTarget&&sl(this.target,this.evTarget,this.domHandler),this.evWin&&sl(Ep(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&aa(this.element,this.evEl,this.domHandler),this.evTarget&&aa(this.target,this.evTarget,this.domHandler),this.evWin&&aa(Ep(this.element),this.evWin,this.domHandler)}};var Ev={mousedown:1,mousemove:2,mouseup:4},Rp="mousedown",Pp="mousemove mouseup";function dl(){this.evEl=Rp,this.evWin=Pp,this.pressed=!1,dr.apply(this,arguments)}Xi(dl,dr,{handler:function(C){var k=Ev[C.type];1&k&&0===C.button&&(this.pressed=!0),2&k&&1!==C.which&&(k=4),this.pressed&&(4&k&&(this.pressed=!1),this.callback(this.manager,k,{pointers:[C],changedPointers:[C],pointerType:cl,srcEvent:C}))}});var Op={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Zi={2:rn,3:"pen",4:cl,5:"kinect"},Fp="pointerdown",kp="pointermove pointerup pointercancel";function jd(){this.evEl=Fp,this.evWin=kp,dr.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}hi.MSPointerEvent&&!hi.PointerEvent&&(Fp="MSPointerDown",kp="MSPointerMove MSPointerUp MSPointerCancel"),Xi(jd,dr,{handler:function(C){var k=this.store,G=!1,de=C.type.toLowerCase().replace("ms",""),Oe=Op[de],Tt=Zi[C.pointerType]||C.pointerType,ni=Tt==rn,Jt=ol(k,C.pointerId,"pointerId");1&Oe&&(0===C.button||ni)?Jt<0&&(k.push(C),Jt=k.length-1):12&Oe&&(G=!0),!(Jt<0)&&(k[Jt]=C,this.callback(this.manager,Oe,{pointers:k,changedPointers:[C],pointerType:Tt,srcEvent:C}),G&&k.splice(Jt,1))}});var Dv={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Lp="touchstart",Av="touchstart touchmove touchend touchcancel";function Np(){this.evTarget=Lp,this.evWin=Av,this.started=!1,dr.apply(this,arguments)}function ls(w,C){var k=al(w.touches),G=al(w.changedTouches);return 12&C&&(k=zt(k.concat(G),"identifier",!0)),[k,G]}Xi(Np,dr,{handler:function(C){var k=Dv[C.type];if(1===k&&(this.started=!0),this.started){var G=ls.call(this,C,k);12&k&&G[0].length-G[1].length==0&&(this.started=!1),this.callback(this.manager,k,{pointers:G[0],changedPointers:G[1],pointerType:rn,srcEvent:C})}}});var Tv={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ln="touchstart touchmove touchend touchcancel";function Bs(){this.evTarget=Ln,this.targetIds={},dr.apply(this,arguments)}function Vr(w,C){var k=al(w.touches),G=this.targetIds;if(3&C&&1===k.length)return G[k[0].identifier]=!0,[k,k];var de,Oe,Tt=al(w.changedTouches),ni=[],Jt=this.target;if(Oe=k.filter(function(wt){return Sp(wt.target,Jt)}),1===C)for(de=0;de<Oe.length;)G[Oe[de].identifier]=!0,de++;for(de=0;de<Tt.length;)G[Tt[de].identifier]&&ni.push(Tt[de]),12&C&&delete G[Tt[de].identifier],de++;return ni.length?[zt(Oe.concat(ni),"identifier",!0),ni]:void 0}function Mc(){dr.apply(this,arguments);var w=rl(this.handler,this);this.touch=new Bs(this.manager,w),this.mouse=new dl(this.manager,w),this.primaryTouch=null,this.lastTouches=[]}function Wd(w,C){1&w?(this.primaryTouch=C.changedPointers[0].identifier,$d.call(this,C)):12&w&&$d.call(this,C)}function $d(w){var C=w.changedPointers[0];if(C.identifier===this.primaryTouch){var k={x:C.clientX,y:C.clientY};this.lastTouches.push(k);var G=this.lastTouches;setTimeout(function(){var Oe=G.indexOf(k);Oe>-1&&G.splice(Oe,1)},2500)}}function hl(w){for(var C=w.srcEvent.clientX,k=w.srcEvent.clientY,G=0;G<this.lastTouches.length;G++){var de=this.lastTouches[G],Oe=Math.abs(C-de.x),Tt=Math.abs(k-de.y);if(Oe<=25&&Tt<=25)return!0}return!1}Xi(Bs,dr,{handler:function(C){var k=Tv[C.type],G=Vr.call(this,C,k);!G||this.callback(this.manager,k,{pointers:G[0],changedPointers:G[1],pointerType:rn,srcEvent:C})}}),Xi(Mc,dr,{handler:function(C,k,G){var Oe=G.pointerType==cl;if(!(Oe&&G.sourceCapabilities&&G.sourceCapabilities.firesTouchEvents)){if(G.pointerType==rn)Wd.call(this,k,G);else if(Oe&&hl.call(this,G))return;this.callback(C,k,G)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Vp=ll(wp.style,"touchAction"),qd=Vp!==bt,Yd="compute",Xd="manipulation",_o="none",fl="pan-x",ha="pan-y",Cc=function yr(){if(!qd)return!1;var w={},C=hi.CSS&&hi.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(k){w[k]=!C||hi.CSS.supports("touch-action",k)}),w}();function Qd(w,C){this.manager=w,this.set(C)}function cs(w){this.options=ur({},this.defaults,w||{}),this.id=function _v(){return yv++}(),this.manager=null,this.options.enable=yc(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Qt(w){return 16&w?"cancel":8&w?"end":4&w?"move":2&w?"start":""}function at(w){return 16==w?"down":8==w?"up":2==w?"left":4==w?"right":""}function pl(w,C){var k=C.manager;return k?k.get(w):w}function Hr(){cs.apply(this,arguments)}function At(){Hr.apply(this,arguments),this.pX=null,this.pY=null}function ml(){Hr.apply(this,arguments)}function tt(){cs.apply(this,arguments),this._timer=null,this._input=null}function ti(){Hr.apply(this,arguments)}function Zd(){Hr.apply(this,arguments)}function Kd(){cs.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function fa(w,C){return(C=C||{}).recognizers=yc(C.recognizers,fa.defaults.preset),new zp(w,C)}function zp(w,C){this.options=ur({},fa.defaults,C||{}),this.options.inputTarget=this.options.inputTarget||w,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=w,this.input=function GS(w){return new(w.options.inputClass||(Dp?jd:xn?Bs:Gd?Mc:dl))(w,bv)}(this),this.touchAction=new Qd(this,this.options.touchAction),Up(this,!0),os(this.options.recognizers,function(k){var G=this.add(new k[0](k[1]));k[2]&&G.recognizeWith(k[2]),k[3]&&G.requireFailure(k[3])},this)}function Up(w,C){var G,k=w.element;k.style&&(os(w.options.cssProps,function(de,Oe){G=ll(k.style,Oe),C?(w.oldCssProps[G]=k.style[G],k.style[G]=de):k.style[G]=w.oldCssProps[G]||""}),C||(w.oldCssProps={}))}Qd.prototype={set:function(w){w==Yd&&(w=this.compute()),qd&&this.manager.element.style&&Cc[w]&&(this.manager.element.style[Vp]=w),this.actions=w.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var w=[];return os(this.manager.recognizers,function(C){oa(C.options.enable,[C])&&(w=w.concat(C.getTouchAction()))}),function Nn(w){if(as(w,_o))return _o;var C=as(w,fl),k=as(w,ha);return C&&k?_o:C||k?C?fl:ha:as(w,Xd)?Xd:"auto"}(w.join(" "))},preventDefaults:function(w){var C=w.srcEvent,k=w.offsetDirection;if(!this.manager.session.prevented){var G=this.actions,de=as(G,_o)&&!Cc[_o],Oe=as(G,ha)&&!Cc[ha],Tt=as(G,fl)&&!Cc[fl];if(de&&1===w.pointers.length&&w.distance<2&&w.deltaTime<250)return;return Tt&&Oe||!(de||Oe&&6&k||Tt&&24&k)?void 0:this.preventSrc(C)}C.preventDefault()},preventSrc:function(w){this.manager.session.prevented=!0,w.preventDefault()}},cs.prototype={defaults:{},set:function(w){return ur(this.options,w),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(w){if(sa(w,"recognizeWith",this))return this;var C=this.simultaneous;return C[(w=pl(w,this)).id]||(C[w.id]=w,w.recognizeWith(this)),this},dropRecognizeWith:function(w){return sa(w,"dropRecognizeWith",this)||(w=pl(w,this),delete this.simultaneous[w.id]),this},requireFailure:function(w){if(sa(w,"requireFailure",this))return this;var C=this.requireFail;return-1===ol(C,w=pl(w,this))&&(C.push(w),w.requireFailure(this)),this},dropRequireFailure:function(w){if(sa(w,"dropRequireFailure",this))return this;w=pl(w,this);var C=ol(this.requireFail,w);return C>-1&&this.requireFail.splice(C,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(w){return!!this.simultaneous[w.id]},emit:function(w){var C=this,k=this.state;function G(de){C.manager.emit(de,w)}k<8&&G(C.options.event+Qt(k)),G(C.options.event),w.additionalEvent&&G(w.additionalEvent),k>=8&&G(C.options.event+Qt(k))},tryEmit:function(w){if(this.canEmit())return this.emit(w);this.state=32},canEmit:function(){for(var w=0;w<this.requireFail.length;){if(!(33&this.requireFail[w].state))return!1;w++}return!0},recognize:function(w){var C=ur({},w);if(!oa(this.options.enable,[this,C]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(C),30&this.state&&this.tryEmit(C)},process:function(w){},getTouchAction:function(){},reset:function(){}},Xi(Hr,cs,{defaults:{pointers:1},attrTest:function(w){var C=this.options.pointers;return 0===C||w.pointers.length===C},process:function(w){var C=this.state,k=w.eventType,G=6&C,de=this.attrTest(w);return G&&(8&k||!de)?16|C:G||de?4&k?8|C:2&C?4|C:2:32}}),Xi(At,Hr,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var w=this.options.direction,C=[];return 6&w&&C.push(ha),24&w&&C.push(fl),C},directionTest:function(w){var C=this.options,k=!0,G=w.distance,de=w.direction,Oe=w.deltaX,Tt=w.deltaY;return de&C.direction||(6&C.direction?(de=0===Oe?1:Oe<0?2:4,k=Oe!=this.pX,G=Math.abs(w.deltaX)):(de=0===Tt?1:Tt<0?8:16,k=Tt!=this.pY,G=Math.abs(w.deltaY))),w.direction=de,k&&G>C.threshold&&de&C.direction},attrTest:function(w){return Hr.prototype.attrTest.call(this,w)&&(2&this.state||!(2&this.state)&&this.directionTest(w))},emit:function(w){this.pX=w.deltaX,this.pY=w.deltaY;var C=at(w.direction);C&&(w.additionalEvent=this.options.event+C),this._super.emit.call(this,w)}}),Xi(ml,Hr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[_o]},attrTest:function(w){return this._super.attrTest.call(this,w)&&(Math.abs(w.scale-1)>this.options.threshold||2&this.state)},emit:function(w){1!==w.scale&&(w.additionalEvent=this.options.event+(w.scale<1?"in":"out")),this._super.emit.call(this,w)}}),Xi(tt,cs,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(w){var C=this.options,k=w.pointers.length===C.pointers,G=w.distance<C.threshold,de=w.deltaTime>C.time;if(this._input=w,!G||!k||12&w.eventType&&!de)this.reset();else if(1&w.eventType)this.reset(),this._timer=yo(function(){this.state=8,this.tryEmit()},C.time,this);else if(4&w.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(w){8===this.state&&(w&&4&w.eventType?this.manager.emit(this.options.event+"up",w):(this._input.timeStamp=mc(),this.manager.emit(this.options.event,this._input)))}}),Xi(ti,Hr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[_o]},attrTest:function(w){return this._super.attrTest.call(this,w)&&(Math.abs(w.rotation)>this.options.threshold||2&this.state)}}),Xi(Zd,Hr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return At.prototype.getTouchAction.call(this)},attrTest:function(w){var k,C=this.options.direction;return 30&C?k=w.overallVelocity:6&C?k=w.overallVelocityX:24&C&&(k=w.overallVelocityY),this._super.attrTest.call(this,w)&&C&w.offsetDirection&&w.distance>this.options.threshold&&w.maxPointers==this.options.pointers&&Lr(k)>this.options.velocity&&4&w.eventType},emit:function(w){var C=at(w.offsetDirection);C&&this.manager.emit(this.options.event+C,w),this.manager.emit(this.options.event,w)}}),Xi(Kd,cs,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Xd]},process:function(w){var C=this.options,k=w.pointers.length===C.pointers,G=w.distance<C.threshold,de=w.deltaTime<C.time;if(this.reset(),1&w.eventType&&0===this.count)return this.failTimeout();if(G&&de&&k){if(4!=w.eventType)return this.failTimeout();var Oe=!this.pTime||w.timeStamp-this.pTime<C.interval,Tt=!this.pCenter||ul(this.pCenter,w.center)<C.posThreshold;if(this.pTime=w.timeStamp,this.pCenter=w.center,Tt&&Oe?this.count+=1:this.count=1,this._input=w,0==this.count%C.taps)return this.hasRequireFailures()?(this._timer=yo(function(){this.state=8,this.tryEmit()},C.interval,this),2):8}return 32},failTimeout:function(){return this._timer=yo(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),fa.VERSION="2.0.7",fa.defaults={domEvents:!1,touchAction:Yd,enable:!0,inputTarget:null,inputClass:null,preset:[[ti,{enable:!1}],[ml,{enable:!1},["rotate"]],[Zd,{direction:6}],[At,{direction:6},["swipe"]],[Kd],[Kd,{event:"doubletap",taps:2},["tap"]],[tt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},zp.prototype={set:function(w){return ur(this.options,w),w.touchAction&&this.touchAction.update(),w.inputTarget&&(this.input.destroy(),this.input.target=w.inputTarget,this.input.init()),this},stop:function(w){this.session.stopped=w?2:1},recognize:function(w){var C=this.session;if(!C.stopped){this.touchAction.preventDefaults(w);var k,G=this.recognizers,de=C.curRecognizer;(!de||de&&8&de.state)&&(de=C.curRecognizer=null);for(var Oe=0;Oe<G.length;)k=G[Oe],2===C.stopped||de&&k!=de&&!k.canRecognizeWith(de)?k.reset():k.recognize(w),!de&&14&k.state&&(de=C.curRecognizer=k),Oe++}},get:function(w){if(w instanceof cs)return w;for(var C=this.recognizers,k=0;k<C.length;k++)if(C[k].options.event==w)return C[k];return null},add:function(w){if(sa(w,"add",this))return this;var C=this.get(w.options.event);return C&&this.remove(C),this.recognizers.push(w),w.manager=this,this.touchAction.update(),w},remove:function(w){if(sa(w,"remove",this))return this;if(w=this.get(w)){var C=this.recognizers,k=ol(C,w);-1!==k&&(C.splice(k,1),this.touchAction.update())}return this},on:function(w,C){if(w!==bt&&C!==bt){var k=this.handlers;return os(gr(w),function(G){k[G]=k[G]||[],k[G].push(C)}),this}},off:function(w,C){if(w!==bt){var k=this.handlers;return os(gr(w),function(G){C?k[G]&&k[G].splice(ol(k[G],C),1):delete k[G]}),this}},emit:function(w,C){this.options.domEvents&&function qS(w,C){var k=pc.createEvent("Event");k.initEvent(w,!0,!0),k.gesture=C,C.target.dispatchEvent(k)}(w,C);var k=this.handlers[w]&&this.handlers[w].slice();if(k&&k.length){C.type=w,C.preventDefault=function(){C.srcEvent.preventDefault()};for(var G=0;G<k.length;)k[G](C),G++}},destroy:function(){this.element&&Up(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ur(fa,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:zp,Input:dr,TouchAction:Qd,TouchInput:Bs,MouseInput:dl,PointerEventInput:jd,TouchMouseInput:Mc,SingleTouchInput:Np,Recognizer:cs,AttrRecognizer:Hr,Tap:Kd,Pan:At,Swipe:Zd,Pinch:ml,Rotate:ti,Press:tt,on:sl,off:aa,each:os,merge:gc,extend:Ns,assign:ur,inherit:Xi,bindFn:rl,prefixed:ll}),(void 0!==hi?hi:"undefined"!=typeof self?self:{}).Hammer=fa,(Rt=function(){return fa}.call(Fi,Yi,Fi,lr))!==bt&&(lr.exports=Rt)}(window,document)}},lr=>{lr(lr.s=117)}]);