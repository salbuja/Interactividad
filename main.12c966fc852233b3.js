var rve=Object.defineProperty,sve=Object.defineProperties,ove=Object.getOwnPropertyDescriptors,Oz=Object.getOwnPropertySymbols,ave=Object.prototype.hasOwnProperty,lve=Object.prototype.propertyIsEnumerable,Lz=(Vi,mi,rr)=>mi in Vi?rve(Vi,mi,{enumerable:!0,configurable:!0,writable:!0,value:rr}):Vi[mi]=rr,_e=(Vi,mi)=>{for(var rr in mi||(mi={}))ave.call(mi,rr)&&Lz(Vi,rr,mi[rr]);if(Oz)for(var rr of Oz(mi))lve.call(mi,rr)&&Lz(Vi,rr,mi[rr]);return Vi},pi=(Vi,mi)=>sve(Vi,ove(mi));(self.webpackChunkDemoInteractividad=self.webpackChunkDemoInteractividad||[]).push([[179],{575:(Vi,mi,rr)=>{var gs;!function(gi,yr,vl,jn){"use strict";var qr,Ao=["","webkit","Moz","MS","ms","o"],vh=yr.createElement("div"),ys=Math.round,gt=Math.abs,Xc=Date.now;function Ma(C,E,F){return setTimeout(bm(C,F),E)}function xl(C,E,F){return!!Array.isArray(C)&&(kt(C,F[E],F),!0)}function kt(C,E,F){var G;if(C)if(C.forEach)C.forEach(E,F);else if(C.length!==jn)for(G=0;G<C.length;)E.call(F,C[G],G,C),G++;else for(G in C)C.hasOwnProperty(G)&&E.call(F,C[G],G,C)}function xh(C,E,F){var G="DEPRECATED METHOD: "+E+"\n"+F+" AT \n";return function(){var de=new Error("get-stack-trace"),Fe=de&&de.stack?de.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ke=gi.console&&(gi.console.warn||gi.console.log);return ke&&ke.call(gi.console,G,Fe),C.apply(this,arguments)}}qr="function"!=typeof Object.assign?function(E){if(E===jn||null===E)throw new TypeError("Cannot convert undefined or null to object");for(var F=Object(E),G=1;G<arguments.length;G++){var de=arguments[G];if(de!==jn&&null!==de)for(var Fe in de)de.hasOwnProperty(Fe)&&(F[Fe]=de[Fe])}return F}:Object.assign;var xm=xh(function(E,F,G){for(var de=Object.keys(F),Fe=0;Fe<de.length;)(!G||G&&E[de[Fe]]===jn)&&(E[de[Fe]]=F[de[Fe]]),Fe++;return E},"extend","Use `assign`."),bl=xh(function(E,F){return xm(E,F,!0)},"merge","Use `assign`.");function yi(C,E,F){var de,G=E.prototype;(de=C.prototype=Object.create(G)).constructor=C,de._super=G,F&&qr(de,F)}function bm(C,E){return function(){return C.apply(E,arguments)}}function Qc(C,E){return"function"==typeof C?C.apply(E&&E[0]||jn,E):C}function It(C,E){return C===jn?E:C}function wl(C,E,F){kt(Cl(E),function(G){C.addEventListener(G,F,!1)})}function bh(C,E,F){kt(Cl(E),function(G){C.removeEventListener(G,F,!1)})}function To(C,E){for(;C;){if(C==E)return!0;C=C.parentNode}return!1}function Io(C,E){return C.indexOf(E)>-1}function Cl(C){return C.trim().split(/\s+/g)}function tt(C,E,F){if(C.indexOf&&!F)return C.indexOf(E);for(var G=0;G<C.length;){if(F&&C[G][F]==E||!F&&C[G]===E)return G;G++}return-1}function Ml(C){return Array.prototype.slice.call(C,0)}function Ro(C,E,F){for(var G=[],de=[],Fe=0;Fe<C.length;){var ke=E?C[Fe][E]:C[Fe];tt(de,ke)<0&&G.push(C[Fe]),de[Fe]=ke,Fe++}return F&&(G=E?G.sort(function(_i,In){return _i[E]>In[E]}):G.sort()),G}function st(C,E){for(var F,G,de=E[0].toUpperCase()+E.slice(1),Fe=0;Fe<Ao.length;){if((G=(F=Ao[Fe])?F+de:E)in C)return G;Fe++}return jn}var xx=1;function wh(C){var E=C.ownerDocument||C;return E.defaultView||E.parentWindow||gi}var wm="ontouchstart"in gi,Kc=st(gi,"PointerEvent")!==jn,S1=wm&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),El="touch",Zc="mouse",Ea=["x","y"],Tn=["clientX","clientY"];function _r(C,E){var F=this;this.manager=C,this.callback=E,this.element=C.element,this.target=C.options.inputTarget,this.domHandler=function(G){Qc(C.options.enable,[C])&&F.handler(G)},this.init()}function D1(C,E,F){var G=F.pointers.length,de=F.changedPointers.length,Fe=1&E&&G-de==0,ke=12&E&&G-de==0;F.isFirst=!!Fe,F.isFinal=!!ke,Fe&&(C.session={}),F.eventType=E,function(C,E){var F=C.session,G=E.pointers,de=G.length;F.firstInput||(F.firstInput=eu(E)),de>1&&!F.firstMultiple?F.firstMultiple=eu(E):1===de&&(F.firstMultiple=!1);var Fe=F.firstInput,ke=F.firstMultiple,oi=ke?ke.center:Fe.center,_i=E.center=Mm(G);E.timeStamp=Xc(),E.deltaTime=E.timeStamp-Fe.timeStamp,E.angle=Sh(oi,_i),E.distance=tu(oi,_i),function(C,E){var F=E.center,G=C.offsetDelta||{},de=C.prevDelta||{},Fe=C.prevInput||{};(1===E.eventType||4===Fe.eventType)&&(de=C.prevDelta={x:Fe.deltaX||0,y:Fe.deltaY||0},G=C.offsetDelta={x:F.x,y:F.y}),E.deltaX=de.x+(F.x-G.x),E.deltaY=de.y+(F.y-G.y)}(F,E),E.offsetDirection=Eh(E.deltaX,E.deltaY);var In=Em(E.deltaTime,E.deltaX,E.deltaY);E.overallVelocityX=In.x,E.overallVelocityY=In.y,E.overallVelocity=gt(In.x)>gt(In.y)?In.x:In.y,E.scale=ke?function(C,E){return tu(E[0],E[1],Tn)/tu(C[0],C[1],Tn)}(ke.pointers,G):1,E.rotation=ke?function(C,E){return Sh(E[1],E[0],Tn)+Sh(C[1],C[0],Tn)}(ke.pointers,G):0,E.maxPointers=F.prevInput?E.pointers.length>F.prevInput.maxPointers?E.pointers.length:F.prevInput.maxPointers:E.pointers.length,function(C,E){var de,Fe,ke,oi,F=C.lastInterval||E,G=E.timeStamp-F.timeStamp;if(8!=E.eventType&&(G>25||F.velocity===jn)){var _i=E.deltaX-F.deltaX,In=E.deltaY-F.deltaY,Rt=Em(G,_i,In);Fe=Rt.x,ke=Rt.y,de=gt(Rt.x)>gt(Rt.y)?Rt.x:Rt.y,oi=Eh(_i,In),C.lastInterval=E}else de=F.velocity,Fe=F.velocityX,ke=F.velocityY,oi=F.direction;E.velocity=de,E.velocityX=Fe,E.velocityY=ke,E.direction=oi}(F,E);var Rt=C.element;To(E.srcEvent.target,Rt)&&(Rt=E.srcEvent.target),E.target=Rt}(C,F),C.emit("hammer.input",F),C.recognize(F),C.session.prevInput=F}function eu(C){for(var E=[],F=0;F<C.pointers.length;)E[F]={clientX:ys(C.pointers[F].clientX),clientY:ys(C.pointers[F].clientY)},F++;return{timeStamp:Xc(),pointers:E,center:Mm(E),deltaX:C.deltaX,deltaY:C.deltaY}}function Mm(C){var E=C.length;if(1===E)return{x:ys(C[0].clientX),y:ys(C[0].clientY)};for(var F=0,G=0,de=0;de<E;)F+=C[de].clientX,G+=C[de].clientY,de++;return{x:ys(F/E),y:ys(G/E)}}function Em(C,E,F){return{x:E/C||0,y:F/C||0}}function Eh(C,E){return C===E?1:gt(C)>=gt(E)?C<0?2:4:E<0?8:16}function tu(C,E,F){F||(F=Ea);var G=E[F[0]]-C[F[0]],de=E[F[1]]-C[F[1]];return Math.sqrt(G*G+de*de)}function Sh(C,E,F){return F||(F=Ea),180*Math.atan2(E[F[1]]-C[F[1]],E[F[0]]-C[F[0]])/Math.PI}_r.prototype={handler:function(){},init:function(){this.evEl&&wl(this.element,this.evEl,this.domHandler),this.evTarget&&wl(this.target,this.evTarget,this.domHandler),this.evWin&&wl(wh(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&bh(this.element,this.evEl,this.domHandler),this.evTarget&&bh(this.target,this.evTarget,this.domHandler),this.evWin&&bh(wh(this.element),this.evWin,this.domHandler)}};var Dx={mousedown:1,mousemove:2,mouseup:4},Ax="mousedown",Tx="mousemove mouseup";function Tl(){this.evEl=Ax,this.evWin=Tx,this.pressed=!1,_r.apply(this,arguments)}yi(Tl,_r,{handler:function(E){var F=Dx[E.type];1&F&&0===E.button&&(this.pressed=!0),2&F&&1!==E.which&&(F=4),this.pressed&&(4&F&&(this.pressed=!1),this.callback(this.manager,F,{pointers:[E],changedPointers:[E],pointerType:Zc,srcEvent:E}))}});var Qt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Dh={2:El,3:"pen",4:Zc,5:"kinect"},Mt="pointerdown",nu="pointermove pointerup pointercancel";function Ah(){this.evEl=Mt,this.evWin=nu,_r.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}gi.MSPointerEvent&&!gi.PointerEvent&&(Mt="MSPointerDown",nu="MSPointerMove MSPointerUp MSPointerCancel"),yi(Ah,_r,{handler:function(E){var F=this.store,G=!1,de=E.type.toLowerCase().replace("ms",""),Fe=Qt[de],ke=Dh[E.pointerType]||E.pointerType,oi=ke==El,_i=tt(F,E.pointerId,"pointerId");1&Fe&&(0===E.button||oi)?_i<0&&(F.push(E),_i=F.length-1):12&Fe&&(G=!0),!(_i<0)&&(F[_i]=E,this.callback(this.manager,Fe,{pointers:F,changedPointers:[E],pointerType:ke,srcEvent:E}),G&&F.splice(_i,1))}});var Kt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},qe="touchstart",Sm="touchstart touchmove touchend touchcancel";function Ix(){this.evTarget=qe,this.evWin=Sm,this.started=!1,_r.apply(this,arguments)}function Fo(C,E){var F=Ml(C.touches),G=Ml(C.changedTouches);return 12&E&&(F=Ro(F.concat(G),"identifier",!0)),[F,G]}yi(Ix,_r,{handler:function(E){var F=Kt[E.type];if(1===F&&(this.started=!0),this.started){var G=Fo.call(this,E,F);12&F&&G[0].length-G[1].length==0&&(this.started=!1),this.callback(this.manager,F,{pointers:G[0],changedPointers:G[1],pointerType:El,srcEvent:E})}}});var T1={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Th="touchstart touchmove touchend touchcancel";function at(){this.evTarget=Th,this.targetIds={},_r.apply(this,arguments)}function Ii(C,E){var F=Ml(C.touches),G=this.targetIds;if(3&E&&1===F.length)return G[F[0].identifier]=!0,[F,F];var de,Fe,ke=Ml(C.changedTouches),oi=[],_i=this.target;if(Fe=F.filter(function(In){return To(In.target,_i)}),1===E)for(de=0;de<Fe.length;)G[Fe[de].identifier]=!0,de++;for(de=0;de<ke.length;)G[ke[de].identifier]&&oi.push(ke[de]),12&E&&delete G[ke[de].identifier],de++;return oi.length?[Ro(Fe.concat(oi),"identifier",!0),oi]:void 0}function Dm(){_r.apply(this,arguments);var C=bm(this.handler,this);this.touch=new at(this.manager,C),this.mouse=new Tl(this.manager,C),this.primaryTouch=null,this.lastTouches=[]}function iu(C,E){1&C?(this.primaryTouch=E.changedPointers[0].identifier,zi.call(this,E)):12&C&&zi.call(this,E)}function zi(C){var E=C.changedPointers[0];if(E.identifier===this.primaryTouch){var F={x:E.clientX,y:E.clientY};this.lastTouches.push(F);var G=this.lastTouches;setTimeout(function(){var Fe=G.indexOf(F);Fe>-1&&G.splice(Fe,1)},2500)}}function I1(C){for(var E=C.srcEvent.clientX,F=C.srcEvent.clientY,G=0;G<this.lastTouches.length;G++){var de=this.lastTouches[G],Fe=Math.abs(E-de.x),ke=Math.abs(F-de.y);if(Fe<=25&&ke<=25)return!0}return!1}yi(at,_r,{handler:function(E){var F=T1[E.type],G=Ii.call(this,E,F);!G||this.callback(this.manager,F,{pointers:G[0],changedPointers:G[1],pointerType:El,srcEvent:E})}}),yi(Dm,_r,{handler:function(E,F,G){var Fe=G.pointerType==Zc;if(!(Fe&&G.sourceCapabilities&&G.sourceCapabilities.firesTouchEvents)){if(G.pointerType==El)iu.call(this,F,G);else if(Fe&&I1.call(this,G))return;this.callback(E,F,G)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Am=st(vh.style,"touchAction"),Fx=Am!==jn,Yr="compute",Tm="manipulation",Sa="none",ru="pan-x",Il="pan-y",Ih=function(){if(!Fx)return!1;var C={},E=gi.CSS&&gi.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(F){C[F]=!E||gi.CSS.supports("touch-action",F)}),C}();function Rh(C,E){this.manager=C,this.set(E)}function si(C){this.options=qr({},this.defaults,C||{}),this.id=xx++,this.manager=null,this.options.enable=It(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ph(C){return 16&C?"cancel":8&C?"end":4&C?"move":2&C?"start":""}function Im(C){return 16==C?"down":8==C?"up":2==C?"left":4==C?"right":""}function ou(C,E){var F=E.manager;return F?F.get(C):C}function vr(){si.apply(this,arguments)}function Oo(){vr.apply(this,arguments),this.pX=null,this.pY=null}function Pl(){vr.apply(this,arguments)}function au(){si.apply(this,arguments),this._timer=null,this._input=null}function Fh(){vr.apply(this,arguments)}function Ye(){vr.apply(this,arguments)}function Da(){si.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Lo(C,E){return(E=E||{}).recognizers=It(E.recognizers,Lo.defaults.preset),new Rm(C,E)}function Rm(C,E){this.options=qr({},Lo.defaults,E||{}),this.options.inputTarget=this.options.inputTarget||C,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=C,this.input=function(C){return new(C.options.inputClass||(Kc?Ah:S1?at:wm?Dm:Tl))(C,D1)}(this),this.touchAction=new Rh(this,this.options.touchAction),xs(this,!0),kt(this.options.recognizers,function(F){var G=this.add(new F[0](F[1]));F[2]&&G.recognizeWith(F[2]),F[3]&&G.requireFailure(F[3])},this)}function xs(C,E){var G,F=C.element;F.style&&(kt(C.options.cssProps,function(de,Fe){G=st(F.style,Fe),E?(C.oldCssProps[G]=F.style[G],F.style[G]=de):F.style[G]=C.oldCssProps[G]||""}),E||(C.oldCssProps={}))}Rh.prototype={set:function(C){C==Yr&&(C=this.compute()),Fx&&this.manager.element.style&&Ih[C]&&(this.manager.element.style[Am]=C),this.actions=C.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var C=[];return kt(this.manager.recognizers,function(E){Qc(E.options.enable,[E])&&(C=C.concat(E.getTouchAction()))}),function(C){if(Io(C,Sa))return Sa;var E=Io(C,ru),F=Io(C,Il);return E&&F?Sa:E||F?E?ru:Il:Io(C,Tm)?Tm:"auto"}(C.join(" "))},preventDefaults:function(C){var E=C.srcEvent,F=C.offsetDirection;if(!this.manager.session.prevented){var G=this.actions,de=Io(G,Sa)&&!Ih[Sa],Fe=Io(G,Il)&&!Ih[Il],ke=Io(G,ru)&&!Ih[ru];if(de&&1===C.pointers.length&&C.distance<2&&C.deltaTime<250)return;return ke&&Fe||!(de||Fe&&6&F||ke&&24&F)?void 0:this.preventSrc(E)}E.preventDefault()},preventSrc:function(C){this.manager.session.prevented=!0,C.preventDefault()}},si.prototype={defaults:{},set:function(C){return qr(this.options,C),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(C){if(xl(C,"recognizeWith",this))return this;var E=this.simultaneous;return E[(C=ou(C,this)).id]||(E[C.id]=C,C.recognizeWith(this)),this},dropRecognizeWith:function(C){return xl(C,"dropRecognizeWith",this)||(C=ou(C,this),delete this.simultaneous[C.id]),this},requireFailure:function(C){if(xl(C,"requireFailure",this))return this;var E=this.requireFail;return-1===tt(E,C=ou(C,this))&&(E.push(C),C.requireFailure(this)),this},dropRequireFailure:function(C){if(xl(C,"dropRequireFailure",this))return this;C=ou(C,this);var E=tt(this.requireFail,C);return E>-1&&this.requireFail.splice(E,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(C){return!!this.simultaneous[C.id]},emit:function(C){var E=this,F=this.state;function G(de){E.manager.emit(de,C)}F<8&&G(E.options.event+Ph(F)),G(E.options.event),C.additionalEvent&&G(C.additionalEvent),F>=8&&G(E.options.event+Ph(F))},tryEmit:function(C){if(this.canEmit())return this.emit(C);this.state=32},canEmit:function(){for(var C=0;C<this.requireFail.length;){if(!(33&this.requireFail[C].state))return!1;C++}return!0},recognize:function(C){var E=qr({},C);if(!Qc(this.options.enable,[this,E]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(E),30&this.state&&this.tryEmit(E)},process:function(C){},getTouchAction:function(){},reset:function(){}},yi(vr,si,{defaults:{pointers:1},attrTest:function(C){var E=this.options.pointers;return 0===E||C.pointers.length===E},process:function(C){var E=this.state,F=C.eventType,G=6&E,de=this.attrTest(C);return G&&(8&F||!de)?16|E:G||de?4&F?8|E:2&E?4|E:2:32}}),yi(Oo,vr,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var C=this.options.direction,E=[];return 6&C&&E.push(Il),24&C&&E.push(ru),E},directionTest:function(C){var E=this.options,F=!0,G=C.distance,de=C.direction,Fe=C.deltaX,ke=C.deltaY;return de&E.direction||(6&E.direction?(de=0===Fe?1:Fe<0?2:4,F=Fe!=this.pX,G=Math.abs(C.deltaX)):(de=0===ke?1:ke<0?8:16,F=ke!=this.pY,G=Math.abs(C.deltaY))),C.direction=de,F&&G>E.threshold&&de&E.direction},attrTest:function(C){return vr.prototype.attrTest.call(this,C)&&(2&this.state||!(2&this.state)&&this.directionTest(C))},emit:function(C){this.pX=C.deltaX,this.pY=C.deltaY;var E=Im(C.direction);E&&(C.additionalEvent=this.options.event+E),this._super.emit.call(this,C)}}),yi(Pl,vr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Sa]},attrTest:function(C){return this._super.attrTest.call(this,C)&&(Math.abs(C.scale-1)>this.options.threshold||2&this.state)},emit:function(C){1!==C.scale&&(C.additionalEvent=this.options.event+(C.scale<1?"in":"out")),this._super.emit.call(this,C)}}),yi(au,si,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(C){var E=this.options,F=C.pointers.length===E.pointers,G=C.distance<E.threshold,de=C.deltaTime>E.time;if(this._input=C,!G||!F||12&C.eventType&&!de)this.reset();else if(1&C.eventType)this.reset(),this._timer=Ma(function(){this.state=8,this.tryEmit()},E.time,this);else if(4&C.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(C){8===this.state&&(C&&4&C.eventType?this.manager.emit(this.options.event+"up",C):(this._input.timeStamp=Xc(),this.manager.emit(this.options.event,this._input)))}}),yi(Fh,vr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Sa]},attrTest:function(C){return this._super.attrTest.call(this,C)&&(Math.abs(C.rotation)>this.options.threshold||2&this.state)}}),yi(Ye,vr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Oo.prototype.getTouchAction.call(this)},attrTest:function(C){var F,E=this.options.direction;return 30&E?F=C.overallVelocity:6&E?F=C.overallVelocityX:24&E&&(F=C.overallVelocityY),this._super.attrTest.call(this,C)&&E&C.offsetDirection&&C.distance>this.options.threshold&&C.maxPointers==this.options.pointers&&gt(F)>this.options.velocity&&4&C.eventType},emit:function(C){var E=Im(C.offsetDirection);E&&this.manager.emit(this.options.event+E,C),this.manager.emit(this.options.event,C)}}),yi(Da,si,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Tm]},process:function(C){var E=this.options,F=C.pointers.length===E.pointers,G=C.distance<E.threshold,de=C.deltaTime<E.time;if(this.reset(),1&C.eventType&&0===this.count)return this.failTimeout();if(G&&de&&F){if(4!=C.eventType)return this.failTimeout();var Fe=!this.pTime||C.timeStamp-this.pTime<E.interval,ke=!this.pCenter||tu(this.pCenter,C.center)<E.posThreshold;if(this.pTime=C.timeStamp,this.pCenter=C.center,ke&&Fe?this.count+=1:this.count=1,this._input=C,0==this.count%E.taps)return this.hasRequireFailures()?(this._timer=Ma(function(){this.state=8,this.tryEmit()},E.interval,this),2):8}return 32},failTimeout:function(){return this._timer=Ma(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Lo.VERSION="2.0.7",Lo.defaults={domEvents:!1,touchAction:Yr,enable:!0,inputTarget:null,inputClass:null,preset:[[Fh,{enable:!1}],[Pl,{enable:!1},["rotate"]],[Ye,{direction:6}],[Oo,{direction:6},["swipe"]],[Da],[Da,{event:"doubletap",taps:2},["tap"]],[au]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Rm.prototype={set:function(C){return qr(this.options,C),C.touchAction&&this.touchAction.update(),C.inputTarget&&(this.input.destroy(),this.input.target=C.inputTarget,this.input.init()),this},stop:function(C){this.session.stopped=C?2:1},recognize:function(C){var E=this.session;if(!E.stopped){this.touchAction.preventDefaults(C);var F,G=this.recognizers,de=E.curRecognizer;(!de||de&&8&de.state)&&(de=E.curRecognizer=null);for(var Fe=0;Fe<G.length;)F=G[Fe],2===E.stopped||de&&F!=de&&!F.canRecognizeWith(de)?F.reset():F.recognize(C),!de&&14&F.state&&(de=E.curRecognizer=F),Fe++}},get:function(C){if(C instanceof si)return C;for(var E=this.recognizers,F=0;F<E.length;F++)if(E[F].options.event==C)return E[F];return null},add:function(C){if(xl(C,"add",this))return this;var E=this.get(C.options.event);return E&&this.remove(E),this.recognizers.push(C),C.manager=this,this.touchAction.update(),C},remove:function(C){if(xl(C,"remove",this))return this;if(C=this.get(C)){var E=this.recognizers,F=tt(E,C);-1!==F&&(E.splice(F,1),this.touchAction.update())}return this},on:function(C,E){if(C!==jn&&E!==jn){var F=this.handlers;return kt(Cl(C),function(G){F[G]=F[G]||[],F[G].push(E)}),this}},off:function(C,E){if(C!==jn){var F=this.handlers;return kt(Cl(C),function(G){E?F[G]&&F[G].splice(tt(F[G],E),1):delete F[G]}),this}},emit:function(C,E){this.options.domEvents&&function(C,E){var F=yr.createEvent("Event");F.initEvent(C,!0,!0),F.gesture=E,E.target.dispatchEvent(F)}(C,E);var F=this.handlers[C]&&this.handlers[C].slice();if(F&&F.length){E.type=C,E.preventDefault=function(){E.srcEvent.preventDefault()};for(var G=0;G<F.length;)F[G](E),G++}},destroy:function(){this.element&&xs(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},qr(Lo,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Rm,Input:_r,TouchAction:Rh,TouchInput:at,MouseInput:Tl,PointerEventInput:Ah,TouchMouseInput:Dm,SingleTouchInput:Ix,Recognizer:si,AttrRecognizer:vr,Tap:Da,Pan:Oo,Swipe:Ye,Pinch:Pl,Rotate:Fh,Press:au,on:wl,off:bh,each:kt,merge:bl,extend:xm,assign:qr,inherit:yi,bindFn:bm,prefixed:st}),(void 0!==gi?gi:"undefined"!=typeof self?self:{}).Hammer=Lo,(gs=function(){return Lo}.call(mi,rr,mi,Vi))!==jn&&(Vi.exports=gs)}(window,document)},159:(Vi,mi,rr)=>{"use strict";function gs(n){return"function"==typeof n}let gi=!1;const yr={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else gi&&console.log("RxJS: Back to a better error behavior. Thank you. <3");gi=n},get useDeprecatedSynchronousErrorHandling(){return gi}};function vl(n){setTimeout(()=>{throw n},0)}const jn={closed:!0,next(n){},error(n){if(yr.useDeprecatedSynchronousErrorHandling)throw n;vl(n)},complete(){}},Ao=Array.isArray||(n=>n&&"number"==typeof n.length);function vh(n){return null!==n&&"object"==typeof n}const ys=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class gt{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof gt)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(gs(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof ys?Xc(o.errors):[o]}}if(Ao(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(vh(l))try{l.unsubscribe()}catch(c){e=e||[],c instanceof ys?e=e.concat(Xc(c.errors)):e.push(c)}}}if(e)throw new ys(e)}add(e){let t=e;if(!e)return gt.EMPTY;switch(typeof e){case"function":t=new gt(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof gt)){const s=t;t=new gt,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof gt){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function Xc(n){return n.reduce((e,t)=>e.concat(t instanceof ys?t.errors:t),[])}gt.EMPTY=((n=new gt).closed=!0,n);const Ma="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class kt extends gt{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=jn;break;case 1:if(!e){this.destination=jn;break}if("object"==typeof e){e instanceof kt?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new xh(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new xh(this,e,t,i)}}[Ma](){return this}static create(e,t,i){const r=new kt(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class xh extends kt{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;gs(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==jn&&(o=Object.create(t),gs(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;yr.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=yr;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):vl(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;vl(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);yr.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),yr.useDeprecatedSynchronousErrorHandling)throw i;vl(i)}}__tryOrSetError(e,t,i){if(!yr.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return yr.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(vl(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const bl="function"==typeof Symbol&&Symbol.observable||"@@observable";function yi(n){return n}let It=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function(n,e,t){if(n){if(n instanceof kt)return n;if(n[Ma])return n[Ma]()}return n||e||t?new kt(n,e,t):new kt(jn)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||yr.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),yr.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){yr.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof kt?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=wl(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[bl](){return this}pipe(...t){return 0===t.length?this:function(n){return 0===n.length?yi:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=wl(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function wl(n){if(n||(n=yr.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const To=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class Io extends gt{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class Cl extends kt{constructor(e){super(e),this.destination=e}}let tt=(()=>{class n extends It{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Ma](){return new Cl(this)}lift(t){const i=new Ml(this,this);return i.operator=t,i}next(t){if(this.closed)throw new To;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new To;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new To;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new To;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new To;return this.hasError?(t.error(this.thrownError),gt.EMPTY):this.isStopped?(t.complete(),gt.EMPTY):(this.observers.push(t),new Io(this,t))}asObservable(){const t=new It;return t.source=this,t}}return n.create=(e,t)=>new Ml(e,t),n})();class Ml extends tt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):gt.EMPTY}}function Ro(n){return n&&"function"==typeof n.schedule}function st(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new xx(n,e))}}class xx{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new bx(e,this.project,this.thisArg))}}class bx extends kt{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const wh=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},Kc="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Zc=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Cm(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Ch=n=>{if(n&&"function"==typeof n[bl])return(n=>e=>{const t=n[bl]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Zc(n))return wh(n);if(Cm(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,vl),e))(n);if(n&&"function"==typeof n[Kc])return(n=>e=>{const t=n[Kc]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${vh(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function _n(n,e){return new It(t=>{const i=new gt;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function Cn(n,e){return e?function(n,e){if(null!=n){if(function(n){return n&&"function"==typeof n[bl]}(n))return function(n,e){return new It(t=>{const i=new gt;return i.add(e.schedule(()=>{const r=n[bl]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(Cm(n))return function(n,e){return new It(t=>{const i=new gt;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(Zc(n))return _n(n,e);if(function(n){return n&&"function"==typeof n[Kc]}(n)||"string"==typeof n)return function(n,e){if(!n)throw new Error("Iterable cannot be null");return new It(t=>{const i=new gt;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[Kc](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof It?n:new It(Ch(n))}class _s extends kt{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Sr extends kt{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Ea(n,e){if(e.closed)return;if(n instanceof It)return n.subscribe(e);let t;try{t=Ch(n)(e)}catch(i){e.error(i)}return t}function Tn(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(Tn((r,s)=>Cn(n(r,s)).pipe(st((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new _r(n,t)))}class _r{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new Ex(e,this.project,this.concurrent))}}class Ex extends Sr{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new _s(this),i=this.destination;i.add(t);const r=Ea(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Al(n=Number.POSITIVE_INFINITY){return Tn(yi,n)}function Mh(n,e){return e?_n(n,e):new It(wh(n))}function Dr(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return Ro(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof It?n[0]:Al(e)(Mh(n,t))}function eu(){return function(e){return e.lift(new Mm(e))}}class Mm{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new Em(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class Em extends kt{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Eh extends It{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new gt,e.add(this.source.subscribe(new Sh(this.getSubject(),this))),e.closed&&(this._connection=null,e=gt.EMPTY)),e}refCount(){return eu()(this)}}const tu=(()=>{const n=Eh.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class Sh extends Cl{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function Tx(){return new tt}function Qt(n){for(let e in n)if(n[e]===Qt)return e;throw Error("Could not find renamed property on target object.")}function Dh(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Mt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Mt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function nu(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Ah=Qt({__forward_ref__:Qt});function Kt(n){return n.__forward_ref__=Kt,n.toString=function(){return Mt(this())},n}function qe(n){return Sm(n)?n():n}function Sm(n){return"function"==typeof n&&n.hasOwnProperty(Ah)&&n.__forward_ref__===Kt}class Fo extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function at(n){return"string"==typeof n?n:null==n?"":String(n)}function Ii(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():at(n)}function iu(n,e){const t=e?` in ${e}`:"";throw new Fo("201",`No provider for ${Ii(n)} found${t}`)}function sr(n,e){null==n&&function(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function se(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Oe(n){return{providers:n.providers||[],imports:n.imports||[]}}function si(n){return Ph(n,Oo)||Ph(n,au)}function Ph(n,e){return n.hasOwnProperty(e)?n[e]:null}function vr(n){return n&&(n.hasOwnProperty(Pl)||n.hasOwnProperty(Fh))?n[Pl]:null}const Oo=Qt({\u0275prov:Qt}),Pl=Qt({\u0275inj:Qt}),au=Qt({ngInjectableDef:Qt}),Fh=Qt({ngInjectorDef:Qt});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let Da;function Xs(n){const e=Da;return Da=n,e}function kh(n,e,t){const i=si(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Ye.Optional?null:void 0!==e?e:void iu(Mt(n),"Injector")}function xs(n){return{toString:n}.toString()}var xr=(()=>((xr=xr||{})[xr.OnPush=0]="OnPush",xr[xr.Default=1]="Default",xr))(),E=(()=>(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(E||(E={})),E))();const F="undefined"!=typeof globalThis&&globalThis,G="undefined"!=typeof window&&window,de="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ke=F||"undefined"!=typeof global&&global||G||de,In={},Rt=[],Pm=Qt({\u0275cmp:Qt}),Ox=Qt({\u0275dir:Qt}),Lx=Qt({\u0275pipe:Qt}),F1=Qt({\u0275mod:Qt}),No=Qt({\u0275fac:Qt}),Oh=Qt({__NG_ELEMENT_ID__:Qt});let Nz=0;function ft(n){return xs(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===xr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Rt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||E.Emulated,id:"c",styles:n.styles||Rt,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=Nz++,i.inputs=N1(n.inputs,t),i.outputs=N1(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(k1):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(O1):null,i})}function k1(n){return Ui(n)||function(n){return n[Ox]||null}(n)}function O1(n){return function(n){return n[Lx]||null}(n)}const L1={};function nt(n){return xs(()=>{const e={type:n.type,bootstrap:n.bootstrap||Rt,declarations:n.declarations||Rt,imports:n.imports||Rt,exports:n.exports||Rt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(L1[n.id]=n.type),e})}function N1(n,e){if(null==n)return In;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const j=ft;function or(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ui(n){return n[Pm]||null}function Xr(n,e){const t=n[F1]||null;if(!t&&!0===e)throw new Error(`Type ${Mt(n)} does not have '\u0275mod' property.`);return t}function Qs(n){return Array.isArray(n)&&"object"==typeof n[1]}function ws(n){return Array.isArray(n)&&!0===n[1]}function Vx(n){return 0!=(8&n.flags)}function Lm(n){return 2==(2&n.flags)}function Nm(n){return 1==(1&n.flags)}function Cs(n){return null!==n.template}function Gz(n){return 0!=(512&n[2])}function Nl(n,e){return n.hasOwnProperty(No)?n[No]:null}class V1{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function un(){return H1}function H1(n){return n.type.prototype.ngOnChanges&&(n.setInput=qz),$z}function $z(){const n=U1(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===In)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function qz(n,e,t,i){const r=U1(n)||function(n,e){return n[z1]=e}(n,{previous:In,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new V1(l&&l.currentValue,e,o===In),n[i]=e}un.ngInherit=!0;const z1="__ngSimpleChanges__";function U1(n){return n[z1]||null}let Ux;function Rn(n){return!!n.listen}const j1={createRenderer:(n,e)=>void 0!==Ux?Ux:"undefined"!=typeof document?document:void 0};function $n(n){for(;Array.isArray(n);)n=n[0];return n}function Bm(n,e){return $n(e[n])}function Zr(n,e){return $n(e[n.index])}function Wx(n,e){return n.data[e]}function Ir(n,e){const t=e[n];return Qs(t)?t:t[0]}function $1(n){return 4==(4&n[2])}function jx(n){return 128==(128&n[2])}function Ta(n,e){return null==e?null:n[e]}function q1(n){n[18]=0}function $x(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const yt={lFrame:tD(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Y1(){return yt.bindingsEnabled}function ce(){return yt.lFrame.lView}function Wt(){return yt.lFrame.tView}function ai(n){return yt.lFrame.contextLView=n,n[8]}function li(){let n=X1();for(;null!==n&&64===n.type;)n=n.parent;return n}function X1(){return yt.lFrame.currentTNode}function Ks(n,e){const t=yt.lFrame;t.currentTNode=n,t.isParent=e}function qx(){return yt.lFrame.isParent}function Yx(){yt.lFrame.isParent=!1}function Vm(){return yt.isInCheckNoChangesMode}function Hm(n){yt.isInCheckNoChangesMode=n}function ar(){const n=yt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function fu(){return yt.lFrame.bindingIndex++}function l4(n,e){const t=yt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Xx(e)}function Xx(n){yt.lFrame.currentDirectiveIndex=n}function Z1(){return yt.lFrame.currentQueryIndex}function Kx(n){yt.lFrame.currentQueryIndex=n}function u4(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function J1(n,e,t){if(t&Ye.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Ye.Host||(r=u4(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=yt.lFrame=eD();return i.currentTNode=e,i.lView=n,!0}function zm(n){const e=eD(),t=n[1];yt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function eD(){const n=yt.lFrame,e=null===n?null:n.child;return null===e?tD(n):e}function tD(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function nD(){const n=yt.lFrame;return yt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const iD=nD;function Um(){const n=nD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function lr(){return yt.lFrame.selectedIndex}function Ia(n){yt.lFrame.selectedIndex=n}function Pn(){const n=yt.lFrame;return Wx(n.tView,n.selectedIndex)}function Wm(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function jm(n,e,t){rD(n,e,3,t)}function $m(n,e,t,i){(3&n[2])===t&&rD(n,e,t,i)}function Zx(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function rD(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(y4(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function y4(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Hh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function qm(n,e,t){const i=Rn(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];e0(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function sD(n){return 3===n||4===n||6===n}function e0(n){return 64===n.charCodeAt(0)}function Ym(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||oD(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function oD(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function aD(n){return-1!==n}function pu(n){return 32767&n}function mu(n,e){let t=function(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let t0=!0;function Xm(n){const e=t0;return t0=n,e}let C4=0;function Uh(n,e){const t=r0(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,n0(i.data,n),n0(e,null),n0(i.blueprint,null));const r=Qm(n,e),s=n.injectorIndex;if(aD(r)){const o=pu(r),a=mu(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function n0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function r0(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Qm(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Km(n,e,t){!function(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Oh)&&(i=t[Oh]),null==i&&(i=t[Oh]=C4++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function uD(n,e,t){if(t&Ye.Optional)return n;iu(e,"NodeInjector")}function dD(n,e,t,i){if(t&Ye.Optional&&void 0===i&&(i=null),0==(t&(Ye.Self|Ye.Host))){const r=n[9],s=Xs(void 0);try{return r?r.get(e,i,t&Ye.Optional):kh(e,i,t&Ye.Optional)}finally{Xs(s)}}return uD(i,e,t)}function hD(n,e,t,i=Ye.Default,r){if(null!==n){const s=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Oh)?n[Oh]:void 0;return"number"==typeof e?e>=0?255&e:S4:e}(t);if("function"==typeof s){if(!J1(e,n,i))return i&Ye.Host?uD(r,t,i):dD(e,t,i,r);try{const o=s(i);if(null!=o||i&Ye.Optional)return o;iu(t)}finally{iD()}}else if("number"==typeof s){let o=null,a=r0(n,e),l=-1,c=i&Ye.Host?e[16][6]:null;for((-1===a||i&Ye.SkipSelf)&&(l=-1===a?Qm(n,e):e[a+8],-1!==l&&mD(i,!1)?(o=e[1],a=pu(l),e=mu(l,e)):a=-1);-1!==a;){const u=e[1];if(pD(s,a,u.data)){const d=D4(a,e,t,o,i,c);if(d!==fD)return d}l=e[a+8],-1!==l&&mD(i,e[1].data[a+8]===c)&&pD(s,a,e)?(o=u,a=pu(l),e=mu(l,e)):a=-1}}}return dD(e,t,i,r)}const fD={};function S4(){return new gu(li(),ce())}function D4(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=Zm(a,o,t,null==i?Lm(a)&&t0:i!=o&&0!=(3&a.type),r&Ye.Host&&s===a);return null!==u?Gh(e,o,u,a):fD}function Zm(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&Cs(f)&&f.type===t)return l}return null}function Gh(n,e,t,i){let r=n[t];const s=e.data;if(function(n){return n instanceof Hh}(r)){const o=r;o.resolving&&function(n,e){throw new Fo("200",`Circular dependency in DI detected for ${n}`)}(Ii(s[t]));const a=Xm(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Xs(o.injectImpl):null;J1(n,i,Ye.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=H1(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Xs(l),Xm(a),o.resolving=!1,iD()}}return r}function pD(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function mD(n,e){return!(n&Ye.Self||n&Ye.Host&&e)}class gu{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return hD(this._tNode,this._lView,e,i,t)}}function Me(n){return xs(()=>{const e=n.prototype.constructor,t=e[No]||s0(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[No]||s0(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function s0(n){return Sm(n)?()=>{const e=s0(qe(n));return e&&e()}:Nl(n)}function Ms(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(sD(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(li(),n)}const _u="__parameters__";function Bl(n,e,t){return xs(()=>{const i=function(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(_u)?l[_u]:Object.defineProperty(l,_u,{value:[]})[_u];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class ye{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=se({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const R4=new ye("AnalyzeForEntryComponents");function Jr(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),Jr(i,e)):e!==n&&e.push(i)}return e}function Zs(n,e){n.forEach(t=>Array.isArray(t)?Zs(t,e):e(t))}function Jm(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Vl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pa(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Rr(n,e,t){let i=xu(n,e);return i>=0?n[1|i]=t:(i=~i,function(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function l0(n,e){const t=xu(n,e);if(t>=0)return n[1|t]}function xu(n,e){return function(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Yh={},u0="__NG_DI_FLAG__",bu="ngTempTokenPath",z4=/\n/gm,d0="__source",h0=Qt({provide:String,useValue:Qt});let Xh;function wu(n){const e=Xh;return Xh=n,e}function G4(n,e=Ye.Default){if(void 0===Xh)throw new Error("inject() must be called from an injection context");return null===Xh?kh(n,void 0,e):Xh.get(n,e&Ye.Optional?null:void 0,e)}function H(n,e=Ye.Default){return(Da||G4)(qe(n),e)}const Qh=H;function Hl(n){const e=[];for(let t=0;t<n.length;t++){const i=qe(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let r,s=Ye.Default;for(let o=0;o<i.length;o++){const a=i[o],l=W4(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(H(r,s))}else e.push(H(i))}return e}function Kh(n,e){return n[u0]=e,n.prototype[u0]=e,n}function W4(n){return n[u0]}function xD(n,e,t,i){const r=n[bu];throw e[d0]&&r.unshift(e[d0]),n.message=function(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=Mt(e);if(Array.isArray(e))r=e.map(Mt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Mt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(z4,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[bu]=null,n}const Cu=Kh(Bl("Inject",n=>({token:n})),-1),xi=Kh(Bl("Optional"),8),Js=Kh(Bl("SkipSelf"),4);class zl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Pr(n){return n instanceof zl?n.changingThisBreaksApplicationSecurity:n}function eo(n,e){const t=function(n){return n instanceof zl&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}const pU=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,mU=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var $t=(()=>(($t=$t||{})[$t.NONE=0]="NONE",$t[$t.HTML=1]="HTML",$t[$t.STYLE=2]="STYLE",$t[$t.SCRIPT=3]="SCRIPT",$t[$t.URL=4]="URL",$t[$t.RESOURCE_URL=5]="RESOURCE_URL",$t))();function bi(n){const e=function(){const n=ce();return n&&n[12]}();return e?e.sanitize($t.URL,n)||"":eo(n,"URL")?Pr(n):function(n){return(n=String(n)).match(pU)||n.match(mU)?n:"unsafe:"+n}(at(n))}const VD="__ngContext__";function Wi(n,e){n[VD]=e}function b0(n){const e=function(n){return n[VD]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function og(n){return n.ngOriginalError}function NU(n,...e){n.error(...e)}class no{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=this._findContext(e),r=function(n){return n&&n.ngErrorLogger||NU}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),i&&r(this._console,"ERROR CONTEXT",i)}_findContext(e){return e?function(n){return n.ngDebugContext}(e)||this._findContext(og(e)):null}_findOriginalError(e){let t=e&&og(e);for(;t&&og(t);)t=og(t);return t||null}}const YD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ke))();function io(n){return n instanceof Function?n():n}var Fr=(()=>((Fr=Fr||{})[Fr.Important=1]="Important",Fr[Fr.DashCase=2]="DashCase",Fr))();function M0(n,e){return undefined(n,e)}function sf(n){const e=n[3];return ws(e)?e[3]:e}function E0(n){return JD(n[13])}function S0(n){return JD(n[4])}function JD(n){for(;null!==n&&!ws(n);)n=n[4];return n}function Du(n,e,t,i,r){if(null!=i){let s,o=!1;ws(i)?s=i:Qs(i)&&(o=!0,i=i[0]);const a=$n(i);0===n&&null!==t?null==r?sA(e,t,a):Ul(e,t,a,r||null,!0):1===n&&null!==t?Ul(e,t,a,r||null,!0):2===n?function(n,e,t){const i=lg(n,e);i&&function(n,e,t,i){Rn(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function(n,e,t,i,r){const s=t[7];s!==$n(t)&&Du(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];af(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function A0(n,e,t){return Rn(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function tA(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,$x(r,-1)),t.splice(i,1)}function T0(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&tA(r,i),e>0&&(n[t-1][4]=i[4]);const s=Vl(n,10+e);!function(n,e){af(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function nA(n,e){if(!(256&e[2])){const t=e[11];Rn(t)&&t.destroyNode&&af(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return I0(n[1],n);for(;e;){let t=null;if(Qs(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Qs(e)&&I0(e[1],e),e=e[3];null===e&&(e=n),Qs(e)&&I0(e[1],e),t=e&&e[4]}e=t}}(e)}}function I0(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Hh)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):$n(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&Rn(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&ws(e[3])){t!==e[3]&&tA(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function iA(n,e,t){return function(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===E.None||r===E.Emulated)return null}return Zr(i,t)}(n,e.parent,t)}function Ul(n,e,t,i,r){Rn(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function sA(n,e,t){Rn(n)?n.appendChild(e,t):e.appendChild(t)}function oA(n,e,t,i,r){null!==i?Ul(n,e,t,i,r):sA(n,e,t)}function lg(n,e){return Rn(n)?n.parentNode(e):e.parentNode}function aA(n,e,t){return cA(n,e,t)}let cA=function(n,e,t){return 40&n.type?Zr(n,t):null};function cg(n,e,t,i){const r=iA(n,i,e),s=e[11],a=aA(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)oA(s,r,t[l],a,!1);else oA(s,r,t,a,!1)}function ug(n,e){if(null!==e){const t=e.type;if(3&t)return Zr(e,n);if(4&t)return P0(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return ug(n,i);{const r=n[e.index];return ws(r)?P0(-1,r):$n(r)}}if(32&t)return M0(e,n)()||$n(n[e.index]);{const i=dA(n,e);return null!==i?Array.isArray(i)?i[0]:ug(sf(n[16]),i):ug(n,e.next)}}return null}function dA(n,e){return null!==e?n[16][6].projection[e.projection]:null}function P0(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return ug(i,r)}return e[7]}function F0(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Wi($n(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)F0(n,e,t.child,i,r,s,!1),Du(e,n,r,a,s);else if(32&l){const c=M0(t,i);let u;for(;u=c();)Du(e,n,r,u,s);Du(e,n,r,a,s)}else 16&l?fA(n,e,i,t,r,s):Du(e,n,r,a,s);t=o?t.projectionNext:t.next}}function af(n,e,t,i,r,s){F0(t,i,n.firstChild,e,r,s,!1)}function fA(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Du(e,n,r,l[c],s);else F0(n,e,l,o[3],r,s,!0)}function pA(n,e,t){Rn(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function k0(n,e,t){Rn(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function mA(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const gA="ng-template";function l5(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==mA(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function yA(n){return 4===n.type&&n.value!==gA}function c5(n,e,t){return e===(4!==n.type||t?n.value:gA)}function u5(n,e,t){let i=4;const r=n.attrs||[],s=function(n){for(let e=0;e<n.length;e++)if(sD(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!c5(n,l,t)||""===l&&1===e.length){if(Es(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!l5(n.attrs,c,t)){if(Es(i))return!1;o=!0}continue}const d=d5(8&i?"class":l,r,yA(n),t);if(-1===d){if(Es(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==mA(f,c,0)||2&i&&c!==h){if(Es(i))return!1;o=!0}}}}else{if(!o&&!Es(i)&&!Es(l))return!1;if(o&&Es(l))continue;o=!1,i=l|1&i}}return Es(i)||o}function Es(n){return 0==(1&n)}function d5(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function _A(n,e,t=!1){for(let i=0;i<e.length;i++)if(u5(n,e[i],t))return!0;return!1}function m5(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function vA(n,e){return n?":not("+e.trim()+")":e}function g5(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Es(o)&&(e+=vA(s,r),r=""),i=o,s=s||!Es(i);t++}return""!==r&&(e+=vA(s,r)),e}const bt={};function $(n){xA(Wt(),ce(),lr()+n,Vm())}function xA(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&jm(e,s,t)}else{const s=n.preOrderHooks;null!==s&&$m(e,s,0,t)}Ia(t)}function dg(n,e){return n<<17|e<<2}function Ss(n){return n>>17&32767}function O0(n){return 2|n}function Ho(n){return(131068&n)>>2}function L0(n,e){return-131069&n|e<<2}function N0(n){return 1|n}function RA(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];Kx(r),o.contentQueries(2,e[s],s)}}}function lf(n,e,t,i,r,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,q1(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function Au(n,e,t,i,r){let s=n.data[e];if(null===s)s=function(n,e,t,i,r){const s=X1(),o=qx(),l=n.data[e]=function(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),yt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function(){const n=yt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ks(s,!0),s}function Tu(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function cf(n,e,t){zm(e);try{const i=n.viewQuery;null!==i&&tb(1,i,t);const r=n.template;null!==r&&PA(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&RA(n,e),n.staticViewQueries&&tb(2,n.viewQuery,t);const s=n.components;null!==s&&function(n,e){for(let t=0;t<e.length;t++)Z5(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,Um()}}function Iu(n,e,t,i){const r=e[2];if(256==(256&r))return;zm(e);const s=Vm();try{q1(e),function(n){yt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&PA(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&jm(e,c,null)}else{const c=n.preOrderHooks;null!==c&&$m(e,c,0,null),Zx(e,0)}if(function(n){for(let e=E0(n);null!==e;e=S0(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&$x(s,1),r[2]|=1024}}}(e),function(n){for(let e=E0(n);null!==e;e=S0(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];jx(i)&&Iu(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&RA(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&jm(e,c)}else{const c=n.contentHooks;null!==c&&$m(e,c,1),Zx(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Ia(~r);else{const s=r,o=t[++i],a=t[++i];l4(o,s),a(2,e[s])}}}finally{Ia(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)K5(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&tb(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&jm(e,c)}else{const c=n.viewHooks;null!==c&&$m(e,c,2),Zx(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,$x(e[3],-1))}finally{Um()}}function P5(n,e,t,i){const r=e[10],s=!Vm(),o=$1(e);try{s&&!o&&r.begin&&r.begin(),o&&cf(n,e,i),Iu(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function PA(n,e,t,i,r){const s=lr(),o=2&i;try{Ia(-1),o&&e.length>20&&xA(n,e,20,Vm()),t(i,r)}finally{Ia(s)}}function q0(n,e,t){!Y1()||(function(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Uh(t,e),Wi(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Cs(l);c&&$5(e,t,l);const u=Gh(e,n,a,t);Wi(u,e),null!==o&&q5(0,a-r,u,l,0,o),c&&(Ir(t.index,e)[8]=u)}}(n,e,t,Zr(t,e)),128==(128&t.flags)&&function(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=yt.lFrame.currentDirectiveIndex;try{Ia(o);for(let l=i;l<r;l++){const c=n.data[l],u=e[l];Xx(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&zA(c,u)}}finally{Ia(-1),Xx(a)}}(n,e,t))}function Y0(n,e,t=Zr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function kA(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=pg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function pg(n,e,t,i,r,s,o,a,l,c){const u=20+i,d=u+r,h=function(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:bt);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function NA(n,e,t,i){const r=qA(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&YA(n).push(i,r.length-1))}function BA(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function kr(n,e,t,i,r,s,o,a){const l=Zr(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(KA(n,t,u,i,r),Lm(e)&&function(n,e){const t=Ir(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,Rn(s)?s.setProperty(l,i,r):e0(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function X0(n,e,t,i){let r=!1;if(Y1()){const s=function(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];_A(t,o.selectors,!1)&&(r||(r=[]),Km(Uh(t,e),n,o.type),Cs(o)?(UA(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,GA(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=Tu(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=Ym(t.mergedAttrs,d.hostAttrs),WA(n,t,e,c,d),j5(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===s||yA(e)?null:Y5(d,s);o.push(h),a=BA(d,c,a),l=BA(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Fo("301",`Export of name '${e[r+1]}' not found!`);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=Ym(t.mergedAttrs,t.attrs),r}function HA(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function zA(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function UA(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function j5(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Cs(e)&&(t[""]=n)}}function GA(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function WA(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Nl(r.type)),o=new Hh(s,Cs(r),null);n.blueprint[i]=o,t[i]=o,HA(n,e,0,i,Tu(n,t,r.hostVars,bt),r)}function $5(n,e,t){const i=Zr(e,n),r=kA(t),s=n[10],o=mg(n,lf(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function ro(n,e,t,i,r,s){const o=Zr(n,e);!function(n,e,t,i,r,s,o){if(null==s)Rn(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?at(s):o(s,i||"",r);Rn(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function q5(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function Y5(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function jA(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function K5(n,e){const t=Ir(e,n);if(jx(t)){const i=t[1];80&t[2]?Iu(i,t,i.template,t[8]):t[5]>0&&K0(t)}}function K0(n){for(let i=E0(n);null!==i;i=S0(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];Iu(o,s,o.template,s[8])}else s[5]>0&&K0(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Ir(t[i],n);jx(r)&&r[5]>0&&K0(r)}}function Z5(n,e){const t=Ir(e,n),i=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),cf(i,t,t[8])}function mg(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Z0(n){for(;n;){n[2]|=64;const e=sf(n);if(Gz(n)&&!e)return n;n=e}return null}function eb(n,e,t){const i=e[10];i.begin&&i.begin();try{Iu(n,e,n.template,t)}catch(r){throw QA(e,r),r}finally{i.end&&i.end()}}function $A(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=b0(t),r=i[1];P5(r,i,r.template,t)}}(n[8])}function tb(n,e,t){Kx(0),e(n,t)}const iG=(()=>Promise.resolve(null))();function qA(n){return n[7]||(n[7]=[])}function YA(n){return n.cleanup||(n.cleanup=[])}function QA(n,e){const t=n[9],i=t?t.get(no,null):null;i&&i.handleError(e)}function KA(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function zo(n,e,t){const i=Bm(e,n);!function(n,e,t){Rn(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function gg(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=nu(r,a):2==s&&(i=nu(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const uf=new ye("INJECTOR",-1);class ZA{get(e,t=Yh){if(t===Yh){const i=new Error(`NullInjectorError: No provider for ${Mt(e)}!`);throw i.name="NullInjectorError",i}return t}}const df=new ye("Set Injector scope."),hf={},oG={};let nb;function JA(){return void 0===nb&&(nb=new ZA),nb}function eT(n,e=null,t=null,i){return new lG(n,t,e||JA(),i)}class lG{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&Zs(t,a=>this.processProvider(a,e,t)),Zs([e],a=>this.processInjectorType(a,[],s)),this.records.set(uf,Ru(void 0,this));const o=this.records.get(df);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:Mt(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Yh,i=Ye.Default){this.assertNotDestroyed();const r=wu(this),s=Xs(void 0);try{if(!(i&Ye.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof ye}(e)&&si(e);a=l&&this.injectableDefInScope(l)?Ru(ib(e),hf):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Ye.Self?JA():this.parent).get(e,t=i&Ye.Optional&&t===Yh?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[bu]=o[bu]||[]).unshift(Mt(e)),r)throw o;return xD(o,e,"R3InjectorError",this.source)}throw o}finally{Xs(s),wu(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(Mt(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,i){if(!(e=qe(e)))return!1;let r=vr(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=vr(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{Zs(r.imports,d=>{this.processInjectorType(d,t,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];Zs(f,p=>this.processProvider(p,h,f||Rt))}}this.injectorDefTypes.add(o);const l=Nl(o)||(()=>new o);this.records.set(o,Ru(l,hf));const c=r.providers;if(null!=c&&!a){const u=e;Zs(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=Pu(e=qe(e))?e:qe(e&&e.provide);const s=function(n,e,t){return nT(n)?Ru(void 0,n.useValue):Ru(tT(n),hf)}(e);if(Pu(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=Ru(void 0,hf,!0),o.factory=()=>Hl(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===hf&&(t.value=oG,t.value=t.factory()),"object"==typeof t.value&&t.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=qe(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function ib(n){const e=si(n),t=null!==e?e.factory:Nl(n);if(null!==t)return t;if(n instanceof ye)throw new Error(`Token ${Mt(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const i=Pa(e,"?");throw new Error(`Can't resolve all parameters for ${Mt(n)}: (${i.join(", ")}).`)}const t=function(n){const e=n&&(n[Oo]||n[au]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function tT(n,e,t){let i;if(Pu(n)){const r=qe(n);return Nl(r)||ib(r)}if(nT(n))i=()=>qe(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Hl(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))i=()=>H(qe(n.useExisting));else{const r=qe(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return Nl(r)||ib(r);i=()=>new r(...Hl(n.deps))}return i}function Ru(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function nT(n){return null!==n&&"object"==typeof n&&h0 in n}function Pu(n){return"function"==typeof n}const iT=function(n,e,t){return function(n,e=null,t=null,i){const r=eT(n,e,t,i);return r._resolveInjectorDefTypes(),r}({name:t},e,n,t)};let tn=(()=>{class n{static create(t,i){return Array.isArray(t)?iT(t,i,""):iT(t.providers,t.parent,t.name||"")}}return n.THROW_IF_NOT_FOUND=Yh,n.NULL=new ZA,n.\u0275prov=se({token:n,providedIn:"any",factory:()=>H(uf)}),n.__NG_ELEMENT_ID__=-1,n})();function TG(n,e){Wm(b0(n)[1],li())}function ie(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Cs(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=cb(n.inputs),o.declaredInputs=cb(n.declaredInputs),o.outputs=cb(n.outputs);const a=r.hostBindings;a&&FG(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&RG(n,l),c&&PG(n,c),Dh(n.inputs,r.inputs),Dh(n.declaredInputs,r.declaredInputs),Dh(n.outputs,r.outputs),Cs(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===ie&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Ym(r.hostAttrs,t=Ym(t,r.hostAttrs))}}(i)}function cb(n){return n===In?{}:n===Rt?[]:n}function RG(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function PG(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function FG(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let yg=null;function Fu(){if(!yg){const n=ke.Symbol;if(n&&n.iterator)yg=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(yg=i)}}}return yg}function pf(n){return!!ub(n)&&(Array.isArray(n)||!(n instanceof Map)&&Fu()in n)}function ub(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ji(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function nn(n,e,t,i){const r=ce();return ji(r,fu(),e)&&(Wt(),ro(Pn(),r,n,e,t,i)),nn}function Ou(n,e,t,i){return ji(n,fu(),t)?e+at(t)+i:bt}function be(n,e,t,i,r,s,o,a){const l=ce(),c=Wt(),u=n+20,d=c.firstCreatePass?function(n,e,t,i,r,s,o,a,l){const c=e.consts,u=Au(e,n,4,o||null,Ta(c,a));X0(e,t,u,Ta(c,l)),Wm(e,u);const d=u.tViews=pg(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];Ks(d,!1);const h=l[11].createComment("");cg(c,l,h,d),Wi(h,l),mg(l,l[u]=jA(h,l,h,d)),Nm(d)&&q0(c,l,d),null!=o&&Y0(l,d,a)}function b(n,e=Ye.Default){const t=ce();return null===t?H(n,e):hD(li(),t,qe(n),e)}function Wl(){throw new Error("invalid")}function Z(n,e,t){const i=ce();return ji(i,fu(),e)&&kr(Wt(),Pn(),i,n,e,i[11],t,!1),Z}function mb(n,e,t,i,r){const o=r?"class":"style";KA(n,t,e.inputs[o],o,i)}function T(n,e,t,i){const r=ce(),s=Wt(),o=20+n,a=r[11],l=r[o]=A0(a,e,yt.lFrame.currentNamespace),c=s.firstCreatePass?function(n,e,t,i,r,s,o){const a=e.consts,c=Au(e,n,2,r,Ta(a,s));return X0(e,t,c,Ta(a,o)),null!==c.attrs&&gg(c,c.attrs,!1),null!==c.mergedAttrs&&gg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];Ks(c,!0);const u=c.mergedAttrs;null!==u&&qm(a,l,u);const d=c.classes;null!==d&&k0(a,l,d);const h=c.styles;null!==h&&pA(a,l,h),64!=(64&c.flags)&&cg(s,r,l,c),0===yt.lFrame.elementDepthCount&&Wi(l,r),yt.lFrame.elementDepthCount++,Nm(c)&&(q0(s,r,c),function(n,e,t){if(Vx(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,r)),null!==i&&Y0(r,c)}function I(){let n=li();qx()?Yx():(n=n.parent,Ks(n,!1));const e=n;yt.lFrame.elementDepthCount--;const t=Wt();t.firstCreatePass&&(Wm(t,n),Vx(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&mb(t,e,ce(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&mb(t,e,ce(),e.stylesWithoutHost,!1)}function ee(n,e,t,i){T(n,e,t,i),I()}function Ri(){return ce()}function gf(n){return!!n&&"function"==typeof n.then}const bg=function(n){return!!n&&"function"==typeof n.subscribe};function Ze(n,e,t,i){const r=ce(),s=Wt(),o=li();return function(n,e,t,i,r,s,o,a){const l=Nm(i),u=n.firstCreatePass&&YA(n),d=e[8],h=qA(e);let f=!0;if(3&i.type||a){const _=Zr(i,e),y=a?a(_):_,g=h.length,x=a?v=>a($n(v[i.index])):i.index;if(Rn(t)){let v=null;if(!a&&l&&(v=function(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,f=!1;else{s=gb(i,e,d,s,!1);const M=t.listen(y,r,s);h.push(s,M),u&&u.push(r,x,g,g+1)}}else s=gb(i,e,d,s,!0),y.addEventListener(r,s,o),h.push(s),u&&u.push(r,x,g,o)}else s=gb(i,e,d,s,!1);const p=i.outputs;let m;if(f&&null!==p&&(m=p[r])){const _=m.length;if(_)for(let y=0;y<_;y+=2){const D=e[m[y]][m[y+1]].subscribe(s),w=h.length;h.push(s,D),u&&u.push(r,i.index,w,-(w+1))}}}(s,r,r[11],o,n,e,!!t,i),Ze}function WT(n,e,t,i){try{return!1!==t(i)}catch(r){return QA(n,r),!1}}function gb(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?Ir(n.index,e):e;0==(32&e[2])&&Z0(a);let l=WT(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=WT(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Ne(n=1){return function(n){return(yt.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,yt.lFrame.contextLView))[8]}(n)}function h6(n,e){let t=null;const i=function(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?_A(n,s,!0):m5(i,s))return r}else t=r}return t}function Pi(n){const e=ce()[16][6];if(!e.projection){const i=e.projection=Pa(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?h6(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Ht(n,e=0,t){const i=ce(),r=Wt(),s=Au(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),Yx(),64!=(64&s.flags)&&function(n,e,t){fA(e[11],0,e,t,iA(n,t,e),aA(t.parent||e[6],t,e))}(r,i,s)}function Or(n,e,t){return yb(n,"",e,"",t),Or}function yb(n,e,t,i,r){const s=ce(),o=Ou(s,e,t,i);return o!==bt&&kr(Wt(),Pn(),s,n,o,s[11],r,!1),yb}function JT(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Ss(s):Ho(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];m6(n[a],e)&&(l=!0,n[a+1]=i?N0(u):O0(u)),a=i?Ss(u):Ho(u)}l&&(n[t+1]=i?O0(s):N0(s))}function m6(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&xu(n,e)>=0}function wr(n,e,t){return As(n,e,t,!1),wr}function hn(n,e){return As(n,e,null,!0),hn}function As(n,e,t,i){const r=ce(),s=Wt(),o=function(n){const e=yt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[lr()],o=function(n,e){return e>=n.expandoStartIndex}(n,t);(function(n,e){return 0!=(n.flags&(e?16:32))})(s,i)&&null===e&&!o&&(e=!1),e=function(n,e,t,i){const r=function(n){const e=yt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=yf(t=_b(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=_b(r,n,e,t,i),null===s){let l=function(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Ho(i))return n[Ss(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=_b(null,n,e,l[1],i),l=yf(l,e.attrs,i),function(n,e,t,i){n[Ss(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=yf(i,n[s].hostAttrs,t);return yf(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Ss(o),l=Ho(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||xu(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=Ss(n[a+1]);n[i+1]=dg(h,a),0!==h&&(n[h+1]=L0(n[h+1],i)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=dg(a,0),0!==a&&(n[a+1]=L0(n[a+1],i)),a=i;else n[i+1]=dg(l,0),0===a?a=i:n[l+1]=L0(n[l+1],i),l=i;c&&(n[i+1]=O0(n[i+1])),JT(n,u,i,!0),JT(n,u,i,!1),function(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&xu(s,e)>=0&&(t[i+1]=N0(t[i+1]))}(e,u,n,i,s),o=dg(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==bt&&ji(r,o,e)&&function(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];wg(function(n){return 1==(1&n)}(c)?uI(l,e,t,r,Ho(c),o):void 0)||(wg(s)||function(n){return 2==(2&n)}(c)&&(s=uI(l,null,t,r,a,o)),function(n,e,t,i,r){const s=Rn(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Fr.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=Fr.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,Bm(lr(),t),r,s))}(s,s.data[lr()],r,r[11],n,r[o+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Mt(Pr(n)))),n}(e,t),i,o)}function _b(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=yf(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function yf(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Rr(n,o,!!t||e[++s]))}return void 0===n?null:n}function uI(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===bt&&(h=d?Rt:void 0);let f=d?l0(h,i):u===i?h:void 0;if(c&&!wg(f)&&(f=l0(l,i)),wg(f)&&(a=f,o))return a;const p=n[r+1];r=o?Ss(p):Ho(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=l0(l,i))}return a}function wg(n){return void 0!==n}function Te(n,e=""){const t=ce(),i=Wt(),r=n+20,s=i.firstCreatePass?Au(i,r,1,e,null):i.data[r],o=t[r]=function(n,e){return Rn(n)?n.createText(e):n.createTextNode(e)}(t[11],e);cg(i,t,o,s),Ks(s,!1)}function xn(n){return Yn("",n,""),xn}function Yn(n,e,t){const i=ce(),r=Ou(i,n,e,t);return r!==bt&&zo(i,lr(),r),Yn}const jl=void 0;var X6=["en",[["a","p"],["AM","PM"],jl],[["AM","PM"],jl,jl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jl,"{1} 'at' {0}",jl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let ju={};function RI(n){return n in ju||(ju[n]=ke.ng&&ke.ng.common&&ke.ng.common.locales&&ke.ng.common.locales[n]),ju[n]}var Ee=(()=>((Ee=Ee||{})[Ee.LocaleId=0]="LocaleId",Ee[Ee.DayPeriodsFormat=1]="DayPeriodsFormat",Ee[Ee.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ee[Ee.DaysFormat=3]="DaysFormat",Ee[Ee.DaysStandalone=4]="DaysStandalone",Ee[Ee.MonthsFormat=5]="MonthsFormat",Ee[Ee.MonthsStandalone=6]="MonthsStandalone",Ee[Ee.Eras=7]="Eras",Ee[Ee.FirstDayOfWeek=8]="FirstDayOfWeek",Ee[Ee.WeekendRange=9]="WeekendRange",Ee[Ee.DateFormat=10]="DateFormat",Ee[Ee.TimeFormat=11]="TimeFormat",Ee[Ee.DateTimeFormat=12]="DateTimeFormat",Ee[Ee.NumberSymbols=13]="NumberSymbols",Ee[Ee.NumberFormats=14]="NumberFormats",Ee[Ee.CurrencyCode=15]="CurrencyCode",Ee[Ee.CurrencySymbol=16]="CurrencySymbol",Ee[Ee.CurrencyName=17]="CurrencyName",Ee[Ee.Currencies=18]="Currencies",Ee[Ee.Directionality=19]="Directionality",Ee[Ee.PluralCase=20]="PluralCase",Ee[Ee.ExtraData=21]="ExtraData",Ee))();const Eg="en-US";let PI=Eg;function bb(n,e,t,i,r){if(n=qe(n),Array.isArray(n))for(let s=0;s<n.length;s++)bb(n[s],e,t,i,r);else{const s=Wt(),o=ce();let a=Pu(n)?n:qe(n.provide),l=tT(n);const c=li(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Pu(n)||!n.multi){const f=new Hh(l,r,b),p=Cb(a,e,r?u:u+h,d);-1===p?(Km(Uh(c,o),s,a),wb(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=Cb(a,e,u+h,d),p=Cb(a,e,u,u+h),m=f>=0&&t[f],_=p>=0&&t[p];if(r&&!_||!r&&!m){Km(Uh(c,o),s,a);const y=function(n,e,t,i,r){const s=new Hh(n,t,b);return s.multi=[],s.index=e,s.componentProviders=0,nR(s,r,i&&!t),s}(r?q8:$8,t.length,r,i,l);!r&&_&&(t[p].providerFactory=y),wb(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(y),o.push(y)}else wb(s,n,f>-1?f:p,nR(t[r?p:f],l,!r&&i));!r&&i&&_&&t[p].componentProviders++}}}function wb(n,e,t,i){const r=Pu(e);if(r||function(n){return!!n.useClass}(e)){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const a=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const l=a.indexOf(t);-1===l?a.push(t,[i,o]):a[l+1].push(i,o)}else a.push(t,o)}}}function nR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Cb(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function $8(n,e,t,i){return Mb(this.multi,[])}function q8(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Gh(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),Mb(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Mb(r,s);return s}function Mb(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function lt(n,e=[]){return t=>{t.providersResolver=(i,r)=>function(n,e,t){const i=Wt();if(i.firstCreatePass){const r=Cs(n);bb(t,i.data,i.blueprint,r,!0),bb(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class iR{}const sR="ngComponent";class Q8{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${Mt(n)}. Did you add it to @NgModule.entryComponents?`);return e[sR]=n,e}(e)}}let Go=(()=>{class n{}return n.NULL=new Q8,n})();function Ig(...n){}function qu(n,e){return new De(Zr(n,e))}const J8=function(){return qu(li(),ce())};let De=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=J8,n})();function oR(n){return n instanceof De?n.nativeElement:n}class $l{}let Is=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>tW(),n})();const tW=function(){const n=ce(),t=Ir(li().index,n);return function(n){return n[11]}(Qs(t)?t:n)};let Sb=(()=>{class n{}return n.\u0275prov=se({token:n,providedIn:"root",factory:()=>null}),n})();class Wo{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const aR=new Wo("13.0.2"),Yu={};function Rg(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push($n(s)),ws(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Rg(l[1],l,c,i)}const o=t.type;if(8&o)Rg(n,e,t.child,i);else if(32&o){const a=M0(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=dA(e,t);if(Array.isArray(a))i.push(...a);else{const l=sf(e[16]);Rg(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class wf{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Rg(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ws(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(T0(e,i),Vl(t,i))}this._attachedToViewContainer=!1}nA(this._lView[1],this._lView)}onDestroy(e){NA(this._lView[1],this._lView,null,e)}markForCheck(){Z0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){eb(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){Hm(!0);try{eb(n,e,t)}finally{Hm(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,e){af(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class rW extends wf{constructor(e){super(e),this._view=e}detectChanges(){$A(this._view)}checkNoChanges(){!function(n){Hm(!0);try{$A(n)}finally{Hm(!1)}}(this._view)}get context(){return null}}class lR extends Go{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ui(e);return new Db(t,this.ngModule)}}function cR(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const oW=new ye("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>YD});class Db extends iR{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function(n){return n.map(g5).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return cR(this.componentDef.inputs)}get outputs(){return cR(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function(n,e){return{get:(t,i,r)=>{const s=n.get(t,Yu,r);return s!==Yu||i===Yu?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get($l,j1),a=s.get(Sb,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function(n,e,t){if(Rn(n))return n.selectRootElement(e,t===E.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):A0(o.createRenderer(null,this.componentDef),c,function(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),d=this.componentDef.onPush?576:528,h=function(n,e){return{components:[],scheduler:n||YD,clean:iG,playerHandler:e||null,flags:0}}(),f=pg(0,null,null,1,0,null,null,null,null,null),p=lf(null,f,h,d,null,null,o,l,a,s);let m,_;zm(p);try{const y=function(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=Au(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(gg(l,c,!0),null!==n&&(qm(r,n,c),null!==l.classes&&k0(r,n,l.classes),null!==l.styles&&pA(r,n,l.styles)));const u=i.createRenderer(n,e),d=lf(t,kA(e),null,e.onPush?64:16,t[20],l,i,u,s||null,null);return o.firstCreatePass&&(Km(Uh(l,t),o,e.type),UA(o,l),GA(l,t.length,1)),mg(t,d),t[20]=d}(u,this.componentDef,p,o,l);if(u)if(i)qm(l,u,["ng-version",aR.full]);else{const{attrs:g,classes:x}=function(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Es(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);g&&qm(l,u,g),x&&x.length>0&&k0(l,u,x.join(" "))}if(_=Wx(f,20),void 0!==t){const g=_.projection=[];for(let x=0;x<this.ngContentSelectors.length;x++){const v=t[x];g.push(null!=v?Array.from(v):null)}}m=function(n,e,t,i,r){const s=t[1],o=function(n,e,t){const i=li();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),WA(n,i,e,Tu(n,e,1,null),t));const r=Gh(e,n,i.directiveStart,i);Wi(r,e);const s=Zr(i,e);return s&&Wi(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=li();e.contentQueries(1,o,l.directiveStart)}const a=li();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Ia(a.index),HA(t[1],a,0,a.directiveStart,a.directiveEnd,e),zA(e,o)),o}(y,this.componentDef,p,h,[TG]),cf(f,p,null)}finally{Um()}return new cW(this.componentType,m,qu(_,p),p,_)}}class cW extends class{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new rW(r),this.componentType=e}get injector(){return new gu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class uo{}class uR{}const Xu=new Map;class hR extends uo{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new lR(this);const i=Xr(e);this._bootstrapComponents=io(i.bootstrap),this._r3Injector=eT(e,t,[{provide:uo,useValue:this},{provide:Go,useValue:this.componentFactoryResolver}],Mt(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=tn.THROW_IF_NOT_FOUND,i=Ye.Default){return e===tn||e===uo||e===uf?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Tb extends uR{constructor(e){super(),this.moduleType=e,null!==Xr(e)&&function(n){const e=new Set;!function t(i){const r=Xr(i,!0),s=r.id;null!==s&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${Mt(e)} vs ${Mt(e.name)}`)}(s,Xu.get(s),i),Xu.set(s,i));const o=io(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new hR(this.moduleType,e)}}function jo(n,e,t,i){return fR(ce(),ar(),n,e,t,i)}function fR(n,e,t,i,r,s){const o=e+t;return ji(n,o,r)?function(n,e,t){return n[e]=t}(n,o+1,s?i.call(s,r):i(r)):function(n,e){const t=n[e];return t===bt?void 0:t}(n,o+1)}function ts(n,e){const t=Wt();let i;const r=n+20;t.firstCreatePass?(i=function(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}throw new Fo("302",`The pipe '${n}' could not be found!`)}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=Nl(i.type)),o=Xs(b);try{const a=Xm(!1),l=s();return Xm(a),function(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,ce(),r,l),l}finally{Xs(o)}}function $o(n,e,t){const i=n+20,r=ce(),s=function(n,e){return n[e]}(r,i);return function(n,e){return n[1].data[e].pure}(r,i)?fR(r,ar(),e,s.transform,t,s):s.transform(t)}function Rb(n){return e=>{setTimeout(n,void 0,e)}}const ot=class extends tt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var l,c,u;let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const d=e;r=null==(l=d.next)?void 0:l.bind(d),s=null==(c=d.error)?void 0:c.bind(d),o=null==(u=d.complete)?void 0:u.bind(d)}this.__isAsync&&(s=Rb(s),r&&(r=Rb(r)),o&&(o=Rb(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof gt&&e.add(a),a}};function EW(){return this._results[Fu()]()}class ql{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Fu(),i=ql.prototype;i[t]||(i[t]=EW)}get changes(){return this._changes||(this._changes=new ot)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=Jr(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;const DW=function(){return Fg(li(),ce())};let di=(()=>{class n{}return n.__NG_ELEMENT_ID__=DW,n})();const AW=di,TW=class extends AW{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=lf(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),cf(t,i,e),new wf(i)}};function Fg(n,e){return 4&n.type?new TW(e,n,qu(n,e)):null}const PW=function(){return xR(li(),ce())};let Xn=(()=>{class n{}return n.__NG_ELEMENT_ID__=PW,n})();const kW=Xn,_R=class extends kW{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new gu(this._hostTNode,this._hostLView)}get parentInjector(){const e=Qm(this._hostTNode,this._hostLView);if(aD(e)){const t=mu(e,this._hostLView),i=pu(e);return new gu(t[1].data[i+8],t)}return new gu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=vR(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=e&&!function(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new Db(Ui(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule&&c){const d=c.get(uo,null);d&&(s=d)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function(n){return ws(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[3],h=new _R(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],Jm(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=P0(s,o),l=i[11],c=lg(l,o[7]);return null!==c&&function(n,e,t,i,r,s){i[0]=r,i[6]=e,af(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),Jm(Pb(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=vR(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=T0(this._lContainer,t);i&&(Vl(Pb(this._lContainer),t),nA(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=T0(this._lContainer,t);return i&&null!=Vl(Pb(this._lContainer),t)?new wf(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function vR(n){return n[8]}function Pb(n){return n[8]||(n[8]=[])}function xR(n,e){let t;const i=e[n.index];if(ws(i))t=i;else{let r;if(8&n.type)r=$n(i);else{const s=e[11];r=s.createComment("");const o=Zr(n,e);Ul(s,lg(s,o),r,function(n,e){return Rn(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=jA(i,e,r,n),mg(e,t)}return new _R(t,n,e)}class Fb{constructor(e){this.queryList=e,this.matches=null}clone(){return new Fb(this.queryList)}setDirty(){this.queryList.setDirty()}}class kb{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new kb(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==ER(e,t).matches&&this.queries[t].setDirty()}}class bR{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class Ob{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new Ob(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Lb{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Lb(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,NW(t,s)),this.matchTNodeWithReadOption(e,t,Zm(t,e,s,!1,!1))}else i===di?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Zm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===De||r===Xn||r===di&&4&t.type)this.addMatch(t.index,-2);else{const s=Zm(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function NW(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function VW(n,e,t,i){return-1===t?function(n,e){return 11&n.type?qu(n,e):4&n.type?Fg(n,e):null}(e,n):-2===t?function(n,e,t){return t===De?qu(e,n):t===di?Fg(e,n):t===Xn?xR(e,n):void 0}(n,e,i):Gh(n,n[1],t,e)}function wR(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:VW(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function Nb(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=wR(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&Nb(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];Nb(f[1],f,c,i)}}}}}return i}function He(n){const e=ce(),t=Wt(),i=Z1();Kx(i+1);const r=ER(t,i);if(n.dirty&&$1(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?Nb(t,e,i,[]):wR(t,e,r,i);n.reset(s,oR),n.notifyOnChanges()}return!0}return!1}function qt(n,e,t,i){const r=Wt();if(r.firstCreatePass){const s=li();MR(r,new bR(e,t,i),s.index),function(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}CR(r,ce(),t)}function ze(){return function(n,e){return n[19].queries[e].queryList}(ce(),Z1())}function CR(n,e,t){const i=new ql(4==(4&t));NA(n,e,i,i.destroy),null===e[19]&&(e[19]=new kb),e[19].queries.push(new Fb(i))}function MR(n,e,t){null===n.queries&&(n.queries=new Ob),n.queries.track(new Lb(e,t))}function ER(n,e){return n.queries.getByIndex(e)}const Sf=new ye("Application Initializer");let Ku=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Ig,this.reject=Ig,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(gf(s))t.push(s);else if(bg(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(H(Sf,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const Df=new ye("AppId"),gj={provide:Df,useFactory:function(){return`${Gb()}${Gb()}${Gb()}`},deps:[]};function Gb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const GR=new ye("Platform Initializer"),Cr=new ye("Platform ID"),Wb=new ye("appBootstrapListener");let Lg=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const qo=new ye("LocaleId"),WR=new ye("DefaultCurrencyCode");class _j{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const jb=function(n){return new Tb(n)},vj=jb,xj=function(n){return Promise.resolve(jb(n))},$R=function(n){const e=jb(n),i=io(Xr(n).declarations).reduce((r,s)=>{const o=Ui(s);return o&&r.push(new Db(o)),r},[]);return new _j(e,i)},bj=$R,wj=function(n){return Promise.resolve($R(n))};let Ng=(()=>{class n{constructor(){this.compileModuleSync=vj,this.compileModuleAsync=xj,this.compileModuleAndAllComponentsSync=bj,this.compileModuleAndAllComponentsAsync=wj}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const Ej=(()=>Promise.resolve(0))();function $b(n){"undefined"==typeof Zone?Ej.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class wt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let n=ke.requestAnimationFrame,e=ke.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ke,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Yb(n),n.isCheckStableRunning=!0,qb(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Yb(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return qR(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),YR(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return qR(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),YR(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Yb(n),qb(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(wt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Dj,Ig,Ig);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Dj={};function qb(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Yb(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function qR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YR(n){n._nesting--,qb(n)}class Ij{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ot,this.onMicrotaskEmpty=new ot,this.onStable=new ot,this.onError=new ot}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let Xb=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wt.assertNotInAngularZone(),$b(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$b(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(H(wt))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})(),XR=(()=>{class n{constructor(){this._applications=new Map,Qb.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Qb.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();class Rj{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let Qb=new Rj,QR=!0,KR=!1;function Kb(){return KR=!0,QR}let Rs;const ZR=new ye("AllowMultipleToken");class Zb{constructor(e,t){this.name=e,this.token=t}}function JR(n,e,t=[]){const i=`Platform: ${e}`,r=new ye(i);return(s=[])=>{let o=eP();if(!o||o.injector.get(ZR,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:df,useValue:"platform"});!function(n){if(Rs&&!Rs.destroyed&&!Rs.injector.get(ZR,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Rs=n.get(tP);const e=n.get(GR,null);e&&e.forEach(t=>t())}(tn.create({providers:a,name:i}))}return function(n){const e=eP();if(!e)throw new Error("No platform exists!");if(!e.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function eP(){return Rs&&!Rs.destroyed?Rs:null}let tP=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function(n,e){let t;return t="noop"===n?new Ij:("zone.js"===n?void 0:n)||new wt({enableLongStackTrace:Kb(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:wt,useValue:a}];return a.run(()=>{const c=tn.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(no,null);if(!d)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{Jb(this._modules,u),h.unsubscribe()})}),function(n,e,t){try{const i=t();return gf(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(d,a,()=>{const h=u.injector.get(Ku);return h.runInitializers(),h.donePromise.then(()=>(function(n){sr(n,"Expected localeId to be defined"),"string"==typeof n&&(PI=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(qo,Eg)||Eg),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const r=nP({},i);return function(n,e,t){const i=new Tb(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Yl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${Mt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(H(tn))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();function nP(n,e){return Array.isArray(e)?e.reduce(nP,n):_e(_e({},n),e)}let Yl=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new It(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new It(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{wt.assertNotInAngularZone(),$b(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{wt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=Dr(a,l.pipe(n=>eu()(function(n,e){return function(i){let r;r="function"==typeof n?n:function(){return n};const s=Object.create(i,tu);return s.source=i,s.subjectFactory=r,s}}(Tx)(n))))}bootstrap(t,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=t instanceof iR?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function(n){return n.isBoundToModule}(r)?void 0:this._injector.get(uo),a=r.create(tn.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(Xb,null),u=c&&a.injector.get(XR);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),Jb(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Jb(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Wb,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(H(wt),H(tn),H(no),H(Go),H(Ku))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();function Jb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const $j=function(n){return function(n,e,t){if(Lm(n)&&!t){const i=Ir(n.index,e);return new wf(i,i)}return 47&n.type?new wf(e[16],e):null}(li(),ce(),16==(16&n))};let wi=(()=>{class n{}return n.__NG_ELEMENT_ID__=$j,n})();class cP{constructor(){}supports(e){return pf(e)}create(e){return new s$(e)}}const r$=(n,e)=>e;class s${constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||r$}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<dP(i,r,s)?t:i,a=dP(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!pf(e))throw new Error(`Error trying to diff '${Mt(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Fu()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new o$(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new uP),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uP),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class o${constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class a${constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class uP{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new a$,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dP(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class hP{constructor(){}supports(e){return e instanceof Map||ub(e)}create(){return new l$}}class l${constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||ub(e)))throw new Error(`Error trying to diff '${Mt(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new c$(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class c${constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fP(){return new Ps([new cP])}let Ps=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||fP()),deps:[[n,new Js,new xi]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=se({token:n,providedIn:"root",factory:fP}),n})();function pP(){return new Oa([new hP])}let Oa=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||pP()),deps:[[n,new Js,new xi]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=se({token:n,providedIn:"root",factory:pP}),n})();const d$=[new hP],f$=new Ps([new cP]),p$=new Oa(d$),m$=JR(null,"core",[{provide:Cr,useValue:"unknown"},{provide:tP,deps:[tn]},{provide:XR,deps:[]},{provide:Lg,deps:[]}]),x$=[{provide:Yl,useClass:Yl,deps:[wt,tn,no,Go,Ku]},{provide:oW,deps:[wt],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ku,useClass:Ku,deps:[[new xi,Sf]]},{provide:Ng,useClass:Ng,deps:[]},gj,{provide:Ps,useFactory:function(){return f$},deps:[]},{provide:Oa,useFactory:function(){return p$},deps:[]},{provide:qo,useFactory:function(n){return n||"undefined"!=typeof $localize&&$localize.locale||Eg},deps:[[new Cu(qo),new xi,new Js]]},{provide:WR,useValue:"USD"}];let w$=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(H(Yl))},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({providers:x$}),n})(),Kg=null;function ho(){return Kg}const ct=new ye("DocumentToken");let Jl=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:function(){return H(ZP)},providedIn:"platform"}),n})();const g9=new ye("Location Initialized");let ZP=(()=>{class n extends Jl{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ho().getBaseHref(this._doc)}onPopState(t){const i=ho().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=ho().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){JP()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){JP()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(H(ct))},n.\u0275prov=se({token:n,factory:function(){return new ZP(H(ct))},providedIn:"platform"}),n})();function JP(){return!!window.history.pushState}function Dw(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function eF(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Xo(n){return n&&"?"!==n[0]?"?"+n:n}let id=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:function(){return function(n){const e=H(ct).location;return new tF(H(Jl),e&&e.origin||"")}()},providedIn:"root"}),n})();const Aw=new ye("appBaseHref");let tF=(()=>{class n extends id{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Dw(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Xo(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Xo(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Xo(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null==(r=(i=this._platformLocation).historyGo)||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(H(Jl),H(Aw,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})(),v9=(()=>{class n extends id{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Dw(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Xo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Xo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null==(r=(i=this._platformLocation).historyGo)||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(H(Jl),H(Aw,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})(),rd=(()=>{class n{constructor(t,i){this._subject=new ot,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=eF(nF(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Xo(i))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,nF(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xo(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xo(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null==(r=(i=this._platformStrategy).historyGo)||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Xo,n.joinWithSlash=Dw,n.stripTrailingSlash=eF,n.\u0275fac=function(t){return new(t||n)(H(id),H(Jl))},n.\u0275prov=se({token:n,factory:function(){return new rd(H(id),H(Jl))},providedIn:"root"}),n})();function nF(n){return n.replace(/\/index.html$/,"")}var Qn=(()=>((Qn=Qn||{})[Qn.Zero=0]="Zero",Qn[Qn.One=1]="One",Qn[Qn.Two=2]="Two",Qn[Qn.Few=3]="Few",Qn[Qn.Many=4]="Many",Qn[Qn.Other=5]="Other",Qn))();const A9=function(n){return function(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=RI(e);if(t)return t;const i=e.split("-")[0];if(t=RI(i),t)return t;if("en"===i)return X6;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[Ee.PluralCase]};class ay{}let iq=(()=>{class n extends ay{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(A9(i||this.locale)(t)){case Qn.Zero:return"zero";case Qn.One:return"one";case Qn.Two:return"two";case Qn.Few:return"few";case Qn.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(H(qo))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})(),Ba=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(pf(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Mt(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(b(Ps),b(Oa),b(De),b(Is))},n.\u0275dir=j({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class oq{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ec=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=[];t.forEachOperation((r,s,o)=>{if(null==r.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new oq(null,this._ngForOf,-1,-1),null===o?void 0:o),l=new dF(r,a);i.push(l)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const l=new dF(r,a);i.push(l)}});for(let r=0;r<i.length;r++)this._perViewChange(i[r].view,i[r].record);for(let r=0,s=this._viewContainer.length;r<s;r++){const o=this._viewContainer.get(r);o.context.index=r,o.context.count=s,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{this._viewContainer.get(r.currentIndex).context.$implicit=r.item})}_perViewChange(t,i){t.context.$implicit=i.item}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(b(Xn),b(di),b(Ps))},n.\u0275dir=j({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class dF{constructor(e,t){this.record=e,this.view=t}}let os=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new lq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(b(Xn),b(di))},n.\u0275dir=j({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class lq{constructor(){this.$implicit=null,this.ngIf=null}}function hF(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Mt(e)}'.`)}let Gf=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Mt(n)}'`)}(n,t);return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=or({name:"uppercase",type:n,pure:!0}),n})(),Yi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({providers:[{provide:ay,useClass:iq}]}),n})();const _F="browser";function tc(n){return n===_F}function sd(n){return"server"===n}let Pq=(()=>{class n{}return n.\u0275prov=se({token:n,providedIn:"root",factory:()=>new Fq(H(ct),window)}),n})();class Fq{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=vF(this.window.history)||vF(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function vF(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class zw extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){Kg||(Kg=n)}(new zw)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Wf=Wf||document.querySelector("base"),Wf?Wf.getAttribute("href"):null);return null==t?null:function(n){ly=ly||document.createElement("a"),ly.setAttribute("href",n);const e=ly.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ly,Wf=null;const xF=new ye("TRANSITION_ID"),Hq=[{provide:Sf,useFactory:function(n,e,t){return()=>{t.get(Ku).donePromise.then(()=>{const i=ho(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[xF,ct,tn],multi:!0}];class Uw{static init(){!function(n){Qb=n}(new Uw)}addToWindow(e){ke.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},ke.getAllAngularTestabilities=()=>e.getAllTestabilities(),ke.getAllAngularRootElements=()=>e.getAllRootElements(),ke.frameworkStabilizers||(ke.frameworkStabilizers=[]),ke.frameworkStabilizers.push(i=>{const r=ke.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?ho().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let zq=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const jf=new ye("EventManagerPlugins");let uy=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(H(jf),H(wt))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();class Gw{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=ho().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let wF=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})(),$f=(()=>{class n extends wF{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(CF),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(CF))}}return n.\u0275fac=function(t){return new(t||n)(H(ct))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();function CF(n){ho().remove(n)}const Ww={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jw=/%COMP%/g;function dy(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?dy(n,r,t):(r=r.replace(jw,n),t.push(r))}return t}function SF(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let hy=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new $w(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case E.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new nY(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case E.ShadowDom:return new iY(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=dy(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(H(uy),H($f),H(Df))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();class $w{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ww[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Ww[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Ww[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Fr.DashCase|Fr.Important)?e.style.setProperty(t,i,r&Fr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Fr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,SF(i)):this.eventManager.addEventListener(e,t,SF(i))}}class nY extends $w{constructor(e,t,i,r){super(e),this.component=i;const s=dy(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(jw,n)}(r+"-"+i.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(jw,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class iY extends $w{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=dy(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let rY=(()=>{class n extends Gw{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(H(ct))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const TF=["alt","control","meta","shift"],dY={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},IF={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hY={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fY=(()=>{class n extends Gw{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ho().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(TF.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&IF.hasOwnProperty(e)&&(e=IF[e]))}return dY[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),TF.forEach(s=>{s!=r&&hY[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(H(ct))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const vY=[{provide:Cr,useValue:_F},{provide:GR,useValue:function(){zw.makeCurrent(),Uw.init()},multi:!0},{provide:ct,useFactory:function(){return function(n){Ux=n}(document),document},deps:[]}],bY=JR(m$,"browser",vY),wY=[[],{provide:df,useValue:"root"},{provide:no,useFactory:function(){return new no},deps:[]},{provide:jf,useClass:rY,multi:!0,deps:[ct,wt,Cr]},{provide:jf,useClass:fY,multi:!0,deps:[ct]},[],{provide:hy,useClass:hy,deps:[uy,$f,Df]},{provide:$l,useExisting:hy},{provide:wF,useExisting:$f},{provide:$f,useClass:$f,deps:[ct]},{provide:Xb,useClass:Xb,deps:[wt]},{provide:uy,useClass:uy,deps:[jf,wt]},{provide:class{},useClass:zq,deps:[]},[]];let RF=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Df,useValue:t.appId},{provide:xF,useExisting:Df},Hq]}}}return n.\u0275fac=function(t){return new(t||n)(H(n,12))},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({providers:wY,imports:[Yi,w$]}),n})();function FF(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}"undefined"!=typeof window&&window;const Xi=1001,fi=1003,Jn=1006,za=1009,Ko=1015,hd=1016,Qf=1020,rc=1022,Qi=1023,fd=1026,Kf=1027,pd=2400,md=2401,Ki=3e3,sc=3001,Zf=35044,Jf=35048;class oc{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const ac=Math.PI/180,ep=180/Math.PI,Fi=[];for(let n=0;n<256;n++)Fi[n]=(n<16?"0":"")+n.toString(16);const aQ="undefined"!=typeof crypto&&"randomUUID"in crypto;function Lr(){if(aQ)return crypto.randomUUID().toUpperCase();const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Fi[255&n]+Fi[n>>8&255]+Fi[n>>16&255]+Fi[n>>24&255]+"-"+Fi[255&e]+Fi[e>>8&255]+"-"+Fi[e>>16&15|64]+Fi[e>>24&255]+"-"+Fi[63&t|128]+Fi[t>>8&255]+"-"+Fi[t>>16&255]+Fi[t>>24&255]+Fi[255&i]+Fi[i>>8&255]+Fi[i>>16&255]+Fi[i>>24&255]).toUpperCase()}function ki(n,e,t){return Math.max(e,Math.min(t,n))}function tp(n,e,t){return(1-t)*n+t*e}function oC(n){return 0==(n&n-1)&&0!==n}function lk(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class re{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}re.prototype.isVector2=!0;class Ei{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],m=r[0],_=r[3],y=r[6],g=r[1],x=r[4],v=r[7],M=r[2],D=r[5],w=r[8];return s[0]=o*m+a*g+l*M,s[3]=o*_+a*x+l*D,s[6]=o*y+a*v+l*w,s[1]=c*m+u*g+d*M,s[4]=c*_+u*x+d*D,s[7]=c*y+u*v+d*w,s[2]=h*m+f*g+p*M,s[5]=h*_+f*x+p*D,s[8]=h*y+f*v+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,p=t*d+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*c-u*i)*m,e[2]=(a*i-r*o)*m,e[3]=h*m,e[4]=(u*t-r*l)*m,e[5]=(r*s-a*t)*m,e[6]=f*m,e[7]=(i*l-c*t)*m,e[8]=(o*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+i*l,r[3]=t*o+i*c,r[6]=t*a+i*u,r[1]=-i*s+t*l,r[4]=-i*o+t*c,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function ck(n){if(0===n.length)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}function Ey(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function uk(n,e=0){let t=3735928559^e,i=1103547991^e;for(let s,r=0;r<n.length;r++)s=n.charCodeAt(r),t=Math.imul(t^s,2654435761),i=Math.imul(i^s,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&i)+(t>>>0)}let _d;Ei.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;class vd{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===_d&&(_d=Ey("canvas")),_d.width=e.width,_d.height=e.height;const i=_d.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=_d}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let wQ=0;class ei extends oc{constructor(e=ei.DEFAULT_IMAGE,t=ei.DEFAULT_MAPPING,i=Xi,r=Xi,s=Jn,o=1008,a=Qi,l=za,c=1,u=Ki){super(),Object.defineProperty(this,"id",{value:wQ++}),this.uuid=Lr(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new re(0,0),this.repeat=new re(1,1),this.center=new re(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ei,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=Lr()),!t&&void 0===e.images[r.uuid]){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(aC(r[o].isDataTexture?r[o].image:r[o]))}else s=aC(r);e.images[r.uuid]={uuid:r.uuid,url:s}}i.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case Xi:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case Xi:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function aC(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?vd.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}ei.DEFAULT_IMAGE=void 0,ei.DEFAULT_MAPPING=300,ei.prototype.isTexture=!0;class sn{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const o=.01,a=.1,l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],m=l[2],_=l[6],y=l[10];if(Math.abs(u-h)<o&&Math.abs(d-m)<o&&Math.abs(p-_)<o){if(Math.abs(u+h)<a&&Math.abs(d+m)<a&&Math.abs(p+_)<a&&Math.abs(c+f+y-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,v=(f+1)/2,M=(y+1)/2,D=(u+h)/4,w=(d+m)/4,k=(p+_)/4;return x>v&&x>M?x<o?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=D/i,s=w/i):v>M?v<o?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(v),i=D/r,s=k/r):M<o?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(M),i=w/s,r=k/s),this.set(i,r,s,t),this}let g=Math.sqrt((_-p)*(_-p)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(g)<.001&&(g=1),this.x=(_-p)/g,this.y=(d-m)/g,this.z=(h-u)/g,this.w=Math.acos((c+f+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}sn.prototype.isVector4=!0;class fo extends oc{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new sn(0,0,e,t),this.scissorTest=!1,this.viewport=new sn(0,0,e,t),this.texture=new ei(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Jn,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=_e({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}fo.prototype.isWebGLRenderTarget=!0,class extends fo{constructor(e,t,i){super(e,t);const r=this.texture;this.texture=[];for(let s=0;s<i;s++)this.texture[s]=r.clone()}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class dk extends fo{constructor(e,t,i){super(e,t,i),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}dk.prototype.isWebGLMultisampleRenderTarget=!0;class bn{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=m);if(d!==m||l!==h||c!==f||u!==p){let _=1-a;const y=l*h+c*f+u*p+d*m,g=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const M=Math.sqrt(x),D=Math.atan2(M,y*g);_=Math.sin(_*D)/M,a=Math.sin(a*D)/M}const v=a*g;if(l=l*_+h*v,c=c*_+f*v,u=u*_+p*v,d=d*_+m*v,_===1-a){const M=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=M,c*=M,u*=M,d*=M}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+l*f-c*h,e[t+1]=l*p+u*h+c*d-a*f,e[t+2]=c*p+u*f+a*h-l*d,e[t+3]=u*p-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),h=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ki(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}bn.prototype.isQuaternion=!0;class S{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(hk.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(hk.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,d=l*r+s*i-o*t,h=-s*t-o*i-a*r;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return lC.copy(this).projectOnVector(e),this.sub(lC)}reflect(e){return this.sub(lC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ki(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}S.prototype.isVector3=!0;const lC=new S,hk=new bn;class as{constructor(e=new S(1/0,1/0,1/0),t=new S(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=np.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),cC.copy(t.boundingBox),cC.applyMatrix4(e.matrixWorld),this.union(cC));const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,np),np.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ip),Sy.subVectors(this.max,ip),xd.subVectors(e.a,ip),bd.subVectors(e.b,ip),wd.subVectors(e.c,ip),Ua.subVectors(bd,xd),Ga.subVectors(wd,bd),lc.subVectors(xd,wd);let t=[0,-Ua.z,Ua.y,0,-Ga.z,Ga.y,0,-lc.z,lc.y,Ua.z,0,-Ua.x,Ga.z,0,-Ga.x,lc.z,0,-lc.x,-Ua.y,Ua.x,0,-Ga.y,Ga.x,0,-lc.y,lc.x,0];return!(!uC(t,xd,bd,wd,Sy)||(t=[1,0,0,0,1,0,0,0,1],!uC(t,xd,bd,wd,Sy)))&&(Dy.crossVectors(Ua,Ga),t=[Dy.x,Dy.y,Dy.z],uC(t,xd,bd,wd,Sy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return np.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(np).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Zo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}as.prototype.isBox3=!0;const Zo=[new S,new S,new S,new S,new S,new S,new S,new S],np=new S,cC=new as,xd=new S,bd=new S,wd=new S,Ua=new S,Ga=new S,lc=new S,ip=new S,Sy=new S,Dy=new S,cc=new S;function uC(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){cc.fromArray(n,s);const a=r.x*Math.abs(cc.x)+r.y*Math.abs(cc.y)+r.z*Math.abs(cc.z),l=e.dot(cc),c=t.dot(cc),u=i.dot(cc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const MQ=new as,fk=new S,dC=new S,hC=new S;class uc{constructor(e=new S,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):MQ.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){hC.subVectors(e,this.center);const t=hC.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(hC.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return dC.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(fk.copy(e.center).add(dC)),this.expandByPoint(fk.copy(e.center).sub(dC)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Jo=new S,fC=new S,Ay=new S,Wa=new S,pC=new S,Ty=new S,mC=new S;class dc{constructor(e=new S,t=new S(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Jo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Jo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Jo.copy(this.direction).multiplyScalar(t).add(this.origin),Jo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){fC.copy(e).add(t).multiplyScalar(.5),Ay.copy(t).sub(e).normalize(),Wa.copy(this.origin).sub(fC);const s=.5*e.distanceTo(t),o=-this.direction.dot(Ay),a=Wa.dot(this.direction),l=-Wa.dot(Ay),c=Wa.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*l-a,h=o*a-l,p=s*u,d>=0)if(h>=-p)if(h<=p){const m=1/u;d*=m,h*=m,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(Ay).multiplyScalar(h).add(fC),f}intersectSphere(e,t){Jo.subVectors(e.center,this.origin);const i=Jo.dot(this.direction),r=Jo.dot(Jo)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Jo)}intersectTriangle(e,t,i,r,s){pC.subVectors(t,e),Ty.subVectors(i,e),mC.crossVectors(pC,Ty);let a,o=this.direction.dot(mC);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Wa.subVectors(this.origin,e);const l=a*this.direction.dot(Ty.crossVectors(Wa,Ty));if(l<0)return null;const c=a*this.direction.dot(pC.cross(Wa));if(c<0||l+c>o)return null;const u=-a*Wa.dot(mC);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ue{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c,u,d,h,f,p,m,_){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=d,y[14]=h,y[3]=f,y[7]=p,y[11]=m,y[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ue).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Cd.setFromMatrixColumn(e,0).length(),s=1/Cd.setFromMatrixColumn(e,1).length(),o=1/Cd.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,p=a*u,m=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+p*c,t[5]=h-m*c,t[9]=-a*l,t[2]=m-h*c,t[6]=p+f*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*u,f=l*d,p=c*u,m=c*d;t[0]=h+m*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=m+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*u,f=l*d,p=c*u,m=c*d;t[0]=h-m*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=m-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*u,f=o*d,p=a*u,m=a*d;t[0]=l*u,t[4]=p*c-f,t[8]=h*c+m,t[1]=l*d,t[5]=m*c+h,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,f=o*c,p=a*l,m=a*c;t[0]=l*u,t[4]=m-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+p,t[10]=h-m*d}else if("XZY"===e.order){const h=o*l,f=o*c,p=a*l,m=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+m,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=m*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(EQ,e,SQ)}lookAt(e,t,i){const r=this.elements;return Nr.subVectors(e,t),0===Nr.lengthSq()&&(Nr.z=1),Nr.normalize(),ja.crossVectors(i,Nr),0===ja.lengthSq()&&(1===Math.abs(i.z)?Nr.x+=1e-4:Nr.z+=1e-4,Nr.normalize(),ja.crossVectors(i,Nr)),ja.normalize(),Iy.crossVectors(Nr,ja),r[0]=ja.x,r[4]=Iy.x,r[8]=Nr.x,r[1]=ja.y,r[5]=Iy.y,r[9]=Nr.y,r[2]=ja.z,r[6]=Iy.z,r[10]=Nr.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],m=i[6],_=i[10],y=i[14],g=i[3],x=i[7],v=i[11],M=i[15],D=r[0],w=r[4],k=r[8],z=r[12],N=r[1],O=r[5],oe=r[9],U=r[13],W=r[2],Y=r[6],L=r[10],B=r[14],K=r[3],he=r[7],Se=r[11],ve=r[15];return s[0]=o*D+a*N+l*W+c*K,s[4]=o*w+a*O+l*Y+c*he,s[8]=o*k+a*oe+l*L+c*Se,s[12]=o*z+a*U+l*B+c*ve,s[1]=u*D+d*N+h*W+f*K,s[5]=u*w+d*O+h*Y+f*he,s[9]=u*k+d*oe+h*L+f*Se,s[13]=u*z+d*U+h*B+f*ve,s[2]=p*D+m*N+_*W+y*K,s[6]=p*w+m*O+_*Y+y*he,s[10]=p*k+m*oe+_*L+y*Se,s[14]=p*z+m*U+_*B+y*ve,s[3]=g*D+x*N+v*W+M*K,s[7]=g*w+x*O+v*Y+M*he,s[11]=g*k+x*oe+v*L+M*Se,s[15]=g*z+x*U+v*B+M*ve,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*l*d-r*c*d-s*a*h+i*c*h+r*a*f-i*l*f)+e[7]*(+t*l*f-t*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*f-s*o*d+i*o*f+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*d+t*a*h+r*o*d-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],_=e[14],y=e[15],g=d*_*c-m*h*c+m*l*f-a*_*f-d*l*y+a*h*y,x=p*h*c-u*_*c-p*l*f+o*_*f+u*l*y-o*h*y,v=u*m*c-p*d*c+p*a*f-o*m*f-u*a*y+o*d*y,M=p*d*l-u*m*l-p*a*h+o*m*h+u*a*_-o*d*_,D=t*g+i*x+r*v+s*M;if(0===D)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/D;return e[0]=g*w,e[1]=(m*h*s-d*_*s-m*r*f+i*_*f+d*r*y-i*h*y)*w,e[2]=(a*_*s-m*l*s+m*r*c-i*_*c-a*r*y+i*l*y)*w,e[3]=(d*l*s-a*h*s-d*r*c+i*h*c+a*r*f-i*l*f)*w,e[4]=x*w,e[5]=(u*_*s-p*h*s+p*r*f-t*_*f-u*r*y+t*h*y)*w,e[6]=(p*l*s-o*_*s-p*r*c+t*_*c+o*r*y-t*l*y)*w,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*f+t*l*f)*w,e[8]=v*w,e[9]=(p*d*s-u*m*s-p*i*f+t*m*f+u*i*y-t*d*y)*w,e[10]=(o*m*s-p*a*s+p*i*c-t*m*c-o*i*y+t*a*y)*w,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*f-t*a*f)*w,e[12]=M*w,e[13]=(u*m*r-p*d*r+p*i*h-t*m*h-u*i*_+t*d*_)*w,e[14]=(p*a*r-o*m*r-p*i*l+t*m*l+o*i*_-t*a*_)*w,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*h+t*a*h)*w,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,p=s*d,m=o*u,_=o*d,y=a*d,g=l*c,x=l*u,v=l*d,M=i.x,D=i.y,w=i.z;return r[0]=(1-(m+y))*M,r[1]=(f+v)*M,r[2]=(p-x)*M,r[3]=0,r[4]=(f-v)*D,r[5]=(1-(h+y))*D,r[6]=(_+g)*D,r[7]=0,r[8]=(p+x)*w,r[9]=(_-g)*w,r[10]=(1-(h+m))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Cd.set(r[0],r[1],r[2]).length();const o=Cd.set(r[4],r[5],r[6]).length(),a=Cd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Vs.copy(this);const c=1/s,u=1/o,d=1/a;return Vs.elements[0]*=c,Vs.elements[1]*=c,Vs.elements[2]*=c,Vs.elements[4]*=u,Vs.elements[5]*=u,Vs.elements[6]*=u,Vs.elements[8]*=d,Vs.elements[9]*=d,Vs.elements[10]*=d,t.setFromRotationMatrix(Vs),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(i-r),u=(t+e)/(t-e),d=(i+r)/(i-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),c=1/(i-r),u=1/(o-s),d=(t+e)*l,h=(i+r)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}Ue.prototype.isMatrix4=!0;const Cd=new S,Vs=new Ue,EQ=new S(0,0,0),SQ=new S(1,1,1),ja=new S,Iy=new S,Nr=new S,pk=new Ue,mk=new bn;class po{constructor(e=0,t=0,i=0,r=po.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],d=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(ki(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ki(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(ki(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ki(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(ki(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-ki(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return pk.makeRotationFromQuaternion(e),this.setFromRotationMatrix(pk,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return mk.setFromEuler(this),this.setFromQuaternion(mk,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new S(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}po.prototype.isEuler=!0,po.DefaultOrder="XYZ",po.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class gk{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let DQ=0;const yk=new S,Md=new bn,ea=new Ue,Ry=new S,rp=new S,AQ=new S,TQ=new bn,_k=new S(1,0,0),vk=new S(0,1,0),xk=new S(0,0,1),IQ={type:"added"},bk={type:"removed"};class jt extends oc{constructor(){super(),Object.defineProperty(this,"id",{value:DQ++}),this.uuid=Lr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=jt.DefaultUp.clone();const e=new S,t=new po,i=new bn,r=new S(1,1,1);t._onChange(function(){i.setFromEuler(t,!1)}),i._onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ue},normalMatrix:{value:new Ei}}),this.matrix=new Ue,this.matrixWorld=new Ue,this.matrixAutoUpdate=jt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new gk,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Md.setFromAxisAngle(e,t),this.quaternion.multiply(Md),this}rotateOnWorldAxis(e,t){return Md.setFromAxisAngle(e,t),this.quaternion.premultiply(Md),this}rotateX(e){return this.rotateOnAxis(_k,e)}rotateY(e){return this.rotateOnAxis(vk,e)}rotateZ(e){return this.rotateOnAxis(xk,e)}translateOnAxis(e,t){return yk.copy(e).applyQuaternion(this.quaternion),this.position.add(yk.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_k,e)}translateY(e){return this.translateOnAxis(vk,e)}translateZ(e){return this.translateOnAxis(xk,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ea.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Ry.copy(e):Ry.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),rp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ea.lookAt(rp,Ry,this.up):ea.lookAt(Ry,rp,this.up),this.quaternion.setFromRotationMatrix(ea),r&&(ea.extractRotation(r.matrixWorld),Md.setFromRotationMatrix(ea),this.quaternion.premultiply(Md.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(IQ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(bk)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(bk)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ea.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ea.multiply(e.parent.matrixWorld)),e.applyMatrix4(ea),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(void 0!==o)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rp,e,AQ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rp,TQ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function s(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++)s(e.shapes,l[c]);else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++)r.animations.push(s(e.animations,this.animations[a]))}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),f=o(e.animations);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),f.length>0&&(i.animations=f)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let i=0;i<e.children.length;i++)this.add(e.children[i].clone());return this}}jt.DefaultUp=new S(0,1,0),jt.DefaultMatrixAutoUpdate=!0,jt.prototype.isObject3D=!0;const Hs=new S,ta=new S,gC=new S,na=new S,Ed=new S,Sd=new S,wk=new S,yC=new S,_C=new S,vC=new S;class ti{constructor(e=new S,t=new S,i=new S){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Hs.subVectors(e,t),r.cross(Hs);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Hs.subVectors(r,t),ta.subVectors(i,t),gC.subVectors(e,t);const o=Hs.dot(Hs),a=Hs.dot(ta),l=Hs.dot(gC),c=ta.dot(ta),u=ta.dot(gC),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,na),na.x>=0&&na.y>=0&&na.x+na.y<=1}static getUV(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,na),l.set(0,0),l.addScaledVector(s,na.x),l.addScaledVector(o,na.y),l.addScaledVector(a,na.z),l}static isFrontFacing(e,t,i,r){return Hs.subVectors(i,t),ta.subVectors(e,t),Hs.cross(ta).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Hs.subVectors(this.c,this.b),ta.subVectors(this.a,this.b),.5*Hs.cross(ta).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ti.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ti.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return ti.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return ti.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ti.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Ed.subVectors(r,i),Sd.subVectors(s,i),yC.subVectors(e,i);const l=Ed.dot(yC),c=Sd.dot(yC);if(l<=0&&c<=0)return t.copy(i);_C.subVectors(e,r);const u=Ed.dot(_C),d=Sd.dot(_C);if(u>=0&&d<=u)return t.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Ed,o);vC.subVectors(e,s);const f=Ed.dot(vC),p=Sd.dot(vC);if(p>=0&&f<=p)return t.copy(s);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(Sd,a);const _=u*p-f*d;if(_<=0&&d-u>=0&&f-p>=0)return wk.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(wk,a);const y=1/(_+m+h);return o=m*y,a=h*y,t.copy(i).addScaledVector(Ed,o).addScaledVector(Sd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let RQ=0;class Oi extends oc{constructor(){super(),Object.defineProperty(this,"id",{value:RQ++}),this.uuid=Lr(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.format=Qi,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==Qi&&(i.format=this.format),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Oi.prototype.isMaterial=!0;const Ck={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zs={h:0,s:0,l:0},Py={h:0,s:0,l:0};function xC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function bC(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function wC(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Ie=(()=>{class n{constructor(t,i,r){return void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,i,r){return this.r=t,this.g=i,this.b=r,this}setHSL(t,i,r){if(t=function(n,e){return(n%e+e)%e}(t,1),i=ki(i,0,1),r=ki(r,0,1),0===i)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+i):r+i-r*i,o=2*r-s;this.r=xC(o,s,t+1/3),this.g=xC(o,s,t),this.b=xC(o,s,t-1/3)}return this}setStyle(t){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseInt(s[2],10)/100,u=parseInt(s[3],10)/100;return i(s[4]),this.setHSL(l,c,u)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=r[1],o=s.length;if(3===o)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(6===o)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const i=Ck[t.toLowerCase()];return void 0!==i?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,i=2){return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}copyLinearToGamma(t,i=2){const r=i>0?1/i:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=bC(t.r),this.g=bC(t.g),this.b=bC(t.b),this}copyLinearToSRGB(t){return this.r=wC(t.r),this.g=wC(t.g),this.b=wC(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const i=this.r,r=this.g,s=this.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4}l/=6}return t.h=l,t.s=c,t.l=u,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,i,r){return this.getHSL(zs),zs.h+=t,zs.s+=i,zs.l+=r,this.setHSL(zs.h,zs.s,zs.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(zs),t.getHSL(Py);const r=tp(zs.h,Py.h,i),s=tp(zs.s,Py.s,i),o=tp(zs.l,Py.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return n.NAMES=Ck,n})();Ie.prototype.isColor=!0,Ie.prototype.r=1,Ie.prototype.g=1,Ie.prototype.b=1;class ia extends Oi{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}ia.prototype.isMeshBasicMaterial=!0;const pn=new S,Fy=new re;class on{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=Zf,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Ie),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new re),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new S),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new sn),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Fy.fromBufferAttribute(this,t),Fy.applyMatrix3(e),this.setXY(t,Fy.x,Fy.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)pn.fromBufferAttribute(this,t),pn.applyMatrix3(e),this.setXYZ(t,pn.x,pn.y,pn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)pn.x=this.getX(t),pn.y=this.getY(t),pn.z=this.getZ(t),pn.applyMatrix4(e),this.setXYZ(t,pn.x,pn.y,pn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)pn.x=this.getX(t),pn.y=this.getY(t),pn.z=this.getZ(t),pn.applyNormalMatrix(e),this.setXYZ(t,pn.x,pn.y,pn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)pn.x=this.getX(t),pn.y=this.getY(t),pn.z=this.getZ(t),pn.transformDirection(e),this.setXYZ(t,pn.x,pn.y,pn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Zf&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}on.prototype.isBufferAttribute=!0;class CC extends on{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class MC extends on{constructor(e,t,i){super(new Uint32Array(e),t,i)}}(class extends on{constructor(e,t,i){super(new Uint16Array(e),t,i)}}).prototype.isFloat16BufferAttribute=!0;class Ge extends on{constructor(e,t,i){super(new Float32Array(e),t,i)}}let VQ=0;const ls=new Ue,EC=new jt,Dd=new S,Br=new as,sp=new as,Si=new S;class dt extends oc{constructor(){super(),Object.defineProperty(this,"id",{value:VQ++}),this.uuid=Lr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(ck(e)>65535?MC:CC)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Ei).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ls.makeRotationFromQuaternion(e),this.applyMatrix4(ls),this}rotateX(e){return ls.makeRotationX(e),this.applyMatrix4(ls),this}rotateY(e){return ls.makeRotationY(e),this.applyMatrix4(ls),this}rotateZ(e){return ls.makeRotationZ(e),this.applyMatrix4(ls),this}translate(e,t,i){return ls.makeTranslation(e,t,i),this.applyMatrix4(ls),this}scale(e,t,i){return ls.makeScale(e,t,i),this.applyMatrix4(ls),this}lookAt(e){return EC.lookAt(e),EC.updateMatrix(),this.applyMatrix4(EC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Dd).negate(),this.translate(Dd.x,Dd.y,Dd.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ge(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new as);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new S(-1/0,-1/0,-1/0),new S(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Br.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Si.addVectors(this.boundingBox.min,Br.min),this.boundingBox.expandByPoint(Si),Si.addVectors(this.boundingBox.max,Br.max),this.boundingBox.expandByPoint(Si)):(this.boundingBox.expandByPoint(Br.min),this.boundingBox.expandByPoint(Br.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new uc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new S,1/0);if(e){const i=this.boundingSphere.center;if(Br.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)sp.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Si.addVectors(Br.min,sp.min),Br.expandByPoint(Si),Si.addVectors(Br.max,sp.max),Br.expandByPoint(Si)):(Br.expandByPoint(sp.min),Br.expandByPoint(sp.max));Br.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Si.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Si));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Si.fromBufferAttribute(a,c),l&&(Dd.fromBufferAttribute(e,c),Si.add(Dd)),r=Math.max(r,i.distanceToSquared(Si))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new on(new Float32Array(4*a),4));const l=t.tangent.array,c=[],u=[];for(let N=0;N<a;N++)c[N]=new S,u[N]=new S;const d=new S,h=new S,f=new S,p=new re,m=new re,_=new re,y=new S,g=new S;function x(N,O,oe){d.fromArray(r,3*N),h.fromArray(r,3*O),f.fromArray(r,3*oe),p.fromArray(o,2*N),m.fromArray(o,2*O),_.fromArray(o,2*oe),h.sub(d),f.sub(d),m.sub(p),_.sub(p);const U=1/(m.x*_.y-_.x*m.y);!isFinite(U)||(y.copy(h).multiplyScalar(_.y).addScaledVector(f,-m.y).multiplyScalar(U),g.copy(f).multiplyScalar(m.x).addScaledVector(h,-_.x).multiplyScalar(U),c[N].add(y),c[O].add(y),c[oe].add(y),u[N].add(g),u[O].add(g),u[oe].add(g))}let v=this.groups;0===v.length&&(v=[{start:0,count:i.length}]);for(let N=0,O=v.length;N<O;++N){const oe=v[N],U=oe.start;for(let Y=U,L=U+oe.count;Y<L;Y+=3)x(i[Y+0],i[Y+1],i[Y+2])}const M=new S,D=new S,w=new S,k=new S;function z(N){w.fromArray(s,3*N),k.copy(w);const O=c[N];M.copy(O),M.sub(w.multiplyScalar(w.dot(O))).normalize(),D.crossVectors(k,O);const U=D.dot(u[N])<0?-1:1;l[4*N]=M.x,l[4*N+1]=M.y,l[4*N+2]=M.z,l[4*N+3]=U}for(let N=0,O=v.length;N<O;++N){const oe=v[N],U=oe.start;for(let Y=U,L=U+oe.count;Y<L;Y+=3)z(i[Y+0]),z(i[Y+1]),z(i[Y+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new on(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new S,s=new S,o=new S,a=new S,l=new S,c=new S,u=new S,d=new S;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),m=e.getX(h+1),_=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,_),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,_),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(void 0===e.attributes[r])continue;const o=i[r].array,a=e.attributes[r],l=a.array,c=a.itemSize*t,u=Math.min(l.length,o.length-c);for(let d=0,h=c;d<u;d++,h++)o[h]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Si.fromBufferAttribute(e,t),Si.normalize(),e.setXYZ(t,Si.x,Si.y,Si.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let m=0,_=l.length;m<_;m++){f=a.isInterleavedBufferAttribute?l[m]*a.data.stride+a.offset:l[m]*u;for(let y=0;y<u;y++)h[p++]=c[f++]}return new on(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new dt,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}dt.prototype.isBufferGeometry=!0;const Mk=new Ue,Ad=new dc,SC=new uc,$a=new S,qa=new S,Ya=new S,DC=new S,AC=new S,TC=new S,ky=new S,Oy=new S,Ly=new S,Ny=new re,By=new re,Vy=new re,IC=new S,Hy=new S;class Vn extends jt{constructor(e=new dt,t=new ia){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),SC.copy(i.boundingSphere),SC.applyMatrix4(s),!1===e.ray.intersectsSphere(SC))||(Mk.copy(s).invert(),Ad.copy(e.ray).applyMatrix4(Mk),null!==i.boundingBox&&!1===Ad.intersectsBox(i.boundingBox)))return;let o;if(i.isBufferGeometry){const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,d=i.attributes.uv,h=i.attributes.uv2,f=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(r))for(let m=0,_=f.length;m<_;m++){const y=f[m],g=r[y.materialIndex];for(let M=Math.max(y.start,p.start),D=Math.min(a.count,Math.min(y.start+y.count,p.start+p.count));M<D;M+=3){const w=a.getX(M),k=a.getX(M+1),z=a.getX(M+2);o=zy(this,g,e,Ad,l,c,u,d,h,w,k,z),o&&(o.faceIndex=Math.floor(M/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else for(let y=Math.max(0,p.start),g=Math.min(a.count,p.start+p.count);y<g;y+=3){const x=a.getX(y),v=a.getX(y+1),M=a.getX(y+2);o=zy(this,r,e,Ad,l,c,u,d,h,x,v,M),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let m=0,_=f.length;m<_;m++){const y=f[m],g=r[y.materialIndex];for(let M=Math.max(y.start,p.start),D=Math.min(l.count,Math.min(y.start+y.count,p.start+p.count));M<D;M+=3)o=zy(this,g,e,Ad,l,c,u,d,h,M,M+1,M+2),o&&(o.faceIndex=Math.floor(M/3),o.face.materialIndex=y.materialIndex,t.push(o))}else for(let y=Math.max(0,p.start),g=Math.min(l.count,p.start+p.count);y<g;y+=3)o=zy(this,r,e,Ad,l,c,u,d,h,y,y+1,y+2),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function zy(n,e,t,i,r,s,o,a,l,c,u,d){$a.fromBufferAttribute(r,c),qa.fromBufferAttribute(r,u),Ya.fromBufferAttribute(r,d);const h=n.morphTargetInfluences;if(s&&h){ky.set(0,0,0),Oy.set(0,0,0),Ly.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const _=h[p],y=s[p];0!==_&&(DC.fromBufferAttribute(y,c),AC.fromBufferAttribute(y,u),TC.fromBufferAttribute(y,d),o?(ky.addScaledVector(DC,_),Oy.addScaledVector(AC,_),Ly.addScaledVector(TC,_)):(ky.addScaledVector(DC.sub($a),_),Oy.addScaledVector(AC.sub(qa),_),Ly.addScaledVector(TC.sub(Ya),_)))}$a.add(ky),qa.add(Oy),Ya.add(Ly)}n.isSkinnedMesh&&(n.boneTransform(c,$a),n.boneTransform(u,qa),n.boneTransform(d,Ya));const f=function(n,e,t,i,r,s,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===l)return null;Hy.copy(a),Hy.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Hy);return c<t.near||c>t.far?null:{distance:c,point:Hy.clone(),object:n}}(n,e,t,i,$a,qa,Ya,IC);if(f){a&&(Ny.fromBufferAttribute(a,c),By.fromBufferAttribute(a,u),Vy.fromBufferAttribute(a,d),f.uv=ti.getUV(IC,$a,qa,Ya,Ny,By,Vy,new re)),l&&(Ny.fromBufferAttribute(l,c),By.fromBufferAttribute(l,u),Vy.fromBufferAttribute(l,d),f.uv2=ti.getUV(IC,$a,qa,Ya,Ny,By,Vy,new re));const p={a:c,b:u,c:d,normal:new S,materialIndex:0};ti.getNormal($a,qa,Ya,p.normal),f.face=p}return f}Vn.prototype.isMesh=!0;class hc extends dt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function p(m,_,y,g,x,v,M,D,w,k,z){const N=v/w,O=M/k,oe=v/2,U=M/2,W=D/2,Y=w+1,L=k+1;let B=0,K=0;const he=new S;for(let Se=0;Se<L;Se++){const ve=Se*O-U;for(let je=0;je<Y;je++)he[m]=(je*N-oe)*g,he[_]=ve*x,he[y]=W,c.push(he.x,he.y,he.z),he[m]=0,he[_]=0,he[y]=D>0?1:-1,u.push(he.x,he.y,he.z),d.push(je/w),d.push(1-Se/k),B+=1}for(let Se=0;Se<k;Se++)for(let ve=0;ve<w;ve++){const ae=h+ve+Y*(Se+1),fe=h+(ve+1)+Y*(Se+1),Le=h+(ve+1)+Y*Se;l.push(h+ve+Y*Se,ae,Le),l.push(ae,fe,Le),K+=6}a.addGroup(f,K,z),f+=K,h+=B}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ge(c,3)),this.setAttribute("normal",new Ge(u,3)),this.setAttribute("uv",new Ge(d,2))}static fromJSON(e){return new hc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Td(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function Zi(n){const e={};for(let t=0;t<n.length;t++){const i=Td(n[t]);for(const r in i)e[r]=i[r]}return e}const zQ={clone:Td,merge:Zi};class ra extends Oi{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Td(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}ra.prototype.isShaderMaterial=!0;class Uy extends jt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Ue,this.projectionMatrix=new Ue,this.projectionMatrixInverse=new Ue}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Uy.prototype.isCamera=!0;class ni extends Uy{constructor(e=50,t=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ep*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ac*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ep*Math.atan(Math.tan(.5*ac*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ac*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}ni.prototype.isPerspectiveCamera=!0;class RC extends jt{constructor(e,t,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const r=new ni(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new S(1,0,0)),this.add(r);const s=new ni(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new S(-1,0,0)),this.add(s);const o=new ni(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new S(0,1,0)),this.add(o);const a=new ni(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new S(0,-1,0)),this.add(a);const l=new ni(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new S(0,0,1)),this.add(l);const c=new ni(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new S(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;const h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(d),e.xr.enabled=u}}class op extends ei{constructor(e,t,i,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,l,c,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}op.prototype.isCubeTexture=!0;class PC extends fo{constructor(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),super(e,e,t),this.texture=new op(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Jn,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Qi,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new hc(5,5,5),s=new ra({name:"CubemapFromEquirect",uniforms:Td(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Vn(r,s),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=Jn),new RC(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}PC.prototype.isWebGLCubeRenderTarget=!0;const FC=new S,WQ=new S,jQ=new Ei;class sa{constructor(e=new S(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=FC.subVectors(i,t).cross(WQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(FC),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||jQ.getNormalMatrix(e),r=this.coplanarPoint(FC).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}sa.prototype.isPlane=!0;const Pd=new uc,Gy=new S;class Wy{constructor(e=new sa,t=new sa,i=new sa,r=new sa,s=new sa,o=new sa){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],f=i[9],p=i[10],m=i[11],_=i[12],y=i[13],g=i[14],x=i[15];return t[0].setComponents(a-r,d-l,m-h,x-_).normalize(),t[1].setComponents(a+r,d+l,m+h,x+_).normalize(),t[2].setComponents(a+s,d+c,m+f,x+y).normalize(),t[3].setComponents(a-s,d-c,m-f,x-y).normalize(),t[4].setComponents(a-o,d-u,m-p,x-g).normalize(),t[5].setComponents(a+o,d+u,m+p,x+g).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Pd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Pd)}intersectsSprite(e){return Pd.center.set(0,0,0),Pd.radius=.7071067811865476,Pd.applyMatrix4(e.matrixWorld),this.intersectsSphere(Pd)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Gy.x=r.normal.x>0?e.max.x:e.min.x,Gy.y=r.normal.y>0?e.max.y:e.min.y,Gy.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Gy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Ek(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function $Q(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function(c,u){if(c.isGLBufferAttribute){const h=i.get(c);return void((!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);void 0===d?i.set(c,function(c,u){const d=c.array,h=c.usage,f=n.createBuffer();n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback();let p=5126;return d instanceof Float32Array?p=5126:d instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):d instanceof Uint16Array?c.isFloat16BufferAttribute?t?p=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):p=5123:d instanceof Int16Array?p=5122:d instanceof Uint32Array?p=5125:d instanceof Int32Array?p=5124:d instanceof Int8Array?p=5120:(d instanceof Uint8Array||d instanceof Uint8ClampedArray)&&(p=5121),{buffer:f,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class fc extends dt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,f=[],p=[],m=[],_=[];for(let y=0;y<u;y++){const g=y*h-o;for(let x=0;x<c;x++)p.push(x*d-s,-g,0),m.push(0,0,1),_.push(x/a),_.push(1-y/l)}for(let y=0;y<l;y++)for(let g=0;g<a;g++){const v=g+c*(y+1),M=g+1+c*(y+1),D=g+1+c*y;f.push(g+c*y,v,D),f.push(v,M,D)}this.setIndex(f),this.setAttribute("position",new Ge(p,3)),this.setAttribute("normal",new Ge(m,3)),this.setAttribute("uv",new Ge(_,2))}static fromJSON(e){return new fc(e.width,e.height,e.widthSegments,e.heightSegments)}}const Lt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},we={common:{diffuse:{value:new Ie(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ei},uv2Transform:{value:new Ei},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new re(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ie(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ie(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ei}},sprite:{diffuse:{value:new Ie(16777215)},opacity:{value:1},center:{value:new re(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ei}}},mo={basic:{uniforms:Zi([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.fog]),vertexShader:Lt.meshbasic_vert,fragmentShader:Lt.meshbasic_frag},lambert:{uniforms:Zi([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.fog,we.lights,{emissive:{value:new Ie(0)}}]),vertexShader:Lt.meshlambert_vert,fragmentShader:Lt.meshlambert_frag},phong:{uniforms:Zi([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.fog,we.lights,{emissive:{value:new Ie(0)},specular:{value:new Ie(1118481)},shininess:{value:30}}]),vertexShader:Lt.meshphong_vert,fragmentShader:Lt.meshphong_frag},standard:{uniforms:Zi([we.common,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.roughnessmap,we.metalnessmap,we.fog,we.lights,{emissive:{value:new Ie(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag},toon:{uniforms:Zi([we.common,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.gradientmap,we.fog,we.lights,{emissive:{value:new Ie(0)}}]),vertexShader:Lt.meshtoon_vert,fragmentShader:Lt.meshtoon_frag},matcap:{uniforms:Zi([we.common,we.bumpmap,we.normalmap,we.displacementmap,we.fog,{matcap:{value:null}}]),vertexShader:Lt.meshmatcap_vert,fragmentShader:Lt.meshmatcap_frag},points:{uniforms:Zi([we.points,we.fog]),vertexShader:Lt.points_vert,fragmentShader:Lt.points_frag},dashed:{uniforms:Zi([we.common,we.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lt.linedashed_vert,fragmentShader:Lt.linedashed_frag},depth:{uniforms:Zi([we.common,we.displacementmap]),vertexShader:Lt.depth_vert,fragmentShader:Lt.depth_frag},normal:{uniforms:Zi([we.common,we.bumpmap,we.normalmap,we.displacementmap,{opacity:{value:1}}]),vertexShader:Lt.meshnormal_vert,fragmentShader:Lt.meshnormal_frag},sprite:{uniforms:Zi([we.sprite,we.fog]),vertexShader:Lt.sprite_vert,fragmentShader:Lt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ei},t2D:{value:null}},vertexShader:Lt.background_vert,fragmentShader:Lt.background_frag},cube:{uniforms:Zi([we.envmap,{opacity:{value:1}}]),vertexShader:Lt.cube_vert,fragmentShader:Lt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Lt.equirect_vert,fragmentShader:Lt.equirect_frag},distanceRGBA:{uniforms:Zi([we.common,we.displacementmap,{referencePosition:{value:new S},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Lt.distanceRGBA_vert,fragmentShader:Lt.distanceRGBA_frag},shadow:{uniforms:Zi([we.lights,we.fog,{color:{value:new Ie(0)},opacity:{value:1}}]),vertexShader:Lt.shadow_vert,fragmentShader:Lt.shadow_frag}};function zZ(n,e,t,i,r){const s=new Ie(0);let a,l,o=0,c=null,u=0,d=null;function f(p,m){t.buffers.color.setClear(p.r,p.g,p.b,m,r)}return{getClearColor:function(){return s},setClearColor:function(p,m=1){s.set(p),o=m,f(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,f(s,o)},render:function(p,m){let _=!1,y=!0===m.isScene?m.background:null;y&&y.isTexture&&(y=e.get(y));const g=n.xr,x=g.getSession&&g.getSession();x&&"additive"===x.environmentBlendMode&&(y=null),null===y?f(s,o):y&&y.isColor&&(f(y,1),_=!0),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||306===y.mapping)?(void 0===l&&(l=new Vn(new hc(1,1,1),new ra({name:"BackgroundCubeMaterial",uniforms:Td(mo.cube.uniforms),vertexShader:mo.cube.vertexShader,fragmentShader:mo.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(v,M,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=y,l.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,(c!==y||u!==y.version||d!==n.toneMapping)&&(l.material.needsUpdate=!0,c=y,u=y.version,d=n.toneMapping),p.unshift(l,l.geometry,l.material,0,0,null)):y&&y.isTexture&&(void 0===a&&(a=new Vn(new fc(2,2),new ra({name:"BackgroundMaterial",uniforms:Td(mo.background.uniforms),vertexShader:mo.background.vertexShader,fragmentShader:mo.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=y,!0===y.matrixAutoUpdate&&y.updateMatrix(),a.material.uniforms.uvTransform.value.copy(y.matrix),(c!==y||u!==y.version||d!==n.toneMapping)&&(a.material.needsUpdate=!0,c=y,u=y.version,d=n.toneMapping),p.unshift(a,a.geometry,a.material,0,0,null))}}}function UZ(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=m(null);let c=l;function h(U){return i.isWebGL2?n.bindVertexArray(U):s.bindVertexArrayOES(U)}function f(U){return i.isWebGL2?n.deleteVertexArray(U):s.deleteVertexArrayOES(U)}function m(U){const W=[],Y=[],L=[];for(let B=0;B<r;B++)W[B]=0,Y[B]=0,L[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:Y,attributeDivisors:L,object:U,attributes:{},index:null}}function g(){const U=c.newAttributes;for(let W=0,Y=U.length;W<Y;W++)U[W]=0}function x(U){v(U,0)}function v(U,W){const L=c.enabledAttributes,B=c.attributeDivisors;c.newAttributes[U]=1,0===L[U]&&(n.enableVertexAttribArray(U),L[U]=1),B[U]!==W&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](U,W),B[U]=W)}function M(){const U=c.newAttributes,W=c.enabledAttributes;for(let Y=0,L=W.length;Y<L;Y++)W[Y]!==U[Y]&&(n.disableVertexAttribArray(Y),W[Y]=0)}function D(U,W,Y,L,B,K){!0!==i.isWebGL2||5124!==Y&&5125!==Y?n.vertexAttribPointer(U,W,Y,L,B,K):n.vertexAttribIPointer(U,W,Y,B,K)}function O(){oe(),c!==l&&(c=l,h(c.object))}function oe(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(U,W,Y,L,B){let K=!1;if(o){const he=function(U,W,Y){const L=!0===Y.wireframe;let B=a[U.id];void 0===B&&(B={},a[U.id]=B);let K=B[W.id];void 0===K&&(K={},B[W.id]=K);let he=K[L];return void 0===he&&(he=m(i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()),K[L]=he),he}(L,Y,W);c!==he&&(c=he,h(c.object)),K=function(U,W){const Y=c.attributes,L=U.attributes;let B=0;for(const K in L){const he=Y[K],Se=L[K];if(void 0===he||he.attribute!==Se||he.data!==Se.data)return!0;B++}return c.attributesNum!==B||c.index!==W}(L,B),K&&function(U,W){const Y={},L=U.attributes;let B=0;for(const K in L){const he=L[K],Se={};Se.attribute=he,he.data&&(Se.data=he.data),Y[K]=Se,B++}c.attributes=Y,c.attributesNum=B,c.index=W}(L,B)}else{const he=!0===W.wireframe;(c.geometry!==L.id||c.program!==Y.id||c.wireframe!==he)&&(c.geometry=L.id,c.program=Y.id,c.wireframe=he,K=!0)}!0===U.isInstancedMesh&&(K=!0),null!==B&&t.update(B,34963),K&&(function(U,W,Y,L){if(!1===i.isWebGL2&&(U.isInstancedMesh||L.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;g();const B=L.attributes,K=Y.getAttributes(),he=W.defaultAttributeValues;for(const Se in K){const ve=K[Se];if(ve.location>=0){let je=B[Se];if(void 0===je&&("instanceMatrix"===Se&&U.instanceMatrix&&(je=U.instanceMatrix),"instanceColor"===Se&&U.instanceColor&&(je=U.instanceColor)),void 0!==je){const ae=je.normalized,fe=je.itemSize,Le=t.get(je);if(void 0===Le)continue;const X=Le.buffer,We=Le.type,rt=Le.bytesPerElement;if(je.isInterleavedBufferAttribute){const Ae=je.data,Ve=Ae.stride,St=je.offset;if(Ae&&Ae.isInstancedInterleavedBuffer){for(let ne=0;ne<ve.locationSize;ne++)v(ve.location+ne,Ae.meshPerAttribute);!0!==U.isInstancedMesh&&void 0===L._maxInstanceCount&&(L._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let ne=0;ne<ve.locationSize;ne++)x(ve.location+ne);n.bindBuffer(34962,X);for(let ne=0;ne<ve.locationSize;ne++)D(ve.location+ne,fe/ve.locationSize,We,ae,Ve*rt,(St+fe/ve.locationSize*ne)*rt)}else{if(je.isInstancedBufferAttribute){for(let Ae=0;Ae<ve.locationSize;Ae++)v(ve.location+Ae,je.meshPerAttribute);!0!==U.isInstancedMesh&&void 0===L._maxInstanceCount&&(L._maxInstanceCount=je.meshPerAttribute*je.count)}else for(let Ae=0;Ae<ve.locationSize;Ae++)x(ve.location+Ae);n.bindBuffer(34962,X);for(let Ae=0;Ae<ve.locationSize;Ae++)D(ve.location+Ae,fe/ve.locationSize,We,ae,fe*rt,fe/ve.locationSize*Ae*rt)}}else if(void 0!==he){const ae=he[Se];if(void 0!==ae)switch(ae.length){case 2:n.vertexAttrib2fv(ve.location,ae);break;case 3:n.vertexAttrib3fv(ve.location,ae);break;case 4:n.vertexAttrib4fv(ve.location,ae);break;default:n.vertexAttrib1fv(ve.location,ae)}}}}M()}(U,W,Y,L),null!==B&&n.bindBuffer(34963,t.get(B).buffer))},reset:O,resetDefaultState:oe,dispose:function(){O();for(const U in a){const W=a[U];for(const Y in W){const L=W[Y];for(const B in L)f(L[B].object),delete L[B];delete W[Y]}delete a[U]}},releaseStatesOfGeometry:function(U){if(void 0===a[U.id])return;const W=a[U.id];for(const Y in W){const L=W[Y];for(const B in L)f(L[B].object),delete L[B];delete W[Y]}delete a[U.id]},releaseStatesOfProgram:function(U){for(const W in a){const Y=a[W];if(void 0===Y[U.id])continue;const L=Y[U.id];for(const B in L)f(L[B].object),delete L[B];delete Y[U.id]}},initAttributes:g,enableAttribute:x,disableUnusedAttributes:M}}function GZ(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function(c){s=c},this.render=function(c,u){n.drawArrays(s,c,u),t.update(u,s,1)},this.renderInstances=function(c,u,d){if(0===d)return;let h,f;if(r)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,u,d),t.update(u,s,d)}}function WZ(n,e,t){let i;function s(w){if("highp"===w){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";w="mediump"}return"mediump"===w&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),_=n.getParameter(36347),y=n.getParameter(36348),g=n.getParameter(36349),x=h>0,v=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const w=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:_,maxVaryings:y,maxFragmentUniforms:g,vertexTextures:x,floatFragmentTextures:v,floatVertexTextures:x&&v,maxSamples:o?n.getParameter(36183):0}}function jZ(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new sa,a=new Ei,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,p){const m=null!==d?d.length:0;let _=null;if(0!==m){if(_=l.value,!0!==p||null===_){const y=f+4*m,g=h.matrixWorldInverse;a.getNormalMatrix(g),(null===_||_.length<y)&&(_=new Float32Array(y));for(let x=0,v=f;x!==m;++x,v+=4)o.copy(d[x]).applyMatrix4(g,a),o.normal.toArray(_,v),_[v+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,_}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const p=0!==d.length||h||0!==i||r;return r=h,t=u(d,f,0),i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const p=d.clippingPlanes,m=d.clipIntersection,_=d.clipShadows,y=n.get(d);if(!r||null===p||0===p.length||s&&!_)s?u(null):c();else{const g=s?0:i,x=4*g;let v=y.clippingState||null;l.value=v,v=u(p,h,x,f);for(let M=0;M!==x;++M)v[M]=t[M];y.clippingState=v,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=g}}}function $Z(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=n.getRenderTarget(),u=new PC(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),n.setRenderTarget(c),o.addEventListener("dispose",r),t(u.texture,o.mapping)}return null}}}return o},dispose:function(){e=new WeakMap}}}mo.physical={uniforms:Zi([mo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new re(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ie(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new re},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ie(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Ie(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag};class jy extends Uy{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}jy.prototype.isOrthographicCamera=!0;class Fd extends ra{constructor(e){super(e),this.type="RawShaderMaterial"}}Fd.prototype.isRawShaderMaterial=!0;const go=Math.pow(2,8),Sk=[.125,.215,.35,.446,.526,.582],Dk=5+Sk.length,Qa={[Ki]:0,[sc]:1,3002:2,3004:3,3005:4,3006:5,3007:6},kC=new jy,{_lodPlanes:ap,_sizeLods:Ak,_sigmas:$y}=XZ(),Tk=new Ie;let OC=null;const pc=(1+Math.sqrt(5))/2,Ld=1/pc,Ik=[new S(1,1,1),new S(-1,1,1),new S(1,1,-1),new S(-1,1,-1),new S(0,pc,Ld),new S(0,pc,-Ld),new S(Ld,0,pc),new S(-Ld,0,pc),new S(pc,Ld,0),new S(-pc,Ld,0)];class qZ{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(n){const e=new Float32Array(20),t=new S(0,1,0);return new Fd({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:Qa[Ki]},outputEncoding:{value:Qa[Ki]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){OC=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Fk(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Pk(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<ap.length;e++)ap[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(OC),e.scissorTest=!1,qy(e,0,0,e.width,e.height)}_fromTexture(e){OC=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:fi,minFilter:fi,generateMipmaps:!1,type:za,format:1023,encoding:YZ(e)?e.encoding:3002,depthBuffer:!1},i=Rk(t);return i.depthBuffer=!e,this._pingPongRenderTarget=Rk(t),i}_compileMaterial(e){const t=new Vn(ap[0],e);this._renderer.compile(t,kC)}_sceneToCubeUV(e,t,i,r){const a=new ni(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.outputEncoding,f=u.toneMapping;u.getClearColor(Tk),u.toneMapping=0,u.outputEncoding=Ki,u.autoClear=!1;const p=new ia({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),m=new Vn(new hc,p);let _=!1;const y=e.background;y?y.isColor&&(p.color.copy(y),e.background=null,_=!0):(p.color.copy(Tk),_=!0);for(let g=0;g<6;g++){const x=g%3;0==x?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):1==x?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g])),qy(r,x*go,g>2?go:0,go,go),u.setRenderTarget(r),_&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=f,u.outputEncoding=h,u.autoClear=d,e.background=y}_setEncoding(e,t){e.value=!0===this._renderer.capabilities.isWebGL2&&t.format===Qi&&t.type===za&&t.encoding===sc?Qa[Ki]:Qa[t.encoding]}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?null==this._cubemapShader&&(this._cubemapShader=Fk()):null==this._equirectShader&&(this._equirectShader=Pk());const s=r?this._cubemapShader:this._equirectShader,o=new Vn(ap[0],s),a=s.uniforms;a.envMap.value=e,r||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),this._setEncoding(a.outputEncoding,t.texture),qy(t,0,0,3*go,2*go),i.setRenderTarget(t),i.render(o,kC)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<Dk;r++){const s=Math.sqrt($y[r]*$y[r]-$y[r-1]*$y[r-1]);this._blur(e,r-1,r,s,Ik[(r-1)%Ik.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Vn(ap[r],c),h=c.uniforms,f=Ak[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,m=s/p,_=isFinite(s)?1+Math.floor(3*m):20;_>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to 20`);const y=[];let g=0;for(let D=0;D<20;++D){const w=D/m,k=Math.exp(-w*w/2);y.push(k),0==D?g+=k:D<_&&(g+=2*k)}for(let D=0;D<y.length;D++)y[D]=y[D]/g;h.envMap.value=e.texture,h.samples.value=_,h.weights.value=y,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a),h.dTheta.value=p,h.mipInt.value=8-i,this._setEncoding(h.inputEncoding,e.texture),this._setEncoding(h.outputEncoding,e.texture);const x=Ak[r];qy(t,3*Math.max(0,go-2*x),(0===r?0:2*go)+2*x*(r>4?r-8+4:0),3*x,2*x),l.setRenderTarget(t),l.render(d,kC)}}function YZ(n){return void 0!==n&&n.type===za&&(n.encoding===Ki||n.encoding===sc||3007===n.encoding)}function XZ(){const n=[],e=[],t=[];let i=8;for(let r=0;r<Dk;r++){const s=Math.pow(2,i);e.push(s);let o=1/s;r>4?o=Sk[r-8+4-1]:0==r&&(o=0),t.push(o);const a=1/(s-1),l=-a/2,c=1+a/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],d=6,h=6,f=3,p=2,m=1,_=new Float32Array(f*h*d),y=new Float32Array(p*h*d),g=new Float32Array(m*h*d);for(let v=0;v<d;v++){const M=v%3*2/3-1,D=v>2?0:-1;_.set([M,D,0,M+2/3,D,0,M+2/3,D+1,0,M,D,0,M+2/3,D+1,0,M,D+1,0],f*h*v),y.set(u,p*h*v),g.set([v,v,v,v,v,v],m*h*v)}const x=new dt;x.setAttribute("position",new on(_,f)),x.setAttribute("uv",new on(y,p)),x.setAttribute("faceIndex",new on(g,m)),n.push(x),i>4&&i--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function Rk(n){const e=new fo(3*go,3*go,n);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function qy(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Pk(){const n=new re(1,1);return new Fd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:Qa[Ki]},outputEncoding:{value:Qa[Ki]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Fk(){return new Fd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Qa[Ki]},outputEncoding:{value:Qa[Ki]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function KZ(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){const h=n.getRenderTarget();null===t&&(t=new qZ(n));const f=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),n.setRenderTarget(h),a.addEventListener("dispose",s),f.texture}return null}}}return a},dispose:function(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function ZZ(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function JZ(n,e,t,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,p=d.attributes.position;let m=0;if(null!==f){const g=f.array;m=f.version;for(let x=0,v=g.length;x<v;x+=3){const M=g[x+0],D=g[x+1],w=g[x+2];h.push(M,D,D,w,w,M)}}else{m=p.version;for(let x=0,v=p.array.length/3-1;x<v;x+=3){const M=x+0,D=x+1,w=x+2;h.push(M,D,D,w,w,M)}}const _=new(ck(h)>65535?MC:CC)(h,1);_.version=m;const y=s.get(d);y&&e.remove(y),s.set(d,_)}return{get:function(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function(d){const h=d.attributes;for(const p in h)e.update(h[p],34962);const f=d.morphAttributes;for(const p in f){const m=f[p];for(let _=0,y=m.length;_<y;_++)e.update(m[_],34962)}},getWireframeAttribute:function(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function eJ(n,e,t,i){const r=i.isWebGL2;let s,a,l;this.setMode=function(h){s=h},this.setIndex=function(h){a=h.type,l=h.bytesPerElement},this.render=function(h,f){n.drawElements(s,f,a,h*l),t.update(f,s,1)},this.renderInstances=function(h,f,p){if(0===p)return;let m,_;if(r)m=n,_="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[_](s,f,a,h*l,p),t.update(f,s,p)}}function tJ(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}class BC extends ei{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=fi,this.minFilter=fi,this.wrapR=Xi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function nJ(n,e){return n[0]-e[0]}function iJ(n,e){return Math.abs(e[1])-Math.abs(n[1])}function kk(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function rJ(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new S,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function(c,u,d,h){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position.length;let m=s.get(u);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();const g=void 0!==u.morphAttributes.normal,x=u.morphAttributes.position,v=u.morphAttributes.normal||[],D=!0===g?2:1;let w=u.attributes.position.count*D,k=1;w>e.maxTextureSize&&(k=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const z=new Float32Array(w*k*4*p),N=new BC(z,w,k,p);N.format=Qi,N.type=Ko;const O=4*D;for(let oe=0;oe<p;oe++){const U=x[oe],W=v[oe],Y=w*k*4*oe;for(let L=0;L<U.count;L++){o.fromBufferAttribute(U,L),!0===U.normalized&&kk(o,U);const B=L*O;z[Y+B+0]=o.x,z[Y+B+1]=o.y,z[Y+B+2]=o.z,z[Y+B+3]=0,!0===g&&(o.fromBufferAttribute(W,L),!0===W.normalized&&kk(o,W),z[Y+B+4]=o.x,z[Y+B+5]=o.y,z[Y+B+6]=o.z,z[Y+B+7]=0)}}m={count:p,texture:N,size:new re(w,k)},s.set(u,m)}let _=0;for(let g=0;g<f.length;g++)_+=f[g];const y=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}else{const p=void 0===f?0:f.length;let m=i[u.id];if(void 0===m||m.length!==p){m=[];for(let v=0;v<p;v++)m[v]=[v,0];i[u.id]=m}for(let v=0;v<p;v++){const M=m[v];M[0]=v,M[1]=f[v]}m.sort(iJ);for(let v=0;v<8;v++)v<p&&m[v][1]?(a[v][0]=m[v][0],a[v][1]=m[v][1]):(a[v][0]=Number.MAX_SAFE_INTEGER,a[v][1]=0);a.sort(nJ);const _=u.morphAttributes.position,y=u.morphAttributes.normal;let g=0;for(let v=0;v<8;v++){const M=a[v],D=M[0],w=M[1];D!==Number.MAX_SAFE_INTEGER&&w?(_&&u.getAttribute("morphTarget"+v)!==_[D]&&u.setAttribute("morphTarget"+v,_[D]),y&&u.getAttribute("morphNormal"+v)!==y[D]&&u.setAttribute("morphNormal"+v,y[D]),r[v]=w,g+=w):(_&&!0===u.hasAttribute("morphTarget"+v)&&u.deleteAttribute("morphTarget"+v),y&&!0===u.hasAttribute("morphNormal"+v)&&u.deleteAttribute("morphNormal"+v),r[v]=0)}const x=u.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",x),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function sJ(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function(l){const c=i.render.frame,d=e.get(l,l.geometry);return r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function(){r=new WeakMap}}}BC.prototype.isDataTexture2DArray=!0;class Ok extends ei{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=fi,this.minFilter=fi,this.wrapR=Xi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Ok.prototype.isDataTexture3D=!0;const Lk=new ei,oJ=new BC,aJ=new Ok,Nk=new op,Bk=[],Vk=[],Hk=new Float32Array(16),zk=new Float32Array(9),Uk=new Float32Array(4);function Nd(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=Bk[r];if(void 0===s&&(s=new Float32Array(r),Bk[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function pr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ji(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Gk(n,e){let t=Vk[e];void 0===t&&(t=new Int32Array(e),Vk[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function lJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function cJ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(pr(t,e))return;n.uniform2fv(this.addr,e),Ji(t,e)}}function uJ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(pr(t,e))return;n.uniform3fv(this.addr,e),Ji(t,e)}}function dJ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(pr(t,e))return;n.uniform4fv(this.addr,e),Ji(t,e)}}function hJ(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(pr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ji(t,e)}else{if(pr(t,i))return;Uk.set(i),n.uniformMatrix2fv(this.addr,!1,Uk),Ji(t,i)}}function fJ(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(pr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ji(t,e)}else{if(pr(t,i))return;zk.set(i),n.uniformMatrix3fv(this.addr,!1,zk),Ji(t,i)}}function pJ(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(pr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ji(t,e)}else{if(pr(t,i))return;Hk.set(i),n.uniformMatrix4fv(this.addr,!1,Hk),Ji(t,i)}}function mJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function gJ(n,e){const t=this.cache;pr(t,e)||(n.uniform2iv(this.addr,e),Ji(t,e))}function yJ(n,e){const t=this.cache;pr(t,e)||(n.uniform3iv(this.addr,e),Ji(t,e))}function _J(n,e){const t=this.cache;pr(t,e)||(n.uniform4iv(this.addr,e),Ji(t,e))}function vJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function xJ(n,e){const t=this.cache;pr(t,e)||(n.uniform2uiv(this.addr,e),Ji(t,e))}function bJ(n,e){const t=this.cache;pr(t,e)||(n.uniform3uiv(this.addr,e),Ji(t,e))}function wJ(n,e){const t=this.cache;pr(t,e)||(n.uniform4uiv(this.addr,e),Ji(t,e))}function CJ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||Lk,r)}function MJ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||aJ,r)}function EJ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||Nk,r)}function SJ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||oJ,r)}function AJ(n,e){n.uniform1fv(this.addr,e)}function TJ(n,e){const t=Nd(e,this.size,2);n.uniform2fv(this.addr,t)}function IJ(n,e){const t=Nd(e,this.size,3);n.uniform3fv(this.addr,t)}function RJ(n,e){const t=Nd(e,this.size,4);n.uniform4fv(this.addr,t)}function PJ(n,e){const t=Nd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function FJ(n,e){const t=Nd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function kJ(n,e){const t=Nd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function OJ(n,e){n.uniform1iv(this.addr,e)}function LJ(n,e){n.uniform2iv(this.addr,e)}function NJ(n,e){n.uniform3iv(this.addr,e)}function BJ(n,e){n.uniform4iv(this.addr,e)}function VJ(n,e){n.uniform1uiv(this.addr,e)}function HJ(n,e){n.uniform2uiv(this.addr,e)}function zJ(n,e){n.uniform3uiv(this.addr,e)}function UJ(n,e){n.uniform4uiv(this.addr,e)}function GJ(n,e,t){const i=e.length,r=Gk(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTexture2D(e[s]||Lk,r[s])}function WJ(n,e,t){const i=e.length,r=Gk(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTextureCube(e[s]||Nk,r[s])}function $J(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=function(n){switch(n){case 5126:return lJ;case 35664:return cJ;case 35665:return uJ;case 35666:return dJ;case 35674:return hJ;case 35675:return fJ;case 35676:return pJ;case 5124:case 35670:return mJ;case 35667:case 35671:return gJ;case 35668:case 35672:return yJ;case 35669:case 35673:return _J;case 5125:return vJ;case 36294:return xJ;case 36295:return bJ;case 36296:return wJ;case 35678:case 36198:case 36298:case 36306:case 35682:return CJ;case 35679:case 36299:case 36307:return MJ;case 35680:case 36300:case 36308:case 36293:return EJ;case 36289:case 36303:case 36311:case 36292:return SJ}}(e.type)}function Wk(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function(n){switch(n){case 5126:return AJ;case 35664:return TJ;case 35665:return IJ;case 35666:return RJ;case 35674:return PJ;case 35675:return FJ;case 35676:return kJ;case 5124:case 35670:return OJ;case 35667:case 35671:return LJ;case 35668:case 35672:return NJ;case 35669:case 35673:return BJ;case 5125:return VJ;case 36294:return HJ;case 36295:return zJ;case 36296:return UJ;case 35678:case 36198:case 36298:case 36306:case 35682:return GJ;case 35680:case 36300:case 36308:case 36293:return WJ}}(e.type)}function jk(n){this.id=n,this.seq=[],this.map={}}Wk.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Ji(e,n)},jk.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,e[o.id],t)}};const VC=/(\w+)(\])?(\[|\.)?/g;function $k(n,e){n.seq.push(e),n.map[e.id]=e}function qJ(n,e,t){const i=n.name,r=i.length;for(VC.lastIndex=0;;){const s=VC.exec(i),o=VC.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){$k(t,void 0===c?new $J(a,n,e):new Wk(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new jk(a),$k(t,d)),t=d}}}function Ka(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i);qJ(r,n.getUniformLocation(e,r.name),this)}}function qk(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}Ka.prototype.setValue=function(n,e,t,i){const r=this.map[e];void 0!==r&&r.setValue(n,t,i)},Ka.prototype.setOptional=function(n,e,t){const i=e[t];void 0!==i&&this.setValue(n,t,i)},Ka.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const o=e[r],a=t[o.id];!1!==a.needsUpdate&&o.setValue(n,a.value,i)}},Ka.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};let YJ=0;function Yk(n){switch(n){case Ki:return["Linear","( value )"];case sc:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function Xk(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();return i&&""===r?"":t.toUpperCase()+"\n\n"+r+"\n\n"+function(n){const e=n.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(n.getShaderSource(e))}function mc(n,e){const t=Yk(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function QJ(n,e){const t=Yk(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function KJ(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function lp(n){return""!==n}function Qk(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Kk(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const tee=/^[ \t]*#include +<([\w\d./]+)>/gm;function HC(n){return n.replace(tee,nee)}function nee(n,e){const t=Lt[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return HC(t)}const iee=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ree=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Zk(n){return n.replace(ree,Jk).replace(iee,see)}function see(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Jk(0,e,t,i)}function Jk(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function eO(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function uee(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(t),d=function(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=n.gammaFactor>0?n.gammaFactor:1,f=t.isWebGL2?"":function(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(lp).join("\n")}(t),p=function(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),m=r.createProgram();let _,y,g=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(_=[p].filter(lp).join("\n"),_.length>0&&(_+="\n"),y=[f,p].filter(lp).join("\n"),y.length>0&&(y+="\n")):(_=[eO(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(lp).join("\n"),y=[f,eO(t),"#define SHADER_NAME "+t.shaderName,p,"#define GAMMA_FACTOR "+h,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Lt.tonemapping_pars_fragment:"",0!==t.toneMapping?KJ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===rc?"#define OPAQUE":"",Lt.encodings_pars_fragment,t.map?mc("mapTexelToLinear",t.mapEncoding):"",t.matcap?mc("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?mc("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?mc("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?mc("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?mc("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?mc("lightMapTexelToLinear",t.lightMapEncoding):"",QJ("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(lp).join("\n")),o=HC(o),o=Qk(o,t),o=Kk(o,t),a=HC(a),a=Qk(a,t),a=Kk(a,t),o=Zk(o),a=Zk(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(g="#version 300 es\n",_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,y=["#define varying in","300 es"===t.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const v=g+y+a,M=qk(r,35633,g+_+o),D=qk(r,35632,v);if(r.attachShader(m,M),r.attachShader(m,D),void 0!==t.index0AttributeName?r.bindAttribLocation(m,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),n.debug.checkShaderErrors){const z=r.getProgramInfoLog(m).trim(),N=r.getShaderInfoLog(M).trim(),O=r.getShaderInfoLog(D).trim();let oe=!0,U=!0;if(!1===r.getProgramParameter(m,35714)){oe=!1;const W=Xk(r,M,"vertex"),Y=Xk(r,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+z+"\n"+W+"\n"+Y)}else""!==z?console.warn("THREE.WebGLProgram: Program Info Log:",z):(""===N||""===O)&&(U=!1);U&&(this.diagnostics={runnable:oe,programLog:z,vertexShader:{log:N,prefix:_},fragmentShader:{log:O,prefix:y}})}let w,k;return r.deleteShader(M),r.deleteShader(D),this.getUniforms=function(){return void 0===w&&(w=new Ka(r,m)),w},this.getAttributes=function(){return void 0===k&&(k=function(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,m)),k},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=YJ++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=M,this.fragmentShader=D,this}function dee(n,e,t,i,r,s,o){const a=[],l=r.isWebGL2,c=r.logarithmicDepthBuffer,u=r.floatVertexTextures,d=r.maxVertexUniforms,h=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function y(w){let k;return w&&w.isTexture?k=w.encoding:w&&w.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),k=w.texture.encoding):k=Ki,l&&w&&w.isTexture&&w.format===Qi&&w.type===za&&w.encoding===sc&&(k=Ki),k}return{getParameters:function(w,k,z,N,O){const oe=N.fog,W=(w.isMeshStandardMaterial?t:e).get(w.envMap||(w.isMeshStandardMaterial?N.environment:null)),Y=p[w.type],L=O.isSkinnedMesh?function(w){const z=w.skeleton.bones;if(u)return 1024;{const O=Math.floor((d-20)/4),oe=Math.min(O,z.length);return oe<z.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+z.length+" bones. This GPU supports "+oe+"."),0):oe}}(O):0;let B,K;if(null!==w.precision&&(f=r.getMaxPrecision(w.precision),f!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",f,"instead.")),Y){const ae=mo[Y];B=ae.vertexShader,K=ae.fragmentShader}else B=w.vertexShader,K=w.fragmentShader;const he=n.getRenderTarget(),Se=w.alphaTest>0,ve=w.clearcoat>0;return{isWebGL2:l,shaderID:Y,shaderName:w.type,vertexShader:B,fragmentShader:K,defines:w.defines,isRawShaderMaterial:!0===w.isRawShaderMaterial,glslVersion:w.glslVersion,precision:f,instancing:!0===O.isInstancedMesh,instancingColor:!0===O.isInstancedMesh&&null!==O.instanceColor,supportsVertexTextures:h,outputEncoding:null!==he?y(he.texture):n.outputEncoding,map:!!w.map,mapEncoding:y(w.map),matcap:!!w.matcap,matcapEncoding:y(w.matcap),envMap:!!W,envMapMode:W&&W.mapping,envMapEncoding:y(W),envMapCubeUV:!!W&&(306===W.mapping||307===W.mapping),lightMap:!!w.lightMap,lightMapEncoding:y(w.lightMap),aoMap:!!w.aoMap,emissiveMap:!!w.emissiveMap,emissiveMapEncoding:y(w.emissiveMap),bumpMap:!!w.bumpMap,normalMap:!!w.normalMap,objectSpaceNormalMap:1===w.normalMapType,tangentSpaceNormalMap:0===w.normalMapType,clearcoat:ve,clearcoatMap:ve&&!!w.clearcoatMap,clearcoatRoughnessMap:ve&&!!w.clearcoatRoughnessMap,clearcoatNormalMap:ve&&!!w.clearcoatNormalMap,displacementMap:!!w.displacementMap,roughnessMap:!!w.roughnessMap,metalnessMap:!!w.metalnessMap,specularMap:!!w.specularMap,specularIntensityMap:!!w.specularIntensityMap,specularColorMap:!!w.specularColorMap,specularColorMapEncoding:y(w.specularColorMap),alphaMap:!!w.alphaMap,alphaTest:Se,gradientMap:!!w.gradientMap,sheen:w.sheen>0,sheenColorMap:!!w.sheenColorMap,sheenColorMapEncoding:y(w.sheenColorMap),sheenRoughnessMap:!!w.sheenRoughnessMap,transmission:w.transmission>0,transmissionMap:!!w.transmissionMap,thicknessMap:!!w.thicknessMap,combine:w.combine,vertexTangents:!!w.normalMap&&!!O.geometry&&!!O.geometry.attributes.tangent,vertexColors:w.vertexColors,vertexAlphas:!0===w.vertexColors&&!!O.geometry&&!!O.geometry.attributes.color&&4===O.geometry.attributes.color.itemSize,vertexUvs:!!w.map||!!w.bumpMap||!!w.normalMap||!!w.specularMap||!!w.alphaMap||!!w.emissiveMap||!!w.roughnessMap||!!w.metalnessMap||!!w.clearcoatMap||!!w.clearcoatRoughnessMap||!!w.clearcoatNormalMap||!!w.displacementMap||!!w.transmissionMap||!!w.thicknessMap||!!w.specularIntensityMap||!!w.specularColorMap||!!w.sheenColorMap||w.sheenRoughnessMap,uvsVertexOnly:!(w.map||w.bumpMap||w.normalMap||w.specularMap||w.alphaMap||w.emissiveMap||w.roughnessMap||w.metalnessMap||w.clearcoatNormalMap||w.transmission>0||w.transmissionMap||w.thicknessMap||w.specularIntensityMap||w.specularColorMap||!!w.sheen>0||w.sheenColorMap||w.sheenRoughnessMap||!w.displacementMap),fog:!!oe,useFog:w.fog,fogExp2:oe&&oe.isFogExp2,flatShading:!!w.flatShading,sizeAttenuation:w.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===O.isSkinnedMesh&&L>0,maxBones:L,useVertexTexture:u,morphTargets:!!O.geometry&&!!O.geometry.morphAttributes.position,morphNormals:!!O.geometry&&!!O.geometry.morphAttributes.normal,morphTargetsCount:O.geometry&&O.geometry.morphAttributes.position?O.geometry.morphAttributes.position.length:0,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:w.format,dithering:w.dithering,shadowMapEnabled:n.shadowMap.enabled&&z.length>0,shadowMapType:n.shadowMap.type,toneMapping:w.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:w.premultipliedAlpha,doubleSided:2===w.side,flipSided:1===w.side,depthPacking:void 0!==w.depthPacking&&w.depthPacking,index0AttributeName:w.index0AttributeName,extensionDerivatives:w.extensions&&w.extensions.derivatives,extensionFragDepth:w.extensions&&w.extensions.fragDepth,extensionDrawBuffers:w.extensions&&w.extensions.drawBuffers,extensionShaderTextureLOD:w.extensions&&w.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:w.customProgramCacheKey()}},getProgramCacheKey:function(w){const k=[];if(w.shaderID?k.push(w.shaderID):(k.push(uk(w.fragmentShader)),k.push(uk(w.vertexShader))),void 0!==w.defines)for(const z in w.defines)k.push(z),k.push(w.defines[z]);if(!1===w.isRawShaderMaterial){for(let z=0;z<m.length;z++)k.push(w[m[z]]);k.push(n.outputEncoding),k.push(n.gammaFactor)}return k.push(w.customProgramCacheKey),k.join()},getUniforms:function(w){const k=p[w.type];let z;return z=k?zQ.clone(mo[k].uniforms):w.uniforms,z},acquireProgram:function(w,k){let z;for(let N=0,O=a.length;N<O;N++){const oe=a[N];if(oe.cacheKey===k){z=oe,++z.usedTimes;break}}return void 0===z&&(z=new uee(n,k,w,s),a.push(z)),z},releaseProgram:function(w){if(0==--w.usedTimes){const k=a.indexOf(w);a[k]=a[a.length-1],a.pop(),w.destroy()}},programs:a}}function hee(){let n=new WeakMap;return{get:function(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function(s){n.delete(s)},update:function(s,o,a){n.get(s)[o]=a},dispose:function(){n=new WeakMap}}}function fee(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function tO(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function nO(n){const e=[];let t=0;const i=[],r=[],s=[],o={id:-1};function l(f,p,m,_,y,g){let x=e[t];const v=n.get(m);return void 0===x?(x={id:f.id,object:f,geometry:p,material:m,program:v.program||o,groupOrder:_,renderOrder:f.renderOrder,z:y,group:g},e[t]=x):(x.id=f.id,x.object=f,x.geometry=p,x.material=m,x.program=v.program||o,x.groupOrder=_,x.renderOrder=f.renderOrder,x.z=y,x.group=g),t++,x}return{opaque:i,transmissive:r,transparent:s,init:function(){t=0,i.length=0,r.length=0,s.length=0},push:function(f,p,m,_,y,g){const x=l(f,p,m,_,y,g);m.transmission>0?r.push(x):!0===m.transparent?s.push(x):i.push(x)},unshift:function(f,p,m,_,y,g){const x=l(f,p,m,_,y,g);m.transmission>0?r.unshift(x):!0===m.transparent?s.unshift(x):i.unshift(x)},finish:function(){for(let f=t,p=e.length;f<p;f++){const m=e[f];if(null===m.id)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.program=null,m.group=null}},sort:function(f,p){i.length>1&&i.sort(f||fee),r.length>1&&r.sort(p||tO),s.length>1&&s.sort(p||tO)}}}function pee(n){let e=new WeakMap;return{get:function(r,s){let o;return!1===e.has(r)?(o=new nO(n),e.set(r,[o])):s>=e.get(r).length?(o=new nO(n),e.get(r).push(o)):o=e.get(r)[s],o},dispose:function(){e=new WeakMap}}}function mee(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new S,color:new Ie};break;case"SpotLight":t={position:new S,direction:new S,color:new Ie,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new S,color:new Ie,distance:0,decay:0};break;case"HemisphereLight":t={direction:new S,skyColor:new Ie,groundColor:new Ie};break;case"RectAreaLight":t={color:new Ie,position:new S,halfWidth:new S,halfHeight:new S}}return n[e.id]=t,t}}}let yee=0;function _ee(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function vee(n,e){const t=new mee,i=function(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new re};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new re,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new S);const s=new S,o=new Ue,a=new Ue;return{setup:function(u,d){let h=0,f=0,p=0;for(let z=0;z<9;z++)r.probe[z].set(0,0,0);let m=0,_=0,y=0,g=0,x=0,v=0,M=0,D=0;u.sort(_ee);const w=!0!==d?Math.PI:1;for(let z=0,N=u.length;z<N;z++){const O=u[z],oe=O.color,U=O.intensity,W=O.distance,Y=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)h+=oe.r*U*w,f+=oe.g*U*w,p+=oe.b*U*w;else if(O.isLightProbe)for(let L=0;L<9;L++)r.probe[L].addScaledVector(O.sh.coefficients[L],U);else if(O.isDirectionalLight){const L=t.get(O);if(L.color.copy(O.color).multiplyScalar(O.intensity*w),O.castShadow){const B=O.shadow,K=i.get(O);K.shadowBias=B.bias,K.shadowNormalBias=B.normalBias,K.shadowRadius=B.radius,K.shadowMapSize=B.mapSize,r.directionalShadow[m]=K,r.directionalShadowMap[m]=Y,r.directionalShadowMatrix[m]=O.shadow.matrix,v++}r.directional[m]=L,m++}else if(O.isSpotLight){const L=t.get(O);if(L.position.setFromMatrixPosition(O.matrixWorld),L.color.copy(oe).multiplyScalar(U*w),L.distance=W,L.coneCos=Math.cos(O.angle),L.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),L.decay=O.decay,O.castShadow){const B=O.shadow,K=i.get(O);K.shadowBias=B.bias,K.shadowNormalBias=B.normalBias,K.shadowRadius=B.radius,K.shadowMapSize=B.mapSize,r.spotShadow[y]=K,r.spotShadowMap[y]=Y,r.spotShadowMatrix[y]=O.shadow.matrix,D++}r.spot[y]=L,y++}else if(O.isRectAreaLight){const L=t.get(O);L.color.copy(oe).multiplyScalar(U),L.halfWidth.set(.5*O.width,0,0),L.halfHeight.set(0,.5*O.height,0),r.rectArea[g]=L,g++}else if(O.isPointLight){const L=t.get(O);if(L.color.copy(O.color).multiplyScalar(O.intensity*w),L.distance=O.distance,L.decay=O.decay,O.castShadow){const B=O.shadow,K=i.get(O);K.shadowBias=B.bias,K.shadowNormalBias=B.normalBias,K.shadowRadius=B.radius,K.shadowMapSize=B.mapSize,K.shadowCameraNear=B.camera.near,K.shadowCameraFar=B.camera.far,r.pointShadow[_]=K,r.pointShadowMap[_]=Y,r.pointShadowMatrix[_]=O.shadow.matrix,M++}r.point[_]=L,_++}else if(O.isHemisphereLight){const L=t.get(O);L.skyColor.copy(O.color).multiplyScalar(U*w),L.groundColor.copy(O.groundColor).multiplyScalar(U*w),r.hemi[x]=L,x++}}g>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=we.LTC_FLOAT_1,r.rectAreaLTC2=we.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=we.LTC_HALF_1,r.rectAreaLTC2=we.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const k=r.hash;(k.directionalLength!==m||k.pointLength!==_||k.spotLength!==y||k.rectAreaLength!==g||k.hemiLength!==x||k.numDirectionalShadows!==v||k.numPointShadows!==M||k.numSpotShadows!==D)&&(r.directional.length=m,r.spot.length=y,r.rectArea.length=g,r.point.length=_,r.hemi.length=x,r.directionalShadow.length=v,r.directionalShadowMap.length=v,r.pointShadow.length=M,r.pointShadowMap.length=M,r.spotShadow.length=D,r.spotShadowMap.length=D,r.directionalShadowMatrix.length=v,r.pointShadowMatrix.length=M,r.spotShadowMatrix.length=D,k.directionalLength=m,k.pointLength=_,k.spotLength=y,k.rectAreaLength=g,k.hemiLength=x,k.numDirectionalShadows=v,k.numPointShadows=M,k.numSpotShadows=D,r.version=yee++)},setupView:function(u,d){let h=0,f=0,p=0,m=0,_=0;const y=d.matrixWorldInverse;for(let g=0,x=u.length;g<x;g++){const v=u[g];if(v.isDirectionalLight){const M=r.directional[h];M.direction.setFromMatrixPosition(v.matrixWorld),s.setFromMatrixPosition(v.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(y),h++}else if(v.isSpotLight){const M=r.spot[p];M.position.setFromMatrixPosition(v.matrixWorld),M.position.applyMatrix4(y),M.direction.setFromMatrixPosition(v.matrixWorld),s.setFromMatrixPosition(v.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(y),p++}else if(v.isRectAreaLight){const M=r.rectArea[m];M.position.setFromMatrixPosition(v.matrixWorld),M.position.applyMatrix4(y),a.identity(),o.copy(v.matrixWorld),o.premultiply(y),a.extractRotation(o),M.halfWidth.set(.5*v.width,0,0),M.halfHeight.set(0,.5*v.height,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),m++}else if(v.isPointLight){const M=r.point[f];M.position.setFromMatrixPosition(v.matrixWorld),M.position.applyMatrix4(y),f++}else if(v.isHemisphereLight){const M=r.hemi[_];M.direction.setFromMatrixPosition(v.matrixWorld),M.direction.transformDirection(y),M.direction.normalize(),_++}}},state:r}}function iO(n,e){const t=new vee(n,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function(d){t.setup(i,d)},setupLightsView:function(d){t.setupView(i,d)},pushLight:function(d){i.push(d)},pushShadow:function(d){r.push(d)}}}function xee(n,e){let t=new WeakMap;return{get:function(s,o=0){let a;return!1===t.has(s)?(a=new iO(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new iO(n,e),t.get(s).push(a)):a=t.get(s)[o],a},dispose:function(){t=new WeakMap}}}class zC extends Oi{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}zC.prototype.isMeshDepthMaterial=!0;class UC extends Oi{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new S,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function rO(n,e,t){let i=new Wy;const r=new re,s=new re,o=new sn,a=new zC({depthPacking:3201}),l=new UC,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new ra({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new re},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new dt;p.setAttribute("position",new on(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Vn(p,h),_=this;function y(v,M){const D=e.update(m);h.defines.VSM_SAMPLES!==v.blurSamples&&(h.defines.VSM_SAMPLES=v.blurSamples,f.defines.VSM_SAMPLES=v.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),h.uniforms.shadow_pass.value=v.map.texture,h.uniforms.resolution.value=v.mapSize,h.uniforms.radius.value=v.radius,n.setRenderTarget(v.mapPass),n.clear(),n.renderBufferDirect(M,null,D,h,m,null),f.uniforms.shadow_pass.value=v.mapPass.texture,f.uniforms.resolution.value=v.mapSize,f.uniforms.radius.value=v.radius,n.setRenderTarget(v.map),n.clear(),n.renderBufferDirect(M,null,D,f,m,null)}function g(v,M,D,w,k,z,N){let O=null;const oe=!0===w.isPointLight?v.customDistanceMaterial:v.customDepthMaterial;if(O=void 0!==oe?oe:!0===w.isPointLight?l:a,n.localClippingEnabled&&!0===D.clipShadows&&0!==D.clippingPlanes.length||D.displacementMap&&0!==D.displacementScale||D.alphaMap&&D.alphaTest>0){const U=O.uuid,W=D.uuid;let Y=c[U];void 0===Y&&(Y={},c[U]=Y);let L=Y[W];void 0===L&&(L=O.clone(),Y[W]=L),O=L}return O.visible=D.visible,O.wireframe=D.wireframe,O.side=3===N?null!==D.shadowSide?D.shadowSide:D.side:null!==D.shadowSide?D.shadowSide:d[D.side],O.alphaMap=D.alphaMap,O.alphaTest=D.alphaTest,O.clipShadows=D.clipShadows,O.clippingPlanes=D.clippingPlanes,O.clipIntersection=D.clipIntersection,O.displacementMap=D.displacementMap,O.displacementScale=D.displacementScale,O.displacementBias=D.displacementBias,O.wireframeLinewidth=D.wireframeLinewidth,O.linewidth=D.linewidth,!0===w.isPointLight&&!0===O.isMeshDistanceMaterial&&(O.referencePosition.setFromMatrixPosition(w.matrixWorld),O.nearDistance=k,O.farDistance=z),O}function x(v,M,D,w,k){if(!1===v.visible)return;if(v.layers.test(M.layers)&&(v.isMesh||v.isLine||v.isPoints)&&(v.castShadow||v.receiveShadow&&3===k)&&(!v.frustumCulled||i.intersectsObject(v))){v.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,v.matrixWorld);const O=e.update(v),oe=v.material;if(Array.isArray(oe)){const U=O.groups;for(let W=0,Y=U.length;W<Y;W++){const L=U[W],B=oe[L.materialIndex];if(B&&B.visible){const K=g(v,0,B,w,D.near,D.far,k);n.renderBufferDirect(D,null,O,K,v,L)}}}else if(oe.visible){const U=g(v,0,oe,w,D.near,D.far,k);n.renderBufferDirect(D,null,O,U,v,null)}}const N=v.children;for(let O=0,oe=N.length;O<oe;O++)x(N[O],M,D,w,k)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(v,M,D){if(!1===_.enabled||!1===_.autoUpdate&&!1===_.needsUpdate||0===v.length)return;const w=n.getRenderTarget(),k=n.getActiveCubeFace(),z=n.getActiveMipmapLevel(),N=n.state;N.setBlending(0),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);for(let O=0,oe=v.length;O<oe;O++){const U=v[O],W=U.shadow;if(void 0===W){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}if(!1===W.autoUpdate&&!1===W.needsUpdate)continue;r.copy(W.mapSize);const Y=W.getFrameExtents();if(r.multiply(Y),s.copy(W.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/Y.x),r.x=s.x*Y.x,W.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/Y.y),r.y=s.y*Y.y,W.mapSize.y=s.y)),null===W.map&&!W.isPointLightShadow&&3===this.type){const B={minFilter:Jn,magFilter:Jn,format:Qi};W.map=new fo(r.x,r.y,B),W.map.texture.name=U.name+".shadowMap",W.mapPass=new fo(r.x,r.y,B),W.camera.updateProjectionMatrix()}null===W.map&&(W.map=new fo(r.x,r.y,{minFilter:fi,magFilter:fi,format:Qi}),W.map.texture.name=U.name+".shadowMap",W.camera.updateProjectionMatrix()),n.setRenderTarget(W.map),n.clear();const L=W.getViewportCount();for(let B=0;B<L;B++){const K=W.getViewport(B);o.set(s.x*K.x,s.y*K.y,s.x*K.z,s.y*K.w),N.viewport(o),W.updateMatrices(U,B),i=W.getFrustum(),x(M,D,W.camera,U,this.type)}!W.isPointLightShadow&&3===this.type&&y(W,D),W.needsUpdate=!1}_.needsUpdate=!1,n.setRenderTarget(w,k,z)}}function Cee(n,e,t){const i=t.isWebGL2,a=new function(){let V=!1;const Pe=new sn;let ue=null;const Ke=new sn(0,0,0,0);return{setMask:function($e){ue!==$e&&!V&&(n.colorMask($e,$e,$e,$e),ue=$e)},setLocked:function($e){V=$e},setClear:function($e,Ut,nr,ir,yl){!0===yl&&($e*=ir,Ut*=ir,nr*=ir),Pe.set($e,Ut,nr,ir),!1===Ke.equals(Pe)&&(n.clearColor($e,Ut,nr,ir),Ke.copy(Pe))},reset:function(){V=!1,ue=null,Ke.set(-1,0,0,0)}}},l=new function(){let V=!1,Pe=null,ue=null,Ke=null;return{setTest:function($e){$e?fe(2929):Le(2929)},setMask:function($e){Pe!==$e&&!V&&(n.depthMask($e),Pe=$e)},setFunc:function($e){if(ue!==$e){if($e)switch($e){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);ue=$e}},setLocked:function($e){V=$e},setClear:function($e){Ke!==$e&&(n.clearDepth($e),Ke=$e)},reset:function(){V=!1,Pe=null,ue=null,Ke=null}}},c=new function(){let V=!1,Pe=null,ue=null,Ke=null,$e=null,Ut=null,nr=null,ir=null,yl=null;return{setTest:function(Wn){V||(Wn?fe(2960):Le(2960))},setMask:function(Wn){Pe!==Wn&&!V&&(n.stencilMask(Wn),Pe=Wn)},setFunc:function(Wn,Ca,qs){(ue!==Wn||Ke!==Ca||$e!==qs)&&(n.stencilFunc(Wn,Ca,qs),ue=Wn,Ke=Ca,$e=qs)},setOp:function(Wn,Ca,qs){(Ut!==Wn||nr!==Ca||ir!==qs)&&(n.stencilOp(Wn,Ca,qs),Ut=Wn,nr=Ca,ir=qs)},setLocked:function(Wn){V=Wn},setClear:function(Wn){yl!==Wn&&(n.clearStencil(Wn),yl=Wn)},reset:function(){V=!1,Pe=null,ue=null,Ke=null,$e=null,Ut=null,nr=null,ir=null,yl=null}}};let u={},d=null,h={},f=null,p=!1,m=null,_=null,y=null,g=null,x=null,v=null,M=null,D=!1,w=null,k=null,z=null,N=null,O=null;const oe=n.getParameter(35661);let U=!1,W=0;const Y=n.getParameter(7938);-1!==Y.indexOf("WebGL")?(W=parseFloat(/^WebGL (\d)/.exec(Y)[1]),U=W>=1):-1!==Y.indexOf("OpenGL ES")&&(W=parseFloat(/^OpenGL ES (\d)/.exec(Y)[1]),U=W>=2);let L=null,B={};const K=n.getParameter(3088),he=n.getParameter(2978),Se=(new sn).fromArray(K),ve=(new sn).fromArray(he);function je(V,Pe,ue){const Ke=new Uint8Array(4),$e=n.createTexture();n.bindTexture(V,$e),n.texParameteri(V,10241,9728),n.texParameteri(V,10240,9728);for(let Ut=0;Ut<ue;Ut++)n.texImage2D(Pe+Ut,0,6408,1,1,0,6408,5121,Ke);return $e}const ae={};function fe(V){!0!==u[V]&&(n.enable(V),u[V]=!0)}function Le(V){!1!==u[V]&&(n.disable(V),u[V]=!1)}ae[3553]=je(3553,3553,1),ae[34067]=je(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),fe(2929),l.setFunc(3),pe(!1),xe(1),fe(2884),St(0);const Ae={100:32774,101:32778,102:32779};if(i)Ae[103]=32775,Ae[104]=32776;else{const V=e.get("EXT_blend_minmax");null!==V&&(Ae[103]=V.MIN_EXT,Ae[104]=V.MAX_EXT)}const Ve={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function St(V,Pe,ue,Ke,$e,Ut,nr,ir){if(0!==V){if(!1===p&&(fe(3042),p=!0),5===V)$e=$e||Pe,Ut=Ut||ue,nr=nr||Ke,(Pe!==_||$e!==x)&&(n.blendEquationSeparate(Ae[Pe],Ae[$e]),_=Pe,x=$e),(ue!==y||Ke!==g||Ut!==v||nr!==M)&&(n.blendFuncSeparate(Ve[ue],Ve[Ke],Ve[Ut],Ve[nr]),y=ue,g=Ke,v=Ut,M=nr),m=V,D=null;else if(V!==m||ir!==D){if((100!==_||100!==x)&&(n.blendEquation(32774),_=100,x=100),ir)switch(V){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,0,769,771);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",V)}else switch(V){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFunc(0,769);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",V)}y=null,g=null,v=null,M=null,m=V,D=ir}}else!0===p&&(Le(3042),p=!1)}function pe(V){w!==V&&(n.frontFace(V?2304:2305),w=V)}function xe(V){0!==V?(fe(2884),V!==k&&n.cullFace(1===V?1029:2===V?1028:1032)):Le(2884),k=V}function Re(V,Pe,ue){V?(fe(32823),(N!==Pe||O!==ue)&&(n.polygonOffset(Pe,ue),N=Pe,O=ue)):Le(32823)}function A(V){void 0===V&&(V=33984+oe-1),L!==V&&(n.activeTexture(V),L=V)}return{buffers:{color:a,depth:l,stencil:c},enable:fe,disable:Le,bindFramebuffer:function(V,Pe){return null===Pe&&null!==d&&(Pe=d),h[V]!==Pe&&(n.bindFramebuffer(V,Pe),h[V]=Pe,i&&(36009===V&&(h[36160]=Pe),36160===V&&(h[36009]=Pe)),!0)},bindXRFramebuffer:function(V){V!==d&&(n.bindFramebuffer(36160,V),d=V)},useProgram:function(V){return f!==V&&(n.useProgram(V),f=V,!0)},setBlending:St,setMaterial:function(V,Pe){2===V.side?Le(2884):fe(2884);let ue=1===V.side;Pe&&(ue=!ue),pe(ue),1===V.blending&&!1===V.transparent?St(0):St(V.blending,V.blendEquation,V.blendSrc,V.blendDst,V.blendEquationAlpha,V.blendSrcAlpha,V.blendDstAlpha,V.premultipliedAlpha),l.setFunc(V.depthFunc),l.setTest(V.depthTest),l.setMask(V.depthWrite),a.setMask(V.colorWrite);const Ke=V.stencilWrite;c.setTest(Ke),Ke&&(c.setMask(V.stencilWriteMask),c.setFunc(V.stencilFunc,V.stencilRef,V.stencilFuncMask),c.setOp(V.stencilFail,V.stencilZFail,V.stencilZPass)),Re(V.polygonOffset,V.polygonOffsetFactor,V.polygonOffsetUnits),!0===V.alphaToCoverage?fe(32926):Le(32926)},setFlipSided:pe,setCullFace:xe,setLineWidth:function(V){V!==z&&(U&&n.lineWidth(V),z=V)},setPolygonOffset:Re,setScissorTest:function(V){V?fe(3089):Le(3089)},activeTexture:A,bindTexture:function(V,Pe){null===L&&A();let ue=B[L];void 0===ue&&(ue={type:void 0,texture:void 0},B[L]=ue),(ue.type!==V||ue.texture!==Pe)&&(n.bindTexture(V,Pe||ae[V]),ue.type=V,ue.texture=Pe)},unbindTexture:function(){const V=B[L];void 0!==V&&void 0!==V.type&&(n.bindTexture(V.type,null),V.type=void 0,V.texture=void 0)},compressedTexImage2D:function(){try{n.compressedTexImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texImage2D:function(){try{n.texImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texImage3D:function(){try{n.texImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},scissor:function(V){!1===Se.equals(V)&&(n.scissor(V.x,V.y,V.z,V.w),Se.copy(V))},viewport:function(V){!1===ve.equals(V)&&(n.viewport(V.x,V.y,V.z,V.w),ve.copy(V))},reset:function(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},L=null,B={},d=null,h={},f=null,p=!1,m=null,_=null,y=null,g=null,x=null,v=null,M=null,D=!1,w=null,k=null,z=null,N=null,O=null,Se.set(0,0,n.canvas.width,n.canvas.height),ve.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function Mee(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=new WeakMap;let f,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(P){}function m(P,A){return p?new OffscreenCanvas(P,A):Ey("canvas")}function _(P,A,te,me){let ge=1;if((P.width>me||P.height>me)&&(ge=me/Math.max(P.width,P.height)),ge<1||!0===A){if("undefined"!=typeof HTMLImageElement&&P instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&P instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&P instanceof ImageBitmap){const Be=A?lk:Math.floor,pt=Be(ge*P.width),et=Be(ge*P.height);void 0===f&&(f=m(pt,et));const xt=te?m(pt,et):f;return xt.width=pt,xt.height=et,xt.getContext("2d").drawImage(P,0,0,pt,et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+P.width+"x"+P.height+") to ("+pt+"x"+et+")."),xt}return"data"in P&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+P.width+"x"+P.height+")."),P}return P}function y(P){return oC(P.width)&&oC(P.height)}function x(P,A){return P.generateMipmaps&&A&&P.minFilter!==fi&&P.minFilter!==Jn}function v(P,A,te,me,ge=1){n.generateMipmap(P),i.get(A).__maxMipLevel=Math.log2(Math.max(te,me,ge))}function M(P,A,te,me){if(!1===a)return A;if(null!==P){if(void 0!==n[P])return n[P];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+P+"'")}let ge=A;return 6403===A&&(5126===te&&(ge=33326),5131===te&&(ge=33325),5121===te&&(ge=33321)),6407===A&&(5126===te&&(ge=34837),5131===te&&(ge=34843),5121===te&&(ge=32849)),6408===A&&(5126===te&&(ge=34836),5131===te&&(ge=34842),5121===te&&(ge=me===sc?35907:32856)),(33325===ge||33326===ge||34842===ge||34836===ge)&&e.get("EXT_color_buffer_float"),ge}function D(P){return P===fi||1004===P||1005===P?9728:9729}function w(P){const A=P.target;A.removeEventListener("dispose",w),function(P){const A=i.get(P);void 0!==A.__webglInit&&(n.deleteTexture(A.__webglTexture),i.remove(P))}(A),A.isVideoTexture&&h.delete(A),o.memory.textures--}function k(P){const A=P.target;A.removeEventListener("dispose",k),function(P){const A=P.texture,te=i.get(P),me=i.get(A);if(P){if(void 0!==me.__webglTexture&&(n.deleteTexture(me.__webglTexture),o.memory.textures--),P.depthTexture&&P.depthTexture.dispose(),P.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++)n.deleteFramebuffer(te.__webglFramebuffer[ge]),te.__webglDepthbuffer&&n.deleteRenderbuffer(te.__webglDepthbuffer[ge]);else n.deleteFramebuffer(te.__webglFramebuffer),te.__webglDepthbuffer&&n.deleteRenderbuffer(te.__webglDepthbuffer),te.__webglMultisampledFramebuffer&&n.deleteFramebuffer(te.__webglMultisampledFramebuffer),te.__webglColorRenderbuffer&&n.deleteRenderbuffer(te.__webglColorRenderbuffer),te.__webglDepthRenderbuffer&&n.deleteRenderbuffer(te.__webglDepthRenderbuffer);if(P.isWebGLMultipleRenderTargets)for(let ge=0,Be=A.length;ge<Be;ge++){const pt=i.get(A[ge]);pt.__webglTexture&&(n.deleteTexture(pt.__webglTexture),o.memory.textures--),i.remove(A[ge])}i.remove(A),i.remove(P)}}(A)}let O=0;function W(P,A){const te=i.get(P);if(P.isVideoTexture&&function(P){const A=o.render.frame;h.get(P)!==A&&(h.set(P,A),P.update())}(P),P.version>0&&te.__version!==P.version){const me=P.image;if(void 0===me)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==me.complete)return void je(te,P,A);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+A),t.bindTexture(3553,te.__webglTexture)}function B(P,A){const te=i.get(P);P.version>0&&te.__version!==P.version?function(P,A,te){if(6!==A.image.length)return;ve(P,A),t.activeTexture(33984+te),t.bindTexture(34067,P.__webglTexture),n.pixelStorei(37440,A.flipY),n.pixelStorei(37441,A.premultiplyAlpha),n.pixelStorei(3317,A.unpackAlignment),n.pixelStorei(37443,0);const me=A&&(A.isCompressedTexture||A.image[0].isCompressedTexture),ge=A.image[0]&&A.image[0].isDataTexture,Be=[];for(let ue=0;ue<6;ue++)Be[ue]=me||ge?ge?A.image[ue].image:A.image[ue]:_(A.image[ue],!1,!0,c);const pt=Be[0],et=y(pt)||a,xt=s.convert(A.format),Qe=s.convert(A.type),V=M(A.internalFormat,xt,Qe,A.encoding);let Pe;if(Se(34067,A,et),me){for(let ue=0;ue<6;ue++){Pe=Be[ue].mipmaps;for(let Ke=0;Ke<Pe.length;Ke++){const $e=Pe[Ke];A.format!==Qi&&A.format!==rc?null!==xt?t.compressedTexImage2D(34069+ue,Ke,V,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+ue,Ke,V,$e.width,$e.height,0,xt,Qe,$e.data)}}P.__maxMipLevel=Pe.length-1}else{Pe=A.mipmaps;for(let ue=0;ue<6;ue++)if(ge){t.texImage2D(34069+ue,0,V,Be[ue].width,Be[ue].height,0,xt,Qe,Be[ue].data);for(let Ke=0;Ke<Pe.length;Ke++){const Ut=Pe[Ke].image[ue].image;t.texImage2D(34069+ue,Ke+1,V,Ut.width,Ut.height,0,xt,Qe,Ut.data)}}else{t.texImage2D(34069+ue,0,V,xt,Qe,Be[ue]);for(let Ke=0;Ke<Pe.length;Ke++)t.texImage2D(34069+ue,Ke+1,V,xt,Qe,Pe[Ke].image[ue])}P.__maxMipLevel=Pe.length}x(A,et)&&v(34067,A,pt.width,pt.height),P.__version=A.version,A.onUpdate&&A.onUpdate(A)}(te,P,A):(t.activeTexture(33984+A),t.bindTexture(34067,te.__webglTexture))}const K={1e3:10497,[Xi]:33071,1002:33648},he={[fi]:9728,1004:9984,1005:9986,[Jn]:9729,1007:9985,1008:9987};function Se(P,A,te){if(te?(n.texParameteri(P,10242,K[A.wrapS]),n.texParameteri(P,10243,K[A.wrapT]),(32879===P||35866===P)&&n.texParameteri(P,32882,K[A.wrapR]),n.texParameteri(P,10240,he[A.magFilter]),n.texParameteri(P,10241,he[A.minFilter])):(n.texParameteri(P,10242,33071),n.texParameteri(P,10243,33071),(32879===P||35866===P)&&n.texParameteri(P,32882,33071),(A.wrapS!==Xi||A.wrapT!==Xi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(P,10240,D(A.magFilter)),n.texParameteri(P,10241,D(A.minFilter)),A.minFilter!==fi&&A.minFilter!==Jn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const me=e.get("EXT_texture_filter_anisotropic");if(A.type===Ko&&!1===e.has("OES_texture_float_linear")||!1===a&&A.type===hd&&!1===e.has("OES_texture_half_float_linear"))return;(A.anisotropy>1||i.get(A).__currentAnisotropy)&&(n.texParameterf(P,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(A.anisotropy,r.getMaxAnisotropy())),i.get(A).__currentAnisotropy=A.anisotropy)}}function ve(P,A){void 0===P.__webglInit&&(P.__webglInit=!0,A.addEventListener("dispose",w),P.__webglTexture=n.createTexture(),o.memory.textures++)}function je(P,A,te){let me=3553;A.isDataTexture2DArray&&(me=35866),A.isDataTexture3D&&(me=32879),ve(P,A),t.activeTexture(33984+te),t.bindTexture(me,P.__webglTexture),n.pixelStorei(37440,A.flipY),n.pixelStorei(37441,A.premultiplyAlpha),n.pixelStorei(3317,A.unpackAlignment),n.pixelStorei(37443,0);const ge=function(P){return!a&&(P.wrapS!==Xi||P.wrapT!==Xi||P.minFilter!==fi&&P.minFilter!==Jn)}(A)&&!1===y(A.image),Be=_(A.image,ge,!1,u),pt=y(Be)||a,et=s.convert(A.format);let V,xt=s.convert(A.type),Qe=M(A.internalFormat,et,xt,A.encoding);Se(me,A,pt);const Pe=A.mipmaps;if(A.isDepthTexture)Qe=6402,a?Qe=A.type===Ko?36012:1014===A.type?33190:A.type===Qf?35056:33189:A.type===Ko&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),A.format===fd&&6402===Qe&&1012!==A.type&&1014!==A.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),A.type=1012,xt=s.convert(A.type)),A.format===Kf&&6402===Qe&&(Qe=34041,A.type!==Qf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),A.type=Qf,xt=s.convert(A.type))),t.texImage2D(3553,0,Qe,Be.width,Be.height,0,et,xt,null);else if(A.isDataTexture)if(Pe.length>0&&pt){for(let ue=0,Ke=Pe.length;ue<Ke;ue++)V=Pe[ue],t.texImage2D(3553,ue,Qe,V.width,V.height,0,et,xt,V.data);A.generateMipmaps=!1,P.__maxMipLevel=Pe.length-1}else t.texImage2D(3553,0,Qe,Be.width,Be.height,0,et,xt,Be.data),P.__maxMipLevel=0;else if(A.isCompressedTexture){for(let ue=0,Ke=Pe.length;ue<Ke;ue++)V=Pe[ue],A.format!==Qi&&A.format!==rc?null!==et?t.compressedTexImage2D(3553,ue,Qe,V.width,V.height,0,V.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,ue,Qe,V.width,V.height,0,et,xt,V.data);P.__maxMipLevel=Pe.length-1}else if(A.isDataTexture2DArray)t.texImage3D(35866,0,Qe,Be.width,Be.height,Be.depth,0,et,xt,Be.data),P.__maxMipLevel=0;else if(A.isDataTexture3D)t.texImage3D(32879,0,Qe,Be.width,Be.height,Be.depth,0,et,xt,Be.data),P.__maxMipLevel=0;else if(Pe.length>0&&pt){for(let ue=0,Ke=Pe.length;ue<Ke;ue++)V=Pe[ue],t.texImage2D(3553,ue,Qe,et,xt,V);A.generateMipmaps=!1,P.__maxMipLevel=Pe.length-1}else t.texImage2D(3553,0,Qe,et,xt,Be),P.__maxMipLevel=0;x(A,pt)&&v(me,A,Be.width,Be.height),P.__version=A.version,A.onUpdate&&A.onUpdate(A)}function fe(P,A,te,me,ge){const Be=s.convert(te.format),pt=s.convert(te.type),et=M(te.internalFormat,Be,pt,te.encoding);32879===ge||35866===ge?t.texImage3D(ge,0,et,A.width,A.height,A.depth,0,Be,pt,null):t.texImage2D(ge,0,et,A.width,A.height,0,Be,pt,null),t.bindFramebuffer(36160,P),n.framebufferTexture2D(36160,me,ge,i.get(te).__webglTexture,0),t.bindFramebuffer(36160,null)}function Le(P,A,te){if(n.bindRenderbuffer(36161,P),A.depthBuffer&&!A.stencilBuffer){let me=33189;if(te){const ge=A.depthTexture;ge&&ge.isDepthTexture&&(ge.type===Ko?me=36012:1014===ge.type&&(me=33190));const Be=St(A);n.renderbufferStorageMultisample(36161,Be,me,A.width,A.height)}else n.renderbufferStorage(36161,me,A.width,A.height);n.framebufferRenderbuffer(36160,36096,36161,P)}else if(A.depthBuffer&&A.stencilBuffer){if(te){const me=St(A);n.renderbufferStorageMultisample(36161,me,35056,A.width,A.height)}else n.renderbufferStorage(36161,34041,A.width,A.height);n.framebufferRenderbuffer(36160,33306,36161,P)}else{const me=!0===A.isWebGLMultipleRenderTargets?A.texture[0]:A.texture,ge=s.convert(me.format),Be=s.convert(me.type),pt=M(me.internalFormat,ge,Be,me.encoding);if(te){const et=St(A);n.renderbufferStorageMultisample(36161,et,pt,A.width,A.height)}else n.renderbufferStorage(36161,pt,A.width,A.height)}n.bindRenderbuffer(36161,null)}function St(P){return a&&P.isWebGLMultisampleRenderTarget?Math.min(d,P.samples):0}let pe=!1,xe=!1;this.allocateTextureUnit=function(){const P=O;return P>=l&&console.warn("THREE.WebGLTextures: Trying to use "+P+" texture units while this GPU supports only "+l),O+=1,P},this.resetTextureUnits=function(){O=0},this.setTexture2D=W,this.setTexture2DArray=function(P,A){const te=i.get(P);P.version>0&&te.__version!==P.version?je(te,P,A):(t.activeTexture(33984+A),t.bindTexture(35866,te.__webglTexture))},this.setTexture3D=function(P,A){const te=i.get(P);P.version>0&&te.__version!==P.version?je(te,P,A):(t.activeTexture(33984+A),t.bindTexture(32879,te.__webglTexture))},this.setTextureCube=B,this.setupRenderTarget=function(P){const A=P.texture,te=i.get(P),me=i.get(A);P.addEventListener("dispose",k),!0!==P.isWebGLMultipleRenderTargets&&(me.__webglTexture=n.createTexture(),me.__version=A.version,o.memory.textures++);const ge=!0===P.isWebGLCubeRenderTarget,Be=!0===P.isWebGLMultipleRenderTargets,pt=!0===P.isWebGLMultisampleRenderTarget,et=A.isDataTexture3D||A.isDataTexture2DArray,xt=y(P)||a;if(a&&A.format===rc&&(A.type===Ko||A.type===hd)&&(A.format=Qi,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),ge){te.__webglFramebuffer=[];for(let Qe=0;Qe<6;Qe++)te.__webglFramebuffer[Qe]=n.createFramebuffer()}else if(te.__webglFramebuffer=n.createFramebuffer(),Be)if(r.drawBuffers){const Qe=P.texture;for(let V=0,Pe=Qe.length;V<Pe;V++){const ue=i.get(Qe[V]);void 0===ue.__webglTexture&&(ue.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(pt)if(a){te.__webglMultisampledFramebuffer=n.createFramebuffer(),te.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,te.__webglColorRenderbuffer);const Qe=s.convert(A.format),V=s.convert(A.type),Pe=M(A.internalFormat,Qe,V,A.encoding),ue=St(P);n.renderbufferStorageMultisample(36161,ue,Pe,P.width,P.height),t.bindFramebuffer(36160,te.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,te.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),P.depthBuffer&&(te.__webglDepthRenderbuffer=n.createRenderbuffer(),Le(te.__webglDepthRenderbuffer,P,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(ge){t.bindTexture(34067,me.__webglTexture),Se(34067,A,xt);for(let Qe=0;Qe<6;Qe++)fe(te.__webglFramebuffer[Qe],P,A,36064,34069+Qe);x(A,xt)&&v(34067,A,P.width,P.height),t.unbindTexture()}else if(Be){const Qe=P.texture;for(let V=0,Pe=Qe.length;V<Pe;V++){const ue=Qe[V],Ke=i.get(ue);t.bindTexture(3553,Ke.__webglTexture),Se(3553,ue,xt),fe(te.__webglFramebuffer,P,ue,36064+V,3553),x(ue,xt)&&v(3553,ue,P.width,P.height)}t.unbindTexture()}else{let Qe=3553;et&&(a?Qe=A.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(Qe,me.__webglTexture),Se(Qe,A,xt),fe(te.__webglFramebuffer,P,A,36064,Qe),x(A,xt)&&v(Qe,A,P.width,P.height,P.depth),t.unbindTexture()}P.depthBuffer&&function(P){const A=i.get(P),te=!0===P.isWebGLCubeRenderTarget;if(P.depthTexture){if(te)throw new Error("target.depthTexture not supported in Cube render targets");!function(P,A){if(A&&A.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,P),!A.depthTexture||!A.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(A.depthTexture).__webglTexture||A.depthTexture.image.width!==A.width||A.depthTexture.image.height!==A.height)&&(A.depthTexture.image.width=A.width,A.depthTexture.image.height=A.height,A.depthTexture.needsUpdate=!0),W(A.depthTexture,0);const me=i.get(A.depthTexture).__webglTexture;if(A.depthTexture.format===fd)n.framebufferTexture2D(36160,36096,3553,me,0);else{if(A.depthTexture.format!==Kf)throw new Error("Unknown depthTexture format");n.framebufferTexture2D(36160,33306,3553,me,0)}}(A.__webglFramebuffer,P)}else if(te){A.__webglDepthbuffer=[];for(let me=0;me<6;me++)t.bindFramebuffer(36160,A.__webglFramebuffer[me]),A.__webglDepthbuffer[me]=n.createRenderbuffer(),Le(A.__webglDepthbuffer[me],P,!1)}else t.bindFramebuffer(36160,A.__webglFramebuffer),A.__webglDepthbuffer=n.createRenderbuffer(),Le(A.__webglDepthbuffer,P,!1);t.bindFramebuffer(36160,null)}(P)},this.updateRenderTargetMipmap=function(P){const A=y(P)||a,te=!0===P.isWebGLMultipleRenderTargets?P.texture:[P.texture];for(let me=0,ge=te.length;me<ge;me++){const Be=te[me];if(x(Be,A)){const pt=P.isWebGLCubeRenderTarget?34067:3553,et=i.get(Be).__webglTexture;t.bindTexture(pt,et),v(pt,Be,P.width,P.height),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function(P){if(P.isWebGLMultisampleRenderTarget)if(a){const A=P.width,te=P.height;let me=16384;P.depthBuffer&&(me|=256),P.stencilBuffer&&(me|=1024);const ge=i.get(P);t.bindFramebuffer(36008,ge.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,ge.__webglFramebuffer),n.blitFramebuffer(0,0,A,te,0,0,A,te,me,9728),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,ge.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(P,A){P&&P.isWebGLRenderTarget&&(!1===pe&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),pe=!0),P=P.texture),W(P,A)},this.safeSetTextureCube=function(P,A){P&&P.isWebGLCubeRenderTarget&&(!1===xe&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),xe=!0),P=P.texture),B(P,A)}}function Eee(n,e,t){const i=t.isWebGL2;return{convert:function(s){let o;if(s===za)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1019===s)return 33635;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(1014===s)return 5125;if(s===Ko)return 5126;if(s===hd)return i?5131:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===rc)return 6407;if(s===Qi)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===fd)return 6402;if(s===Kf)return 34041;if(1028===s)return 6403;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1032===s)return 36248;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s){if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(33776===s)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(35840===s)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===s||37496===s)&&(o=e.get("WEBGL_compressed_texture_etc"),null!==o)){if(37492===s)return o.COMPRESSED_RGB8_ETC2;if(37496===s)return o.COMPRESSED_RGBA8_ETC2_EAC}return 37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s||37840===s||37841===s||37842===s||37843===s||37844===s||37845===s||37846===s||37847===s||37848===s||37849===s||37850===s||37851===s||37852===s||37853===s?(o=e.get("WEBGL_compressed_texture_astc"),null!==o?s:null):36492===s?(o=e.get("EXT_texture_compression_bptc"),null!==o?s:null):s===Qf?i?34042:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}UC.prototype.isMeshDistanceMaterial=!0;class sO extends ni{constructor(e=[]){super(),this.cameras=e}}sO.prototype.isArrayCamera=!0;class gc extends jt{constructor(){super(),this.type="Group"}}gc.prototype.isGroup=!0;const See={type:"move"};class GC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new gc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new gc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new S,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new S),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new gc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new S,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new S),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(See))),c&&e.hand){o=!0;for(const m of e.hand.values()){const _=t.getJointPose(m,i);if(void 0===c.joints[m.jointName]){const g=new gc;g.matrixAutoUpdate=!1,g.visible=!1,c.joints[m.jointName]=g,c.add(g)}const y=c.joints[m.jointName];null!==_&&(y.matrix.fromArray(_.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=_.radius),y.visible=null!==_}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class Dee extends oc{constructor(e,t){super();const i=this,r=e.state;let s=null,o=1,a=null,l="local-floor",c=null,u=null,d=null,h=null,f=null,p=!1,m=null,_=null,y=null,g=null,x=null,v=null;const M=[],D=new Map,w=new ni;w.layers.enable(1),w.viewport=new sn;const k=new ni;k.layers.enable(2),k.viewport=new sn;const z=[w,k],N=new sO;N.layers.enable(1),N.layers.enable(2);let O=null,oe=null;function U(ae){const fe=D.get(ae.inputSource);fe&&fe.dispatchEvent({type:ae.type,data:ae.inputSource})}function W(){D.forEach(function(ae,fe){ae.disconnect(fe)}),D.clear(),O=null,oe=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),d&&t.deleteFramebuffer(d),m&&t.deleteFramebuffer(m),_&&t.deleteRenderbuffer(_),y&&t.deleteRenderbuffer(y),d=null,m=null,_=null,y=null,f=null,h=null,u=null,s=null,je.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function Y(ae){const fe=s.inputSources;for(let Le=0;Le<M.length;Le++)D.set(fe[Le],M[Le]);for(let Le=0;Le<ae.removed.length;Le++){const X=ae.removed[Le],We=D.get(X);We&&(We.dispatchEvent({type:"disconnected",data:X}),D.delete(X))}for(let Le=0;Le<ae.added.length;Le++){const X=ae.added[Le],We=D.get(X);We&&We.dispatchEvent({type:"connected",data:X})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ae){let fe=M[ae];return void 0===fe&&(fe=new GC,M[ae]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(ae){let fe=M[ae];return void 0===fe&&(fe=new GC,M[ae]=fe),fe.getGripSpace()},this.getHand=function(ae){let fe=M[ae];return void 0===fe&&(fe=new GC,M[ae]=fe),fe.getHandSpace()},this.setFramebufferScaleFactor=function(ae){o=ae,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ae){l=ae,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return u},this.getFrame=function(){return g},this.getSession=function(){return s},this.setSession=function(){var ae=function(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){FF(s,i,r,o,a,"next",l)}function a(l){FF(s,i,r,o,a,"throw",l)}o(void 0)})}}(function*(fe){if(s=fe,null!==s){s.addEventListener("select",U),s.addEventListener("selectstart",U),s.addEventListener("selectend",U),s.addEventListener("squeeze",U),s.addEventListener("squeezestart",U),s.addEventListener("squeezeend",U),s.addEventListener("end",W),s.addEventListener("inputsourceschange",Y);const Le=t.getContextAttributes();if(!0!==Le.xrCompatible&&(yield t.makeXRCompatible()),void 0===s.renderState.layers)f=new XRWebGLLayer(s,t,{antialias:Le.antialias,alpha:Le.alpha,depth:Le.depth,stencil:Le.stencil,framebufferScaleFactor:o}),s.updateRenderState({baseLayer:f});else if(t instanceof WebGLRenderingContext)f=new XRWebGLLayer(s,t,{antialias:!0,alpha:Le.alpha,depth:Le.depth,stencil:Le.stencil,framebufferScaleFactor:o}),s.updateRenderState({layers:[f]});else{p=Le.antialias;let X=null;Le.depth&&(v=256,Le.stencil&&(v|=1024),x=Le.stencil?33306:36096,X=Le.stencil?35056:33190);const We={colorFormat:Le.alpha?32856:32849,depthFormat:X,scaleFactor:o};u=new XRWebGLBinding(s,t),h=u.createProjectionLayer(We),d=t.createFramebuffer(),s.updateRenderState({layers:[h]}),p&&(m=t.createFramebuffer(),_=t.createRenderbuffer(),t.bindRenderbuffer(36161,_),t.renderbufferStorageMultisample(36161,4,32856,h.textureWidth,h.textureHeight),r.bindFramebuffer(36160,m),t.framebufferRenderbuffer(36160,36064,36161,_),t.bindRenderbuffer(36161,null),null!==X&&(y=t.createRenderbuffer(),t.bindRenderbuffer(36161,y),t.renderbufferStorageMultisample(36161,4,X,h.textureWidth,h.textureHeight),t.framebufferRenderbuffer(36160,x,36161,y),t.bindRenderbuffer(36161,null)),r.bindFramebuffer(36160,null))}a=yield s.requestReferenceSpace(l),je.setContext(s),je.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(fe){return ae.apply(this,arguments)}}();const L=new S,B=new S;function he(ae,fe){null===fe?ae.matrixWorld.copy(ae.matrix):ae.matrixWorld.multiplyMatrices(fe.matrixWorld,ae.matrix),ae.matrixWorldInverse.copy(ae.matrixWorld).invert()}this.updateCamera=function(ae){if(null===s)return;N.near=k.near=w.near=ae.near,N.far=k.far=w.far=ae.far,(O!==N.near||oe!==N.far)&&(s.updateRenderState({depthNear:N.near,depthFar:N.far}),O=N.near,oe=N.far);const fe=ae.parent,Le=N.cameras;he(N,fe);for(let We=0;We<Le.length;We++)he(Le[We],fe);N.matrixWorld.decompose(N.position,N.quaternion,N.scale),ae.position.copy(N.position),ae.quaternion.copy(N.quaternion),ae.scale.copy(N.scale),ae.matrix.copy(N.matrix),ae.matrixWorld.copy(N.matrixWorld);const X=ae.children;for(let We=0,rt=X.length;We<rt;We++)X[We].updateMatrixWorld(!0);2===Le.length?function(ae,fe,Le){L.setFromMatrixPosition(fe.matrixWorld),B.setFromMatrixPosition(Le.matrixWorld);const X=L.distanceTo(B),We=fe.projectionMatrix.elements,rt=Le.projectionMatrix.elements,Ae=We[14]/(We[10]-1),Ve=We[14]/(We[10]+1),St=(We[9]+1)/We[5],ne=(We[9]-1)/We[5],pe=(We[8]-1)/We[0],xe=(rt[8]+1)/rt[0],Xe=Ae*pe,Re=Ae*xe,P=X/(-pe+xe),A=P*-pe;fe.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),ae.translateX(A),ae.translateZ(P),ae.matrixWorld.compose(ae.position,ae.quaternion,ae.scale),ae.matrixWorldInverse.copy(ae.matrixWorld).invert();const te=Ae+P,me=Ve+P;ae.projectionMatrix.makePerspective(Xe-A,Re+(X-A),St*Ve/me*te,ne*Ve/me*te,te,me)}(N,w,k):N.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return N},this.getFoveation=function(){return null!==h?h.fixedFoveation:null!==f?f.fixedFoveation:void 0},this.setFoveation=function(ae){null!==h&&(h.fixedFoveation=ae),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=ae)};let Se=null;const je=new Ek;je.setAnimationLoop(function(ae,fe){if(c=fe.getViewerPose(a),g=fe,null!==c){const X=c.views;null!==f&&r.bindXRFramebuffer(f.framebuffer);let We=!1;X.length!==N.cameras.length&&(N.cameras.length=0,We=!0);for(let rt=0;rt<X.length;rt++){const Ae=X[rt];let Ve=null;if(null!==f)Ve=f.getViewport(Ae);else{const ne=u.getViewSubImage(h,Ae);r.bindXRFramebuffer(d),void 0!==ne.depthStencilTexture&&t.framebufferTexture2D(36160,x,3553,ne.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,ne.colorTexture,0),Ve=ne.viewport}const St=z[rt];St.matrix.fromArray(Ae.transform.matrix),St.projectionMatrix.fromArray(Ae.projectionMatrix),St.viewport.set(Ve.x,Ve.y,Ve.width,Ve.height),0===rt&&N.matrix.copy(St.matrix),!0===We&&N.cameras.push(St)}p&&(r.bindXRFramebuffer(m),null!==v&&t.clear(v))}const Le=s.inputSources;for(let X=0;X<M.length;X++)M[X].update(Le[X],fe,a);if(Se&&Se(ae,fe),p){const X=h.textureWidth,We=h.textureHeight;r.bindFramebuffer(36008,m),r.bindFramebuffer(36009,d),t.invalidateFramebuffer(36008,[x]),t.invalidateFramebuffer(36009,[x]),t.blitFramebuffer(0,0,X,We,0,0,X,We,16384,9728),t.invalidateFramebuffer(36008,[36064]),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),r.bindFramebuffer(36160,m)}g=null}),this.setAnimationLoop=function(ae){Se=ae},this.dispose=function(){}}}function Aee(n){function i(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map),g.alphaMap&&(y.alphaMap.value=g.alphaMap),g.specularMap&&(y.specularMap.value=g.specularMap),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest);const x=n.get(g).envMap;if(x){y.envMap.value=x,y.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,y.reflectivity.value=g.reflectivity,y.ior.value=g.ior,y.refractionRatio.value=g.refractionRatio;const D=n.get(x).__maxMipLevel;void 0!==D&&(y.maxMipLevel.value=D)}let v,M;g.lightMap&&(y.lightMap.value=g.lightMap,y.lightMapIntensity.value=g.lightMapIntensity),g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity),g.map?v=g.map:g.specularMap?v=g.specularMap:g.displacementMap?v=g.displacementMap:g.normalMap?v=g.normalMap:g.bumpMap?v=g.bumpMap:g.roughnessMap?v=g.roughnessMap:g.metalnessMap?v=g.metalnessMap:g.alphaMap?v=g.alphaMap:g.emissiveMap?v=g.emissiveMap:g.clearcoatMap?v=g.clearcoatMap:g.clearcoatNormalMap?v=g.clearcoatNormalMap:g.clearcoatRoughnessMap?v=g.clearcoatRoughnessMap:g.specularIntensityMap?v=g.specularIntensityMap:g.specularColorMap?v=g.specularColorMap:g.transmissionMap?v=g.transmissionMap:g.thicknessMap?v=g.thicknessMap:g.sheenColorMap?v=g.sheenColorMap:g.sheenRoughnessMap&&(v=g.sheenRoughnessMap),void 0!==v&&(v.isWebGLRenderTarget&&(v=v.texture),!0===v.matrixAutoUpdate&&v.updateMatrix(),y.uvTransform.value.copy(v.matrix)),g.aoMap?M=g.aoMap:g.lightMap&&(M=g.lightMap),void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),y.uv2Transform.value.copy(M.matrix))}function d(y,g){y.roughness.value=g.roughness,y.metalness.value=g.metalness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap),g.bumpMap&&(y.bumpMap.value=g.bumpMap,y.bumpScale.value=g.bumpScale,1===g.side&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,y.normalScale.value.copy(g.normalScale),1===g.side&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),n.get(g).envMap&&(y.envMapIntensity.value=g.envMapIntensity)}return{refreshFogUniforms:function(y,g){y.fogColor.value.copy(g.color),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)},refreshMaterialUniforms:function(y,g,x,v,M){g.isMeshBasicMaterial?i(y,g):g.isMeshLambertMaterial?(i(y,g),function(y,g){g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap)}(y,g)):g.isMeshToonMaterial?(i(y,g),function(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap),g.bumpMap&&(y.bumpMap.value=g.bumpMap,y.bumpScale.value=g.bumpScale,1===g.side&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,y.normalScale.value.copy(g.normalScale),1===g.side&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias)}(y,g)):g.isMeshPhongMaterial?(i(y,g),function(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap),g.bumpMap&&(y.bumpMap.value=g.bumpMap,y.bumpScale.value=g.bumpScale,1===g.side&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,y.normalScale.value.copy(g.normalScale),1===g.side&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias)}(y,g)):g.isMeshStandardMaterial?(i(y,g),g.isMeshPhysicalMaterial?function(y,g,x){d(y,g),y.ior.value=g.ior,g.sheen>0&&(y.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),y.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(y.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(y.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),y.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&y.clearcoatNormalScale.value.negate())),g.transmission>0&&(y.transmission.value=g.transmission,y.transmissionSamplerMap.value=x.texture,y.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap),y.attenuationDistance.value=g.attenuationDistance,y.attenuationColor.value.copy(g.attenuationColor)),y.specularIntensity.value=g.specularIntensity,y.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(y.specularColorMap.value=g.specularColorMap)}(y,g,M):d(y,g)):g.isMeshMatcapMaterial?(i(y,g),function(y,g){g.matcap&&(y.matcap.value=g.matcap),g.bumpMap&&(y.bumpMap.value=g.bumpMap,y.bumpScale.value=g.bumpScale,1===g.side&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,y.normalScale.value.copy(g.normalScale),1===g.side&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias)}(y,g)):g.isMeshDepthMaterial?(i(y,g),function(y,g){g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias)}(y,g)):g.isMeshDistanceMaterial?(i(y,g),function(y,g){g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),y.referencePosition.value.copy(g.referencePosition),y.nearDistance.value=g.nearDistance,y.farDistance.value=g.farDistance}(y,g)):g.isMeshNormalMaterial?(i(y,g),function(y,g){g.bumpMap&&(y.bumpMap.value=g.bumpMap,y.bumpScale.value=g.bumpScale,1===g.side&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,y.normalScale.value.copy(g.normalScale),1===g.side&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias)}(y,g)):g.isLineBasicMaterial?(function(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity}(y,g),g.isLineDashedMaterial&&function(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}(y,g)):g.isPointsMaterial?function(y,g,x,v){let M;y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*x,y.scale.value=.5*v,g.map&&(y.map.value=g.map),g.alphaMap&&(y.alphaMap.value=g.alphaMap),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest),g.map?M=g.map:g.alphaMap&&(M=g.alphaMap),void 0!==M&&(!0===M.matrixAutoUpdate&&M.updateMatrix(),y.uvTransform.value.copy(M.matrix))}(y,g,x,v):g.isSpriteMaterial?function(y,g){let x;y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map),g.alphaMap&&(y.alphaMap.value=g.alphaMap),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest),g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),void 0!==x&&(!0===x.matrixAutoUpdate&&x.updateMatrix(),y.uvTransform.value.copy(x.matrix))}(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function an(n={}){const e=void 0!==n.canvas?n.canvas:function(){const n=Ey("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0!==n.alpha&&n.alpha,r=void 0===n.depth||n.depth,s=void 0===n.stencil||n.stencil,o=void 0!==n.antialias&&n.antialias,a=void 0===n.premultipliedAlpha||n.premultipliedAlpha,l=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,c=void 0!==n.powerPreference?n.powerPreference:"default",u=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let d=null,h=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ki,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let _=!1,y=0,g=0,x=null,v=-1,M=null;const D=new sn,w=new sn;let k=null,z=e.width,N=e.height,O=1,oe=null,U=null;const W=new sn(0,0,z,N),Y=new sn(0,0,z,N);let L=!1;const B=[],K=new Wy;let he=!1,Se=!1,ve=null;const je=new Ue,ae=new S,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Le(){return null===x?O:1}let rt,Ae,Ve,St,ne,pe,xe,Xe,Re,P,A,te,me,ge,Be,pt,et,xt,Qe,V,Pe,ue,Ke,X=t;function We(R,q){for(let J=0;J<R.length;J++){const le=e.getContext(R[J],q);if(null!==le)return le}return null}try{const R={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",nr,!1),e.addEventListener("webglcontextrestored",ir,!1),null===X){const q=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&q.shift(),X=We(q,R),null===X)throw We(q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===X.getShaderPrecisionFormat&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(R){throw console.error("THREE.WebGLRenderer: "+R.message),R}function $e(){rt=new ZZ(X),Ae=new WZ(X,rt,n),rt.init(Ae),ue=new Eee(X,rt,Ae),Ve=new Cee(X,rt,Ae),B[0]=1029,St=new tJ(X),ne=new hee,pe=new Mee(X,rt,Ve,ne,Ae,ue,St),xe=new $Z(m),Xe=new KZ(m),Re=new $Q(X,Ae),Ke=new UZ(X,rt,Re,Ae),P=new JZ(X,Re,St,Ke),A=new sJ(X,P,Re,St),Qe=new rJ(X,Ae,pe),pt=new jZ(ne),te=new dee(m,xe,Xe,rt,Ae,Ke,pt),me=new Aee(ne),ge=new pee(ne),Be=new xee(rt,Ae),xt=new zZ(m,xe,Ve,A,a),et=new rO(m,A,Ae),V=new GZ(X,rt,St,Ae),Pe=new eJ(X,rt,St,Ae),St.programs=te.programs,m.capabilities=Ae,m.extensions=rt,m.properties=ne,m.renderLists=ge,m.shadowMap=et,m.state=Ve,m.info=St}$e();const Ut=new Dee(m,X);function nr(R){R.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function ir(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const R=St.autoReset,q=et.enabled,J=et.autoUpdate,Q=et.needsUpdate,le=et.type;$e(),St.autoReset=R,et.enabled=q,et.autoUpdate=J,et.needsUpdate=Q,et.type=le}function yl(R){const q=R.target;q.removeEventListener("dispose",yl),function(R){(function(R){const q=ne.get(R).programs;void 0!==q&&q.forEach(function(J){te.releaseProgram(J)})})(R),ne.remove(R)}(q)}this.xr=Ut,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const R=rt.get("WEBGL_lose_context");R&&R.loseContext()},this.forceContextRestore=function(){const R=rt.get("WEBGL_lose_context");R&&R.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(R){void 0!==R&&(O=R,this.setSize(z,N,!1))},this.getSize=function(R){return R.set(z,N)},this.setSize=function(R,q,J){Ut.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(z=R,N=q,e.width=Math.floor(R*O),e.height=Math.floor(q*O),!1!==J&&(e.style.width=R+"px",e.style.height=q+"px"),this.setViewport(0,0,R,q))},this.getDrawingBufferSize=function(R){return R.set(z*O,N*O).floor()},this.setDrawingBufferSize=function(R,q,J){z=R,N=q,O=J,e.width=Math.floor(R*J),e.height=Math.floor(q*J),this.setViewport(0,0,R,q)},this.getCurrentViewport=function(R){return R.copy(D)},this.getViewport=function(R){return R.copy(W)},this.setViewport=function(R,q,J,Q){R.isVector4?W.set(R.x,R.y,R.z,R.w):W.set(R,q,J,Q),Ve.viewport(D.copy(W).multiplyScalar(O).floor())},this.getScissor=function(R){return R.copy(Y)},this.setScissor=function(R,q,J,Q){R.isVector4?Y.set(R.x,R.y,R.z,R.w):Y.set(R,q,J,Q),Ve.scissor(w.copy(Y).multiplyScalar(O).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(R){Ve.setScissorTest(L=R)},this.setOpaqueSort=function(R){oe=R},this.setTransparentSort=function(R){U=R},this.getClearColor=function(R){return R.copy(xt.getClearColor())},this.setClearColor=function(){xt.setClearColor.apply(xt,arguments)},this.getClearAlpha=function(){return xt.getClearAlpha()},this.setClearAlpha=function(){xt.setClearAlpha.apply(xt,arguments)},this.clear=function(R,q,J){let Q=0;(void 0===R||R)&&(Q|=16384),(void 0===q||q)&&(Q|=256),(void 0===J||J)&&(Q|=1024),X.clear(Q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",nr,!1),e.removeEventListener("webglcontextrestored",ir,!1),ge.dispose(),Be.dispose(),ne.dispose(),xe.dispose(),Xe.dispose(),A.dispose(),Ke.dispose(),Ut.dispose(),Ut.removeEventListener("sessionstart",Iz),Ut.removeEventListener("sessionend",Rz),ve&&(ve.dispose(),ve=null),Wc.stop()},this.renderBufferDirect=function(R,q,J,Q,le,Ct){null===q&&(q=fe);const mt=le.isMesh&&le.matrixWorld.determinant()<0,ht=function(R,q,J,Q,le){!0!==q.isScene&&(q=fe),pe.resetTextureUnits();const Ct=q.fog,ht=null===x?m.outputEncoding:x.texture.encoding,Nt=(Q.isMeshStandardMaterial?Xe:xe).get(Q.envMap||(Q.isMeshStandardMaterial?q.environment:null)),cn=!0===Q.vertexColors&&!!J.attributes.color&&4===J.attributes.color.itemSize,Gt=!!Q.normalMap&&!!J.attributes.tangent,Xt=!!J.morphAttributes.position,On=!!J.morphAttributes.normal,jc=J.morphAttributes.position?J.morphAttributes.position.length:0,Jt=ne.get(Q),_m=h.state.lights;!0!==he||!0!==Se&&R===M||pt.setState(Q,R,R===M&&Q.id===v);let yn=!1;Q.version===Jt.__version?(Jt.needsLights&&Jt.lightsStateVersion!==_m.state.version||Jt.outputEncoding!==ht||le.isInstancedMesh&&!1===Jt.instancing||!le.isInstancedMesh&&!0===Jt.instancing||le.isSkinnedMesh&&!1===Jt.skinning||!le.isSkinnedMesh&&!0===Jt.skinning||Jt.envMap!==Nt||Q.fog&&Jt.fog!==Ct||void 0!==Jt.numClippingPlanes&&(Jt.numClippingPlanes!==pt.numPlanes||Jt.numIntersection!==pt.numIntersection)||Jt.vertexAlphas!==cn||Jt.vertexTangents!==Gt||Jt.morphTargets!==Xt||Jt.morphNormals!==On||!0===Ae.isWebGL2&&Jt.morphTargetsCount!==jc)&&(yn=!0):(yn=!0,Jt.__version=Q.version);let $c=Jt.currentProgram;!0===yn&&($c=M1(Q,q,le));let qc=!1,Yc=!1,_l=!1;const Ln=$c.getUniforms(),vm=Jt.uniforms;if(Ve.useProgram($c.program)&&(qc=!0,Yc=!0,_l=!0),Q.id!==v&&(v=Q.id,Yc=!0),qc||M!==R){if(Ln.setValue(X,"projectionMatrix",R.projectionMatrix),Ae.logarithmicDepthBuffer&&Ln.setValue(X,"logDepthBufFC",2/(Math.log(R.far+1)/Math.LN2)),M!==R&&(M=R,Yc=!0,_l=!0),Q.isShaderMaterial||Q.isMeshPhongMaterial||Q.isMeshToonMaterial||Q.isMeshStandardMaterial||Q.envMap){const Ys=Ln.map.cameraPosition;void 0!==Ys&&Ys.setValue(X,ae.setFromMatrixPosition(R.matrixWorld))}(Q.isMeshPhongMaterial||Q.isMeshToonMaterial||Q.isMeshLambertMaterial||Q.isMeshBasicMaterial||Q.isMeshStandardMaterial||Q.isShaderMaterial)&&Ln.setValue(X,"isOrthographic",!0===R.isOrthographicCamera),(Q.isMeshPhongMaterial||Q.isMeshToonMaterial||Q.isMeshLambertMaterial||Q.isMeshBasicMaterial||Q.isMeshStandardMaterial||Q.isShaderMaterial||Q.isShadowMaterial||le.isSkinnedMesh)&&Ln.setValue(X,"viewMatrix",R.matrixWorldInverse)}if(le.isSkinnedMesh){Ln.setOptional(X,le,"bindMatrix"),Ln.setOptional(X,le,"bindMatrixInverse");const Ys=le.skeleton;Ys&&(Ae.floatVertexTextures?(null===Ys.boneTexture&&Ys.computeBoneTexture(),Ln.setValue(X,"boneTexture",Ys.boneTexture,pe),Ln.setValue(X,"boneTextureSize",Ys.boneTextureSize)):Ln.setOptional(X,Ys,"boneMatrices"))}return!!J&&(void 0!==J.morphAttributes.position||void 0!==J.morphAttributes.normal)&&Qe.update(le,J,Q,$c),(Yc||Jt.receiveShadow!==le.receiveShadow)&&(Jt.receiveShadow=le.receiveShadow,Ln.setValue(X,"receiveShadow",le.receiveShadow)),Yc&&(Ln.setValue(X,"toneMappingExposure",m.toneMappingExposure),Jt.needsLights&&function(R,q){R.ambientLightColor.needsUpdate=q,R.lightProbe.needsUpdate=q,R.directionalLights.needsUpdate=q,R.directionalLightShadows.needsUpdate=q,R.pointLights.needsUpdate=q,R.pointLightShadows.needsUpdate=q,R.spotLights.needsUpdate=q,R.spotLightShadows.needsUpdate=q,R.rectAreaLights.needsUpdate=q,R.hemisphereLights.needsUpdate=q}(vm,_l),Ct&&Q.fog&&me.refreshFogUniforms(vm,Ct),me.refreshMaterialUniforms(vm,Q,O,N,ve),Ka.upload(X,Jt.uniformsList,vm,pe)),Q.isShaderMaterial&&!0===Q.uniformsNeedUpdate&&(Ka.upload(X,Jt.uniformsList,vm,pe),Q.uniformsNeedUpdate=!1),Q.isSpriteMaterial&&Ln.setValue(X,"center",le.center),Ln.setValue(X,"modelViewMatrix",le.modelViewMatrix),Ln.setValue(X,"normalMatrix",le.normalMatrix),Ln.setValue(X,"modelMatrix",le.matrixWorld),$c}(R,q,J,Q,le);Ve.setMaterial(Q,mt);let Nt=J.index;const cn=J.attributes.position;if(null===Nt){if(void 0===cn||0===cn.count)return}else if(0===Nt.count)return;let Gt=1;!0===Q.wireframe&&(Nt=P.getWireframeAttribute(J),Gt=2),Ke.setup(le,Q,ht,J,Nt);let Xt,On=V;null!==Nt&&(Xt=Re.get(Nt),On=Pe,On.setIndex(Xt));const jc=null!==Nt?Nt.count:cn.count,Jt=J.drawRange.start*Gt,_m=J.drawRange.count*Gt,yn=null!==Ct?Ct.start*Gt:0,$c=null!==Ct?Ct.count*Gt:1/0,qc=Math.max(Jt,yn),Yc=Math.min(jc,Jt+_m,yn+$c)-1,_l=Math.max(0,Yc-qc+1);if(0!==_l){if(le.isMesh)!0===Q.wireframe?(Ve.setLineWidth(Q.wireframeLinewidth*Le()),On.setMode(1)):On.setMode(4);else if(le.isLine){let Ln=Q.linewidth;void 0===Ln&&(Ln=1),Ve.setLineWidth(Ln*Le()),On.setMode(le.isLineSegments?1:le.isLineLoop?2:3)}else le.isPoints?On.setMode(0):le.isSprite&&On.setMode(4);if(le.isInstancedMesh)On.renderInstances(qc,_l,le.count);else if(J.isInstancedBufferGeometry){const Ln=Math.min(J.instanceCount,J._maxInstanceCount);On.renderInstances(qc,_l,Ln)}else On.render(qc,_l)}},this.compile=function(R,q){h=Be.get(R),h.init(),p.push(h),R.traverseVisible(function(J){J.isLight&&J.layers.test(q.layers)&&(h.pushLight(J),J.castShadow&&h.pushShadow(J))}),h.setupLights(m.physicallyCorrectLights),R.traverse(function(J){const Q=J.material;if(Q)if(Array.isArray(Q))for(let le=0;le<Q.length;le++)M1(Q[le],R,J);else M1(Q,R,J)}),p.pop(),h=null};let qs=null;function Iz(){Wc.stop()}function Rz(){Wc.start()}const Wc=new Ek;function Pz(R,q,J,Q){if(!1===R.visible)return;if(R.layers.test(q.layers))if(R.isGroup)J=R.renderOrder;else if(R.isLOD)!0===R.autoUpdate&&R.update(q);else if(R.isLight)h.pushLight(R),R.castShadow&&h.pushShadow(R);else if(R.isSprite){if(!R.frustumCulled||K.intersectsSprite(R)){Q&&ae.setFromMatrixPosition(R.matrixWorld).applyMatrix4(je);const mt=A.update(R),ht=R.material;ht.visible&&d.push(R,mt,ht,J,ae.z,null)}}else if((R.isMesh||R.isLine||R.isPoints)&&(R.isSkinnedMesh&&R.skeleton.frame!==St.render.frame&&(R.skeleton.update(),R.skeleton.frame=St.render.frame),!R.frustumCulled||K.intersectsObject(R))){Q&&ae.setFromMatrixPosition(R.matrixWorld).applyMatrix4(je);const mt=A.update(R),ht=R.material;if(Array.isArray(ht)){const Nt=mt.groups;for(let cn=0,Gt=Nt.length;cn<Gt;cn++){const Xt=Nt[cn],On=ht[Xt.materialIndex];On&&On.visible&&d.push(R,mt,On,J,ae.z,Xt)}}else ht.visible&&d.push(R,mt,ht,J,ae.z,null)}const Ct=R.children;for(let mt=0,ht=Ct.length;mt<ht;mt++)Pz(Ct[mt],q,J,Q)}function Fz(R,q,J,Q){const le=R.opaque,Ct=R.transmissive,mt=R.transparent;h.setupLightsView(J),Ct.length>0&&function(R,q,J){null===ve&&(ve=new(!0===o&&!0===Ae.isWebGL2?dk:fo)(1024,1024,{generateMipmaps:!0,type:null!==ue.convert(hd)?hd:za,minFilter:1008,magFilter:fi,wrapS:Xi,wrapT:Xi}));const Q=m.getRenderTarget();m.setRenderTarget(ve),m.clear();const le=m.toneMapping;m.toneMapping=0,vx(R,q,J),m.toneMapping=le,pe.updateMultisampleRenderTarget(ve),pe.updateRenderTargetMipmap(ve),m.setRenderTarget(Q)}(le,q,J),Q&&Ve.viewport(D.copy(Q)),le.length>0&&vx(le,q,J),Ct.length>0&&vx(Ct,q,J),mt.length>0&&vx(mt,q,J)}function vx(R,q,J){const Q=!0===q.isScene?q.overrideMaterial:null;for(let le=0,Ct=R.length;le<Ct;le++){const mt=R[le],ht=mt.object,Nt=mt.geometry,cn=null===Q?mt.material:Q,Gt=mt.group;ht.layers.test(J.layers)&&eve(ht,q,J,Nt,cn,Gt)}}function eve(R,q,J,Q,le,Ct){R.onBeforeRender(m,q,J,Q,le,Ct),R.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,R.matrixWorld),R.normalMatrix.getNormalMatrix(R.modelViewMatrix),le.onBeforeRender(m,q,J,Q,R,Ct),!0===le.transparent&&2===le.side?(le.side=1,le.needsUpdate=!0,m.renderBufferDirect(J,q,Q,le,R,Ct),le.side=0,le.needsUpdate=!0,m.renderBufferDirect(J,q,Q,le,R,Ct),le.side=2):m.renderBufferDirect(J,q,Q,le,R,Ct),R.onAfterRender(m,q,J,Q,le,Ct)}function M1(R,q,J){!0!==q.isScene&&(q=fe);const Q=ne.get(R),le=h.state.lights,mt=le.state.version,ht=te.getParameters(R,le.state,h.state.shadowsArray,q,J),Nt=te.getProgramCacheKey(ht);let cn=Q.programs;Q.environment=R.isMeshStandardMaterial?q.environment:null,Q.fog=q.fog,Q.envMap=(R.isMeshStandardMaterial?Xe:xe).get(R.envMap||Q.environment),void 0===cn&&(R.addEventListener("dispose",yl),cn=new Map,Q.programs=cn);let Gt=cn.get(Nt);if(void 0!==Gt){if(Q.currentProgram===Gt&&Q.lightsStateVersion===mt)return kz(R,ht),Gt}else ht.uniforms=te.getUniforms(R),R.onBuild(J,ht,m),R.onBeforeCompile(ht,m),Gt=te.acquireProgram(ht,Nt),cn.set(Nt,Gt),Q.uniforms=ht.uniforms;const Xt=Q.uniforms;(!R.isShaderMaterial&&!R.isRawShaderMaterial||!0===R.clipping)&&(Xt.clippingPlanes=pt.uniform),kz(R,ht),Q.needsLights=function(R){return R.isMeshLambertMaterial||R.isMeshToonMaterial||R.isMeshPhongMaterial||R.isMeshStandardMaterial||R.isShadowMaterial||R.isShaderMaterial&&!0===R.lights}(R),Q.lightsStateVersion=mt,Q.needsLights&&(Xt.ambientLightColor.value=le.state.ambient,Xt.lightProbe.value=le.state.probe,Xt.directionalLights.value=le.state.directional,Xt.directionalLightShadows.value=le.state.directionalShadow,Xt.spotLights.value=le.state.spot,Xt.spotLightShadows.value=le.state.spotShadow,Xt.rectAreaLights.value=le.state.rectArea,Xt.ltc_1.value=le.state.rectAreaLTC1,Xt.ltc_2.value=le.state.rectAreaLTC2,Xt.pointLights.value=le.state.point,Xt.pointLightShadows.value=le.state.pointShadow,Xt.hemisphereLights.value=le.state.hemi,Xt.directionalShadowMap.value=le.state.directionalShadowMap,Xt.directionalShadowMatrix.value=le.state.directionalShadowMatrix,Xt.spotShadowMap.value=le.state.spotShadowMap,Xt.spotShadowMatrix.value=le.state.spotShadowMatrix,Xt.pointShadowMap.value=le.state.pointShadowMap,Xt.pointShadowMatrix.value=le.state.pointShadowMatrix);const On=Gt.getUniforms(),jc=Ka.seqWithValue(On.seq,Xt);return Q.currentProgram=Gt,Q.uniformsList=jc,Gt}function kz(R,q){const J=ne.get(R);J.outputEncoding=q.outputEncoding,J.instancing=q.instancing,J.skinning=q.skinning,J.morphTargets=q.morphTargets,J.morphNormals=q.morphNormals,J.morphTargetsCount=q.morphTargetsCount,J.numClippingPlanes=q.numClippingPlanes,J.numIntersection=q.numClipIntersection,J.vertexAlphas=q.vertexAlphas,J.vertexTangents=q.vertexTangents}Wc.setAnimationLoop(function(R){qs&&qs(R)}),"undefined"!=typeof window&&Wc.setContext(window),this.setAnimationLoop=function(R){qs=R,Ut.setAnimationLoop(R),null===R?Wc.stop():Wc.start()},Ut.addEventListener("sessionstart",Iz),Ut.addEventListener("sessionend",Rz),this.render=function(R,q){if(void 0===q||!0===q.isCamera){if(!0!==_){if(!0===R.autoUpdate&&R.updateMatrixWorld(),null===q.parent&&q.updateMatrixWorld(),!0===Ut.enabled&&!0===Ut.isPresenting&&(!0===Ut.cameraAutoUpdate&&Ut.updateCamera(q),q=Ut.getCamera()),!0===R.isScene&&R.onBeforeRender(m,R,q,x),h=Be.get(R,p.length),h.init(),p.push(h),je.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),K.setFromProjectionMatrix(je),Se=this.localClippingEnabled,he=pt.init(this.clippingPlanes,Se,q),d=ge.get(R,f.length),d.init(),f.push(d),Pz(R,q,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(oe,U),!0===he&&pt.beginShadows(),et.render(h.state.shadowsArray,R,q),!0===he&&pt.endShadows(),!0===this.info.autoReset&&this.info.reset(),xt.render(d,R),h.setupLights(m.physicallyCorrectLights),q.isArrayCamera){const Q=q.cameras;for(let le=0,Ct=Q.length;le<Ct;le++){const mt=Q[le];Fz(d,R,mt,mt.viewport)}}else Fz(d,R,q);null!==x&&(pe.updateMultisampleRenderTarget(x),pe.updateRenderTargetMipmap(x)),!0===R.isScene&&R.onAfterRender(m,R,q),Ve.buffers.depth.setTest(!0),Ve.buffers.depth.setMask(!0),Ve.buffers.color.setMask(!0),Ve.setPolygonOffset(!1),Ke.resetDefaultState(),v=-1,M=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return g},this.getRenderTarget=function(){return x},this.setRenderTarget=function(R,q=0,J=0){x=R,y=q,g=J,R&&void 0===ne.get(R).__webglFramebuffer&&pe.setupRenderTarget(R);let Q=null,le=!1,Ct=!1;if(R){const ht=R.texture;(ht.isDataTexture3D||ht.isDataTexture2DArray)&&(Ct=!0);const Nt=ne.get(R).__webglFramebuffer;R.isWebGLCubeRenderTarget?(Q=Nt[q],le=!0):Q=R.isWebGLMultisampleRenderTarget?ne.get(R).__webglMultisampledFramebuffer:Nt,D.copy(R.viewport),w.copy(R.scissor),k=R.scissorTest}else D.copy(W).multiplyScalar(O).floor(),w.copy(Y).multiplyScalar(O).floor(),k=L;if(Ve.bindFramebuffer(36160,Q)&&Ae.drawBuffers){let ht=!1;if(R)if(R.isWebGLMultipleRenderTargets){const Nt=R.texture;if(B.length!==Nt.length||36064!==B[0]){for(let cn=0,Gt=Nt.length;cn<Gt;cn++)B[cn]=36064+cn;B.length=Nt.length,ht=!0}}else(1!==B.length||36064!==B[0])&&(B[0]=36064,B.length=1,ht=!0);else(1!==B.length||1029!==B[0])&&(B[0]=1029,B.length=1,ht=!0);ht&&(Ae.isWebGL2?X.drawBuffers(B):rt.get("WEBGL_draw_buffers").drawBuffersWEBGL(B))}if(Ve.viewport(D),Ve.scissor(w),Ve.setScissorTest(k),le){const ht=ne.get(R.texture);X.framebufferTexture2D(36160,36064,34069+q,ht.__webglTexture,J)}else if(Ct){const ht=ne.get(R.texture);X.framebufferTextureLayer(36160,36064,ht.__webglTexture,J||0,q||0)}v=-1},this.readRenderTargetPixels=function(R,q,J,Q,le,Ct,mt){if(!R||!R.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ht=ne.get(R).__webglFramebuffer;if(R.isWebGLCubeRenderTarget&&void 0!==mt&&(ht=ht[mt]),ht){Ve.bindFramebuffer(36160,ht);try{const Nt=R.texture,cn=Nt.format,Gt=Nt.type;if(cn!==Qi&&ue.convert(cn)!==X.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Xt=Gt===hd&&(rt.has("EXT_color_buffer_half_float")||Ae.isWebGL2&&rt.has("EXT_color_buffer_float"));if(!(Gt===za||ue.convert(Gt)===X.getParameter(35738)||Gt===Ko&&(Ae.isWebGL2||rt.has("OES_texture_float")||rt.has("WEBGL_color_buffer_float"))||Xt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===X.checkFramebufferStatus(36160)?q>=0&&q<=R.width-Q&&J>=0&&J<=R.height-le&&X.readPixels(q,J,Q,le,ue.convert(cn),ue.convert(Gt),Ct):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Nt=null!==x?ne.get(x).__webglFramebuffer:null;Ve.bindFramebuffer(36160,Nt)}}},this.copyFramebufferToTexture=function(R,q,J=0){const Q=Math.pow(2,-J),le=Math.floor(q.image.width*Q),Ct=Math.floor(q.image.height*Q);let mt=ue.convert(q.format);Ae.isWebGL2&&(6407===mt&&(mt=32849),6408===mt&&(mt=32856)),pe.setTexture2D(q,0),X.copyTexImage2D(3553,J,mt,R.x,R.y,le,Ct,0),Ve.unbindTexture()},this.copyTextureToTexture=function(R,q,J,Q=0){const le=q.image.width,Ct=q.image.height,mt=ue.convert(J.format),ht=ue.convert(J.type);pe.setTexture2D(J,0),X.pixelStorei(37440,J.flipY),X.pixelStorei(37441,J.premultiplyAlpha),X.pixelStorei(3317,J.unpackAlignment),q.isDataTexture?X.texSubImage2D(3553,Q,R.x,R.y,le,Ct,mt,ht,q.image.data):q.isCompressedTexture?X.compressedTexSubImage2D(3553,Q,R.x,R.y,q.mipmaps[0].width,q.mipmaps[0].height,mt,q.mipmaps[0].data):X.texSubImage2D(3553,Q,R.x,R.y,mt,ht,q.image),0===Q&&J.generateMipmaps&&X.generateMipmap(3553),Ve.unbindTexture()},this.copyTextureToTexture3D=function(R,q,J,Q,le=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Ct=R.max.x-R.min.x+1,mt=R.max.y-R.min.y+1,ht=R.max.z-R.min.z+1,Nt=ue.convert(Q.format),cn=ue.convert(Q.type);let Gt;if(Q.isDataTexture3D)pe.setTexture3D(Q,0),Gt=32879;else{if(!Q.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");pe.setTexture2DArray(Q,0),Gt=35866}X.pixelStorei(37440,Q.flipY),X.pixelStorei(37441,Q.premultiplyAlpha),X.pixelStorei(3317,Q.unpackAlignment);const Xt=X.getParameter(3314),On=X.getParameter(32878),jc=X.getParameter(3316),Jt=X.getParameter(3315),_m=X.getParameter(32877),yn=J.isCompressedTexture?J.mipmaps[0]:J.image;X.pixelStorei(3314,yn.width),X.pixelStorei(32878,yn.height),X.pixelStorei(3316,R.min.x),X.pixelStorei(3315,R.min.y),X.pixelStorei(32877,R.min.z),J.isDataTexture||J.isDataTexture3D?X.texSubImage3D(Gt,le,q.x,q.y,q.z,Ct,mt,ht,Nt,cn,yn.data):J.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),X.compressedTexSubImage3D(Gt,le,q.x,q.y,q.z,Ct,mt,ht,Nt,yn.data)):X.texSubImage3D(Gt,le,q.x,q.y,q.z,Ct,mt,ht,Nt,cn,yn),X.pixelStorei(3314,Xt),X.pixelStorei(32878,On),X.pixelStorei(3316,jc),X.pixelStorei(3315,Jt),X.pixelStorei(32877,_m),0===le&&Q.generateMipmaps&&X.generateMipmap(Gt),Ve.unbindTexture()},this.initTexture=function(R){pe.setTexture2D(R,0),Ve.unbindTexture()},this.resetState=function(){y=0,g=0,x=null,Ve.reset(),Ke.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}an.prototype.isWebGLRenderer=!0,class extends an{}.prototype.isWebGL1Renderer=!0;class Yy{constructor(e,t=25e-5){this.name="",this.color=new Ie(e),this.density=t}clone(){return new Yy(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Yy.prototype.isFogExp2=!0;class Xy{constructor(e,t=1,i=1e3){this.name="",this.color=new Ie(e),this.near=t,this.far=i}clone(){return new Xy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Xy.prototype.isFog=!0;class yc extends jt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}yc.prototype.isScene=!0;class Bd{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Zf,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Lr()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Lr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Lr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Bd.prototype.isInterleavedBuffer=!0;const Hn=new S;class _c{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Hn.x=this.getX(t),Hn.y=this.getY(t),Hn.z=this.getZ(t),Hn.applyMatrix4(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Hn.x=this.getX(t),Hn.y=this.getY(t),Hn.z=this.getZ(t),Hn.applyNormalMatrix(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Hn.x=this.getX(t),Hn.y=this.getY(t),Hn.z=this.getZ(t),Hn.transformDirection(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new on(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new _c(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}_c.prototype.isInterleavedBufferAttribute=!0;class WC extends Oi{constructor(e){super(),this.type="SpriteMaterial",this.color=new Ie(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Vd;WC.prototype.isSpriteMaterial=!0;const cp=new S,Hd=new S,zd=new S,Ud=new re,up=new re,oO=new Ue,Qy=new S,dp=new S,Ky=new S,aO=new re,jC=new re,lO=new re;function Zy(n,e,t,i,r,s){Ud.subVectors(n,t).addScalar(.5).multiply(i),void 0!==r?(up.x=s*Ud.x-r*Ud.y,up.y=r*Ud.x+s*Ud.y):up.copy(Ud),n.copy(e),n.x+=up.x,n.y+=up.y,n.applyMatrix4(oO)}(class extends jt{constructor(e){if(super(),this.type="Sprite",void 0===Vd){Vd=new dt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Bd(t,5);Vd.setIndex([0,1,2,0,2,3]),Vd.setAttribute("position",new _c(i,3,0,!1)),Vd.setAttribute("uv",new _c(i,2,3,!1))}this.geometry=Vd,this.material=void 0!==e?e:new WC,this.center=new re(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hd.setFromMatrixScale(this.matrixWorld),oO.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),zd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Hd.multiplyScalar(-zd.z);const i=this.material.rotation;let r,s;0!==i&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Zy(Qy.set(-.5,-.5,0),zd,o,Hd,r,s),Zy(dp.set(.5,-.5,0),zd,o,Hd,r,s),Zy(Ky.set(.5,.5,0),zd,o,Hd,r,s),aO.set(0,0),jC.set(1,0),lO.set(1,1);let a=e.ray.intersectTriangle(Qy,dp,Ky,!1,cp);if(null===a&&(Zy(dp.set(-.5,.5,0),zd,o,Hd,r,s),jC.set(0,1),a=e.ray.intersectTriangle(Qy,Ky,dp,!1,cp),null===a))return;const l=e.ray.origin.distanceTo(cp);l<e.near||l>e.far||t.push({distance:l,point:cp.clone(),uv:ti.getUV(cp,Qy,dp,Ky,aO,jC,lO,new re),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const uO=new S,dO=new sn,hO=new sn,Pee=new S,fO=new Ue;class qC extends Vn{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ue,this.bindMatrixInverse=new Ue}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new sn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;dO.fromBufferAttribute(r.attributes.skinIndex,e),hO.fromBufferAttribute(r.attributes.skinWeight,e),uO.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=hO.getComponent(s);if(0!==o){const a=dO.getComponent(s);fO.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Pee.copy(uO).applyMatrix4(fO),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}qC.prototype.isSkinnedMesh=!0;(class extends jt{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class extends ei{constructor(e=null,t=1,i=1,r,s,o,a,l,c=fi,u=fi,d,h){super(null,o,a,l,c,u,r,s,d,h),this.image={data:e,width:t,height:i},this.magFilter=c,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}).prototype.isDataTexture=!0;class oa extends on{constructor(e,t,i,r=1){"number"==typeof i&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}oa.prototype.isInstancedBufferAttribute=!0;const mO=new Ue,gO=new Ue,e_=[],hp=new Vn;(class extends Vn{constructor(e,t,i){super(e,t),this.instanceMatrix=new oa(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(hp.geometry=this.geometry,hp.material=this.material,void 0!==hp.material)for(let s=0;s<r;s++){this.getMatrixAt(s,mO),gO.multiplyMatrices(i,mO),hp.matrixWorld=gO,hp.raycast(e,e_);for(let o=0,a=e_.length;o<a;o++){const l=e_[o];l.instanceId=s,l.object=this,t.push(l)}e_.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new oa(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Li extends Oi{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Ie(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Li.prototype.isLineBasicMaterial=!0;const _O=new S,vO=new S,xO=new Ue,QC=new dc,t_=new uc;class vc extends jt{constructor(e=new dt,t=new Li){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)_O.fromBufferAttribute(t,r-1),vO.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=_O.distanceTo(vO);e.setAttribute("lineDistance",new Ge(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),t_.copy(i.boundingSphere),t_.applyMatrix4(r),t_.radius+=s,!1===e.ray.intersectsSphere(t_))return;xO.copy(r).invert(),QC.copy(e.ray).applyMatrix4(xO);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new S,u=new S,d=new S,h=new S,f=this.isLineSegments?2:1;if(i.isBufferGeometry){const p=i.index,_=i.attributes.position;if(null!==p)for(let x=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count)-1;x<v;x+=f){const M=p.getX(x),D=p.getX(x+1);if(c.fromBufferAttribute(_,M),u.fromBufferAttribute(_,D),QC.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(h);k<e.near||k>e.far||t.push({distance:k,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}else for(let x=Math.max(0,o.start),v=Math.min(_.count,o.start+o.count)-1;x<v;x+=f){if(c.fromBufferAttribute(_,x),u.fromBufferAttribute(_,x+1),QC.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(h);D<e.near||D>e.far||t.push({distance:D,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}vc.prototype.isLine=!0;const bO=new S,wO=new S;class Za extends vc{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)bO.fromBufferAttribute(t,r),wO.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+bO.distanceTo(wO);e.setAttribute("lineDistance",new Ge(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Za.prototype.isLineSegments=!0;(class extends vc{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class Wd extends Oi{constructor(e){super(),this.type="PointsMaterial",this.color=new Ie(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Wd.prototype.isPointsMaterial=!0;const MO=new Ue,KC=new dc,n_=new uc,i_=new S;function EO(n,e,t,i,r,s,o){const a=KC.distanceSqToPoint(n);if(a<t){const l=new S;KC.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}(class extends jt{constructor(e=new dt,t=new Wd){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),n_.copy(i.boundingSphere),n_.applyMatrix4(r),n_.radius+=s,!1===e.ray.intersectsSphere(n_))return;MO.copy(r).invert(),KC.copy(e.ray).applyMatrix4(MO);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(i.isBufferGeometry){const c=i.index,d=i.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);p<m;p++){const _=c.getX(p);i_.fromBufferAttribute(d,_),EO(i_,_,l,r,e,t,this)}else for(let p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);p<m;p++)i_.fromBufferAttribute(d,p),EO(i_,p,l,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class extends ei{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.format=void 0!==a?a:rc,this.minFilter=void 0!==o?o:Jn,this.magFilter=void 0!==s?s:Jn,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0;(class extends ei{constructor(e,t,i,r,s,o,a,l,c,u,d,h){super(null,o,a,l,c,u,r,s,d,h),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class extends ei{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,class extends ei{constructor(e,t,i,r,s,o,a,l,c,u){if((u=void 0!==u?u:fd)!==fd&&u!==Kf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===fd&&(i=1012),void 0===i&&u===Kf&&(i=Qf),super(null,r,s,o,a,l,u,i,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:fi,this.minFilter=void 0!==l?l:fi,this.flipY=!1,this.generateMipmaps=!1}}.prototype.isDepthTexture=!0,new S,new S,new S,new ti;class cs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){const i=1e-4;let r=e-i,s=e+i;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new re:new S);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new S,r=[],s=[],o=[],a=new S,l=new Ue;for(let f=0;f<=e;f++)r[f]=this.getTangentAt(f/e,new S);s[0]=new S,o[0]=new S;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(ki(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(!0===t){let f=Math.acos(ki(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class d_ extends cs{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new re,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}d_.prototype.isEllipseCurve=!0;class AO extends d_{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.type="ArcCurve"}}function JC(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,f*=u,r(o,a,h,f)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}AO.prototype.isArcCurve=!0;const h_=new S,eM=new JC,tM=new JC,nM=new JC;class TO extends cs{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new S){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(h_.subVectors(r[0],r[1]).add(r[0]),c=h_);const d=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(h_.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=h_),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let p=Math.pow(c.distanceToSquared(d),f),m=Math.pow(d.distanceToSquared(h),f),_=Math.pow(h.distanceToSquared(u),f);m<1e-4&&(m=1),p<1e-4&&(p=m),_<1e-4&&(_=m),eM.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,p,m,_),tM.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,p,m,_),nM.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,p,m,_)}else"catmullrom"===this.curveType&&(eM.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),tM.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),nM.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return i.set(eM.calc(l),tM.calc(l),nM.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new S).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function IO(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function fp(n,e,t,i){return function(n,e){const t=1-n;return t*t*e}(n,e)+function(n,e){return 2*(1-n)*n*e}(n,t)+function(n,e){return n*n*e}(n,i)}function pp(n,e,t,i,r){return function(n,e){const t=1-n;return t*t*t*e}(n,e)+function(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function(n,e){return 3*(1-n)*n*n*e}(n,i)+function(n,e){return n*n*n*e}(n,r)}TO.prototype.isCatmullRomCurve3=!0;class iM extends cs{constructor(e=new re,t=new re,i=new re,r=new re){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new re){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(pp(e,r.x,s.x,o.x,a.x),pp(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}iM.prototype.isCubicBezierCurve=!0;class RO extends cs{constructor(e=new S,t=new S,i=new S,r=new S){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new S){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(pp(e,r.x,s.x,o.x,a.x),pp(e,r.y,s.y,o.y,a.y),pp(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}RO.prototype.isCubicBezierCurve3=!0;class f_ extends cs{constructor(e=new re,t=new re){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new re){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new re;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}f_.prototype.isLineCurve=!0;class rM extends cs{constructor(e=new re,t=new re,i=new re){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new re){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(fp(e,r.x,s.x,o.x),fp(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}rM.prototype.isQuadraticBezierCurve=!0;class sM extends cs{constructor(e=new S,t=new S,i=new S){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new S){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(fp(e,r.x,s.x,o.x),fp(e,r.y,s.y,o.y),fp(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}sM.prototype.isQuadraticBezierCurve3=!0;class oM extends cs{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new re){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(IO(a,l.x,c.x,u.x,d.x),IO(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new re).fromArray(r))}return this}}oM.prototype.isSplineCurve=!0;var aM=Object.freeze({__proto__:null,ArcCurve:AO,CatmullRomCurve3:TO,CubicBezierCurve:iM,CubicBezierCurve3:RO,EllipseCurve:d_,LineCurve:f_,LineCurve3:class extends cs{constructor(e=new S,t=new S){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new S){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:rM,QuadraticBezierCurve3:sM,SplineCurve:oM});class jee extends cs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new f_(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new aM[r.type]).fromJSON(r))}return this}}class p_ extends jee{constructor(e){super(),this.type="Path",this.currentPoint=new re,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new f_(this.currentPoint.clone(),new re(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new rM(this.currentPoint.clone(),new re(e,t),new re(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new iM(this.currentPoint.clone(),new re(e,t),new re(i,r),new re(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new oM(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new d_(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class aa extends p_{constructor(e){super(e),this.uuid=Lr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new p_).fromJSON(r))}return this}}function PO(n,e,t,i,r){let s,o;if(r===function(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)o=OO(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=OO(s,n[s],n[s+1],o);return o&&m_(o,o.next)&&(yp(o),o=o.next),o}function el(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!m_(t,t.next)&&0!==Sn(t.prev,t,t.next))t=t.next;else{if(yp(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function mp(n,e,t,i,r,s,o){if(!n)return;!o&&s&&function(n,e,t,i){let r=n;do{null===r.z&&(r.z=lM(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,i);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1)}(r)}(n,i,r,s);let l,c,a=n;for(;n.prev!==n.next;)if(l=n.prev,c=n.next,s?Yee(n,i,r,s):qee(n))e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),yp(n),n=c.next,a=c.next;else if((n=c)===a){o?1===o?mp(n=Xee(el(n),e,t),e,t,i,r,s,2):2===o&&Qee(n,e,t,i,r,s):mp(el(n),e,t,i,r,s,1);break}}function qee(n){const e=n.prev,t=n,i=n.next;if(Sn(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if($d(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&Sn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Yee(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Sn(r,s,o)>=0)return!1;const c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,d=lM(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,t,i),h=lM(c,u,e,t,i);let f=n.prevZ,p=n.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==n.prev&&f!==n.next&&$d(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Sn(f.prev,f,f.next)>=0||(f=f.prevZ,p!==n.prev&&p!==n.next&&$d(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Sn(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==n.prev&&f!==n.next&&$d(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Sn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==n.prev&&p!==n.next&&$d(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Sn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Xee(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!m_(r,s)&&FO(r,i,i.next,s)&&gp(r,s)&&gp(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),yp(i),yp(i.next),i=n=s),i=i.next}while(i!==n);return el(i)}function Qee(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&ste(o,a)){let l=kO(o,a);return o=el(o,o.next),l=el(l,l.next),mp(o,e,t,i,r,s),void mp(l,e,t,i,r,s)}a=a.next}o=o.next}while(o!==n)}function Zee(n,e){return n.x-e.x}function Jee(n,e){if(e=function(n,e){let t=e;const i=n.x,r=n.y;let o,s=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=i&&h>s){if(s=h,h===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,l=o.x,c=o.y;let d,u=1/0;t=o;do{i>=t.x&&t.x>=l&&i!==t.x&&$d(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(i-t.x),gp(t,n)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&tte(o,t)))&&(o=t,u=d)),t=t.next}while(t!==a);return o}(n,e),e){const t=kO(e,n);el(e,e.next),el(t,t.next)}}function tte(n,e){return Sn(n.prev,n,e.prev)<0&&Sn(e.next,n,n.next)<0}function lM(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*r)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function rte(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function $d(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function ste(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&FO(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(gp(n,e)&&gp(e,n)&&function(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(Sn(n.prev,n,e.prev)||Sn(n,e.prev,e))||m_(n,e)&&Sn(n.prev,n,n.next)>0&&Sn(e.prev,e,e.next)>0)}function Sn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function m_(n,e){return n.x===e.x&&n.y===e.y}function FO(n,e,t,i){const r=y_(Sn(n,e,t)),s=y_(Sn(n,e,i)),o=y_(Sn(t,i,n)),a=y_(Sn(t,i,e));return!!(r!==s&&o!==a||0===r&&g_(n,t,e)||0===s&&g_(n,i,e)||0===o&&g_(t,n,i)||0===a&&g_(t,e,i))}function g_(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function y_(n){return n>0?1:n<0?-1:0}function gp(n,e){return Sn(n.prev,n,n.next)<0?Sn(n,e,n.next)>=0&&Sn(n,n.prev,e)>=0:Sn(n,e,n.prev)<0||Sn(n,n.next,e)<0}function kO(n,e){const t=new cM(n.i,n.x,n.y),i=new cM(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function OO(n,e,t,i){const r=new cM(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function yp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function cM(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class la{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return la.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];LO(e),NO(i,e);let o=e.length;t.forEach(LO);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,NO(i,t[l]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=PO(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,f;if(i&&(s=function(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=PO(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(rte(c));for(r.sort(Zee),s=0;s<r.length;s++)Jee(r[s],t),t=el(t,t.next);return t}(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let p=t;p<r;p+=t)d=n[p],h=n[p+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=0!==f?1/f:0}return mp(s,o,t,a,l,f),o}(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function LO(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function NO(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class tl extends dt{constructor(e=new aa([new re(.5,.5),new re(-.5,.5),new re(-.5,-.5),new re(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++)o(e[a]);function o(a){const l=[],c=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1;let d=void 0!==t.depth?t.depth:1,h=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,p=void 0!==t.bevelSize?t.bevelSize:f-.1,m=void 0!==t.bevelOffset?t.bevelOffset:0,_=void 0!==t.bevelSegments?t.bevelSegments:3;const y=t.extrudePath,g=void 0!==t.UVGenerator?t.UVGenerator:cte;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);let x,M,D,w,k,v=!1;y&&(x=y.getSpacedPoints(u),v=!0,h=!1,M=y.computeFrenetFrames(u,!1),D=new S,w=new S,k=new S),h||(_=0,f=0,p=0,m=0);const z=a.extractPoints(c);let N=z.shape;const O=z.holes;if(!la.isClockWise(N)){N=N.reverse();for(let ne=0,pe=O.length;ne<pe;ne++){const xe=O[ne];la.isClockWise(xe)&&(O[ne]=xe.reverse())}}const U=la.triangulateShape(N,O),W=N;for(let ne=0,pe=O.length;ne<pe;ne++)N=N.concat(O[ne]);function Y(ne,pe,xe){return pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),pe.clone().multiplyScalar(xe).add(ne)}const L=N.length,B=U.length;function K(ne,pe,xe){let Xe,Re,P;const A=ne.x-pe.x,te=ne.y-pe.y,me=xe.x-ne.x,ge=xe.y-ne.y,Be=A*A+te*te;if(Math.abs(A*ge-te*me)>Number.EPSILON){const et=Math.sqrt(Be),xt=Math.sqrt(me*me+ge*ge),Qe=pe.x-te/et,V=pe.y+A/et,Ke=((xe.x-ge/xt-Qe)*ge-(xe.y+me/xt-V)*me)/(A*ge-te*me);Xe=Qe+A*Ke-ne.x,Re=V+te*Ke-ne.y;const $e=Xe*Xe+Re*Re;if($e<=2)return new re(Xe,Re);P=Math.sqrt($e/2)}else{let et=!1;A>Number.EPSILON?me>Number.EPSILON&&(et=!0):A<-Number.EPSILON?me<-Number.EPSILON&&(et=!0):Math.sign(te)===Math.sign(ge)&&(et=!0),et?(Xe=-te,Re=A,P=Math.sqrt(Be)):(Xe=A,Re=te,P=Math.sqrt(Be/2))}return new re(Xe/P,Re/P)}const he=[];for(let ne=0,pe=W.length,xe=pe-1,Xe=ne+1;ne<pe;ne++,xe++,Xe++)xe===pe&&(xe=0),Xe===pe&&(Xe=0),he[ne]=K(W[ne],W[xe],W[Xe]);const Se=[];let ve,je=he.concat();for(let ne=0,pe=O.length;ne<pe;ne++){const xe=O[ne];ve=[];for(let Xe=0,Re=xe.length,P=Re-1,A=Xe+1;Xe<Re;Xe++,P++,A++)P===Re&&(P=0),A===Re&&(A=0),ve[Xe]=K(xe[Xe],xe[P],xe[A]);Se.push(ve),je=je.concat(ve)}for(let ne=0;ne<_;ne++){const pe=ne/_,xe=f*Math.cos(pe*Math.PI/2),Xe=p*Math.sin(pe*Math.PI/2)+m;for(let Re=0,P=W.length;Re<P;Re++){const A=Y(W[Re],he[Re],Xe);We(A.x,A.y,-xe)}for(let Re=0,P=O.length;Re<P;Re++){const A=O[Re];ve=Se[Re];for(let te=0,me=A.length;te<me;te++){const ge=Y(A[te],ve[te],Xe);We(ge.x,ge.y,-xe)}}}const ae=p+m;for(let ne=0;ne<L;ne++){const pe=h?Y(N[ne],je[ne],ae):N[ne];v?(w.copy(M.normals[0]).multiplyScalar(pe.x),D.copy(M.binormals[0]).multiplyScalar(pe.y),k.copy(x[0]).add(w).add(D),We(k.x,k.y,k.z)):We(pe.x,pe.y,0)}for(let ne=1;ne<=u;ne++)for(let pe=0;pe<L;pe++){const xe=h?Y(N[pe],je[pe],ae):N[pe];v?(w.copy(M.normals[ne]).multiplyScalar(xe.x),D.copy(M.binormals[ne]).multiplyScalar(xe.y),k.copy(x[ne]).add(w).add(D),We(k.x,k.y,k.z)):We(xe.x,xe.y,d/u*ne)}for(let ne=_-1;ne>=0;ne--){const pe=ne/_,xe=f*Math.cos(pe*Math.PI/2),Xe=p*Math.sin(pe*Math.PI/2)+m;for(let Re=0,P=W.length;Re<P;Re++){const A=Y(W[Re],he[Re],Xe);We(A.x,A.y,d+xe)}for(let Re=0,P=O.length;Re<P;Re++){const A=O[Re];ve=Se[Re];for(let te=0,me=A.length;te<me;te++){const ge=Y(A[te],ve[te],Xe);v?We(ge.x,ge.y+x[u-1].y,x[u-1].x+xe):We(ge.x,ge.y,d+xe)}}}function X(ne,pe){let xe=ne.length;for(;--xe>=0;){const Xe=xe;let Re=xe-1;Re<0&&(Re=ne.length-1);for(let P=0,A=u+2*_;P<A;P++){const te=L*P,me=L*(P+1);Ae(pe+Xe+te,pe+Re+te,pe+Re+me,pe+Xe+me)}}}function We(ne,pe,xe){l.push(ne),l.push(pe),l.push(xe)}function rt(ne,pe,xe){Ve(ne),Ve(pe),Ve(xe);const Xe=r.length/3,Re=g.generateTopUV(i,r,Xe-3,Xe-2,Xe-1);St(Re[0]),St(Re[1]),St(Re[2])}function Ae(ne,pe,xe,Xe){Ve(ne),Ve(pe),Ve(Xe),Ve(pe),Ve(xe),Ve(Xe);const Re=r.length/3,P=g.generateSideWallUV(i,r,Re-6,Re-3,Re-2,Re-1);St(P[0]),St(P[1]),St(P[3]),St(P[1]),St(P[2]),St(P[3])}function Ve(ne){r.push(l[3*ne+0]),r.push(l[3*ne+1]),r.push(l[3*ne+2])}function St(ne){s.push(ne.x),s.push(ne.y)}(function(){const ne=r.length/3;if(h){let pe=0,xe=L*pe;for(let Xe=0;Xe<B;Xe++){const Re=U[Xe];rt(Re[2]+xe,Re[1]+xe,Re[0]+xe)}pe=u+2*_,xe=L*pe;for(let Xe=0;Xe<B;Xe++){const Re=U[Xe];rt(Re[0]+xe,Re[1]+xe,Re[2]+xe)}}else{for(let pe=0;pe<B;pe++){const xe=U[pe];rt(xe[2],xe[1],xe[0])}for(let pe=0;pe<B;pe++){const xe=U[pe];rt(xe[0]+L*u,xe[1]+L*u,xe[2]+L*u)}}i.addGroup(ne,r.length/3-ne,0)})(),function(){const ne=r.length/3;let pe=0;X(W,pe),pe+=W.length;for(let xe=0,Xe=O.length;xe<Xe;xe++){const Re=O[xe];X(Re,pe),pe+=Re.length}i.addGroup(ne,r.length/3-ne,1)}()}this.setAttribute("position",new Ge(r,3)),this.setAttribute("uv",new Ge(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new aM[r.type]).fromJSON(r)),new tl(i,e.options)}}const cte={generateTopUV:function(n,e,t,i,r){const a=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new re(e[3*t],e[3*t+1]),new re(a,l),new re(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[3*t],a=e[3*t+1],l=e[3*t+2],c=e[3*i],u=e[3*i+1],d=e[3*i+2],h=e[3*r],f=e[3*r+1],p=e[3*r+2],m=e[3*s],_=e[3*s+1],y=e[3*s+2];return Math.abs(a-u)<Math.abs(o-c)?[new re(o,1-l),new re(c,1-d),new re(h,1-p),new re(m,1-y)]:[new re(a,1-l),new re(u,1-d),new re(f,1-p),new re(_,1-y)]}};class vp extends dt{constructor(e=new aa([new re(0,.5),new re(-.5,-.5),new re(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(!1===Array.isArray(e))c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;function c(u){const d=r.length/3,h=u.extractPoints(t);let f=h.shape;const p=h.holes;!1===la.isClockWise(f)&&(f=f.reverse());for(let _=0,y=p.length;_<y;_++){const g=p[_];!0===la.isClockWise(g)&&(p[_]=g.reverse())}const m=la.triangulateShape(f,p);for(let _=0,y=p.length;_<y;_++)f=f.concat(p[_]);for(let _=0,y=f.length;_<y;_++){const g=f[_];r.push(g.x,g.y,0),s.push(0,0,1),o.push(g.x,g.y)}for(let _=0,y=m.length;_<y;_++){const g=m[_];i.push(g[0]+d,g[1]+d,g[2]+d),l+=3}}this.setIndex(i),this.setAttribute("position",new Ge(r,3)),this.setAttribute("normal",new Ge(s,3)),this.setAttribute("uv",new Ge(o,2))}toJSON(){const e=super.toJSON();return function(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++)i.push(t[e.shapes[r]]);return new vp(i,e.curveSegments)}}(class extends Oi{constructor(e){super(),this.type="ShadowMaterial",this.color=new Ie(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class uM extends Oi{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ie(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}uM.prototype.isMeshStandardMaterial=!0;(class extends uM{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new re(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ki(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Ie(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ie(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ie(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}).prototype.isMeshPhysicalMaterial=!0;(class extends Oi{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Ie(16777215),this.specular=new Ie(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class extends Oi{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ie(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class extends Oi{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class extends Oi{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class extends Oi{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ie(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends Li{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const wn={arraySlice:function(n,e,t){return wn.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function(r,s){return n[r]-n[s]}),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<t||p>=i)){d.push(c.times[f]);for(let m=0;m<u;++m)h.push(c.values[f*u+m])}}0!==d.length&&(c.times=wn.convertArray(d,c.times.constructor),c.values=wn.convertArray(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(void 0===c)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const p=a.times.length-1;let m;if(s<=a.times[0])m=wn.arraySlice(a.values,u,d-u);else if(s>=a.times[p]){const y=p*d+u;m=wn.arraySlice(a.values,y,y+d-u)}else{const y=a.createInterpolant(),g=u,x=d-u;y.evaluate(s),m=wn.arraySlice(y.resultBuffer,g,x)}"quaternion"===l&&(new bn).fromArray(m).normalize().conjugate().toArray(m);const _=c.times.length;for(let y=0;y<_;++y){const g=y*f+h;if("quaternion"===l)bn.multiplyQuaternionsFlat(c.values,g,m,0,c.values,g);else{const x=f-2*h;for(let v=0;v<x;++v)c.values[g+v]-=m[v]}}}return n.blendMode=2501,n}};class nl{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,s)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,e)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}nl.prototype.beforeStart_=nl.prototype.copySampleValue_,nl.prototype.afterEnd_=nl.prototype.copySampleValue_;class fte extends nl{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pd,endingEnd:pd}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case md:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case md:o=e,l=2*i-t;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),m=p*p,_=m*p,y=-h*_+2*h*m-h*p,g=(1+h)*_+(-1.5-2*h)*m+(-.5+h)*p+1,x=(-1-f)*_+(1.5+f)*m+.5*p,v=f*_-f*m;for(let M=0;M!==a;++M)s[M]=y*o[u+M]+g*o[c+M]+x*o[l+M]+v*o[d+M];return s}}class XO extends nl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class pte extends nl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class yo{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wn.convertArray(t,this.TimeBufferType),this.values=wn.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:wn.convertArray(e.times,Array),values:wn.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new pte(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new XO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fte(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=wn.arraySlice(i,s,o),this.values=wn.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&wn.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=wn.arraySlice(this.times),t=wn.arraySlice(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){const m=t[d+p];if(m!==t[h+p]||m!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=wn.arraySlice(e,0,o),this.values=wn.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=wn.arraySlice(this.times,0),t=wn.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}yo.prototype.TimeBufferType=Float32Array,yo.prototype.ValueBufferType=Float32Array,yo.prototype.DefaultInterpolation=2301;class qd extends yo{}qd.prototype.ValueTypeName="bool",qd.prototype.ValueBufferType=Array,qd.prototype.DefaultInterpolation=2300,qd.prototype.InterpolantFactoryMethodLinear=void 0,qd.prototype.InterpolantFactoryMethodSmooth=void 0;class QO extends yo{}QO.prototype.ValueTypeName="color";class E_ extends yo{}E_.prototype.ValueTypeName="number";class mte extends nl{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)bn.slerpFlat(s,0,o,c-a,o,c,l);return s}}class bp extends yo{InterpolantFactoryMethodLinear(e){return new mte(this.times,this.values,this.getValueSize(),e)}}bp.prototype.ValueTypeName="quaternion",bp.prototype.DefaultInterpolation=2301,bp.prototype.InterpolantFactoryMethodSmooth=void 0;class Yd extends yo{}Yd.prototype.ValueTypeName="string",Yd.prototype.ValueBufferType=Array,Yd.prototype.DefaultInterpolation=2300,Yd.prototype.InterpolantFactoryMethodLinear=void 0,Yd.prototype.InterpolantFactoryMethodSmooth=void 0;class S_ extends yo{}S_.prototype.ValueTypeName="vector";class D_{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Lr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(yte(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(yo.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=wn.getKeyframeOrder(l);l=wn.sortedArray(l,1,u),c=wn.sortedArray(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new E_(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,p,m){if(0!==f.length){const _=[],y=[];wn.flattenJSON(f,_,y,p),0!==_.length&&m.push(new d(h,_,y))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)f[h[p].morphTargets[m]]=-1;for(const m in f){const _=[],y=[];for(let g=0;g!==h[p].morphTargets.length;++g){const x=h[p];_.push(x.time),y.push(x.morphTarget===m?1:0)}r.push(new E_(".morphTargetInfluence["+m+"]",_,y))}l=f.length*(o||1)}else{const f=".bones["+t[d].name+"]";i(S_,f+".position",h,"pos",r),i(bp,f+".quaternion",h,"rot",r),i(S_,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function yte(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return E_;case"vector":case"vector2":case"vector3":case"vector4":return S_;case"color":return QO;case"quaternion":return bp;case"bool":case"boolean":return qd;case"string":return Yd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];wn.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Xd={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const _te=new class{constructor(e,t,i){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}};class il{constructor(e){this.manager=void 0!==e?e:_te,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ca={};class ua extends il{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Xd.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==ca[e])return void ca[e].push({onLoad:t,onProgress:i,onError:r});ca[e]=[],ca[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then(a=>{if(200===a.status||0===a.status){0===a.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const l=ca[e],c=a.body.getReader(),u=a.headers.get("Content-Length"),d=u?parseInt(u):0,h=0!==d;let f=0;return new ReadableStream({start(p){!function m(){c.read().then(({done:_,value:y})=>{if(_)p.close();else{f+=y.byteLength;const g=new ProgressEvent("progress",{lengthComputable:h,loaded:f,total:d});for(let x=0,v=l.length;x<v;x++){const M=l[x];M.onProgress&&M.onProgress(g)}p.enqueue(y),m()}})}()}})}throw Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>{const l=new Response(a);switch(this.responseType){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>(new DOMParser).parseFromString(c,this.mimeType));case"json":return l.json();default:return l.text()}}).then(a=>{Xd.add(e,a);const l=ca[e];delete ca[e];for(let c=0,u=l.length;c<u;c++){const d=l[c];d.onLoad&&d.onLoad(a)}this.manager.itemEnd(e)}).catch(a=>{const l=ca[e];delete ca[e];for(let c=0,u=l.length;c<u;c++){const d=l[c];d.onError&&d.onError(a)}this.manager.itemError(e),this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class A_ extends il{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xd.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Ey("img");function l(){u(),Xd.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class vte extends il{constructor(e){super(e)}load(e,t,i,r){const s=new op,o=new A_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,6===a&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class wp extends il{constructor(e){super(e)}load(e,t,i,r){const s=new ei,o=new A_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class _o extends jt{constructor(e,t=1){super(),this.type="Light",this.color=new Ie(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}_o.prototype.isLight=!0;(class extends _o{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy(jt.DefaultUp),this.updateMatrix(),this.groundColor=new Ie(t)}copy(e){return _o.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const JO=new Ue,eL=new S,tL=new S;class dM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new re(512,512),this.map=null,this.mapPass=null,this.matrix=new Ue,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wy,this._frameExtents=new re(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;eL.setFromMatrixPosition(e.matrixWorld),t.position.copy(eL),tL.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(tL),t.updateMatrixWorld(),JO.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(JO),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class nL extends dM{constructor(){super(new ni(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=2*ep*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}nL.prototype.isSpotLightShadow=!0;(class extends _o{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(jt.DefaultUp),this.updateMatrix(),this.target=new jt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new nL}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const rL=new Ue,Cp=new S,hM=new S;class sL extends dM{constructor(){super(new ni(90,1,.5,500)),this._frameExtents=new re(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new S(1,0,0),new S(-1,0,0),new S(0,0,1),new S(0,0,-1),new S(0,1,0),new S(0,-1,0)],this._cubeUps=[new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,0,1),new S(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Cp.setFromMatrixPosition(e.matrixWorld),i.position.copy(Cp),hM.copy(i.position),hM.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(hM),i.updateMatrixWorld(),r.makeTranslation(-Cp.x,-Cp.y,-Cp.z),rL.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rL)}}sL.prototype.isPointLightShadow=!0;(class extends _o{constructor(e,t,i=0,r=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new sL}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class aL extends dM{constructor(){super(new jy(-5,5,5,-5,.5,500))}}aL.prototype.isDirectionalLightShadow=!0;(class extends _o{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(jt.DefaultUp),this.updateMatrix(),this.target=new jt,this.shadow=new aL}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class extends _o{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class extends _o{constructor(e,t,i=10,r=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class dL{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new S)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],i*r*1.092548),t.addScaledVector(o[5],r*s*1.092548),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],i*s*1.092548),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*s),t.addScaledVector(o[3],1.023328*i),t.addScaledVector(o[4],.858086*i*r),t.addScaledVector(o[5],.858086*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],.858086*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}dL.prototype.isSphericalHarmonics3=!0;class T_ extends _o{constructor(e=new dL,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}T_.prototype.isLightProbe=!0;let I_;(class extends dt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class extends il{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xd.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Xd.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class Ete extends il{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ua(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);(void 0===I_&&(I_=new(window.AudioContext||window.webkitAudioContext)),I_).decodeAudioData(l,function(u){t(u)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}(class extends T_{constructor(e,t,i=1){super(void 0,i);const r=(new Ie).set(e),s=(new Ie).set(t),o=new S(r.r,r.g,r.b),a=new S(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class extends T_{constructor(e,t=1){super(void 0,t);const i=(new Ie).set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class Pte{constructor(e,t,i){let r,s,o;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else o+=t,this._mixBufferRegion(i,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(i,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const t=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){bn.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;bn.multiplyQuaternionsFlat(e,o,e,t,e,i),bn.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const mM="\\[\\]\\.:\\/",Fte=new RegExp("["+mM+"]","g"),gM="[^"+mM+"]",kte="[^"+mM.replace("\\.","")+"]",Ote=/((?:WC+[\/:])*)/.source.replace("WC",gM),Lte=/(WCOD+)?/.source.replace("WCOD",kte),Nte=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",gM),Bte=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",gM),Vte=new RegExp("^"+Ote+Lte+Nte+Bte+"$"),Hte=["material","materials","bones"];class zte{constructor(e,t,i){const r=i||mn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let mn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Fte,"")}static parseTrackName(t){const i=Vte.exec(t);if(!i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Hte.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(!i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=zte,n})();mn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},mn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},mn.prototype.GetterByBindingType=[mn.prototype._getValue_direct,mn.prototype._getValue_array,mn.prototype._getValue_arrayElement,mn.prototype._getValue_toArray],mn.prototype.SetterByBindingTypeAndVersioning=[[mn.prototype._setValue_direct,mn.prototype._setValue_direct_setNeedsUpdate,mn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_array,mn.prototype._setValue_array_setNeedsUpdate,mn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_arrayElement,mn.prototype._setValue_arrayElement_setNeedsUpdate,mn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_fromArray,mn.prototype._setValue_fromArray_setNeedsUpdate,mn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Gte{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:pd,endingEnd:pd};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const l=(e-s)*i;if(l<0||0===i)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);else for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=2202===i;if(0===e)return-1===s?r:o&&1==(1&s)?t-r:r;if(2200===i){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=md,r.endingEnd=md):(r.endingStart=e?this.zeroSlopeAtStart?md:pd:2402,r.endingEnd=t?this.zeroSlopeAtEnd?md:pd:2402)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}(class extends oc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=r[d],f=h.name;let p=u[f];if(void 0!==p)o[d]=p;else{if(p=o[d],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}p=new Pte(mn.create(i,f,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new XO(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o="string"==typeof e?D_.findByName(r,e):e;const a=null!==o?o.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==l){const d=l.actionByRoot[s];if(void 0!==d&&d.blendMode===i)return d;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const u=new Gte(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s="string"==typeof e?D_.findByName(i,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)e[i].stop();return this}update(e){const t=this._actions,i=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class yM{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new yM(void 0===this.value.clone?this.value:this.value.clone())}}(class extends Bd{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;const wL=new re;class Mp{constructor(e=new re(1/0,1/0),t=new re(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=wL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return wL.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Mp.prototype.isBox2=!0;const rl=new S,P_=new Ue,vM=new Ue;function EL(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,EL(n.children[t]));return e}const RL=new Float32Array(1);new Int32Array(RL.buffer),cs.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(cs.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n},p_.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},class extends Za{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ie(i),r=new Ie(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,p=-a;h<=t;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=h===s?i:r;m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3}const u=new dt;u.setAttribute("position",new Ge(l,3)),u.setAttribute("color",new Ge(c,3)),super(u,new Li({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends Za{constructor(e){const t=EL(e),i=new dt,r=[],s=[],o=new Ie(0,0,1),a=new Ie(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ge(r,3)),i.setAttribute("color",new Ge(s,3)),super(i,new Li({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");vM.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(P_.multiplyMatrices(vM,a.matrixWorld),rl.setFromMatrixPosition(P_),r.setXYZ(o,rl.x,rl.y,rl.z),P_.multiplyMatrices(vM,a.parent.matrixWorld),rl.setFromMatrixPosition(P_),r.setXYZ(o+1,rl.x,rl.y,rl.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},il.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(i){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(n)},il.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Mp.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},Mp.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Mp.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Mp.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},as.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},as.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},as.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},as.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},as.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},uc.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Wy.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},Ei.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Ei.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Ei.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Ei.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Ei.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Ei.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},Ue.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},Ue.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Ue.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new S).setFromMatrixColumn(this,3)},Ue.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},Ue.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Ue.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ue.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ue.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Ue.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},Ue.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ue.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Ue.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Ue.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Ue.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Ue.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Ue.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ue.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Ue.prototype.makeFrustum=function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)},Ue.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},sa.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},bn.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},bn.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},dc.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},dc.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},dc.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},ti.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},ti.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},ti.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},ti.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},ti.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},ti.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ti.getBarycoord(n,e,t,i,r)},ti.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ti.getNormal(n,e,t,i)},aa.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},aa.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new tl(this,n)},aa.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new vp(this,n)},re.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},re.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},re.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},S.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},S.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},S.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},S.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},S.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},S.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},S.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},S.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},S.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},sn.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},sn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},jt.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},jt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},jt.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},jt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},jt.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(jt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Vn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Vn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),qC.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},ni.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(n)},Object.defineProperties(_o.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(on.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Jf},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Jf)}}}),on.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Jf:Zf),this},on.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},on.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},dt.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},dt.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new on(arguments[1],arguments[2])))},dt.prototype.addDrawCall=function(n,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},dt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},dt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},dt.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},dt.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(dt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Bd.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Jf:Zf),this},Bd.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},tl.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},tl.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},tl.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},yc.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},yM.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Oi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ie}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(ra.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),an.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)},an.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},an.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},an.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},an.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},an.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},an.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},an.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},an.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},an.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},an.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},an.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},an.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},an.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},an.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},an.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},an.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},an.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},an.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},an.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},an.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},an.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},an.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},an.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},an.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(an.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?sc:Ki}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(rO.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(fo.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class extends jt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Ete).load(n,function(i){e.setBuffer(i)}),this},RC.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)},RC.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)},vd.crossOrigin=void 0,vd.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new wp;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s},vd.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new vte;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s},vd.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},vd.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"134"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="134");class tne extends gt{constructor(e,t){super()}schedule(e,t=0){return this}}class bM extends tne{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let PL=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class vo extends PL{constructor(e,t=PL.now){super(e,()=>vo.delegate&&vo.delegate!==this?vo.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return vo.delegate&&vo.delegate!==this?vo.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const Ep=new vo(bM);function wM(n){return!Ao(n)&&n-parseFloat(n)+1>=0}class Un extends tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new To;return this._value}next(e){super.next(this._value=e)}}class CM{}const da="*";function kL(n,e=null){return{type:2,steps:n,options:e}}function Zt(n){return{type:6,styles:n,offset:null}}function LL(n){Promise.resolve(null).then(n)}class Qd{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){LL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class NL{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?LL(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function Tt(n){return null!=n&&"false"!=`${n}`}function mr(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function N_(n){return Array.isArray(n)?n:[n]}function ii(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Mc(n){return n instanceof De?n.nativeElement:n}function Je(...n){let e=n[n.length-1];return Ro(e)?(n.pop(),_n(n,e)):Mh(n)}function SM(n,e,t,i){return gs(t)&&(i=t,t=void 0),i?SM(n,e,t).pipe(st(r=>Ao(r)?i(...r):i(r))):new It(r=>{VL(n,e,function(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function VL(n,e,t,i,r){let s;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)VL(n[o],e,t,i,r)}i.add(s)}new class extends vo{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends bM{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let hne=1;const fne=Promise.resolve(),B_={};function HL(n){return n in B_&&(delete B_[n],!0)}const zL={setImmediate(n){const e=hne++;return B_[e]=!0,fne.then(()=>HL(e)&&n()),e},clearImmediate(n){HL(n)}};new class extends vo{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends bM{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=zL.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(zL.clearImmediate(t),e.scheduled=void 0)}});class _ne{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new vne(e,this.durationSelector))}}class vne extends Sr{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:r}=this;t=r(e)}catch(r){return this.destination.error(r)}const i=Ea(t,new _s(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function bne(n){const{index:e,period:t,subscriber:i}=n;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}function UL(n,e=Ep){return function(n){return function(t){return t.lift(new _ne(n))}}(()=>function(n=0,e,t){let i=-1;return wM(e)?i=Number(e)<1?1:Number(e):Ro(e)&&(t=e),Ro(t)||(t=Ep),new It(r=>{const s=wM(n)?n:+n-t.now();return t.schedule(bne,s,{index:0,period:i,subscriber:r})})}(n,e))}function Di(n,e){return function(i){return i.lift(new wne(n,e))}}class wne{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Cne(e,this.predicate,this.thisArg))}}class Cne extends kt{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}let DM;try{DM="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){DM=!1}let Sp,Ec,TM,Hr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?tc(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!DM)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(H(Cr))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({}),n})();function Dp(n){return function(){if(null==Sp&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Sp=!0}))}finally{Sp=Sp||!1}return Sp}()?n:!!n.capture}function Ene(){if(null==Ec){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ec=!1,Ec;if("scrollBehavior"in document.documentElement.style)Ec=!0;else{const n=Element.prototype.scrollTo;Ec=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ec}function Sc(n){return n.composedPath?n.composedPath()[0]:n.target}function IM(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const Ane=new ye("cdk-dir-doc",{providedIn:"root",factory:function(){return Qh(ct)}});let xo=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new ot,t){const r=t.documentElement?t.documentElement.dir:null,s=(t.body?t.body.dir:null)||r;this.value="ltr"===s||"rtl"===s?s:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(H(Ane,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({}),n})(),WL=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new tt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new It(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(UL(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Je()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Di(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Mc(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>SM(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(H(wt),H(Hr),H(ct,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),H_=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new tt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(UL(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(H(Hr),H(wt),H(ct,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({}),n})(),RM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Zd,AM,z_],Zd,z_]}),n})();class PM{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class FM extends PM{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class kM extends PM{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Pne extends PM{constructor(e){super(),this.element=e instanceof De?e.nativeElement:e}}class Fne extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof FM?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof kM?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Pne?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let $L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({}),n})();const qL=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})(),Dc=new It(n=>n.complete());function OM(n){return n?function(n){return new It(e=>n.schedule(()=>e.complete()))}(n):Dc}function zr(n){return e=>0===n?OM():e.lift(new Lne(n))}class Lne{constructor(e){if(this.total=e,this.total<0)throw new qL}call(e,t){return t.subscribe(new Nne(e,this.total))}}class Nne extends kt{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function zt(n){return e=>e.lift(new Bne(n))}class Bne{constructor(e){this.notifier=e}call(e,t){const i=new Vne(e),r=Ea(this.notifier,new _s(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class Vne extends Sr{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const KL=Ene();class eie{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ii(-this._previousScrollPosition.left),e.style.top=ii(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),KL&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),KL&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class tie{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class ZL{enable(){}disable(){}attach(){}}function VM(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function JL(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class nie{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();VM(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let iie=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new ZL,this.close=o=>new tie(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new eie(this._viewportRuler,this._document),this.reposition=o=>new nie(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(H(WL),H(H_),H(wt),H(ct))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class e2{constructor(e){if(this.scrollStrategy=new ZL,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class rie{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let t2=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(H(ct))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sie=(()=>{class n extends t2{constructor(t){super(t),this._keydownListener=i=>{const r=this._attachedOverlays;for(let s=r.length-1;s>-1;s--)if(r[s]._keydownEvents.observers.length>0){r[s]._keydownEvents.next(i);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(H(ct))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oie=(()=>{class n extends t2{constructor(t,i){super(t),this._platform=i,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=Sc(r)},this._clickListener=r=>{const s=Sc(r),o="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const a=this._attachedOverlays.slice();for(let l=a.length-1;l>-1;l--){const c=a[l];if(!(c._outsidePointerEvents.observers.length<1)&&c.hasAttached()){if(c.overlayElement.contains(s)||c.overlayElement.contains(o))break;c._outsidePointerEvents.next(r)}}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(t){return new(t||n)(H(ct),H(Hr))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),n2=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null==(t=this._containerElement)||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||IM()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),IM()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(H(ct),H(Hr))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class aie{constructor(e,t,i,r,s,o,a,l,c){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new tt,this._attachments=new tt,this._detachments=new tt,this._locationChanges=gt.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._keydownEvents=new tt,this._outsidePointerEvents=new tt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(zr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(t=this._host)||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=_e(_e({},this._config),e),this._updateElementSize()}setDirection(e){this._config=pi(_e({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ii(this._config.width),e.height=ii(this._config.height),e.minWidth=ii(this._config.minWidth),e.minHeight=ii(this._config.minHeight),e.maxWidth=ii(this._config.maxWidth),e.maxHeight=ii(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const i=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",i),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",i)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(e,t,i){const r=N_(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(zt(Dr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.remove(),this._backdropElement===e&&(this._backdropElement=null))}}const r2="cdk-overlay-connected-position-bounding-box",lie=/([A-Za-z%]+)$/;class cie{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new tt,this._resizeSubscription=gt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(r2),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=[];let s;for(let o of this._preferredPositions){let a=this._getOriginPoint(e,o),l=this._getOverlayPoint(a,t,o),c=this._getOverlayFit(l,t,i,o);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,a);this._canFitWithFlexibleDimensions(c,l,i)?r.push({position:o,origin:a,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(a,o)}):(!s||s.overlayFit.visibleArea<c.visibleArea)&&(s={overlayFit:c,overlayPoint:l,originPoint:a,position:o,overlayRect:t})}if(r.length){let o=null,a=-1;for(const l of r){const c=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);c>a&&(a=c,o=l)}return this._isPushed=!1,void this._applyPosition(o.position,o.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ac(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(r2),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let i,r;if("center"==t.originX)i=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,o=this._isRtl()?e.left:e.right;i="start"==t.originX?s:o}return r="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:i,y:r}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=o2(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,0-o,o+s.width-i.width),m=this._subtractOverflows(s.height,h,f),_=p*m;return{visibleArea:_,isCompletelyWithinViewport:s.width*s.height===_,fitsInViewportVertically:m===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=s2(this._overlayRef.getConfig().minHeight),a=s2(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=o2(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,d=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new rie(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ii(i.height),r.top=ii(i.top),r.bottom=ii(i.bottom),r.width=ii(i.width),r.left=ii(i.left),r.right=ii(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ii(s)),o&&(r.maxWidth=ii(o))}this._lastBoundingBoxSize=i,Ac(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ac(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ac(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Ac(i,this._getExactOverlayY(t,e,u)),Ac(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=ii(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=ii(o.maxWidth):s&&(i.maxWidth="")),Ac(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=o,"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ii(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ii(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:JL(e,i),isOriginOutsideView:VM(e,i),isOverlayClipped:JL(t,i),isOverlayOutsideView:VM(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&N_(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof De)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Ac(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function s2(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(lie);return t&&"px"!==t?null:parseFloat(e)}return n||null}function o2(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const a2="cdk-global-overlay-wrapper";class uie{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(a2),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(a2),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let die=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new uie}flexibleConnectedTo(t){return new cie(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(H(H_),H(ct),H(Hr),H(n2))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hie=0,Tc=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,h){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new e2(t);return o.direction=o.direction||this._directionality.value,new aie(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+hie++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Yl)),new Fne(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(H(iie),H(n2),H(Go),H(die),H(sie),H(tn),H(wt),H(ct),H(xo),H(rd),H(oie))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const mie={provide:new ye("cdk-connected-overlay-scroll-strategy"),deps:[Tc],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let HM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({providers:[Tc,mie],imports:[[Zd,$L,RM],RM]}),n})();new S,new bn,new S;class zM extends jt{constructor(e=document.createElement("div")){super(),this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&null!==t.element.parentNode&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this}}var er;zM.prototype.isCSS3DObject=!0,class extends zM{constructor(e){super(e),this.rotation2D=0}copy(e,t){return super.copy(e,t),this.rotation2D=e.rotation2D,this}}.prototype.isCSS3DSprite=!0,new Ue,new Ue,function(n){n.createTween=function(r,s,o,a,l){return new It(c=>{let u;const d=h=>{u=u||h;const f=h-u;if(f<a){if(Array.isArray(s)&&Array.isArray(o)){const p=new Array;for(let m=0;m<s.length;m++)p.push(r(f,s[m],o[m],a,l));c.next(p)}else c.next(r(f,s,o,a,l));requestAnimationFrame(d)}else{if(Array.isArray(s)&&Array.isArray(o)){const p=new Array;for(let m=0;m<s.length;m++)p.push(o[m]);c.next(p)}else c.next(o);c.complete()}};requestAnimationFrame(d)})},n.linear=function(r,s,o,a){return(o-s)*r/a+s},n.easeInOutQuad=function(r,s,o,a){const l=o-s;return(r/=a/2)<1?l/2*r*r+s:-l/2*(--r*(r-2)-1)+s}}(er||(er={}));let U_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yi]]}),n})(),Bie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yi,U_]]}),n})();function y2(){return"undefined"!=typeof window&&void 0!==window.document}function WM(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function sl(n){switch(n.length){case 0:return new Qd;case 1:return n[0];default:return new NL(n)}}function _2(n,e,t,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let m=p,_=u[p];if("offset"!==p)switch(m=e.normalizePropertyName(m,o),_){case"!":_=r[p];break;case da:_=s[p];break;default:_=e.normalizeStyleValue(p,m,_,o)}f[m]=_}),h||a.push(f),c=f,l=d}),o.length){const u="\n - ";throw new Error(`Unable to animate due to the following errors:${u}${o.join(u)}`)}return a}function jM(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&$M(t,"start",n)));break;case"done":n.onDone(()=>i(t&&$M(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&$M(t,"destroy",n)))}}function $M(n,e,t){const i=t.totalTime,s=qM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function qM(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Ur(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function v2(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let YM=(n,e)=>!1,XM=(n,e)=>!1,x2=(n,e,t)=>[];const b2=WM();(b2||"undefined"!=typeof Element)&&(YM=y2()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),XM=(()=>{if(b2||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,i)=>e.apply(t,[i]):XM}})(),x2=(n,e,t)=>{let i=[];if(t){const r=n.querySelectorAll(e);for(let s=0;s<r.length;s++)i.push(r[s])}else{const r=n.querySelector(e);r&&i.push(r)}return i});let Ic=null,w2=!1;function QM(n){Ic||(Ic=("undefined"!=typeof document?document.body:null)||{},w2=!!Ic.style&&"WebkitAppearance"in Ic.style);let e=!0;return Ic.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ic.style,!e&&w2&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Ic.style)),e}const KM=XM,ZM=YM,JM=x2;function C2(n){const e={};return Object.keys(n).forEach(t=>{const i=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=n[t]}),e}let M2=(()=>{class n{validateStyleProperty(t){return QM(t)}matchesElement(t,i){return KM(t,i)}containsElement(t,i){return ZM(t,i)}query(t,i,r){return JM(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new Qd(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})(),eE=(()=>{class n{}return n.NOOP=new M2,n})();const tE="ng-enter",G_="ng-leave",W_="ng-trigger",j_=".ng-trigger",S2="ng-animating",nE=".ng-animating";function Rc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:iE(parseFloat(e[1]),e[2])}function iE(n,e){return"s"===e?1e3*n:n}function $_(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};r=iE(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=iE(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),a=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&e.splice(l,0,`The provided timing value "${n}" is invalid.`)}return{duration:r,delay:s,easing:o}}(n,e,t)}function Jd(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function ol(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Jd(n,t);return t}function A2(n,e,t){return t?e+":"+t+";":""}function T2(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=A2(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=A2(0,$ie(t),n.style[t]));n.setAttribute("style",e)}function Co(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=sE(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),WM()&&T2(n))}function Pc(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=sE(t);n.style[i]=""}),WM()&&T2(n))}function Pp(n){return Array.isArray(n)?1==n.length?n[0]:kL(n):n}const rE=new RegExp("{{\\s*(.+?)\\s*}}","g");function I2(n){let e=[];if("string"==typeof n){let t;for(;t=rE.exec(n);)e.push(t[1]);rE.lastIndex=0}return e}function q_(n,e,t){const i=n.toString(),r=i.replace(rE,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(`Please provide a value for the animation param ${o}`),a=""),a.toString()});return r==i?n:r}function Y_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const jie=/-+([a-z0-9])/g;function sE(n){return n.replace(jie,(...e)=>e[1].toUpperCase())}function $ie(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function R2(n,e){return 0===n||0===e}function P2(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var r=1;r<e.length;r++){let a=e[r];o.forEach(function(l){a[l]=oE(n,l)})}}return e}function Gr(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function oE(n,e){return window.getComputedStyle(n)[e]}function qie(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function(n,e,t){if(":"==n[0]){const l=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const r=i[1],s=i[2],o=i[3];e.push(F2(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(F2(o,r))}(i,t,e)):t.push(n),t}const Q_=new Set(["true","1"]),K_=new Set(["false","0"]);function F2(n,e){const t=Q_.has(n)||K_.has(n),i=Q_.has(e)||K_.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?Q_.has(n):K_.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?Q_.has(e):K_.has(e)),o&&a}}const Qie=new RegExp("s*:selfs*,?","g");function aE(n,e,t){return new Kie(n).build(e,t)}class Kie{constructor(e){this._driver=e}build(e,t){const i=new ere(t);return this._resetContextStyleTimingState(i),Gr(this,Pp(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};if(i.styles.forEach(a=>{if(Z_(a)){const l=a;Object.keys(l).forEach(c=>{I2(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size){const a=Y_(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Gr(this,Pp(e.animation),t);return{type:1,matchers:qie(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Fc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Gr(this,i,t)),options:Fc(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Gr(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Fc(e.options)}}visitAnimate(e,t){const i=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return lE($_(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=lE(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||$_(i,e),lE(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Zt({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=Zt(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==da?i.push(o):t.errors.push(`The provided style string value ${o} is not allowed.`):i.push(o)}):i.push(e.styles);let r=!1,s=null;return i.forEach(o=>{if(Z_(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void t.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(t.errors.push(`The CSS property "${a}" that exists between the times of "${c.startTime}ms" and "${c.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${r}ms"`),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:r}),t.options&&function(n,e,t){const i=e.params||{},r=I2(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(y=>{const g=this._makeStyleAst(y,t);let x=null!=g.offset?g.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Z_(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(Z_(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(g.styles),v=0;return null!=x&&(s++,v=g.offset=x),l=l||v<0||v>1,a=a||v<c,c=v,o.push(v),g});l&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&t.errors.push("Please ensure that all keyframe offsets are in order");const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,m=t.currentAnimateTimings,_=m.duration;return u.forEach((y,g)=>{const x=h>0?g==f?1:h*g:o[g],v=x*_;t.currentTime=p+m.delay+v,m.duration=v,this._validateStyleAst(y,t),y.offset=x,i.styles.push(y)}),i}visitReference(e,t){return{type:8,animation:Gr(this,Pp(e.animation),t),options:Fc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Fc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Fc(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Qie,"")),n=n.replace(/@\*/g,j_).replace(/@\w+/g,t=>j_+"-"+t.substr(1)).replace(/:animating/g,nE),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Ur(t.collectedStyles,t.currentQuerySelector,{});const a=Gr(this,Pp(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Fc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:$_(e.timings,t.errors,!0);return{type:12,animation:Gr(this,Pp(e.animation),t),timings:i,options:null}}}class ere{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Z_(n){return!Array.isArray(n)&&"object"==typeof n}function Fc(n){return n?(n=Jd(n)).params&&(n.params=function(n){return n?Jd(n):null}(n.params)):n={},n}function lE(n,e,t){return{duration:n,delay:e,easing:t}}function cE(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class J_{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const sre=new RegExp(":enter","g"),are=new RegExp(":leave","g");function uE(n,e,t,i,r,s={},o={},a,l,c=[]){return(new lre).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class lre{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new J_;const d=new dE(e,t,c,r,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),Gr(this,i,d);const h=d.timelines.filter(f=>f.containsAnimation());if(h.length&&Object.keys(a).length){const f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[cE(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.consume(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Rc(i.duration):null,a=null!=i.delay?Rc(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Gr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ev);const o=Rc(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Gr(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Rc(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Gr(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return $_(t.params?q_(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Rc(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ev);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),Gr(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Gr(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const ev={};class dE{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ev,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new tv(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Rc(i.duration)),null!=i.delay&&(r.delay=Rc(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=q_(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new dE(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=ev,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new cre(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(sre,"."+this._enterClassName)).replace(are,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),a}}class tv{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new tv(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||da,this._currentKeyframe[t]=da}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},o=function(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=da})):ol(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=q_(o[a],s,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:da),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=ol(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?e.add(u):d==da&&t.add(u)}),i||(c.offset=l/this.duration),r.push(c)});const s=e.size?Y_(e.values()):[],o=t.size?Y_(t.values()):[];if(i){const a=r[0],l=Jd(a);a.offset=0,l.offset=1,r=[a,l]}return cE(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class cre extends tv{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=ol(e[0],!1);l.offset=0,s.push(l);const c=ol(e[0],!1);c.offset=L2(a),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=ol(e[d],!1);h.offset=L2((t+h.offset*i)/o),s.push(h)}i=o,t=0,r="",e=s}return cE(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function L2(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class hE{}class dre extends hE{normalizePropertyName(e,t){return sE(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(hre[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(`Please provide a CSS unit value for ${e}:${i}`)}return o+s}}const hre=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function N2(n,e,t,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const fE={};class B2{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],o=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):o}build(e,t,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||fE,p=this.buildStyles(i,a&&a.params||fE,d),m=l&&l.params||fE,_=this.buildStyles(r,m,d),y=new Set,g=new Map,x=new Map,v="void"===r,M={params:_e(_e({},h),m)},D=u?[]:uE(e,t,this.ast.animation,s,o,p,_,M,c,d);let w=0;if(D.forEach(z=>{w=Math.max(z.duration+z.delay,w)}),d.length)return N2(t,this._triggerName,i,r,v,p,_,[],[],g,x,w,d);D.forEach(z=>{const N=z.element,O=Ur(g,N,{});z.preStyleProps.forEach(U=>O[U]=!0);const oe=Ur(x,N,{});z.postStyleProps.forEach(U=>oe[U]=!0),N!==t&&y.add(N)});const k=Y_(y.values());return N2(t,this._triggerName,i,r,v,p,_,D,k,g,x,w)}}class mre{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Jd(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=q_(l,r,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),i[c]=l})}}),i}}class yre{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new mre(r.style,r.options&&r.options.params||{},i)}),V2(this.states,"true","1"),V2(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new B2(e,r,this.states))}),this.fallbackTransition=function(n,e,t){return new B2(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function V2(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const vre=new J_;class xre{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],r=aE(this._driver,t,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,i){const r=e.element,s=_2(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let o;const a=new Map;if(s?(o=uE(this._driver,t,s,tE,G_,{},{},i,vre,r),o.forEach(u=>{const d=Ur(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,da)})});const c=sl(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,i,r){const s=qM(t,"","","");return jM(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const H2="ng-animate-queued",z2="ng-animate-disabled",U2=".ng-animate-disabled",Mre=[],G2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ere={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ds="__ng_removed";class pE{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function(n){return null!=n?n:null}(i?e.value:e),i){const s=Jd(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Fp="void",mE=new pE(Fp);class Sre{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,hs(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${t}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function(n){return"start"==n||"done"==n}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${t}" is not supported!`);const s=Ur(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Ur(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(hs(e,W_),hs(e,W_+"-"+t),a[t]=mE),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new gE(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(hs(e,W_),hs(e,W_+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new pE(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=mE),c.value!==Fp&&l.value===c.value){if(!function(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const m=[],_=s.matchStyles(l.value,l.params,m),y=s.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{Pc(e,_),Co(e,y)})}return}const h=Ur(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(hs(e,H2),o.onStart(()=>{eh(e,H2)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const _=this._engine.playersByElement.get(e);if(_){let y=_.indexOf(o);y>=0&&_.splice(y,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,j_,!0);i.forEach(r=>{if(r[ds])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e);if(s){const o=[];if(Object.keys(s).forEach(a=>{if(this._triggers[a]){const l=this.trigger(e,a,Fp,r);l&&o.push(l)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),i&&sl(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||mE,u=new pE(Fp),d=new gE(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[ds];(!s||s===G2)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){hs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=qM(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,jM(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class Dre{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Sre(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let s=i;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,r){if(nv(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!nv(t))return;const s=t[ds];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),hs(e,z2)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),eh(e,z2))}removeNode(e,t,i,r){if(nv(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r){this.collectedLeaveElements.push(t),t[ds]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1}}listen(e,t,i,r,s){return nv(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,j_,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,nE,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return sl(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ds];if(t&&t.setForRemoval){if(e[ds]=G2,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,U2)&&this.markElementAsDisabled(e,!1),this.driver.query(e,U2,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)hs(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?sl(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const i=new J_,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(L=>{u.add(L);const B=this.driver.query(L,".ng-animate-queued",!0);for(let K=0;K<B.length;K++)u.add(B[K])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=$2(h,this.collectedEnterElements),p=new Map;let m=0;f.forEach((L,B)=>{const K=tE+m++;p.set(B,K),L.forEach(he=>hs(he,K))});const _=[],y=new Set,g=new Set;for(let L=0;L<this.collectedLeaveElements.length;L++){const B=this.collectedLeaveElements[L],K=B[ds];K&&K.setForRemoval&&(_.push(B),y.add(B),K.hasAnimation?this.driver.query(B,".ng-star-inserted",!0).forEach(he=>y.add(he)):g.add(B))}const x=new Map,v=$2(h,Array.from(y));v.forEach((L,B)=>{const K=G_+m++;x.set(B,K),L.forEach(he=>hs(he,K))}),e.push(()=>{f.forEach((L,B)=>{const K=p.get(B);L.forEach(he=>eh(he,K))}),v.forEach((L,B)=>{const K=x.get(B);L.forEach(he=>eh(he,K))}),_.forEach(L=>{this.processLeaveNode(L)})});const M=[],D=[];for(let L=this._namespaceList.length-1;L>=0;L--)this._namespaceList[L].drainQueuedTransitions(t).forEach(K=>{const he=K.player,Se=K.element;if(M.push(he),this.collectedEnterElements.length){const X=Se[ds];if(X&&X.setForMove)return void he.destroy()}const ve=!d||!this.driver.containsElement(d,Se),je=x.get(Se),ae=p.get(Se),fe=this._buildInstruction(K,i,ae,je,ve);if(fe.errors&&fe.errors.length)D.push(fe);else{if(ve)return he.onStart(()=>Pc(Se,fe.fromStyles)),he.onDestroy(()=>Co(Se,fe.toStyles)),void r.push(he);if(K.isFallbackTransition)return he.onStart(()=>Pc(Se,fe.fromStyles)),he.onDestroy(()=>Co(Se,fe.toStyles)),void r.push(he);fe.timelines.forEach(X=>X.stretchStartingKeyframe=!0),i.append(Se,fe.timelines),o.push({instruction:fe,player:he,element:Se}),fe.queriedElements.forEach(X=>Ur(a,X,[]).push(he)),fe.preStyleProps.forEach((X,We)=>{const rt=Object.keys(X);if(rt.length){let Ae=l.get(We);Ae||l.set(We,Ae=new Set),rt.forEach(Ve=>Ae.add(Ve))}}),fe.postStyleProps.forEach((X,We)=>{const rt=Object.keys(X);let Ae=c.get(We);Ae||c.set(We,Ae=new Set),rt.forEach(Ve=>Ae.add(Ve))})}});if(D.length){const L=[];D.forEach(B=>{L.push(`@${B.triggerName} has failed due to:\n`),B.errors.forEach(K=>L.push(`- ${K}\n`))}),M.forEach(B=>B.destroy()),this.reportError(L)}const w=new Map,k=new Map;o.forEach(L=>{const B=L.element;i.has(B)&&(k.set(B,B),this._beforeAnimationBuild(L.player.namespaceId,L.instruction,w))}),r.forEach(L=>{const B=L.element;this._getPreviousPlayers(B,!1,L.namespaceId,L.triggerName,null).forEach(he=>{Ur(w,B,[]).push(he),he.destroy()})});const z=_.filter(L=>Y2(L,l,c)),N=new Map;j2(N,this.driver,g,c,da).forEach(L=>{Y2(L,l,c)&&z.push(L)});const oe=new Map;f.forEach((L,B)=>{j2(oe,this.driver,new Set(L),l,"!")}),z.forEach(L=>{const B=N.get(L),K=oe.get(L);N.set(L,_e(_e({},B),K))});const U=[],W=[],Y={};o.forEach(L=>{const{element:B,player:K,instruction:he}=L;if(i.has(B)){if(u.has(B))return K.onDestroy(()=>Co(B,he.toStyles)),K.disabled=!0,K.overrideTotalTime(he.totalTime),void r.push(K);let Se=Y;if(k.size>1){let je=B;const ae=[];for(;je=je.parentNode;){const fe=k.get(je);if(fe){Se=fe;break}ae.push(je)}ae.forEach(fe=>k.set(fe,Se))}const ve=this._buildAnimation(K.namespaceId,he,w,s,oe,N);if(K.setRealPlayer(ve),Se===Y)U.push(K);else{const je=this.playersByElement.get(Se);je&&je.length&&(K.parentPlayer=sl(je)),r.push(K)}}else Pc(B,he.fromStyles),K.onDestroy(()=>Co(B,he.toStyles)),W.push(K),u.has(B)&&r.push(K)}),W.forEach(L=>{const B=s.get(L.element);if(B&&B.length){const K=sl(B);L.setRealPlayer(K)}}),r.forEach(L=>{L.parentPlayer?L.syncPlayerEvents(L.parentPlayer):L.destroy()});for(let L=0;L<_.length;L++){const B=_[L],K=B[ds];if(eh(B,G_),K&&K.hasAnimation)continue;let he=[];if(a.size){let ve=a.get(B);ve&&ve.length&&he.push(...ve);let je=this.driver.query(B,nE,!0);for(let ae=0;ae<je.length;ae++){let fe=a.get(je[ae]);fe&&fe.length&&he.push(...fe)}}const Se=he.filter(ve=>!ve.destroyed);Se.length?Rre(this,B,Se):this.processLeaveNode(B)}return _.length=0,U.forEach(L=>{this.players.push(L),L.onDone(()=>{L.destroy();const B=this.players.indexOf(L);this.players.splice(B,1)}),L.play()}),U}elementContainsData(e,t){let i=!1;const r=t[ds];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Fp;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=Ur(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Pc(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const m=p.element;u.add(m);const _=m[ds];if(_&&_.removedBeforeQueried)return new Qd(p.duration,p.delay);const y=m!==l,g=function(n){const e=[];return q2(n,e),e}((i.get(m)||Mre).map(w=>w.getRealPlayer())).filter(w=>!!w.element&&w.element===m),x=s.get(m),v=o.get(m),M=_2(0,this._normalizer,0,p.keyframes,x,v),D=this._buildPlayer(p,M,g);if(p.subTimeline&&r&&d.add(m),y){const w=new gE(e,a,m);w.setRealPlayer(D),c.push(w)}return D});c.forEach(p=>{Ur(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>hs(p,S2));const f=sl(h);return f.onDestroy(()=>{u.forEach(p=>eh(p,S2)),Co(l,t.toStyles)}),d.forEach(p=>{Ur(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Qd(e.duration,e.delay)}}class gE{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Qd,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>jM(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ur(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function nv(n){return n&&1===n.nodeType}function W2(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function j2(n,e,t,i,r){const s=[];t.forEach(l=>s.push(W2(l)));const o=[];i.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=e.computeStyle(c,d,r);(!h||0==h.length)&&(c[ds]=Ere,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>W2(l,s[a++])),o}function $2(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}const iv="$$classes";function hs(n,e){if(n.classList)n.classList.add(e);else{let t=n[iv];t||(t=n[iv]={}),t[e]=!0}}function eh(n,e){if(n.classList)n.classList.remove(e);else{let t=n[iv];t&&delete t[e]}}function Rre(n,e,t){sl(t).onDone(()=>n.processLeaveNode(e))}function q2(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof NL?q2(i.players,e):e.push(i)}}function Y2(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class rv{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Dre(e,t,i),this._timelineEngine=new xre(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=aE(this._driver,s,l);if(l.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);a=function(n,e,t){return new yre(n,e,t)}(r,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=v2(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=v2(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function X2(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=yE(e[0]),e.length>1&&(i=yE(e[e.length-1]))):e&&(t=yE(e)),t||i?new kre(n,t,i):null}let kre=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Co(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Co(this._element,this._initialStyles),this._endStyles&&(Co(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Pc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Pc(this._element,this._endStyles),this._endStyles=null),Co(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function yE(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];Ore(r)&&(e=e||{},e[r]=n[r])}return e}function Ore(n){return"display"===n||"position"===n}const Q2="animation",K2="animationend";class Bre{constructor(e,t,i,r,s,o,a){this._element=e,this._name=t,this._duration=i,this._delay=r,this._easing=s,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=l=>this._handleCallback(l)}apply(){(function(n,e){const t=vE(n,"").trim();let i=0;t.length&&(function(n,e){let t=0;for(let i=0;i<n.length;i++)","===n.charAt(i)&&t++;return t}(t)+1,e=`${t}, ${e}`),sv(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),eN(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Z2(this._element,this._name,"paused")}resume(){Z2(this._element,this._name,"running")}setPosition(e){const t=J2(this._element,this._name);this._position=e*this._duration,sv(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),eN(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const i=vE(n,"").split(","),r=_E(i,e);r>=0&&(i.splice(r,1),sv(n,"",i.join(",")))}(this._element,this._name))}}function Z2(n,e,t){sv(n,"PlayState",t,J2(n,e))}function J2(n,e){const t=vE(n,"");return t.indexOf(",")>0?_E(t.split(","),e):_E([t],e)}function _E(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function eN(n,e,t){t?n.removeEventListener(K2,e):n.addEventListener(K2,e)}function sv(n,e,t,i){const r=Q2+e;if(null!=i){const s=n.style[r];if(s.length){const o=s.split(",");o[i]=t,t=o.join(",")}}n.style[r]=t}function vE(n,e){return n.style[Q2+e]||""}class tN{constructor(e,t,i,r,s,o,a,l){this.element=e,this.keyframes=t,this.animationName=i,this._duration=r,this._delay=s,this._finalStyles=a,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Bre(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(e[i]=t?this._finalStyles[i]:oE(this.element,i))})}this.currentSnapshot=e}}class Wre extends Qd{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=C2(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class iN{constructor(){this._count=0}validateStyleProperty(e){return QM(e)}matchesElement(e,t){return KM(e,t)}containsElement(e,t){return ZM(e,t)}query(e,t,i){return JM(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,i){i=i.map(a=>C2(a));let r=`@keyframes ${t} {\n`,s="";i.forEach(a=>{s=" ";const l=parseFloat(a.offset);r+=`${s}${100*l}% {\n`,s+=" ",Object.keys(a).forEach(c=>{const u=a[c];switch(c){case"offset":return;case"easing":return void(u&&(r+=`${s}animation-timing-function: ${u};\n`));default:return void(r+=`${s}${c}: ${u};\n`)}}),r+=`${s}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(e,t,i,r,s,o=[],a){const l=o.filter(_=>_ instanceof tN),c={};R2(i,r)&&l.forEach(_=>{let y=_.currentSnapshot;Object.keys(y).forEach(g=>c[g]=y[g])});const u=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(i=>{Object.keys(i).forEach(r=>{"offset"==r||"easing"==r||(e[r]=i[r])})}),e}(t=P2(e,t,c));if(0==i)return new Wre(e,u);const d="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,d,t);(function(n){var t;const e=null==(t=n.getRootNode)?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild(h);const p=X2(e,t),m=new tN(e,t,d,i,r,s,u,p);return m.onDestroy(()=>function(n){n.parentNode.removeChild(n)}(h)),m}}class sN{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:oE(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Xre{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(oN().toString()),this._cssKeyframesDriver=new iN}validateStyleProperty(e){return QM(e)}matchesElement(e,t){return KM(e,t)}containsElement(e,t){return ZM(e,t)}query(e,t,i){return JM(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,i,r,s,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,i,r,s,o);const u={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(u.easing=s);const d={},h=o.filter(p=>p instanceof sN);R2(i,r)&&h.forEach(p=>{let m=p.currentSnapshot;Object.keys(m).forEach(_=>d[_]=m[_])});const f=X2(e,t=P2(e,t=t.map(p=>ol(p,!1)),d));return new sN(e,t,u,f)}}function oN(){return y2()&&Element.prototype.animate||{}}let Kre=(()=>{class n extends CM{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:E.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?kL(t):t;return aN(this._renderer,null,i,"register",[r]),new Zre(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(H($l),H(ct))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();class Zre extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Jre(this._id,e,t||{},this._renderer)}}class Jre{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return aN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function aN(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const lN="@.disabled";let ese=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new cN("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new tse(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(H($l),H(rv),H(wt))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();class cN{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==lN?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class tse extends cN{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==lN?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let rse=(()=>{class n extends rv{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(H(ct),H(eE),H(hE))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const Us=new ye("AnimationModuleType"),uN=[{provide:CM,useClass:Kre},{provide:hE,useFactory:function(){return new dre}},{provide:rv,useClass:rse},{provide:$l,useFactory:function(n,e,t){return new ese(n,e,t)},deps:[hy,rv,wt]}],dN=[{provide:eE,useFactory:function(){return"function"==typeof oN()?new Xre:new iN}},{provide:Us,useValue:"BrowserAnimations"},...uN],lse=[{provide:eE,useClass:M2},{provide:Us,useValue:"NoopAnimations"},...uN];let cse=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?lse:dN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({providers:dN,imports:[RF]}),n})();function al(){}function Ai(n,e,t){return function(r){return r.lift(new use(n,e,t))}}class use{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new dse(e,this.nextOrObserver,this.error,this.complete))}}class dse extends kt{constructor(e,t,i,r){super(e),this._tapNext=al,this._tapError=al,this._tapComplete=al,this._tapError=i||al,this._tapComplete=r||al,gs(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||al,this._tapError=t.error||al,this._tapComplete=t.complete||al)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class mse{constructor(e){this.total=e}call(e,t){return t.subscribe(new gse(e,this.total))}}class gse extends kt{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}class yse{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new _se(e,this.compare,this.keySelector))}}class _se extends kt{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}let fN=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({providers:[fN]}),n})();function wN(n){return 0===n.offsetX&&0===n.offsetY}function CN(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Rse=new ye("cdk-input-modality-detector-options"),Pse={ignoreKeys:[18,17,224,91,16]},th=Dp({passive:!0,capture:!0});let Fse=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Un(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null==(l=null==(a=this._options)?void 0:a.ignoreKeys)?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Sc(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(wN(o)?"keyboard":"mouse"),this._mostRecentTarget=Sc(o))},this._onTouchstart=o=>{CN(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Sc(o))},this._options=_e(_e({},Pse),s),this.modalityDetected=this._modality.pipe(function(n){return e=>e.lift(new mse(n))}(1)),this.modalityChanged=this.modalityDetected.pipe(function(n,e){return t=>t.lift(new yse(n,e))}()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,th),r.addEventListener("mousedown",this._onMousedown,th),r.addEventListener("touchstart",this._onTouchstart,th)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,th),document.removeEventListener("mousedown",this._onMousedown,th),document.removeEventListener("touchstart",this._onTouchstart,th))}}return n.\u0275fac=function(t){return new(t||n)(H(Hr),H(wt),H(ct),H(Rse,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bse=new ye("cdk-focus-monitor-default-options"),cv=Dp({passive:!0,capture:!0});let nh=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new tt,this._rootNodeFocusAndBlurListener=a=>{const l=Sc(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=Mc(t);if(!this._platform.isBrowser||1!==r.nodeType)return Je(null);const s=function(n){if(function(){if(null==TM){const n="undefined"!=typeof document?document.head:null;TM=!(!n||!n.createShadowRoot&&!n.attachShadow)}return TM}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new tt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Mc(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Mc(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Sc(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,cv),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,cv)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(zt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,cv),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,cv),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(H(wt),H(Hr),H(Fse),H(ct,8),H(Bse,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const EN="cdk-high-contrast-black-on-white",SN="cdk-high-contrast-white-on-black",CE="cdk-high-contrast-active";let DN=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(CE),t.remove(EN),t.remove(SN),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(CE),t.add(EN)):2===i&&(t.add(CE),t.add(SN))}}}return n.\u0275fac=function(t){return new(t||n)(H(Hr),H(ct))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vse=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(H(DN))},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[AM,pN]]}),n})();const AN=new Wo("13.0.2");function uv(...n){return Al(1)(Je(...n))}function Gs(...n){const e=n[n.length-1];return Ro(e)?(n.pop(),t=>uv(n,t,e)):t=>uv(n,t)}const TN=new Wo("13.0.2"),jse=new ye("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Yt=(()=>{class n{constructor(t,i,r){this._hasDoneGlobalChecks=!1,this._document=r,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!(!Kb()||IM())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const i=getComputedStyle(t);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),t.remove()}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&TN.full!==AN.full&&console.warn("The Angular Material version ("+TN.full+") does not match the Angular CDK version ("+AN.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(H(DN),H(jse,8),H(ct))},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Zd],Zd]}),n})();function dv(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Tt(e)}}}function hv(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function fv(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Tt(e)}}}let IN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=j({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function kp(n,e,t){n.nativeElement.classList.toggle(e,t)}let pv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yt],Yt]}),n})();class Qse{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const PN={enterDuration:225,exitDuration:150},EE=Dp({passive:!0}),FN=["mousedown","touchstart"],kN=["mouseup","mouseleave","touchend","touchcancel"];class Zse{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Mc(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=_e(_e({},PN),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const d=new Qse(this,u,i);return d.state=0,this._activeRipples.add(d),i.persistent||(this._mostRecentTransientRipple=d),this._runTimeoutOutsideZone(()=>{const h=d===this._mostRecentTransientRipple;d.state=1,!i.persistent&&(!h||!this._isPointerDown)&&d.fadeOut()},c),d}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=_e(_e({},PN),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Mc(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(FN))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(kN),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=wN(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!CN(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,EE)})})}_removeTriggerEvents(){this._triggerElement&&(FN.forEach(e=>{this._triggerElement.removeEventListener(e,this,EE)}),this._pointerUpEventsRegistered&&kN.forEach(e=>{this._triggerElement.removeEventListener(e,this,EE)}))}}const toe=new ye("mat-ripple-global-options");let Op=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Zse(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:_e(_e(_e({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,_e(_e({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,_e(_e({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(b(De),b(wt),b(Hr),b(toe,8),b(Us,8))},n.\u0275dir=j({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&hn("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),SE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yt,AM],Yt]}),n})(),DE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yt]]}),n})(),HN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[SE,Yi,Yt,DE]]}),n})(),ooe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yt],Yt]}),n})();const loe={provide:Wb,useFactory:function(n,e){return()=>{if(tc(e)){const t=Array.from(n.querySelectorAll(`[class*=${zN}]`)),i=/\bflex-layout-.+?\b/g;t.forEach(r=>{r.classList.contains(`${zN}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[ct,Cr],multi:!0},zN="flex-layout-";let AE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({providers:[loe]}),n})();class kc{constructor(e=!1,t="all",i="",r="",s=0){this.matches=e,this.mediaQuery=t,this.mqAlias=i,this.suffix=r,this.priority=s,this.property=""}clone(){return new kc(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let UN=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,i,r){const s=this.stylesheet.get(t);s?s.set(i,r):this.stylesheet.set(t,new Map([[i,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,i){const r=this.stylesheet.get(t);let s="";if(r){const o=r.get(i);("number"==typeof o||"string"==typeof o)&&(s=o+"")}return s}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({factory:function(){return new n},token:n,providedIn:"root"}),n})();const TE={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},Ws=new ye("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>TE}),Oc=new ye("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),IE=new ye("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function GN(n,e){return n=n?n.clone():new kc,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}const RE="inline",WN=["row","column","row-reverse","column-reverse"];function doe(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}let Dn=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.styleBuilder=i,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new tt,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split(".").slice(1).join(".");this.setValue(t[i].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,i){const r=this.styleBuilder,s=r.shouldCache;let o=this.styleCache.get(t);(!o||!s)&&(o=r.buildStyles(t,i),s&&this.styleCache.set(t,o)),this.mru=Object.assign({},o),this.applyStyleToElement(o),r.sideEffect(t,o,i)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={}}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,i=!1){if(t){const[r,s]=this.styler.getFlowDirection(t);if(!s&&i){const o=function(n){let[e,t,i]=function(n){n=n?n.toLowerCase():"";let[e,t,i]=n.split(" ");return WN.find(r=>r===e)||(e=WN[0]),t===RE&&(t=i!==RE?i:"",i=RE),[e,doe(t),!!i]}(n);return function(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,i)}(r);this.styler.applyStyleToElements(o,[t])}return r.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,i,r=this.nativeElement){this.styler.applyStyleToElement(r,t,i)}setValue(t,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,i)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){Wl()},n.\u0275dir=j({type:n,features:[un]}),n})();const foe=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],jN="(orientation: portrait) and (max-width: 599.98px)",$N="(orientation: landscape) and (max-width: 959.98px)",qN="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",YN="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",XN="(orientation: portrait) and (min-width: 840px)",QN="(orientation: landscape) and (min-width: 1280px)",fa={HANDSET:`${jN}, ${$N}`,TABLET:`${qN} , ${YN}`,WEB:`${XN}, ${QN} `,HANDSET_PORTRAIT:`${jN}`,TABLET_PORTRAIT:`${qN} `,WEB_PORTRAIT:`${XN}`,HANDSET_LANDSCAPE:`${$N}`,TABLET_LANDSCAPE:`${YN}`,WEB_LANDSCAPE:`${QN}`},poe=[{alias:"handset",priority:2e3,mediaQuery:fa.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:fa.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:fa.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:fa.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:fa.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:fa.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:fa.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:fa.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:fa.WEB_PORTRAIT,overlapping:!0}],goe=/(\.|-|_)/g;function yoe(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}function xoe(n,e=[]){const t={};return n.forEach(i=>{t[i.alias]=i}),e.forEach(i=>{t[i.alias]?function(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let i in t)t.hasOwnProperty(i)&&(n[i]=t[i])}(t[i.alias],i):t[i.alias]=i}),function(n){return n.forEach(e=>{e.suffix||(e.suffix=function(n){return n.replace(goe,"|").split("|").map(yoe).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(i=>t[i]))}const KN=new ye("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=Qh(IE),e=Qh(Ws),t=[].concat.apply([],(n||[]).map(r=>Array.isArray(r)?r:[r]));return xoe((e.disableDefaultBps?[]:foe).concat(e.addOrientationBps?poe:[]),t)}});function Lp(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function boe(n,e){return(n.priority||0)-(e.priority||0)}let Np=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort(boe)}findByAlias(t){return t?this.findWithPredicate(t,i=>i.alias==t):null}findByQuery(t){return this.findWithPredicate(t,i=>i.mediaQuery==t)}get overlappings(){return this.items.filter(t=>1==t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t.suffix?t.suffix:"")}findWithPredicate(t,i){let r=this.findByMap.get(t);return r||(r=this.items.find(i)||null,this.findByMap.set(t,r)),r||null}}return n.\u0275fac=function(t){return new(t||n)(H(KN))},n.\u0275prov=se({factory:function(){return new n(H(KN))},token:n,providedIn:"root"}),n})(),mv=(()=>{class n{constructor(t,i,r){this._zone=t,this._platformId=i,this._document=r,this.source=new Un(new kc(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((i,r)=>{i.matches&&t.push(r)}),t}isActive(t){const i=this.registry.get(t);return i?i.matches:this.registerQuery(t).some(r=>r.matches)}observe(t,i=!1){if(t&&t.length){const r=this._observable$.pipe(Di(o=>!i||t.indexOf(o.mediaQuery)>-1));return Dr(new It(o=>{const a=this.registerQuery(t);if(a.length){const l=a.pop();a.forEach(c=>{o.next(c)}),this.source.next(l)}o.complete()}),r)}return this._observable$}registerQuery(t){const i=Array.isArray(t)?t:[t],r=[];return function(n,e){const t=n.filter(i=>!ZN[i]);if(t.length>0){const i=t.join(", ");try{const r=e.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),e.head.appendChild(r),t.forEach(s=>ZN[s]=r)}catch(r){console.error(r)}}}(i,this._document),i.forEach(s=>{const o=l=>{this._zone.run(()=>this.source.next(new kc(l.matches,s)))};let a=this.registry.get(s);a||(a=this.buildMQL(s),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(s,a)),a.matches&&r.push(new kc(!0,s))}),r}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,tc(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)(H(wt),H(Cr),H(ct))},n.\u0275prov=se({factory:function(){return new n(H(wt),H(Cr),H(ct))},token:n,providedIn:"root"}),n})();const ZN={},ih="print",Soe={alias:ih,mediaQuery:ih,priority:1e3};let JN=(()=>{class n{constructor(t,i,r){this.breakpoints=t,this.layoutConfig=i,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.isPrinting=!1,this.queue=new Doe,this.deactivations=[]}withPrintQuery(t){return[...t,ih]}isPrintEvent(t){return t.mediaQuery.startsWith(ih)}get printAlias(){return this.layoutConfig.printWithBreakpoints||[]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const i=this.breakpoints.findByQuery(t);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(Lp)}updateEvent(t){let i=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(i=this.getEventBreakpoints(t)[0],t.mediaQuery=i?i.mediaQuery:""),GN(t,i)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new kc(!0,ih))),t.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(r)}interceptEvents(t){return this.registerBeforeAfterPrintHooks(t),i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(i)),t.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(i)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,i){this.isPrinting=!0,t.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}collectActivations(t){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(t.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{const i=this.breakpoints.findByQuery(t.mediaQuery);i&&(this.deactivations.push(i),this.deactivations.sort(Lp))}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)(H(Np),H(Ws),H(ct))},n.\u0275prov=se({factory:function(){return new n(H(Np),H(Ws),H(ct))},token:n,providedIn:"root"}),n})();class Doe{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(Soe),e.sort(Lp),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function(n){return!!n&&n.mediaQuery.startsWith(ih)}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}function e3(n){for(let e in n){let t=n[e]||"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":t=t||"row",n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}let gn=(()=>{class n{constructor(t,i,r,s){this._serverStylesheet=t,this._serverModuleLoaded=i,this._platformId=r,this.layoutConfig=s}applyStyleToElement(t,i,r=null){let s={};"string"==typeof i&&(s[i]=r,i=s),s=this.layoutConfig.disableVendorPrefixes?i:e3(i),this._applyMultiValueStyleToElement(s,t)}applyStyleToElements(t,i=[]){const r=this.layoutConfig.disableVendorPrefixes?t:e3(t);i.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(t){const i="flex-direction";let r=this.lookupStyle(t,i);return[r||"row",this.lookupInlineStyle(t,i)||sd(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,i){return t.getAttribute(i)||""}lookupInlineStyle(t,i){return tc(this._platformId)?t.style.getPropertyValue(i):this._getServerStyle(t,i)}lookupStyle(t,i,r=!1){let s="";return t&&((s=this.lookupInlineStyle(t,i))||(tc(this._platformId)?r||(s=getComputedStyle(t).getPropertyValue(i)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(t,i)))),s?s.trim():""}_applyMultiValueStyleToElement(t,i){Object.keys(t).sort().forEach(r=>{const s=t[r],o=Array.isArray(s)?s:[s];o.sort();for(let a of o)a=a?a+"":"",tc(this._platformId)||!this._serverModuleLoaded?tc(this._platformId)?i.style.setProperty(r,a):this._setServerStyle(i,r,a):this._serverStylesheet.addStyleToElement(i,r,a)})}_setServerStyle(t,i,r){i=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const s=this._readStyleAttribute(t);s[i]=r||"",this._writeStyleAttribute(t,s)}_getServerStyle(t,i){return this._readStyleAttribute(t)[i]||""}_readStyleAttribute(t){const i={},r=t.getAttribute("style");if(r){const s=r.split(/;+/g);for(let o=0;o<s.length;o++){const a=s[o].trim();if(a.length>0){const l=a.indexOf(":");if(-1===l)throw new Error(`Invalid CSS style: ${a}`);i[a.substr(0,l).trim()]=a.substr(l+1).trim()}}}return i}_writeStyleAttribute(t,i){let r="";for(const s in i)i[s]&&(r+=s+":"+i[s]+";");t.setAttribute("style",r)}}return n.\u0275fac=function(t){return new(t||n)(H(UN),H(Oc),H(Cr),H(Ws))},n.\u0275prov=se({factory:function(){return new n(H(UN),H(Oc),H(Cr),H(Ws))},token:n,providedIn:"root"}),n})();class Gn{constructor(){this.shouldCache=!0}sideEffect(e,t,i){}}function t3(n,e="1",t="1"){let i=[e,t,n],r=n.indexOf("calc");if(r>0){i[2]=n3(n.substring(r).trim());let s=n.substr(0,r).trim().split(" ");2==s.length&&(i[0]=s[0],i[1]=s[1])}else if(0==r)i[2]=n3(n.trim());else{let s=n.split(" ");i=3===s.length?s:[e,t,n]}return i}function n3(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}let An=(()=>{class n{constructor(t,i,r){this.matchMedia=t,this.breakpoints=i,this.hook=r,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new tt,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}onMediaChange(t){const i=this.findByQuery(t.mediaQuery);i&&((t=GN(t,i)).matches&&-1===this.activatedBreakpoints.indexOf(i)?(this.activatedBreakpoints.push(i),this.activatedBreakpoints.sort(Lp),this.updateStyles()):!t.matches&&-1!==this.activatedBreakpoints.indexOf(i)&&(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(i),1),this.activatedBreakpoints.sort(Lp),this.updateStyles()))}init(t,i,r,s,o=[]){i3(this.updateMap,t,i,r),i3(this.clearMap,t,i,s),this.buildElementKeyMap(t,i),this.watchExtraTriggers(t,i,o)}getValue(t,i,r){const s=this.elementMap.get(t);if(s){const o=void 0!==r?s.get(r):this.getActivatedValues(s,i);if(o)return o.get(i)}}hasValue(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);if(s)return void 0!==s.get(i)||!1}return!1}setValue(t,i,r,s){let o=this.elementMap.get(t);if(o){const l=(o.get(s)||new Map).set(i,r);o.set(s,l),this.elementMap.set(t,o)}else o=(new Map).set(s,(new Map).set(i,r)),this.elementMap.set(t,o);const a=this.getValue(t,i);void 0!==a&&this.updateElement(t,i,a)}trackValue(t,i){return this.subject.asObservable().pipe(Di(r=>r.element===t&&r.key===i))}updateStyles(){this.elementMap.forEach((t,i)=>{const r=new Set(this.elementKeyMap.get(i));let s=this.getActivatedValues(t);s&&s.forEach((o,a)=>{this.updateElement(i,a,o),r.delete(a)}),r.forEach(o=>{if(s=this.getActivatedValues(t,o),s){const a=s.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(t,i){const r=this.clearMap.get(t);if(r){const s=r.get(i);s&&(s(),this.subject.next({element:t,key:i,value:""}))}}updateElement(t,i,r){const s=this.updateMap.get(t);if(s){const o=s.get(i);o&&(o(r),this.subject.next({element:t,key:i,value:r}))}}releaseElement(t){const i=this.watcherMap.get(t);i&&(i.forEach(s=>s.unsubscribe()),this.watcherMap.delete(t));const r=this.elementMap.get(t);r&&(r.forEach((s,o)=>r.delete(o)),this.elementMap.delete(t))}triggerUpdate(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);s&&(i?this.updateElement(t,i,s.get(i)):s.forEach((o,a)=>this.updateElement(t,a,o)))}}buildElementKeyMap(t,i){let r=this.elementKeyMap.get(t);r||(r=new Set,this.elementKeyMap.set(t,r)),r.add(i)}watchExtraTriggers(t,i,r){if(r&&r.length){let s=this.watcherMap.get(t);if(s||(s=new Map,this.watcherMap.set(t,s)),!s.get(i)){const a=Dr(...r).subscribe(()=>{const l=this.getValue(t,i);this.updateElement(t,i,l)});s.set(i,a)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,i){for(let s=0;s<this.activatedBreakpoints.length;s++){const a=t.get(this.activatedBreakpoints[s].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}const r=t.get("");return void 0===i||r&&r.has(i)?r:void 0}observeActivations(){const i=this.breakpoints.items.map(r=>r.mediaQuery);this.matchMedia.observe(this.hook.withPrintQuery(i)).pipe(Ai(this.hook.interceptEvents(this)),Di(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)(H(mv),H(Np),H(JN))},n.\u0275prov=se({factory:function(){return new n(H(mv),H(Np),H(JN))},token:n,providedIn:"root"}),n})();function i3(n,e,t,i){if(void 0!==i){let r=n.get(e);r||(r=new Map,n.set(e,r)),r.set(t,i)}}let koe=(()=>{class n extends Dn{constructor(t,i,r,s,o,a,l){super(t,null,i,r),this.ngClassInstance=l,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new Ba(s,o,t,a)),this.init(),this.setValue("","")}set klass(t){this.ngClassInstance.klass=t,this.setValue(t,"")}updateWithValue(t){this.ngClassInstance.ngClass=t,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return n.\u0275fac=function(t){return new(t||n)(b(De),b(gn),b(An),b(Ps),b(Oa),b(Is),b(Ba,10))},n.\u0275dir=j({type:n,inputs:{klass:["class","klass"]},features:[ie]}),n})();const Ooe=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let PE=(()=>{class n extends koe{constructor(){super(...arguments),this.inputs=Ooe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Me(n)))(i||n)}}(),n.\u0275dir=j({type:n,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[ie]}),n})(),Loe=(()=>{class n extends Gn{buildStyles(t,i){return{display:"true"===t?i.display||(i.isServer?"initial":""):"none"}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Me(n)))(i||n)}}(),n.\u0275prov=se({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Noe=(()=>{class n extends Dn{constructor(t,i,r,s,o,a,l){super(t,i,r,s),this.layoutConfig=o,this.platformId=a,this.serverModuleLoaded=l,this.DIRECTIVE_KEY="show-hide",this.display="",this.hasLayout=!1,this.hasFlexChild=!1}ngAfterViewInit(){this.trackExtraTriggers();const t=Array.from(this.nativeElement.children);for(let r=0;r<t.length;r++)if(this.marshal.hasValue(t[r],"flex")){this.hasFlexChild=!0;break}FE.has(this.nativeElement)?this.display=FE.get(this.nativeElement):(this.display=this.getDisplayStyle(),FE.set(this.nativeElement,this.display)),this.init();const i=this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY,"");void 0===i||""===i?this.setValue(!0,""):this.triggerUpdate()}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split("."),s=r.slice(1).join("."),o=t[i].currentValue;let a=""===o||0!==o&&Tt(o);"fxHide"===r[0]&&(a=!a),this.setValue(a,s)}})}trackExtraTriggers(){this.hasLayout=this.marshal.hasValue(this.nativeElement,"layout"),["layout","layout-align"].forEach(t=>{this.marshal.trackValue(this.nativeElement,t).pipe(zt(this.destroySubject)).subscribe(this.triggerUpdate.bind(this))})}getDisplayStyle(){return this.hasLayout||this.hasFlexChild&&this.layoutConfig.addFlexToParent?"flex":this.styler.lookupStyle(this.nativeElement,"display",!0)}updateWithValue(t=!0){if(""===t)return;const i=sd(this.platformId);this.addStyles(t?"true":"false",{display:this.display,isServer:i}),i&&this.serverModuleLoaded&&this.nativeElement.style.setProperty("display",""),this.marshal.triggerUpdate(this.parentElement,"layout-gap")}}return n.\u0275fac=function(t){return new(t||n)(b(De),b(Loe),b(gn),b(An),b(Ws),b(Cr),b(Oc))},n.\u0275dir=j({type:n,features:[ie,un]}),n})();const FE=new WeakMap,Boe=["fxShow","fxShow.print","fxShow.xs","fxShow.sm","fxShow.md","fxShow.lg","fxShow.xl","fxShow.lt-sm","fxShow.lt-md","fxShow.lt-lg","fxShow.lt-xl","fxShow.gt-xs","fxShow.gt-sm","fxShow.gt-md","fxShow.gt-lg","fxHide","fxHide.print","fxHide.xs","fxHide.sm","fxHide.md","fxHide.lg","fxHide.xl","fxHide.lt-sm","fxHide.lt-md","fxHide.lt-lg","fxHide.lt-xl","fxHide.gt-xs","fxHide.gt-sm","fxHide.gt-md","fxHide.gt-lg"];let r3=(()=>{class n extends Noe{constructor(){super(...arguments),this.inputs=Boe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Me(n)))(i||n)}}(),n.\u0275dir=j({type:n,selectors:[["","fxShow",""],["","fxShow.print",""],["","fxShow.xs",""],["","fxShow.sm",""],["","fxShow.md",""],["","fxShow.lg",""],["","fxShow.xl",""],["","fxShow.lt-sm",""],["","fxShow.lt-md",""],["","fxShow.lt-lg",""],["","fxShow.lt-xl",""],["","fxShow.gt-xs",""],["","fxShow.gt-sm",""],["","fxShow.gt-md",""],["","fxShow.gt-lg",""],["","fxHide",""],["","fxHide.print",""],["","fxHide.xs",""],["","fxHide.sm",""],["","fxHide.md",""],["","fxHide.lg",""],["","fxHide.xl",""],["","fxHide.lt-sm",""],["","fxHide.lt-md",""],["","fxHide.lt-lg",""],["","fxHide.lt-xl",""],["","fxHide.gt-xs",""],["","fxHide.gt-sm",""],["","fxHide.gt-md",""],["","fxHide.gt-lg",""]],inputs:{fxShow:"fxShow","fxShow.print":"fxShow.print","fxShow.xs":"fxShow.xs","fxShow.sm":"fxShow.sm","fxShow.md":"fxShow.md","fxShow.lg":"fxShow.lg","fxShow.xl":"fxShow.xl","fxShow.lt-sm":"fxShow.lt-sm","fxShow.lt-md":"fxShow.lt-md","fxShow.lt-lg":"fxShow.lt-lg","fxShow.lt-xl":"fxShow.lt-xl","fxShow.gt-xs":"fxShow.gt-xs","fxShow.gt-sm":"fxShow.gt-sm","fxShow.gt-md":"fxShow.gt-md","fxShow.gt-lg":"fxShow.gt-lg",fxHide:"fxHide","fxHide.print":"fxHide.print","fxHide.xs":"fxHide.xs","fxHide.sm":"fxHide.sm","fxHide.md":"fxHide.md","fxHide.lg":"fxHide.lg","fxHide.xl":"fxHide.xl","fxHide.lt-sm":"fxHide.lt-sm","fxHide.lt-md":"fxHide.lt-md","fxHide.lt-lg":"fxHide.lt-lg","fxHide.lt-xl":"fxHide.lt-xl","fxHide.gt-xs":"fxHide.gt-xs","fxHide.gt-sm":"fxHide.gt-sm","fxHide.gt-md":"fxHide.gt-md","fxHide.gt-lg":"fxHide.gt-lg"},features:[ie]}),n})(),u3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[AE]]}),n})();const kE="inline",gv=["row","column","row-reverse","column-reverse"];function d3(n){n=n?n.toLowerCase():"";let[e,t,i]=n.split(" ");return gv.find(r=>r===e)||(e=gv[0]),t===kE&&(t=i!==kE?i:"",i=kE),[e,$oe(t),!!i]}function Bp(n){let[e]=d3(n);return e.indexOf("row")>-1}function $oe(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}let Yoe=(()=>{class n extends Gn{buildStyles(t){return function(n){let[e,t,i]=d3(n);return function(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,i)}(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Me(n)))(i||n)}}(),n.\u0275prov=se({factory:function(){return new n},token:n,providedIn:"root"}),n})();const Xoe=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let Qoe=(()=>{class n extends Dn{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="layout",this.styleCache=Koe,this.init()}}return n.\u0275fac=function(t){return new(t||n)(b(De),b(gn),b(Yoe),b(An))},n.\u0275dir=j({type:n,features:[ie]}),n})(),h3=(()=>{class n extends Qoe{constructor(){super(...arguments),this.inputs=Xoe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Me(n)))(i||n)}}(),n.\u0275dir=j({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[ie]}),n})();const Koe=new Map;function ll(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}let cae=(()=>{class n extends Gn{constructor(t){super(),this.layoutConfig=t}buildStyles(t,i){let[r,s,...o]=t.split(" "),a=o.join(" ");const l=i.direction.indexOf("column")>-1?"column":"row",c=Bp(l)?"max-width":"max-height",u=Bp(l)?"min-width":"min-height",d=String(a).indexOf("calc")>-1,h=d||"auto"===a,f=String(a).indexOf("%")>-1&&!d,p=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let m=d||p;r="0"==r?0:r,s="0"==s?0:s;const _=!r&&!s;let y={};const g={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const x=!1!==this.layoutConfig.useColumnBasisZero;a="row"===l?"0%":x?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,a="auto";break;case"grow":a="100%";break;case"noshrink":s=0,a="auto";break;case"auto":break;case"none":r=0,s=0,a="auto";break;default:!m&&!f&&!isNaN(a)&&(a+="%"),"0%"===a&&(m=!0),"0px"===a&&(a="0%"),y=ll(g,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":m?a:"100%"}:{flex:`${r} ${s} ${m?a:"100%"}`})}return y.flex||y["flex-grow"]||(y=ll(g,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(y[u]=_||m&&r?a:null,y[c]=_||!h&&s?a:null),y[u]||y[c]?i.hasWrap&&(y[d?"flex-basis":"flex"]=y[c]?d?y[c]:`${r} ${s} ${y[c]}`:d?y[u]:`${r} ${s} ${y[u]}`):y=ll(g,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`}),ll(y,{"box-sizing":"border-box"})}}return n.\u0275fac=function(t){return new(t||n)(H(Ws))},n.\u0275prov=se({factory:function(){return new n(H(Ws))},token:n,providedIn:"root"}),n})();const uae=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let dae=(()=>{class n extends Dn{constructor(t,i,r,s,o){super(t,s,i,o),this.layoutConfig=r,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(zt(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(zt(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const r=t.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),o=this.wrap;s&&o?this.styleCache=pae:s&&!o?this.styleCache=hae:!s&&o?this.styleCache=mae:!s&&!o&&(this.styleCache=fae);const l=t3(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(l.join(" "),{direction:r,hasWrap:o})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const i=t3(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return n.\u0275fac=function(t){return new(t||n)(b(De),b(gn),b(Ws),b(cae),b(An))},n.\u0275dir=j({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[ie]}),n})(),OE=(()=>{class n extends dae{constructor(){super(...arguments),this.inputs=uae}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Me(n)))(i||n)}}(),n.\u0275dir=j({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[ie]}),n})();const hae=new Map,fae=new Map,pae=new Map,mae=new Map;let Bae=(()=>{class n extends Gn{buildStyles(t,i){const r={},[s,o]=t.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return ll(r,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?Bp(i.layout)?null:"100%":null,"max-height":"stretch"===o&&Bp(i.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Me(n)))(i||n)}}(),n.\u0275prov=se({factory:function(){return new n},token:n,providedIn:"root"}),n})();const Vae=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let Hae=(()=>{class n extends Dn{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(zt(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const i=this.layout||"row",r=this.inline;"row"===i&&r?this.styleCache=jae:"row"!==i||r?"row-reverse"===i&&r?this.styleCache=qae:"row-reverse"!==i||r?"column"===i&&r?this.styleCache=$ae:"column"!==i||r?"column-reverse"===i&&r?this.styleCache=Yae:"column-reverse"===i&&!r&&(this.styleCache=Wae):this.styleCache=Uae:this.styleCache=Gae:this.styleCache=zae,this.addStyles(t,{layout:i,inline:r})}onLayoutChange(t){const i=t.value.split(" ");this.layout=i[0],this.inline=t.value.includes("inline"),gv.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(b(De),b(gn),b(Bae),b(An))},n.\u0275dir=j({type:n,features:[ie]}),n})(),Vp=(()=>{class n extends Hae{constructor(){super(...arguments),this.inputs=Vae}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Me(n)))(i||n)}}(),n.\u0275dir=j({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[ie]}),n})();const zae=new Map,Uae=new Map,Gae=new Map,Wae=new Map,jae=new Map,$ae=new Map,qae=new Map,Yae=new Map;let m3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[AE,Zd]]}),n})(),C3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[AE]]}),n})(),mce=(()=>{class n{constructor(t,i){sd(i)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,i=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:Ws,useValue:Object.assign(Object.assign({},TE),t)},{provide:IE,useValue:i,multi:!0},{provide:Oc,useValue:!0}]:[{provide:Ws,useValue:Object.assign(Object.assign({},TE),t)},{provide:IE,useValue:i,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(H(Oc),H(Cr))},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[m3,u3,C3],m3,u3,C3]}),n})();rr(575);const M3=["mat-button",""],E3=["*"],_ce=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],vce=hv(dv(fv(class{constructor(n){this._elementRef=n}})));let LE=(()=>{class n extends vce{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of _ce)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(b(De),b(nh),b(Us,8))},n.\u0275cmp=ft({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&function(n,e,t){const i=Wt();i.firstCreatePass&&(MR(i,new bR(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),CR(i,ce(),e)}(Op,5),2&t){let r;He(r=ze())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(nn("disabled",i.disabled||null),hn("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ie],attrs:M3,ngContentSelectors:E3,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Pi(),T(0,"span",0),Ht(1),I(),ee(2,"span",1),ee(3,"span",2)),2&t&&($(2),hn("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Z("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Op],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),xce=(()=>{class n extends LE{constructor(t,i,r){super(i,t,r)}_haltDisabledEvents(t){this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}}return n.\u0275fac=function(t){return new(t||n)(b(nh),b(De),b(Us,8))},n.\u0275cmp=ft({type:n,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(t,i){1&t&&Ze("click",function(s){return i._haltDisabledEvents(s)}),2&t&&(nn("tabindex",i.disabled?-1:i.tabIndex||0)("disabled",i.disabled||null)("aria-disabled",i.disabled.toString()),hn("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[ie],attrs:M3,ngContentSelectors:E3,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Pi(),T(0,"span",0),Ht(1),I(),ee(2,"span",1),ee(3,"span",2)),2&t&&($(2),hn("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Z("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Op],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),NE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[SE,Yt],Yt]}),n})();class bce extends kt{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class wce extends kt{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Cce(n,e,t,i,r=new wce(n,t,i)){if(!r.closed)return e instanceof It?e.subscribe(r):Ch(e)(r)}const S3={};class Mce{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Ece(e,this.resultSelector))}}class Ece extends bce{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(S3),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(Cce(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,o=this.toRespond?r[i]===S3?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const _v=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function BE(n){return new It(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?Cn(t):OM()).subscribe(e)})}function Eo(n,e){return"function"==typeof e?t=>t.pipe(Eo((i,r)=>Cn(n(i,r)).pipe(st((s,o)=>e(i,s,r,o))))):t=>t.lift(new Sce(n))}class Sce{constructor(e){this.project=e}call(e,t){return t.subscribe(new Dce(e,this.project))}}class Dce extends Sr{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new _s(this),r=this.destination;r.add(i),this.innerSubscription=Ea(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function D3(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new Ace(n,e,t))}}class Ace{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new Tce(e,this.accumulator,this.seed,this.hasSeed))}}class Tce extends kt{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function cl(n){return function(t){const i=new Ice(n),r=t.lift(i);return i.caught=r}}class Ice{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Rce(e,this.selector,this.caught))}}class Rce extends Sr{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new _s(this);this.add(i);const r=Ea(t,i);r!==i&&this.add(r)}}}function rh(n,e){return Tn(n,e,1)}function VE(n){return function(t){return 0===n?OM():t.lift(new Pce(n))}}class Pce{constructor(e){if(this.total=e,this.total<0)throw new qL}call(e,t){return t.subscribe(new Fce(e,this.total))}}class Fce extends kt{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<i;s++){const o=t++%i;e.next(r[o])}}e.complete()}}function A3(n=Lce){return e=>e.lift(new kce(n))}class kce{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Oce(e,this.errorFactory))}}class Oce extends kt{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Lce(){return new _v}function T3(n=null){return e=>e.lift(new Nce(n))}class Nce{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Bce(e,this.defaultValue))}}class Bce extends kt{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function sh(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Di((r,s)=>n(r,s,i)):yi,zr(1),t?T3(e):A3(()=>new _v))}class Hce{constructor(e){this.callback=e}call(e,t){return t.subscribe(new zce(e,this.callback))}}class zce extends kt{constructor(e,t){super(e),this.add(new gt(t))}}class pa{constructor(e,t){this.id=e,this.url=t}}class HE extends pa{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zp extends pa{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class R3 extends pa{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Uce extends pa{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gce extends pa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wce extends pa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jce extends pa{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $ce extends pa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qce extends pa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class P3{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class F3{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Yce{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xce{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qce{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kce{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class k3{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ft="primary";class Zce{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function oh(n){return new Zce(n)}const O3="ngNavigationCancelingError";function zE(n){const e=Error("NavigationCancelingError: "+n);return e[O3]=!0,e}function eue(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function So(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!L3(n[r],e[r]))return!1;return!0}function L3(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function N3(n){return Array.prototype.concat.apply([],n)}function B3(n){return n.length>0?n[n.length-1]:null}function Ni(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Do(n){return bg(n)?n:gf(n)?Cn(Promise.resolve(n)):Je(n)}const iue={exact:function z3(n,e,t){if(!Nc(n.segments,e.segments)||!vv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!z3(n.children[i],e.children[i],t))return!1;return!0},subset:U3},V3={exact:function(n,e){return So(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>L3(n[t],e[t]))},ignored:()=>!0};function H3(n,e,t){return iue[t.paths](n.root,e.root,t.matrixParams)&&V3[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function U3(n,e,t){return G3(n,e,e.segments,t)}function G3(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Nc(r,t)||e.hasChildren()||!vv(r,t,i))}if(n.segments.length===t.length){if(!Nc(n.segments,t)||!vv(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!U3(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Nc(n.segments,r)&&vv(n.segments,r,i)&&n.children[Ft])&&G3(n.children[Ft],e,s,i)}}function vv(n,e,t){return e.every((i,r)=>V3[t](n[r].parameters,i.parameters))}class Lc{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oh(this.queryParams)),this._queryParamMap}toString(){return lue.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ni(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xv(this)}}class Up{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=oh(this.parameters)),this._parameterMap}toString(){return Y3(this)}}function Nc(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class W3{}class j3{parse(e){const t=new yue(e);return new Lc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gp(e.root,!0)}`,i=function(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${bv(t)}=${bv(r)}`).join("&"):`${bv(t)}=${bv(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const lue=new j3;function xv(n){return n.segments.map(e=>Y3(e)).join("/")}function Gp(n,e){if(!n.hasChildren())return xv(n);if(e){const t=n.children[Ft]?Gp(n.children[Ft],!1):"",i=[];return Ni(n.children,(r,s)=>{s!==Ft&&i.push(`${s}:${Gp(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function(n,e){let t=[];return Ni(n.children,(i,r)=>{r===Ft&&(t=t.concat(e(i,r)))}),Ni(n.children,(i,r)=>{r!==Ft&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Ft?[Gp(n.children[Ft],!1)]:[`${r}:${Gp(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ft]?`${xv(n)}/${t[0]}`:`${xv(n)}/(${t.join("//")})`}}function $3(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bv(n){return $3(n).replace(/%3B/gi,";")}function UE(n){return $3(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wv(n){return decodeURIComponent(n)}function q3(n){return wv(n.replace(/\+/g,"%20"))}function Y3(n){return`${UE(n.path)}${function(n){return Object.keys(n).map(e=>`;${UE(e)}=${UE(n[e])}`).join("")}(n.parameters)}`}const hue=/^[^\/()?;=#]+/;function Cv(n){const e=n.match(hue);return e?e[0]:""}const fue=/^[^=?&#]+/,mue=/^[^&#]+/;class yue{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Ft]=new Bt(e,t)),i}parseSegment(){const e=Cv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Up(wv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Cv(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Cv(this.remaining);r&&(i=r,this.capture(i))}e[wv(t)]=wv(i)}parseQueryParam(e){const t=function(n){const e=n.match(fue);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function(n){const e=n.match(mue);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=q3(t),s=q3(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Cv(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ft);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ft]:new Bt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class X3{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=GE(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=GE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=WE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return WE(e,this._root).map(t=>t.value)}}function GE(n,e){if(n===e.value)return e;for(const t of e.children){const i=GE(n,t);if(i)return i}return null}function WE(n,e){if(n===e.value)return[e];for(const t of e.children){const i=WE(n,t);if(i.length)return i.unshift(e),i}return[]}class ma{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ah(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Q3 extends X3{constructor(e,t){super(e),this.snapshot=t,jE(this,e)}toString(){return this.snapshot.toString()}}function K3(n,e){const t=function(n,e){const o=new Mv([],{},{},"",{},Ft,e,null,n.root,-1,{});return new J3("",new ma(o,[]))}(n,e),i=new Un([new Up("",{})]),r=new Un({}),s=new Un({}),o=new Un({}),a=new Un(""),l=new ul(i,r,o,a,s,Ft,e,t.root);return l.snapshot=t.root,new Q3(new ma(l,[]),t)}class ul{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(st(e=>oh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(st(e=>oh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Z3(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function(n){return n.reduce((e,t)=>({params:_e(_e({},e.params),t.params),data:_e(_e({},e.data),t.data),resolve:_e(_e({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Mv{constructor(e,t,i,r,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=oh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class J3 extends X3{constructor(e,t){super(t),this.url=e,jE(this,t)}toString(){return eB(this._root)}}function jE(n,e){e.value._routerState=n,e.children.forEach(t=>jE(n,t))}function eB(n){const e=n.children.length>0?` { ${n.children.map(eB).join(", ")} } `:"";return`${n.value}${e}`}function $E(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,So(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),So(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!So(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),So(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function qE(n,e){const t=So(n.params,e.params)&&function(n,e){return Nc(n,e)&&n.every((t,i)=>So(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||qE(n.parent,e.parent))}function Wp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Wp(n,i,r);return Wp(n,i)})}(n,e,t);return new ma(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Wp(n,a)),o}}const i=function(n){return new ul(new Un(n.url),new Un(n.params),new Un(n.queryParams),new Un(n.fragment),new Un(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Wp(n,s));return new ma(i,r)}}function Ev(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function jp(n){return"object"==typeof n&&null!=n&&n.outlets}function YE(n,e,t,i,r){let s={};return i&&Ni(i,(o,a)=>{s[a]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new Lc(t.root===n?e:tB(t.root,n,e),s,r)}function tB(n,e,t){const i={};return Ni(n.children,(r,s)=>{i[s]=r===e?t:tB(r,e,t)}),new Bt(n.segments,i)}class nB{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ev(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(jp);if(r&&r!==B3(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class XE{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function iB(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return Sv(n,e,t);const i=function(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(jp(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!sB(l,c,o))return s;i+=2}else{if(!sB(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Bt(n.segments.slice(0,i.pathIndex),{});return s.children[Ft]=new Bt(n.segments.slice(i.pathIndex),n.children),Sv(s,0,r)}return i.match&&0===r.length?new Bt(n.segments,{}):i.match&&!n.hasChildren()?QE(n,e,t):i.match?Sv(n,0,r):QE(n,e,t)}function Sv(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const i=function(n){return jp(n[0])?n[0].outlets:{[Ft]:n}}(t),r={};return Ni(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=iB(n.children[o],e,s))}),Ni(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new Bt(n.segments,r)}}function QE(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(jp(s)){const l=Tue(s.outlets);return new Bt(i,l)}if(0===r&&Ev(t[0])){i.push(new Up(n.segments[e].path,rB(t[0]))),r++;continue}const o=jp(s)?s.outlets[Ft]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Ev(a)?(i.push(new Up(o,rB(a))),r+=2):(i.push(new Up(o,{})),r++)}return new Bt(i,{})}function Tue(n){const e={};return Ni(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=QE(new Bt([],{}),0,t))}),e}function rB(n){const e={};return Ni(n,(t,i)=>e[i]=`${t}`),e}function sB(n,e,t){return n==t.path&&So(e,t.parameters)}class Rue{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),$E(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=ah(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Ni(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ah(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ah(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=ah(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Kce(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Xce(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if($E(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),$E(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class KE{constructor(e,t){this.routes=e,this.module=t}}function dl(n){return"function"==typeof n}function Bc(n){return n instanceof Lc}const $p=Symbol("INITIAL_VALUE");function qp(){return Eo(n=>function(...n){let e,t;return Ro(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&Ao(n[0])&&(n=n[0]),Mh(n,t).lift(new Mce(e))}(n.map(e=>e.pipe(zr(1),Gs($p)))).pipe(D3((e,t)=>{let i=!1;return t.reduce((r,s,o)=>r!==$p?r:(s===$p&&(i=!0),i||!1!==s&&o!==t.length-1&&!Bc(s)?r:s),e)},$p),Di(e=>e!==$p),st(e=>Bc(e)?e:!0===e),zr(1)))}class Bue{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Yp,this.attachRef=null}}class Yp{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Bue,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ZE=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.name=s||Ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new Vue(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(b(Yp),b(Xn),b(Go),Ms("name"),b(wi))},n.\u0275dir=j({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Vue{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===ul?this.route:e===Yp?this.childContexts:this.parent.get(e,t)}}let oB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ft({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&ee(0,"router-outlet")},directives:[ZE],encapsulation:2}),n})();function aB(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];Hue(i,zue(e,i))}}function Hue(n,e){n.children&&aB(n.children,e)}function zue(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function JE(n){const e=n.children&&n.children.map(JE),t=e?pi(_e({},n),{children:e}):_e({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ft&&(t.component=oB),t}function fs(n){return n.outlet||Ft}function lB(n,e){const t=n.filter(i=>fs(i)===e);return t.push(...n.filter(i=>fs(i)!==e)),t}const cB={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Dv(n,e,t){var a;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?_e({},cB):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(e.matcher||eue)(t,n,e);if(!r)return _e({},cB);const s={};Ni(r.posParams,(l,c)=>{s[c]=l.path});const o=r.consumed.length>0?_e(_e({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o,positionalParamSegments:null!=(a=r.posParams)?a:{}}}function Av(n,e,t,i,r="corrected"){if(t.length>0&&function(n,e,t){return t.some(i=>Tv(n,e,i)&&fs(i)!==Ft)}(n,t,i)){const o=new Bt(e,function(n,e,t,i){const r={};r[Ft]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&fs(s)!==Ft){const o=new Bt([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[fs(s)]=o}return r}(n,e,i,new Bt(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(i=>Tv(n,e,i))}(n,t,i)){const o=new Bt(n.segments,function(n,e,t,i,r,s){const o={};for(const a of i)if(Tv(n,t,a)&&!r[fs(a)]){const l=new Bt([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[fs(a)]=l}return _e(_e({},r),o)}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Bt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Tv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function uB(n,e,t,i){return!!(fs(n)===i||i!==Ft&&Tv(e,t,n))&&("**"===n.path||Dv(e,n,t).matched)}function dB(n,e,t){return 0===e.length&&!n.children[t]}class Xp{constructor(e){this.segmentGroup=e||null}}class hB{constructor(e){this.urlTree=e}}function Iv(n){return new It(e=>e.error(new Xp(n)))}function fB(n){return new It(e=>e.error(new hB(n)))}function $ue(n){return new It(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Xue{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(uo)}apply(){const e=Av(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ft).pipe(st(s=>this.createUrlTree(eS(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(cl(s=>{if(s instanceof hB)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Xp?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ft).pipe(st(r=>this.createUrlTree(eS(r),e.queryParams,e.fragment))).pipe(cl(r=>{throw r instanceof Xp?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new Bt([],{[Ft]:e}):e;return new Lc(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(st(s=>new Bt([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Cn(r).pipe(rh(s=>{const o=i.children[s],a=lB(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(st(l=>({segment:l,outlet:s})))}),D3((s,o)=>(s[o.outlet]=o.segment,s),{}),function(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Di((r,s)=>n(r,s,i)):yi,VE(1),t?T3(e):A3(()=>new _v))}())}expandSegment(e,t,i,r,s,o){return Cn(i).pipe(rh(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(cl(c=>{if(c instanceof Xp)return Je(null);throw c}))),sh(a=>!!a),cl((a,l)=>{if(a instanceof _v||"EmptyError"===a.name){if(dB(t,r,s))return Je(new Bt([],{}));throw new Xp(t)}throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return uB(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):Iv(t):Iv(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?fB(s):this.lineralizeSegments(i,s).pipe(Tn(o=>{const a=new Bt(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,lastChild:c,positionalParamSegments:u}=Dv(t,r,s);if(!a)return Iv(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?fB(d):this.lineralizeSegments(r,d).pipe(Tn(h=>this.expandSegment(e,t,i,h.concat(s.slice(c)),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Je(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(st(h=>(i._loadedConfig=h,new Bt(r,{})))):Je(new Bt(r,{}));const{matched:o,consumedSegments:a,lastChild:l}=Dv(t,i,r);if(!o)return Iv(t);const c=r.slice(l);return this.getChildConfig(e,i,r).pipe(Tn(d=>{const h=d.module,f=d.routes,{segmentGroup:p,slicedSegments:m}=Av(t,a,c,f),_=new Bt(p.segments,p.children);if(0===m.length&&_.hasChildren())return this.expandChildren(h,f,_).pipe(st(v=>new Bt(a,v)));if(0===f.length&&0===m.length)return Je(new Bt(a,{}));const y=fs(i)===s;return this.expandSegment(h,_,f,m,y?Ft:s,!0).pipe(st(x=>new Bt(a.concat(x.segments),x.children)))}))}getChildConfig(e,t,i){return t.children?Je(new KE(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Je(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(Tn(r=>r?this.configLoader.load(e.injector,t).pipe(st(s=>(t._loadedConfig=s,s))):function(n){return new It(e=>e.error(zE(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Je(new KE([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;if(!r||0===r.length)return Je(!0);const s=r.map(o=>{const a=e.get(o);let l;if(function(n){return n&&dl(n.canLoad)}(a))l=a.canLoad(t,i);else{if(!dl(a))throw new Error("Invalid CanLoad guard");l=a(t,i)}return Do(l)});return Je(s).pipe(qp(),Ai(o=>{if(!Bc(o))return;const a=zE(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),st(o=>!0===o))}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Je(i);if(r.numberOfChildren>1||!r.children[Ft])return $ue(e.redirectTo);r=r.children[Ft]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Lc(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Ni(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Ni(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new Bt(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function eS(n){const e={};for(const i of Object.keys(n.children)){const s=eS(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function(n){if(1===n.numberOfChildren&&n.children[Ft]){const e=n.children[Ft];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}class pB{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Rv{constructor(e,t){this.component=e,this.route=t}}function Zue(n,e,t){const i=n._root;return Qp(i,e?e._root:null,t,[i.value])}function Pv(n,e,t){const i=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function Qp(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=ah(e);return n.children.forEach(o=>{(function(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Nc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Nc(n.url,e.url)||!So(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qE(n,e)||!So(n.queryParams,e.queryParams);default:return!qE(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new pB(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Qp(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Rv(a.outlet.component,o))}else o&&Kp(e,a,r),r.canActivateChecks.push(new pB(i)),Qp(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Ni(s,(o,a)=>Kp(o,t.getContext(a),r)),r}function Kp(n,e,t){const i=ah(n),r=n.value;Ni(i,(s,o)=>{Kp(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Rv(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class dde{}function mB(n){return new It(e=>e.error(n))}class fde{constructor(e,t,i,r,s,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=Av(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ft);if(null===t)return null;const i=new Mv([],Object.freeze({}),Object.freeze(_e({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ft,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ma(i,t),s=new J3(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=Z3(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=lB(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;i.push(...l)}const r=gB(i);return function(n){n.sort((e,t)=>e.value.outlet===Ft?-1:t.value.outlet===Ft?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,i,r);if(null!==o)return o}return dB(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!uB(e,t,i,r))return null;let s,o=[],a=[];if("**"===e.path){const f=i.length>0?B3(i).parameters:{};s=new Mv(i,f,Object.freeze(_e({},this.urlTree.queryParams)),this.urlTree.fragment,vB(e),fs(e),e.component,e,yB(t),_B(t)+i.length,xB(e))}else{const f=Dv(t,e,i);if(!f.matched)return null;o=f.consumedSegments,a=i.slice(f.lastChild),s=new Mv(o,f.parameters,Object.freeze(_e({},this.urlTree.queryParams)),this.urlTree.fragment,vB(e),fs(e),e.component,e,yB(t),_B(t)+o.length,xB(e))}const l=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=Av(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new ma(s,f)]}if(0===l.length&&0===u.length)return[new ma(s,[])];const d=fs(e)===r,h=this.processSegment(l,c,u,d?Ft:r);return null===h?null:[new ma(s,h)]}}function gde(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function gB(n){const e=[],t=new Set;for(const i of n){if(!gde(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=gB(i.children);e.push(new ma(i.value,r))}return e.filter(i=>!t.has(i))}function yB(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function _B(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function vB(n){return n.data||{}}function xB(n){return n.resolve||{}}function tS(n){return Eo(e=>{const t=n(e);return t?Cn(t).pipe(st(()=>e)):Je(e)})}class Mde extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const nS=new ye("ROUTES");class bB{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe(st(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new KE(N3(o.injector.get(nS,void 0,Ye.Self|Ye.Optional)).map(JE),o)}),cl(s=>{throw t._loader$=void 0,s}));return t._loader$=new Eh(r,()=>new tt).pipe(eu()),t._loader$}loadModuleFactory(e){return Do(e()).pipe(Tn(t=>t instanceof uR?Je(t):Cn(this.compiler.compileModuleAsync(t))))}}class Sde{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Dde(n){throw n}function Ade(n,e,t){return e.parse("/")}function wB(n,e){return Je(null)}const Tde={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ide={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let jr=(()=>{class n{constructor(t,i,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new tt,this.errorHandler=Dde,this.malformedUriErrorHandler=Ade,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:wB,afterPreactivation:wB},this.urlHandlingStrategy=new Sde,this.routeReuseStrategy=new Mde,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(uo),this.console=o.get(Lg);const d=o.get(wt);this.isNgZoneEnabled=d instanceof wt&&wt.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=new Lc(new Bt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bB(o,a,h=>this.triggerEvent(new P3(h)),h=>this.triggerEvent(new F3(h))),this.routerState=K3(this.currentUrlTree,this.rootComponentType),this.transitions=new Un({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(Di(r=>0!==r.id),st(r=>pi(_e({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Eo(r=>{let s=!1,o=!1;return Je(r).pipe(Ai(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?pi(_e({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Eo(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Fv(a.source)&&(this.browserUrlTree=a.extractedUrl),Je(a).pipe(Eo(d=>{const h=this.transitions.getValue();return i.next(new HE(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Dc:Promise.resolve(d)}),function(n,e,t,i){return Eo(r=>function(n,e,t,i,r){return new Xue(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(st(s=>pi(_e({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ai(d=>{this.currentNavigation=pi(_e({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function(n,e,t,i,r){return Tn(s=>function(n,e,t,i,r="emptyOnly",s="legacy"){try{const o=new fde(n,e,t,i,r,s).recognize();return null===o?mB(new dde):Je(o)}catch(o){return mB(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe(st(o=>pi(_e({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ai(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new Gce(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:m,extras:_}=a,y=new HE(h,this.serializeUrl(f),p,m);i.next(y);const g=K3(f,this.rootComponentType).snapshot;return Je(pi(_e({},a),{targetSnapshot:g,urlAfterRedirects:f,extras:pi(_e({},_),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Dc}),tS(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Ai(a=>{const l=new Wce(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),st(a=>pi(_e({},a),{guards:Zue(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function(n,e){return Tn(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Je(pi(_e({},t),{guardsResult:!0})):function(n,e,t,i){return Cn(n).pipe(Tn(r=>function(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Je(s.map(a=>{const l=Pv(a,e,r);let c;if(function(n){return n&&dl(n.canDeactivate)}(l))c=Do(l.canDeactivate(n,e,t,i));else{if(!dl(l))throw new Error("Invalid CanDeactivate guard");c=Do(l(n,e,t,i))}return c.pipe(sh())})).pipe(qp()):Je(!0)}(r.component,r.route,t,e,i)),sh(r=>!0!==r,!0))}(o,i,r,n).pipe(Tn(a=>a&&function(n){return"boolean"==typeof n}(a)?function(n,e,t,i){return Cn(e).pipe(rh(r=>uv(function(n,e){return null!==n&&e&&e(new Yce(n)),Je(!0)}(r.route.parent,i),function(n,e){return null!==n&&e&&e(new Qce(n)),Je(!0)}(r.route,i),function(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>BE(()=>Je(o.guards.map(l=>{const c=Pv(l,o.node,t);let u;if(function(n){return n&&dl(n.canActivateChild)}(c))u=Do(c.canActivateChild(i,n));else{if(!dl(c))throw new Error("Invalid CanActivateChild guard");u=Do(c(i,n))}return u.pipe(sh())})).pipe(qp())));return Je(s).pipe(qp())}(n,r.path,t),function(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Je(!0);const r=i.map(s=>BE(()=>{const o=Pv(s,e,t);let a;if(function(n){return n&&dl(n.canActivate)}(o))a=Do(o.canActivate(e,n));else{if(!dl(o))throw new Error("Invalid CanActivate guard");a=Do(o(e,n))}return a.pipe(sh())}));return Je(r).pipe(qp())}(n,r.route,t))),sh(r=>!0!==r,!0))}(i,s,n,e):Je(a)),st(a=>pi(_e({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Ai(a=>{if(Bc(a.guardsResult)){const c=zE(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new jce(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Di(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),tS(a=>{if(a.guards.canActivateChecks.length)return Je(a).pipe(Ai(l=>{const c=new $ce(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Eo(l=>{let c=!1;return Je(l).pipe(function(n,e){return Tn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Je(t);let s=0;return Cn(r).pipe(rh(o=>function(n,e,t,i){return function(n,e,t,i){const r=Object.keys(n);if(0===r.length)return Je({});const s={};return Cn(r).pipe(Tn(o=>function(n,e,t,i){const r=Pv(n,e,i);return Do(r.resolve?r.resolve(e,t):r(e,t))}(n[o],e,t,i).pipe(Ai(a=>{s[o]=a}))),VE(1),Tn(()=>Object.keys(s).length===r.length?Je(s):Dc))}(n._resolve,n,e,i).pipe(st(s=>(n._resolvedData=s,n.data=_e(_e({},n.data),Z3(n,t).resolve),null)))}(o.route,i,n,e)),Ai(()=>s++),VE(1),Tn(o=>s===r.length?Je(t):Dc))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ai({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Ai(l=>{const c=new qce(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),tS(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),st(a=>{const l=function(n,e,t){const i=Wp(n,e._root,t?t._root:void 0);return new Q3(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return pi(_e({},a),{targetRouterState:l})}),Ai(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>st(i=>(new Rue(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Ai({next(){s=!0},complete(){s=!0}}),function(n){return e=>e.lift(new Hce(n))}(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null==(a=this.currentNavigation)?void 0:a.id)===r.id&&(this.currentNavigation=null)}),cl(a=>{if(o=!0,function(n){return n&&n[O3]}(a)){const l=Bc(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new R3(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Fv(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new Uce(r.id,this.serializeUrl(r.extractedUrl),a);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return Dc}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(_e(_e({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var a;const r={replaceUrl:!0},s=(null==(a=t.state)?void 0:a.navigationId)?t.state:null;if(s){const l=_e({},s);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){aB(t),this.config=t.map(JE),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=_e(_e({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function(n,e,t,i,r){if(0===t.length)return YE(e.root,e.root,e,i,r);const s=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new nB(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Ni(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new nB(t,e,i)}(t);if(s.toRoot())return YE(e.root,new Bt([],{}),e,i,r);const o=function(n,e,t){if(n.isAbsolute)return new XE(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new XE(s,s===e.root,0)}const i=Ev(n.commands[0])?0:1;return function(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new XE(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?Sv(o.segmentGroup,o.index,s.commands):iB(o.segmentGroup,o.index,s.commands);return YE(o.segmentGroup,a,e,i,r)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Bc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?_e({},Tde):!1===i?_e({},Ide):i,Bc(t))return H3(this.currentUrlTree,t,r);const s=this.parseUrl(t);return H3(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new zp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){var y,g,x;if(this.disposed)return Promise.resolve(!1);const a=this.transitions.value,l=Fv(i)&&a&&!Fv(a.source),c=a.rawUrl.toString()===t.toString(),u=a.id===(null==(y=this.currentNavigation)?void 0:y.id);if(l&&c&&u)return Promise.resolve(!0);let h,f,p;o?(h=o.resolve,f=o.reject,p=o.promise):p=new Promise((v,M)=>{h=v,f=M});const m=++this.navigationId;let _;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),_=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!=(g=this.browserPageId)?g:0:(null!=(x=this.browserPageId)?x:0)+1):_=0,this.setTransition({id:m,targetPageId:_,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:h,reject:f,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(v=>Promise.reject(v))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=_e(_e({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(r=this.currentNavigation)?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null==(s=this.currentNavigation)?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new R3(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){Wl()},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();function Fv(n){return"imperative"!==n}let Zp=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new tt,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:lh(this.skipLocationChange),replaceUrl:lh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:lh(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(b(jr),b(ul),Ms("tabindex"),b(Is),b(De))},n.\u0275dir=j({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&Ze("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[un]}),n})(),kv=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new tt,this.subscription=t.events.subscribe(s=>{s instanceof zp&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,o){if(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:lh(this.skipLocationChange),replaceUrl:lh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:lh(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(b(jr),b(ul),b(id))},n.\u0275dir=j({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&Ze("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&nn("target",i.target)("href",i.href,bi)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[un]}),n})();function lh(n){return""===n||!!n}let CB=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ot,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof zp&&this.update()})}ngAfterContentInit(){Je(this.links.changes,this.linksWithHrefs.changes,Je(null)).pipe(Al()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var i;null==(i=this.linkInputChangesSubscription)||i.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Cn(t).pipe(Al()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null==(t=this.linkInputChangesSubscription)||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(b(jr),b(De),b(Is),b(wi),b(Zp,8),b(kv,8))},n.\u0275dir=j({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&(qt(r,Zp,5),qt(r,kv,5)),2&t){let s;He(s=ze())&&(i.links=s),He(s=ze())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[un]}),n})();class MB{}class EB{preload(e,t){return Je(null)}}let SB=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new bB(r,i,l=>t.triggerEvent(new P3(l)),l=>t.triggerEvent(new F3(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Di(t=>t instanceof zp),rh(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(uo);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return Cn(r).pipe(Al(),st(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Je(i._loadedConfig):this.loader.load(t.injector,i)).pipe(Tn(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(H(jr),H(Ng),H(tn),H(MB))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})(),iS=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof HE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof k3&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new k3(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Wl()},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const Vc=new ye("ROUTER_CONFIGURATION"),DB=new ye("ROUTER_FORROOT_GUARD"),kde=[rd,{provide:W3,useClass:j3},{provide:jr,useFactory:function(n,e,t,i,r,s,o={},a,l){const c=new jr(null,n,e,t,i,r,N3(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null==(d=console.group)||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null==(h=console.groupEnd)||h.call(console)}),c},deps:[W3,Yp,rd,tn,Ng,nS,Vc,[class{},new xi],[class{},new xi]]},Yp,{provide:ul,useFactory:function(n){return n.routerState.root},deps:[jr]},SB,EB,class{preload(e,t){return t().pipe(cl(()=>Je(null)))}},{provide:Vc,useValue:{enableTracing:!1}}];function Ode(){return new Zb("Router",jr)}let rS=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[kde,AB(t),{provide:DB,useFactory:Bde,deps:[[jr,new xi,new Js]]},{provide:Vc,useValue:i||{}},{provide:id,useFactory:Nde,deps:[Jl,[new Cu(Aw),new xi],Vc]},{provide:iS,useFactory:Lde,deps:[jr,Pq,Vc]},{provide:MB,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:EB},{provide:Zb,multi:!0,useFactory:Ode},[sS,{provide:Sf,multi:!0,useFactory:Ude,deps:[sS]},{provide:TB,useFactory:Gde,deps:[sS]},{provide:Wb,multi:!0,useExisting:TB}]]}}static forChild(t){return{ngModule:n,providers:[AB(t)]}}}return n.\u0275fac=function(t){return new(t||n)(H(DB,8),H(jr,8))},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({}),n})();function Lde(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new iS(n,e,t)}function Nde(n,e,t={}){return t.useHash?new v9(n,e):new tF(n,e)}function Bde(n){return"guarded"}function AB(n){return[{provide:R4,multi:!0,useValue:n},{provide:nS,multi:!0,useValue:n}]}let sS=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new tt}appInitializer(){return this.injector.get(g9,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),s=this.injector.get(jr),o=this.injector.get(Vc);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Je(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(Vc),r=this.injector.get(SB),s=this.injector.get(iS),o=this.injector.get(jr),a=this.injector.get(Yl);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(H(tn))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();function Ude(n){return n.appInitializer.bind(n)}function Gde(n){return n.bootstrapListener.bind(n)}const TB=new ye("Router Initializer");let jde=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ft({type:n,selectors:[["app-header"]],decls:22,vars:0,consts:[[1,"toolbar"],["fxFlex","","fxLayoutAlign","start center"],["src","./assets/images/logo.png","height","40"],["fxFlex","","fxLayoutAlign","end center"],[1,"fa","fa-home","fa-lg",2,"color","white","font-weight","bold"],["mat-button","","routerLink","home","routerLinkActive","active"],["STYLE","font-family:'Lucida'",2,"color","white","font-weight","bold"],["src","./assets/images/logo1.png","height","40"],["mat-button","","routerLink","historicoslider","routerLinkActive","active"],["src","./assets/images/logo2.png","height","40"],["mat-button","","routerLink","actualslider","routerLinkActive","active"]],template:function(t,i){1&t&&(T(0,"div",0),T(1,"div",1),Te(2," \xa0\xa0\xa0\xa0 "),T(3,"span"),ee(4,"img",2),I(),Te(5," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),I(),T(6,"div",3),ee(7,"span",4),T(8,"a",5),T(9,"span",6),Te(10," Home"),I(),I(),T(11,"span"),ee(12,"img",7),I(),T(13,"a",8),T(14,"span",6),Te(15," Personajes Hist\xf3ricos "),I(),I(),T(16,"span"),ee(17,"img",9),I(),T(18,"a",10),T(19,"span",6),Te(20," Personajes Actuales "),I(),I(),Te(21," \xa0\xa0\xa0\xa0 "),I(),I())},directives:[OE,Vp,xce,kv,CB],styles:["a[_ngcontent-%COMP%]:hover{letter-spacing:1px;color:#ff0}"]}),n})(),$de=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ft({type:n,selectors:[["app-footer"]],decls:21,vars:0,consts:[[1,"toolbar","footer",2,"height","43px","background-color","black"],["fxShow","true","fxHide.lt-md","","fxFlex","","fxLayout",""],["fxFlex","","fxLayoutAlign","start center"],["href","https://www.facebook.com/JapanGov","target","_blank"],["id","icon_facebook","src","./assets/images/icon_facebook.png","height","25","padding","42px"],["href","https://twitter.com/japangov","target","_blank"],["id","icon_twitter","src","./assets/images/icon_twitter.png","height","25"],["href","https://www.youtube.com/user/pmojapan","target","_blank"],["id","icon_youtube","src","./assets/images/icon_youtube.png","height","25"],["fxFlex","","fxLayoutAlign","end center"],["STYLE","font-family:'Lucida'",2,"color","white","font-weight","bold"],["title","Cristian Albuja","href","mailto:calbujam@gmail.com"],["src","./assets/images/logo.png","height","43"]],template:function(t,i){1&t&&(T(0,"div",0),T(1,"div",1),T(2,"div",2),Te(3," \xa0\xa0\xa0\xa0\xa0 "),T(4,"a",3),ee(5,"img",4),I(),Te(6," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),T(7,"a",5),ee(8,"img",6),I(),Te(9," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),T(10,"a",7),ee(11,"img",8),I(),I(),T(12,"div",9),T(13,"span",10),Te(14," \xa92022 \u2022 Realizado por "),T(15,"a",11),Te(16,"Cristian Albuja"),I(),I(),Te(17," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),T(18,"span"),ee(19,"img",12),I(),Te(20," \xa0\xa0\xa0\xa0\xa0 "),I(),I(),I())},directives:[r3,OE,h3,Vp],styles:[".footer[_ngcontent-%COMP%]{position:relative;top:0px;padding:0;margin:0}"]}),n})(),qde=(()=>{class n{constructor(){this.title="Cultura Japonesa"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ft({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,i){1&t&&(ee(0,"app-header"),ee(1,"router-outlet"),ee(2,"app-footer"))},directives:[jde,ZE,$de],styles:[""]}),n})(),mV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({}),n})(),Ghe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[mV]]}),n})(),Whe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[Ghe]}),n})(),jhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yt],Yt]}),n})(),sfe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[pv,SE,Yt,DE,Yi],pv,Yt,DE,jhe]}),n})();const kV=["*"],ofe=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],afe=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"];class cfe{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const e=Math.max(...this.tracker);return e>1?this.rowCount+e-1:this.rowCount}update(e,t){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(e),this.tracker.fill(0,0,this.tracker.length),this.positions=t.map(i=>this._trackTile(i))}_trackTile(e){const t=this._findMatchingGap(e.colspan);return this._markTilePosition(t,e),this.columnIndex=t+e.colspan,new ufe(this.rowIndex,t)}_findMatchingGap(e){let t=-1,i=-1;do{this.columnIndex+e>this.tracker.length?(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t)):(t=this.tracker.indexOf(0,this.columnIndex),-1!=t?(i=this._findGapEndIndex(t),this.columnIndex=t+1):(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t)))}while(i-t<e||0==i);return Math.max(t,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let e=0;e<this.tracker.length;e++)this.tracker[e]=Math.max(0,this.tracker[e]-1)}_findGapEndIndex(e){for(let t=e+1;t<this.tracker.length;t++)if(0!=this.tracker[t])return t;return this.tracker.length}_markTilePosition(e,t){for(let i=0;i<t.colspan;i++)this.tracker[e+i]=t.rowspan}}class ufe{constructor(e,t){this.row=e,this.col=t}}const OV=new ye("MAT_GRID_LIST");let DS=(()=>{class n{constructor(t,i){this._element=t,this._gridList=i,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(mr(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(mr(t))}_setStyle(t,i){this._element.nativeElement.style[t]=i}}return n.\u0275fac=function(t){return new(t||n)(b(De),b(OV,8))},n.\u0275cmp=ft({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(t,i){2&t&&nn("rowspan",i.rowspan)("colspan",i.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:kV,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(t,i){1&t&&(Pi(),T(0,"div",0),Ht(1),I())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})(),LV=(()=>{class n{constructor(t){this._element=t}ngAfterContentInit(){!function(n,e,t="mat"){n.changes.pipe(Gs(n)).subscribe(({length:i})=>{kp(e,`${t}-2-line`,!1),kp(e,`${t}-3-line`,!1),kp(e,`${t}-multi-line`,!1),2===i||3===i?kp(e,`${t}-${i}-line`,!0):i>3&&kp(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}}return n.\u0275fac=function(t){return new(t||n)(b(De))},n.\u0275cmp=ft({type:n,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(t,i,r){if(1&t&&qt(r,IN,5),2&t){let s;He(s=ze())&&(i._lines=s)}},ngContentSelectors:afe,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(t,i){1&t&&(Pi(ofe),Ht(0),T(1,"div",0),Ht(2,1),I(),Ht(3,2))},encapsulation:2,changeDetection:0}),n})(),NV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=j({type:n,selectors:[["mat-grid-tile-footer"]],hostAttrs:[1,"mat-grid-tile-footer"]}),n})();const dfe=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class AS{constructor(){this._rows=0,this._rowspan=0}init(e,t,i,r){this._gutterSize=BV(e),this._rows=t.rowCount,this._rowspan=t.rowspan,this._cols=i,this._direction=r}getBaseTileSize(e,t){return`(${e}% - (${this._gutterSize} * ${t}))`}getTilePosition(e,t){return 0===t?"0":zc(`(${e} + ${this._gutterSize}) * ${t}`)}getTileSize(e,t){return`(${e} * ${t}) + (${t-1} * ${this._gutterSize})`}setStyle(e,t,i){let r=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(e,i,r,s),this.setRowStyles(e,t,r,s)}setColStyles(e,t,i,r){let s=this.getBaseTileSize(i,r);e._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(s,t)),e._setStyle("width",zc(this.getTileSize(s,e.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(e){return`${this._rowspan} * ${this.getTileSize(e,1)}`}getComputedHeight(){return null}}class hfe extends AS{constructor(e){super(),this.fixedRowHeight=e}init(e,t,i,r){super.init(e,t,i,r),this.fixedRowHeight=BV(this.fixedRowHeight),dfe.test(this.fixedRowHeight)}setRowStyles(e,t){e._setStyle("top",this.getTilePosition(this.fixedRowHeight,t)),e._setStyle("height",zc(this.getTileSize(this.fixedRowHeight,e.rowspan)))}getComputedHeight(){return["height",zc(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["height",null]),e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}class ffe extends AS{constructor(e){super(),this._parseRatio(e)}setRowStyles(e,t,i,r){this.baseTileHeight=this.getBaseTileSize(i/this.rowHeightRatio,r),e._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,t)),e._setStyle("paddingTop",zc(this.getTileSize(this.baseTileHeight,e.rowspan)))}getComputedHeight(){return["paddingBottom",zc(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["paddingBottom",null]),e._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(e){const t=e.split(":");this.rowHeightRatio=parseFloat(t[0])/parseFloat(t[1])}}class pfe extends AS{setRowStyles(e,t){let s=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);e._setStyle("top",this.getTilePosition(s,t)),e._setStyle("height",zc(this.getTileSize(s,e.rowspan)))}reset(e){e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}function zc(n){return`calc(${n})`}function BV(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}let VV=(()=>{class n{constructor(t,i){this._element=t,this._dir=i,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(mr(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${null==t?"":t}`}get rowHeight(){return this._rowHeight}set rowHeight(t){const i=`${null==t?"":t}`;i!==this._rowHeight&&(this._rowHeight=i,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===t?new pfe:t&&t.indexOf(":")>-1?new ffe(t):new hfe(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new cfe);const t=this._tileCoordinator,i=this._tiles.filter(s=>!s._gridList||s._gridList===this),r=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,i),this._tileStyler.init(this.gutterSize,t,this.cols,r),i.forEach((s,o)=>{const a=t.positions[o];this._tileStyler.setStyle(s,a.row,a.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}}return n.\u0275fac=function(t){return new(t||n)(b(De),b(xo,8))},n.\u0275cmp=ft({type:n,selectors:[["mat-grid-list"]],contentQueries:function(t,i,r){if(1&t&&qt(r,DS,5),2&t){let s;He(s=ze())&&(i._tiles=s)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(t,i){2&t&&nn("cols",i.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[lt([{provide:OV,useExisting:n}])],ngContentSelectors:kV,decls:2,vars:0,template:function(t,i){1&t&&(Pi(),T(0,"div"),Ht(1),I())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),n})(),gfe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[pv,Yt],pv,Yt]}),n})(),HV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yt],Yt]}),n})();function sm(n){return(sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function zV(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function wfe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){wfe(n,r,t[r])})}return n}function TS(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],i=!0,r=!1,s=void 0;try{for(var a,o=n[Symbol.iterator]();!(i=(a=o.next()).done)&&(t.push(a.value),!e||t.length!==e);i=!0);}catch(l){r=!0,s=l}finally{try{!i&&null!=o.return&&o.return()}finally{if(r)throw s}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var RS={},GV={};try{"undefined"!=typeof window&&(RS=window),"undefined"!=typeof document&&(GV=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&performance}catch(n){}var $V=(RS.navigator||{}).userAgent,qV=void 0===$V?"":$V,uh=RS,ri=GV,ya=!!ri.documentElement&&!!ri.head&&"function"==typeof ri.addEventListener&&"function"==typeof ri.createElement,_a=(~qV.indexOf("MSIE")||qV.indexOf("Trident/"),"___FONT_AWESOME___"),KV="svg-inline--fa",tH=[1,2,3,4,5,6,7,8,9,10],Vfe=tH.concat([11,12,13,14,15,16,17,18,19,20]),Uc={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},nH=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Uc.GROUP,Uc.SWAP_OPACITY,Uc.PRIMARY,Uc.SECONDARY].concat(tH.map(function(n){return"".concat(n,"x")})).concat(Vfe.map(function(n){return"w-".concat(n)})),uh.FontAwesomeConfig||{});ri&&"function"==typeof ri.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=TS(n,2),i=e[1],r=function(n){return""===n||"false"!==n&&("true"===n||n)}(function(n){var e=ri.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(nH[i]=r)});var kS=Vt({},{familyPrefix:"fa",replacementClass:KV,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},nH);kS.autoReplaceSvg||(kS.observeMutations=!1);var Et=Vt({},kS);uh.FontAwesomeConfig=Et;var va=uh||{};va[_a]||(va[_a]={}),va[_a].styles||(va[_a].styles={}),va[_a].hooks||(va[_a].hooks={}),va[_a].shims||(va[_a].shims=[]);var js=va[_a],iH=[];ya&&((ri.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ri.readyState)||ri.addEventListener("DOMContentLoaded",function n(){ri.removeEventListener("DOMContentLoaded",n),iH.map(function(e){return e()})}));var LS,OS="pending",rH="settled",Qv="fulfilled",Kv="rejected",Yfe=function(){},sH="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,Xfe="undefined"==typeof setImmediate?setTimeout:setImmediate,om=[];function Qfe(){for(var n=0;n<om.length;n++)om[n][0](om[n][1]);om=[],LS=!1}function Zv(n,e){om.push([n,e]),LS||(LS=!0,Xfe(Qfe,0))}function oH(n){var e=n.owner,t=e._state,i=e._data,r=n[t],s=n.then;if("function"==typeof r){t=Qv;try{i=r(i)}catch(o){am(s,o)}}aH(s,i)||(t===Qv&&NS(s,i),t===Kv&&am(s,i))}function aH(n,e){var t;try{if(n===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===sm(e))){var i=e.then;if("function"==typeof i)return i.call(e,function(r){t||(t=!0,e===r?lH(n,r):NS(n,r))},function(r){t||(t=!0,am(n,r))}),!0}}catch(r){return t||am(n,r),!0}return!1}function NS(n,e){(n===e||!aH(n,e))&&lH(n,e)}function lH(n,e){n._state===OS&&(n._state=rH,n._data=e,Zv(Zfe,n))}function am(n,e){n._state===OS&&(n._state=rH,n._data=e,Zv(Jfe,n))}function cH(n){n._then=n._then.forEach(oH)}function Zfe(n){n._state=Qv,cH(n)}function Jfe(n){n._state=Kv,cH(n),!n._handled&&sH&&global.process.emit("unhandledRejection",n._data,n)}function epe(n){global.process.emit("rejectionHandled",n)}function $r(n){if("function"!=typeof n)throw new TypeError("Promise resolver "+n+" is not a function");if(!(this instanceof $r))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(n,e){function i(r){am(e,r)}try{n(function(r){NS(e,r)},i)}catch(r){i(r)}}(n,this)}$r.prototype={constructor:$r,_state:OS,_then:null,_data:void 0,_handled:!1,then:function(e,t){var i={owner:this,then:new this.constructor(Yfe),fulfilled:e,rejected:t};return(t||e)&&!this._handled&&(this._handled=!0,this._state===Kv&&sH&&Zv(epe,this)),this._state===Qv||this._state===Kv?Zv(oH,i):this._then.push(i),i.then},catch:function(e){return this.then(null,e)}},$r.all=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.all().");return new $r(function(e,t){var i=[],r=0;function s(l){return r++,function(c){i[l]=c,--r||e(i)}}for(var a,o=0;o<n.length;o++)(a=n[o])&&"function"==typeof a.then?a.then(s(o),t):i[o]=a;r||e(i)})},$r.race=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.race().");return new $r(function(e,t){for(var r,i=0;i<n.length;i++)(r=n[i])&&"function"==typeof r.then?r.then(e,t):e(r)})},$r.resolve=function(n){return n&&"object"===sm(n)&&n.constructor===$r?n:new $r(function(e){e(n)})},$r.reject=function(n){return new $r(function(e,t){t(n)})};var WS=function(e,t,i,r){var l,c,u,s=Object.keys(e),o=s.length,a=void 0!==r?function(e,t){return function(i,r,s,o){return e.call(t,i,r,s,o)}}(t,r):t;for(void 0===i?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)u=a(u,e[c=s[l]],c,e);return u};function _H(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.skipHooks,r=void 0!==i&&i,s=Object.keys(e).reduce(function(o,a){var l=e[a];return l.icon?o[l.iconName]=l.icon:o[a]=l,o},{});"function"!=typeof js.hooks.addPack||r?js.styles[n]=Vt({},js.styles[n]||{},s):js.hooks.addPack(n,s),"fas"===n&&_H("fa",e)}var vH=js.styles,ppe=js.shims,CH=function(){var e=function(r){return WS(vH,function(s,o,a){return s[a]=WS(o,r,{}),s},{})};e(function(i,r,s){return r[3]&&(i[r[3]]=s),i}),e(function(i,r,s){var o=r[2];return i[s]=s,o.forEach(function(a){i[a]=s}),i});var t="far"in vH;WS(ppe,function(i,r){var o=r[1];return"far"===o&&!t&&(o="fas"),i[r[0]]={prefix:o,iconName:r[2]},i},{})};function um(n){this.name="MissingIcon",this.message=n||"Icon unavailable",this.stack=(new Error).stack}CH(),(um.prototype=Object.create(Error.prototype)).constructor=um;var nx={fill:"currentColor"},RH={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},YS=(Vt({},nx,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),Vt({},RH,{attributeName:"opacity"}));Vt({},nx,{cx:"256",cy:"364",r:"28"}),Vt({},RH,{attributeName:"r",values:"28;14;28;28;14;28;"}),Vt({},YS,{values:"1;0;1;1;0;1;"}),Vt({},nx,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Vt({},YS,{values:"1;0;0;0;0;1;"}),Vt({},nx,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Vt({},YS,{values:"0;0;1;1;0;0;"});var Gpe=function(){function n(){(function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function(n,e,t){e&&zV(n.prototype,e)}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=Vt({},t.definitions[a]||{},o[a]),_H(a,o[a]),CH()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var o=r[s],a=o.prefix,l=o.iconName,c=o.icon;t[a]||(t[a]={}),t[a][l]=c}),t}}]),n}();new Gpe;let tme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({}),n})();const NH=[{id:"0",name:"Hirohiko Araki \u8352\u6728 \u98db\u5442\u5f66",image:"assets/images/Hirohiko Araki.png",description:"Legendario mangaka creador de la igualmente legendaria serie Jojo\u2019s Bizarre Adventure, que lleva en publicaci\xf3n por 34 a\xf1os por Shueisha, reconocido como uno de los m\xe1s revolucionarios mangas de su \xe9poca y tambi\xe9n de la actualidad, y siendo uno de los pocos mangakas que han colaborado con tanto marcas de moda como Gucci, como con el museo del Louvre.",audios:[{title:"Hirohiko Araki",link:"assets/audios/Hirohiko Araki.mp3"}],audio:"assets/audios/Hirohiko Araki.mp3",video:"assets/videos/Hirohiko Araki.mp4",QRImage:"assets/images/QRHirohiko_Araki.png",QRlink:"https://es.wikipedia.org/wiki/Hirohiko_Araki"},{id:"1",name:"Hideaki Anno \u5eb5\u91ce \u79c0\u660e",image:"assets/images/Hideaki Anno.png",description:"Es un Animador y Director, conocido principalmente por la ic\xf3nica serie Neon Genesis Evangelion, esta ha llegado a ser comparada como la Star wars japonesa por el impacto en la cultura popular que esta ha tenido tras su emisi\xf3n, asi mismo Anno es reconocido afuera de la esfera del anime debido a su pel\xedcula Shin Godzilla a la cual se le fue otorgada el equivalente al Oscar Japon\xe9s.",audios:[{title:"Hideaki Anno",link:"assets/audios/Hideaki Anno.mp3"}],audio:"assets/audios/Hideaki Anno.mp3",video:"assets/videos/Hideaki Anno.mp4",QRImage:"assets/images/QRHideaki_Anno.png",QRlink:"https://es.wikipedia.org/wiki/Hideaki_Anno"},{id:"2",name:"Naomi Osaka \u5927\u5742 \u306a\u304a\u307f",image:"assets/images/Naomi Osaka.png",description:"Hija de un padre haitiano y una madre japonesa, Osaka lleva entrenando casi toda su vida. Es reconocida por ser la primera Jugadora asi\xe1tica en llegar al n\xfamero 1 de la asociaci\xf3n de tenis femenil WTA, es una 4 veces ganadora del Gran Slam individual y la campeona actual del abierto de Australia.",audios:[{title:"Naomi Osaka",link:"assets/audios/Naomi Osaka.mp3"}],audio:"assets/audios/Naomi Osaka.mp3",video:"assets/videos/Naomi Osaka.mp4",QRImage:"assets/images/QRNaomi_Osaka.png",QRlink:"https://es.wikipedia.org/wiki/Naomi_Osaka"}];let e1=(()=>{class n{constructor(){}getActuales(){return NH}getActual(t){return NH.filter(i=>i.id===t)[0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const BH=[{id:"0",name:"Oda Nobunaga \u7e54\u7530 \u4fe1\u9577",image:"assets/images/Nobunaga.png",description:"Uno de los Se\xf1ores Feudales m\xe1s importantes de la historia de Jap\xf3n, considerado como el unificador del mismo, durante esta unificaci\xf3n se desarroll\xf3 innovaciones en t\xe1cticas militares, el comercio libre y se dio inicio al periodo Azuchi-Momoyama.",audios:[{title:"Oda Nobunaga",link:"assets/audios/Nobunaga.mp3"}],audio:"assets/audios/Nobunaga.mp3",video:"assets/videos/Nobunaga.mp4",QRImage:"assets/images/QROda_Nobunaga.png",QRlink:"https://es.wikipedia.org/wiki/Oda_Nobunaga"},{id:"1",name:"Minamoto no Yoshitsune \u6e90 \u7fa9\u7d4c",image:"assets/images/Yoshitsune.png",description:"Uno de los m\xe1s destacados generales y samur\xe1is en la historia del pa\xeds del sol naciente, al haber sido unas de las piezas principales en la recuperaci\xf3n militar del clan Minamoto en las Guerras Genpei, tras estos conflictos el clan Minamoto se estableci\xf3 como el clan dominante en el territorio, Yoshitsune muri\xf3 en traici\xf3n en las manos de uno de los hijos de sus aliados.",audios:[{title:"Minamoto no Yoshitsune",link:"assets/audios/Yoshitsune.mp3"}],audio:"assets/audios/Yoshitsune.mp3",video:"assets/videos/Yoshitsune.mp4",QRImage:"assets/images/QRMinamoto_no_Yoshitsune.png",QRlink:"https://es.wikipedia.org/wiki/Minamoto_no_Yoshitsune"},{id:"2",name:"Miyamoto Musashi \u5bae\u672c \u6b66\u8535",image:"assets/images/Musashi.png",description:"Musashi fue un fil\xf3sofo, escritor, espadach\xedn y un ronin; conocido principalmente por su uso de dos espadas y el ser nunca haber sido vencido en un duelo, con un record final de 61- 0. Su obra principal fue el libro de los 5 anillos donde este detalla sus experiencias e ideas sobre artes marciales y su vida. Musashi muri\xf3 de lo que se cree fue c\xe1ncer de pulm\xf3n tras haber terminado su \xfaltima obra Dokkodo (El camino de la soledad).",audios:[{title:"Miyamoto Musashi",link:"assets/audios/Musashi.mp3"}],audio:"assets/audios/Musashi.mp3",video:"assets/videos/Musashi.mp4",QRImage:"assets/images/QRMiyamoto_Musashi.png",QRlink:"https://es.wikipedia.org/wiki/Miyamoto_Musashi"}];let t1=(()=>{class n{constructor(){}getHistoricos(){return BH}getHistorico(t){return BH.filter(i=>i.id===t)[0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nme=function(n){return["/actualDetalle",n]};function ime(n,e){if(1&n&&(T(0,"mat-grid-tile",6),ee(1,"img",7),T(2,"mat-grid-tile-footer"),T(3,"h1"),Te(4),ts(5,"uppercase"),I(),I(),I()),2&n){const t=e.$implicit;Z("routerLink",jo(6,nme,t.id)),$(1),Or("src",t.image,bi),Or("alt",t.name),$(3),xn($o(5,4,t.name))}}let rme=(()=>{class n{constructor(t){this.actualservice=t}ngOnInit(){this.actuales=this.actualservice.getActuales()}OnSelect(t){this.selectedActual=t}}return n.\u0275fac=function(t){return new(t||n)(b(e1))},n.\u0275cmp=ft({type:n,selectors:[["app-actual"]],decls:9,vars:1,consts:[[1,"parent",2,"width","100%","height","500px"],[1,"text1"],["STYLE","font-family:'Lucida'",2,"color","#7F75FF","font-weight","bold","font-size","26pt","text-align","center"],["src","assets/images/fondo.jpg",1,"image1",2,"float","left","width","100%","height","100%","object-fit","fill"],["cols","2","rowHeight","200px"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],["height","200px",3,"src","alt"]],template:function(t,i){1&t&&(T(0,"div",0),T(1,"div",1),T(2,"span",2),Te(3,"PERSONAJES ACTUALES"),I(),I(),ee(4,"hr"),T(5,"div",0),ee(6,"img",3),T(7,"mat-grid-list",4),be(8,ime,6,8,"mat-grid-tile",5),I(),I(),I()),2&t&&($(8),Z("ngForOf",i.actuales))},directives:[VV,ec,DS,Zp,LV,NV],pipes:[Gf],styles:[".parent[_ngcontent-%COMP%]{position:relative;top:0px;left:0}.image1[_ngcontent-%COMP%]{position:relative;top:0;left:0}.text1[_ngcontent-%COMP%]{position:relative;top:5px;text-align:center}"]}),n})();function sme(n,e){if(1&n&&ee(0,"img",11),2&n){const t=Ne().$implicit;Z("src",t.logo,bi)("alt",t.title)}}function ome(n,e){if(1&n&&(T(0,"h2",12),Te(1),I()),2&n){const t=Ne().$implicit;$(1),xn(t.title)}}const ame=function(n){return{active:n}};function lme(n,e){if(1&n){const t=Ri();T(0,"div",2),Ze("click",function(){const s=ai(t).index;return Ne().activeSlideIndex=s}),T(1,"div",3),T(2,"div",4),be(3,sme,1,2,"img",5),be(4,ome,2,1,"h2",6),T(5,"p",7),Te(6),I(),ee(7,"p",7),T(8,"a",8),ee(9,"img",9),I(),ee(10,"div",10),I(),I(),I()}if(2&n){const t=e.$implicit,i=e.index,r=Ne();wr("background-image",r.activeSlideIndex===i?t.backgroundExpanded:t.backgroundCollapsed),Z("ngClass",jo(9,ame,r.activeSlideIndex===i)),$(2),wr("color",t.textColor),$(1),Z("ngIf",t.logo),$(1),Z("ngIf",t.title),$(2),xn(t.description),$(2),Z("href",t.ctaLink,bi)}}let cme=(()=>{class n{constructor(){this.activeSlideIndex=0,this.slides=[{textColor:"#000",logo:"",title:"Hirohiko Araki",description:"Legendario mangaka creador de la igualmente legendaria serie Jojo\u2019s Bizarre Adventure.",backgroundExpanded:"url('assets/images/1A-Expanded.png')",backgroundCollapsed:"url('assets/images/1A-Collapsed.png')",ctaText:"Detalles",ctaLink:"actualDetalle/0"},{textColor:"#000",logo:"",title:"Hideaki Anno",description:"Es un Animador y Director, conocido principalmente por la ic\xf3nica serie Neon Genesis Evangelion.",backgroundExpanded:"url('assets/images/2A-Expanded.png')",backgroundCollapsed:"url('assets/images/2A-Collapsed.png')",ctaText:"Detalles",ctaLink:"actualDetalle/1"},{textColor:"#000",logo:"",title:"Naomi Osaka",description:"Hija de un padre haitiano y una madre japonesa, Osaka lleva entrenando casi toda su vida.",backgroundExpanded:"url('assets/images/3A-Expanded.png')",backgroundCollapsed:"url('assets/images/3A-Collapsed.png')",ctaText:"Detalles",ctaLink:"actualDetalle/2"}]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ft({type:n,selectors:[["app-actualslider"]],decls:2,vars:1,consts:[[1,"slider"],["class","slide",3,"background-image","ngClass","click",4,"ngFor","ngForOf"],[1,"slide",3,"ngClass","click"],[1,"content-wrapper"],[1,"content"],["class","logo",3,"src","alt",4,"ngIf"],["class","title",4,"ngIf"],[1,"description"],[1,"cta",3,"href"],["src","assets/images/Boton Detalles.png",2,"width","100%"],[1,"overlay"],[1,"logo",3,"src","alt"],[1,"title"]],template:function(t,i){1&t&&(T(0,"div",0),be(1,lme,11,11,"div",1),I()),2&t&&($(1),Z("ngForOf",i.slides))},directives:[ec,Ba,PE,os],styles:[".slider[_ngcontent-%COMP%]{top:0px;position:relative;width:100%;height:540px;max-width:device-width;padding:0;margin:0;display:flex;flex-direction:row;overflow:hidden}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{width:20%;position:relative;height:inherit;transition:all ease-in-out .5s}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;height:inherit}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-left:43%;padding:35px;width:250px;display:flex;flex-direction:column;justify-content:center}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-width:175px;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;margin:0;font-size:2rem;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:50px;font-weight:500;font-size:1.2rem;display:none;background-color:#ffffffb3;color:#004391}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]{color:#fff;text-decoration:none;display:none;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]:hover{cursor:pointer}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1;opacity:1;transition:opacity ease-in-out .5s}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]:not(.active)   .title[_ngcontent-%COMP%]{position:relative;color:#fff;align-items:left;left:-60px}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]{width:70%}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:block}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{position:inherit}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;font-size:2.6rem}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:block}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]{display:inline-block;z-index:2}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transition:opacity ease-in-out .5s;opacity:0;z-index:-1}"]}),n})(),ume=(()=>{class n{constructor(t,i,r){this.actualservice=t,this.route=i,this.location=r,this.msaapDisplayTitle=!1,this.msaapDisplayPlayList=!1,this.msaapPageSizeOptions=[2,4,6],this.msaapDisplayVolumeControls=!1,this.msaapDisplayRepeatControls=!1,this.msaapDisplayArtist=!1,this.msaapDisplayDuration=!1,this.msaapDisablePositionSlider=!1,this.currentTrack=null}ngOnInit(){this.actual=this.actualservice.getActual(this.route.snapshot.params.id),this.msaapPlaylist=this.actual.audios}goBack(){this.location.back()}Ended(){console.log("Ingresa")}}return n.\u0275fac=function(t){return new(t||n)(b(e1),b(ul),b(rd))},n.\u0275cmp=ft({type:n,selectors:[["app-actual-detalle"]],decls:24,vars:8,consts:[["fxLayoutAlign","center center",1,"titulo"],["STYLE","font-family:'Lucida'",2,"color","#7F75FF","font-weight","bold","font-size","calc(2vmax + 2px)","text-align","center"],[1,"cards"],[1,"card1"],["id","myVideo","width","85%","loop","","autoplay","",3,"src"],[1,"card2",2,"background-image","url('assets/images/Marco.png')"],[1,"header",2,"color","white","font-weight","bold","font-size","calc(2.3vw + 2px)","text-align","center"],[1,"main",2,"top","1%"],[1,"aside"],[1,"aside","aside-1"],[1,"aside","aside-2"],["target","_blank",3,"href"],["width","8%",3,"src"],[1,"aside","aside-3"],["controls",""],["type","audio/mp3",3,"src"],["src","assets/images/Boton regresar.png","width","22%",3,"click"]],template:function(t,i){1&t&&(T(0,"div",0),T(1,"span",1),Te(2,"PERSONAJES ACTUALES"),I(),I(),T(3,"div",2),T(4,"div",3),ee(5,"video",4),I(),T(6,"div",5),T(7,"header",6),Te(8),ts(9,"uppercase"),I(),T(10,"article",7),T(11,"p"),Te(12),I(),I(),T(13,"div",8),T(14,"aside",9),Te(15,"Para mayor informaci\xf3n puede visitar el siguiente enlace"),I(),T(16,"aside",10),T(17,"a",11),ee(18,"img",12),I(),I(),I(),T(19,"aside",13),T(20,"audio",14),ee(21,"source",15),Te(22," Your browser does not support the audio tag! "),I(),T(23,"img",16),Ze("click",function(){return i.goBack()}),I(),I(),I(),I()),2&t&&($(5),Or("src",i.actual.video,bi),$(3),xn($o(9,6,i.actual.name)),$(4),xn(i.actual.description),$(5),Z("href",i.actual.QRlink,bi),$(1),Z("src",i.actual.QRImage,bi),$(3),Or("src",i.actual.audio,bi))},directives:[Vp],pipes:[Gf],styles:[".cards[_ngcontent-%COMP%]{display:flex;text-align:center;height:500px}.card1[_ngcontent-%COMP%]{background-size:cover;background-position:bottom;min-height:250px;width:34.9%;box-shadow:5px 5px 10px #00000054;background-color:#ead6be}.card2[_ngcontent-%COMP%]{background-size:cover;background-position:bottom;width:65%;min-height:250px;flex-flow:row wrap}.header[_ngcontent-%COMP%]{height:10%;background-color:#b02568}.footer[_ngcontent-%COMP%]{background:lightgreen}.main[_ngcontent-%COMP%]{height:55%;align-items:center;min-height:200px;text-align:justify;font-weight:500;font-size:calc(1.5vw + 2px);background-color:#ffffff80;color:#004391;padding:1% 10%}.aside[_ngcontent-%COMP%]{align-content:flex-start}.aside-1[_ngcontent-%COMP%]{background-color:#ffffff80;color:#004391;font-weight:500;font-size:calc(1.1vw + 2px)}.aside-2[_ngcontent-%COMP%]{background-color:#ffffff80}.aside-3[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around;background-color:#ffffff80;padding:0% 1%}audio[_ngcontent-%COMP%]{box-shadow:5px 5px 20px #ffffff80;border-radius:10px;transform:scale(.75)}.titulo[_ngcontent-%COMP%]{display:flex;justify-content:space-between;text-align:center;height:12%;background-color:#ead6be}"]}),n})();const dme=function(n){return["/historicoDetalle",n]};function hme(n,e){if(1&n&&(T(0,"mat-grid-tile",6),ee(1,"img",7),T(2,"mat-grid-tile-footer"),T(3,"h1"),Te(4),ts(5,"uppercase"),I(),I(),I()),2&n){const t=e.$implicit;Z("routerLink",jo(6,dme,t.id)),$(1),Or("src",t.image,bi),Or("alt",t.name),$(3),xn($o(5,4,t.name))}}let fme=(()=>{class n{constructor(t){this.historicoservice=t}ngOnInit(){this.historicos=this.historicoservice.getHistoricos()}OnSelect(t){this.SelectedHistorico=t}}return n.\u0275fac=function(t){return new(t||n)(b(t1))},n.\u0275cmp=ft({type:n,selectors:[["app-historico"]],decls:9,vars:1,consts:[[1,"parent",2,"width","100%","height","500px"],[1,"text1"],["STYLE","font-family:'Lucida'",2,"color","#7F75FF","font-weight","bold","font-size","26pt","text-align","center"],["src","assets/images/fondo.jpg",1,"image1",2,"float","left","width","100%","height","100%","object-fit","fill"],["cols","2","rowHeight","200px"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],["height","200px",3,"src","alt"]],template:function(t,i){1&t&&(T(0,"div",0),T(1,"div",1),T(2,"span",2),Te(3,"PERSONAJES HIST\xd3RICOS"),I(),I(),ee(4,"hr"),T(5,"div",0),ee(6,"img",3),T(7,"mat-grid-list",4),be(8,hme,6,8,"mat-grid-tile",5),I(),I(),I()),2&t&&($(8),Z("ngForOf",i.historicos))},directives:[VV,ec,DS,Zp,LV,NV],pipes:[Gf],styles:[".parent[_ngcontent-%COMP%]{position:relative;top:0px;left:0}.image1[_ngcontent-%COMP%]{position:relative;top:0;left:0}.text1[_ngcontent-%COMP%]{position:absolute;top:5px;left:440px}"]}),n})(),pme=(()=>{class n{constructor(t,i,r){this.historicoservice=t,this.route=i,this.location=r,this.msaapDisplayTitle=!1,this.msaapDisplayPlayList=!1,this.msaapPageSizeOptions=[2,4,6],this.msaapDisplayVolumeControls=!1,this.msaapDisplayRepeatControls=!1,this.msaapDisplayArtist=!1,this.msaapDisplayDuration=!1,this.msaapDisablePositionSlider=!0}ngOnInit(){this.historico=this.historicoservice.getHistorico(this.route.snapshot.params.id)}goBack(){this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(b(t1),b(ul),b(rd))},n.\u0275cmp=ft({type:n,selectors:[["app-historico-detalle"]],decls:24,vars:8,consts:[["fxLayoutAlign","center center",1,"titulo"],["STYLE","font-family:'Lucida'",2,"color","#7F75FF","font-weight","bold","font-size","calc(2vmax + 2px)","text-align","center"],[1,"cards"],[1,"card1"],["id","myVideo","width","85%","loop","","autoplay","",3,"src"],[1,"card2",2,"background-image","url('assets/images/Marco2.png')"],[1,"header",2,"color","white","font-weight","bold","font-size","calc(2.3vw + 2px)","text-align","center"],[1,"main",2,"top","1%"],[1,"aside"],[1,"aside","aside-1"],[1,"aside","aside-2"],["target","_blank",3,"href"],["width","8%",3,"src"],[1,"aside","aside-3"],["controls",""],["type","audio/mp3",3,"src"],["src","assets/images/Boton regresar.png","width","22%",3,"click"]],template:function(t,i){1&t&&(T(0,"div",0),T(1,"span",1),Te(2,"PERSONAJES HIST\xd3RICOS"),I(),I(),T(3,"div",2),T(4,"div",3),ee(5,"video",4),I(),T(6,"div",5),T(7,"header",6),Te(8),ts(9,"uppercase"),I(),T(10,"article",7),T(11,"p"),Te(12),I(),I(),T(13,"div",8),T(14,"aside",9),Te(15,"Para mayor informaci\xf3n puede visitar el siguiente enlace"),I(),T(16,"aside",10),T(17,"a",11),ee(18,"img",12),I(),I(),I(),T(19,"aside",13),T(20,"audio",14),ee(21,"source",15),Te(22," Your browser does not support the audio tag! "),I(),T(23,"img",16),Ze("click",function(){return i.goBack()}),I(),I(),I(),I()),2&t&&($(5),Or("src",i.historico.video,bi),$(3),xn($o(9,6,i.historico.name)),$(4),xn(i.historico.description),$(5),Z("href",i.historico.QRlink,bi),$(1),Z("src",i.historico.QRImage,bi),$(3),Or("src",i.historico.audio,bi))},directives:[Vp],pipes:[Gf],styles:[".cards[_ngcontent-%COMP%]{display:flex;text-align:center;height:500px}.card1[_ngcontent-%COMP%]{background-size:cover;background-position:bottom;min-height:250px;width:34.9%;box-shadow:5px 5px 10px #00000054;background-color:#ead6be}.card2[_ngcontent-%COMP%]{background-size:cover;background-position:bottom;width:65%;min-height:250px;flex-flow:row wrap}.header[_ngcontent-%COMP%]{height:10%;background-color:#b02568}.footer[_ngcontent-%COMP%]{background:lightgreen}.main[_ngcontent-%COMP%]{height:55%;align-items:center;min-height:200px;text-align:justify;font-weight:500;font-size:calc(1.5vw + 2px);background-color:#ffffff80;color:#004391;padding:1% 10%}.aside[_ngcontent-%COMP%]{align-content:flex-start}.aside-1[_ngcontent-%COMP%]{background-color:#ffffff80;color:#004391;font-weight:500;font-size:calc(1.1vw + 2px)}.aside-2[_ngcontent-%COMP%]{background-color:#ffffff80}.aside-3[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around;background-color:#ffffff80;padding:0% 1%}audio[_ngcontent-%COMP%]{box-shadow:5px 5px 20px #ffffff80;border-radius:10px;transform:scale(.75)}.titulo[_ngcontent-%COMP%]{display:flex;justify-content:space-between;text-align:center;height:12%;background-color:#ead6be}"]}),n})(),mme=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ft({type:n,selectors:[["app-home"]],decls:18,vars:0,consts:[[1,"parent",2,"height","470px"],["src","assets/videos/fondo.mp4","muted","","loop","","autoplay","",1,"image1","left=0","margin-left=0",2,"width","100%","height","100%","object-fit","cover"],["src","assets/images/letras.png",1,"image2",2,"top","10%","left","25%","float","center","width","50%","height","50%","object-fit","fill"],["STYLE","left:10%;top: 70%;",1,"parent","boton1"],["rel","noopener","href","historicoslider"],["src","assets/images/BotonHistoricos.png",2,"width","25%"],["STYLE","left:70%;top: 70%;",1,"parent","boton1"],["rel","noopener","href","actualslider"],["src","assets/images/BotonActuales.png",2,"width","70%"],[1,"parent","text1","top=5px",2,"height","70px","background-color","#ead6be"],[1,"text1",2,"margin-left","auto","margin-right","auto","text-align","center","color","black","font-weight","bold","font-size","16pt"],[2,"text-align","center"]],template:function(t,i){1&t&&(T(0,"div",0),ee(1,"video",1),ee(2,"img",2),T(3,"div",3),T(4,"a",4),ee(5,"img",5),I(),I(),T(6,"div",6),T(7,"a",7),ee(8,"img",8),I(),I(),I(),T(9,"div",9),T(10,"div",10),T(11,"p",11),Te(12," Los occidentales conocemos muy poco de la historia de Jap\xf3n y, sin embargo, est\xe1 llena de eventos y personajes coloridos. Entre samur\xe1is, personas y artistas excepcionales, cada uno de los personajes que se presentan han formado parte de la evoluci\xf3n de "),T(13,"strong"),Te(14,"la sociedad o"),I(),Te(15," la"),T(16,"strong"),Te(17,"\xa0cultura\xa0japonesa."),I(),I(),I(),I())},styles:[".parent[_ngcontent-%COMP%]{position:relative;top:0px;left:0;margin:0;padding:0}.image1[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:device-width;background-size:cover}.image2[_ngcontent-%COMP%]{position:absolute;top:0;text-align:center;display:block}.text1[_ngcontent-%COMP%]{position:relative;padding:1px;display:flex;justify-content:center;align-items:center}.boton1[_ngcontent-%COMP%]{position:absolute;border:none;text-align:left;text-decoration:none;display:inline-block}.boton1[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),n})();function gme(n,e){if(1&n&&ee(0,"img",11),2&n){const t=Ne().$implicit;Z("src",t.logo,bi)("alt",t.title)}}function yme(n,e){if(1&n&&(T(0,"h2",12),Te(1),I()),2&n){const t=Ne().$implicit;$(1),xn(t.title)}}const _me=function(n){return{active:n}};function vme(n,e){if(1&n){const t=Ri();T(0,"div",2),Ze("click",function(){const s=ai(t).index;return Ne().activeSlideIndex=s}),T(1,"div",3),T(2,"div",4),be(3,gme,1,2,"img",5),be(4,yme,2,1,"h2",6),T(5,"p",7),Te(6),I(),ee(7,"p",7),T(8,"a",8),ee(9,"img",9),I(),ee(10,"div",10),I(),I(),I()}if(2&n){const t=e.$implicit,i=e.index,r=Ne();wr("background-image",r.activeSlideIndex===i?t.backgroundExpanded:t.backgroundCollapsed),Z("ngClass",jo(9,_me,r.activeSlideIndex===i)),$(2),wr("color",t.textColor),$(1),Z("ngIf",t.logo),$(1),Z("ngIf",t.title),$(2),xn(t.description),$(2),Z("href",t.ctaLink,bi)}}const xme=[{path:"home",component:mme},{path:"actual",component:rme},{path:"actualslider",component:cme},{path:"actualDetalle/:id",component:ume},{path:"historico",component:fme},{path:"historicoDetalle/:id",component:pme},{path:"historicoslider",component:(()=>{class n{constructor(){this.activeSlideIndex=0,this.slides=[{textColor:"#000",logo:"",title:"Oda Nobunaga",description:"Oda Nobunaga fue un destacado se\xf1or feudal. En el a\xf1o 1560 se enfrent\xf3 con un numeroso ej\xe9rcito (estimado en 40000 soldados samur\xe1i), con tan solo 3000 soldados durante la batalla de Okehazama. Gracias a un ataque sorpresa sali\xf3 victorioso, lo que puso a Nobunaga en la cima del poder militar del pa\xeds.",backgroundExpanded:"url('assets/images/1H-Expanded.png')",backgroundCollapsed:"url('assets/images/1H-Collapsed.png')",ctaText:"Detalles",ctaLink:"historicoDetalle/0"},{textColor:"#000",logo:"",title:"Minamoto no Yoshitsune",description:"Uno de los m\xe1s destacados generales y samur\xe1is en la historia del pa\xeds del sol naciente.",backgroundExpanded:"url('assets/images/2H-Expanded.png')",backgroundCollapsed:"url('assets/images/2H-Collapsed.png')",ctaText:"Detalles",ctaLink:"historicoDetalle/1"},{textColor:"#000",logo:"",title:"Miyamoto Musashi",description:"Musashi fue un fil\xf3sofo, escritor, espadach\xedn y un ronin.",backgroundExpanded:"url('assets/images/3H-Expanded.png')",backgroundCollapsed:"url('assets/images/3H-Collapsed.png')",ctaText:"Detalles",ctaLink:"historicoDetalle/2"}]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ft({type:n,selectors:[["app-historicoslider"]],decls:2,vars:1,consts:[[1,"slider"],["class","slide",3,"background-image","ngClass","click",4,"ngFor","ngForOf"],[1,"slide",3,"ngClass","click"],[1,"content-wrapper"],[1,"content"],["class","logo",3,"src","alt",4,"ngIf"],["class","title",4,"ngIf"],[1,"description"],[1,"cta",3,"href"],["src","assets/images/Boton Detalles.png",2,"width","100%"],[1,"overlay"],[1,"logo",3,"src","alt"],[1,"title"]],template:function(t,i){1&t&&(T(0,"div",0),be(1,vme,11,11,"div",1),I()),2&t&&($(1),Z("ngForOf",i.slides))},directives:[ec,Ba,PE,os],styles:[".slider[_ngcontent-%COMP%]{top:0px;position:relative;width:100%;height:540px;max-width:device-width;padding:0;margin:0;display:flex;flex-direction:row;overflow:hidden}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{width:20%;position:relative;height:inherit;transition:all ease-in-out .5s}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;height:inherit}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-left:43%;padding:35px;width:250px;display:flex;flex-direction:column;justify-content:center}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-width:175px;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;margin:0;font-size:2rem;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:50px;font-weight:500;font-size:1.2rem;display:none;background-color:#ffffffb3;color:#004391}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]{color:#fff;text-decoration:none;display:none;z-index:2}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]:hover{cursor:pointer}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1;opacity:1;transition:opacity ease-in-out .5s}.slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]:not(.active)   .title[_ngcontent-%COMP%]{position:relative;color:#fff;align-items:left;left:-80px}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]{width:70%}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:block}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{position:inherit}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;font-size:2.6rem}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:block}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .cta[_ngcontent-%COMP%]{display:inline-block;z-index:2}.slider[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transition:opacity ease-in-out .5s;opacity:0;z-index:-1}"]}),n})()},{path:"",redirectTo:"/home",pathMatch:"full"}];let bme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yi,rS.forRoot(xme)],rS]}),n})(),Lme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[RM]]}),n})(),Yme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Lme,Yt],Yt]}),n})(),ez=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yi,Yt,pN],Yt]}),n})();const Lge={provide:new ye("mat-select-scroll-strategy"),deps:[Tc],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let Uge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({providers:[Lge],imports:[[Yi,HM,HN,Yt],z_,ez,HN,Yt]}),n})();const Zge={provide:new ye("mat-tooltip-scroll-strategy"),deps:[Tc],useFactory:function(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let sye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({providers:[Zge],imports:[[Vse,Yi,HM,Yt],Yt,z_]}),n})(),mx=(()=>{class n{constructor(){this.changes=new tt,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const s=t*i;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+i,r):s+i} of ${r}`}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fye={provide:mx,deps:[[new xi,new Js,mx]],useFactory:function(n){return n||new mx}};let _ye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({providers:[fye],imports:[[Yi,NE,Uge,sye,Yt]]}),n})(),Aye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yi,Yt],Yt]}),n})(),Fye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({}),n})(),$ye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yi,Yt,Fye,$L]]}),n})(),g_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yt],Yt]}),n})(),Q_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n}),n.\u0275inj=Oe({imports:[[Yi,Whe,NE,HV,Yme,ez,Aye,$ye,_ye,g_e]]}),n})(),K_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=nt({type:n,bootstrap:[qde]}),n.\u0275inj=Oe({providers:[e1,t1],imports:[[rS,RF,cse,ooe,sfe,mce,gfe,HV,NE,bme,tme,Q_e,Bie]]}),n})();(function(){if(KR)throw new Error("Cannot enable prod mode after platform setup.");QR=!1})(),bY().bootstrapModule(K_e).catch(n=>console.error(n))}},Vi=>{Vi(Vi.s=159)}]);